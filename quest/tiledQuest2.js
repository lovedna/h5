(function(Ba,Hb,kh){function n(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function l(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Lh++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}Hb.openfl=Hb.openfl||{};Hb.UUID=Hb.UUID||{};Hb.Ease=Hb.Ease||
{};Hb.lime=Hb.lime||{};var g={},v=function(){return D.__string_rec(this,"")},ja=function(){};g.ApplicationMain=ja;ja.__name__=["ApplicationMain"];ja.config=null;ja.preloader=null;ja.create=function(){var a=new Ld;a.create(ja.config);var b=new Qb;ja.preloader=new Md(b);a.setPreloader(ja.preloader);ja.preloader.onComplete.add(ja.init);ja.preloader.create(ja.config);var b=[],c=[];if(null!=ja.config.assetsPrefix)for(var d=0,e=b.length;d<e;){var f=d++;"FONT"!=c[f]&&(b[f]=ja.config.assetsPrefix+b[f])}ja.preloader.load(b,
c);a.exec()};ja.init=function(){ja.preloader=null;ja.start()};ja.main=function(){ja.config={build:"3",company:"liwei",file:"tiledQuest2",fps:60,name:"\u52c7\u8005\u6597\u6076\u9f99",orientation:"",packageName:"net.lovedna.tiledQuest",version:"1.0.0",windows:[{antialiasing:0,background:0,borderless:!1,depthBuffer:!0,display:0,fullscreen:!1,hardware:!0,height:0,parameters:"{}",resizable:!0,stencilBuffer:!0,title:"\u52c7\u8005\u6597\u6076\u9f99",vsync:!1,width:0,x:null,y:null}]}};ja.start=function(){for(var a=
!1,b=Z.resolveClass("Main"),c=0,d=Z.getClassFields(b);c<d.length;){var e=d[c];++c;if("main"==e){a=!0;break}}H.initialize();a?M.callMethod(b,M.field(b,"main"),[]):Z.createInstance(Nd,[]);ua.current.stage.window.__fullscreen&&ua.current.stage.dispatchEvent(new Od("fullScreen",!1,!1,!0,!0));ua.current.stage.dispatchEvent(new J("resize",!1,!1))};var lh=function(){};g["openfl.events.IEventDispatcher"]=lh;lh.__name__=["openfl","events","IEventDispatcher"];var fa=function(a){null!=a&&(this.__targetDispatcher=
a)};g["openfl.events.EventDispatcher"]=fa;fa.__name__=["openfl","events","EventDispatcher"];fa.__interfaces__=[lh];fa.__sortByPriority=function(a,b){return a.priority==b.priority?0:a.priority>b.priority?-1:1};fa.prototype={addEventListener:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=!1);null==this.__eventMap&&(this.__dispatching=new G,this.__eventMap=new G,this.__newEventMap=new G);if(this.__eventMap.exists(a)){1==this.__dispatching.get(a)?this.__newEventMap.exists(a)?e=this.__newEventMap.get(a):
(e=this.__eventMap.get(a).slice(),this.__newEventMap.set(a,e)):e=this.__eventMap.get(a);a=0;for(var f=e.length;a<f;){var x=a++;if(M.compareMethods(e[x].callback,b))return}e.push(new Pd(b,c,d));e.sort(fa.__sortByPriority)}else e=[],e.push(new Pd(b,c,d)),this.__eventMap.set(a,e)},dispatchEvent:function(a){a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this;return this.__dispatchEvent(a)},hasEventListener:function(a){return null==this.__eventMap?!1:1==this.__dispatching.get(a)&&this.__newEventMap.exists(a)?
0<this.__newEventMap.get(a).length:this.__eventMap.exists(a)},removeEventListener:function(a,b,c){null==c&&(c=!1);if(null!=this.__eventMap){var d=this.__eventMap.get(a);if(null!=d){var e=1==this.__dispatching.get(a);e&&(this.__newEventMap.exists(a)?d=this.__newEventMap.get(a):(d=this.__eventMap.get(a).slice(),this.__newEventMap.set(a,d)));for(var f=0,x=d.length;f<x;){var g=f++;if(d[g].match(b,c)){d.splice(g,1);break}}e||(0==d.length&&this.__eventMap.remove(a),this.__eventMap.iterator().hasNext()||
(this.__newEventMap=this.__eventMap=null))}}},__dispatchEvent:function(a){if(null==this.__eventMap||null==a)return!1;var b=a.type,c;if(1==this.__dispatching.get(b)){c=this.__newEventMap.get(b);if(null==c)return!1;c=c.slice()}else{c=this.__eventMap.get(b);if(null==c)return!1;this.__dispatching.set(b,!0)}null==a.target&&(a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this);a.currentTarget=this;for(var d=1==a.eventPhase,e=0,f;e<c.length;){f=c[e];if(f.useCapture==d&&(f.callback(a),a.__isCanceledNow))break;
f==c[e]&&e++}null!=this.__newEventMap&&this.__newEventMap.exists(b)&&(c=this.__newEventMap.get(b),0<c.length?this.__eventMap.set(b,c):this.__eventMap.remove(b),this.__eventMap.iterator().hasNext()?this.__newEventMap.remove(b):this.__newEventMap=this.__eventMap=null);this.__dispatching.set(a.type,!1);return!0},__class__:fa};var Gg=function(){};g["openfl.display.IBitmapDrawable"]=Gg;Gg.__name__=["openfl","display","IBitmapDrawable"];var T=function(){fa.call(this);this.__alpha=1;this.__blendMode=10;
this.__cacheAsBitmap=!1;this.__transform=new Ha;this.__visible=!0;this.__rotationSine=this.__rotation=0;this.__worldAlpha=this.__rotationCosine=1;this.__worldTransform=new Ha;this.__worldColorTransform=new Dc;this.__renderTransform=new Ha;this.__worldVisible=!0;this.set_name("instance"+ ++T.__instanceCount)};g["openfl.display.DisplayObject"]=T;T.__name__=["openfl","display","DisplayObject"];T.__interfaces__=[Gg];T.__super__=fa;T.prototype=n(fa.prototype,{getBounds:function(a){var b;null!=a?(b=this.__getWorldTransform().clone(),
b.concat(a.__getWorldTransform().clone().invert())):(b=Ha.__temp,b.identity());a=new Ka;this.__getBounds(a,b);return a},globalToLocal:function(a){a=a.clone();this.__getWorldTransform().__transformInversePoint(a);return a},__broadcast:function(a,b){if(null!=this.__eventMap&&this.hasEventListener(a.type)){var c=fa.prototype.__dispatchEvent.call(this,a);return a.__isCanceled?!0:c}return!1},__cleanup:function(){this.__context=this.__canvas=this.__cairo=null;null!=this.__graphics&&this.__graphics.__cleanup()},
__dispatchEvent:function(a){var b=fa.prototype.__dispatchEvent.call(this,a);if(a.__isCanceled)return!0;a.bubbles&&null!=this.parent&&this.parent!=this&&(a.eventPhase=3,null==a.target&&(a.target=this),this.parent.__dispatchEvent(a));return b},__enterFrame:function(a){},__getBounds:function(a,b){null!=this.__graphics&&this.__graphics.__getBounds(a,b)},__getCursor:function(){return null},__getInteractive:function(a){return!1},__getRenderTransform:function(){this.__getWorldTransform();return this.__renderTransform},
__getWorldTransform:function(){if(this.__transformDirty||0<T.__worldTransformDirty){var a=[],b=this,c=this.__transformDirty;if(null==this.parent)c&&this.__update(!0,!1);else for(;null!=b.parent;)a.push(b),b=b.parent,b.__transformDirty&&(c=!0);if(c)for(b=a.length;0<=--b;)a[b].__update(!0,!1)}return this.__worldTransform},__hitTest:function(a,b,c,d,e,f){if(null!=this.__graphics){if(!f.get_visible()||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(this.__graphics.__hitTest(a,
b,c,this.__getWorldTransform()))return null==d||e||d.push(f),!0}return!1},__hitTestMask:function(a,b){return null!=this.__graphics&&this.__graphics.__hitTest(a,b,!0,this.__getWorldTransform())?!0:!1},__renderCairo:function(a){null!=this.__graphics&&Hg.render(this,a)},__renderCairoMask:function(a){null!=this.__graphics&&qa.renderMask(this.__graphics,a)},__renderCanvas:function(a){null!=this.__graphics&&Ig.render(this,a)},__renderCanvasMask:function(a){null!=this.__graphics&&k.renderMask(this.__graphics,
a)},__renderDOM:function(a){null!=this.__graphics&&Jg.render(this,a)},__renderGL:function(a){null!=this.__graphics&&Kg.render(this,a)},__setStageReference:function(a){this.stage!=a&&(null!=this.stage&&(this.stage.get_focus()==this&&this.stage.set_focus(null),this.dispatchEvent(new J("removedFromStage",!1,!1))),this.stage=a,null!=a&&this.dispatchEvent(new J("addedToStage",!1,!1)))},__setRenderDirty:function(){this.__renderDirty||(this.__renderDirty=!0,T.__worldRenderDirty++)},__update:function(a,b,
c){this.__renderable=this.get_visible()&&0!=this.get_scaleX()&&0!=this.get_scaleY()&&!this.__isMask;this.__updateTransforms();b&&this.__transformDirty&&(this.__transformDirty=!1,T.__worldTransformDirty--);null!=c&&this.__updateMask(c);if(!a){this.__worldTransformChanged=!this.__worldTransform.equals(this.__worldTransformCache);null==this.__worldTransformCache?this.__worldTransformCache=this.__worldTransform.clone():this.__worldTransformCache.copyFrom(this.__worldTransform);a=null;this.__worldColorTransform.__equals(this.get_transform().get_colorTransform())||
(this.__worldColorTransform=this.get_transform().get_colorTransform().__clone());c=null!=this.parent?this.parent:this.__renderParent;if(null!=c){var d=c.__worldVisible&&this.get_visible();this.__worldVisibleChanged=this.__worldVisible!=d;this.__worldVisible=d;d=this.get_alpha()*c.__worldAlpha;this.__worldAlphaChanged=this.__worldAlpha!=d;this.__worldAlpha=d;null!=c.__worldClip&&(a=c.__worldClip.clone());null!=this.get_scrollRect()&&(c=this.get_scrollRect().clone(),c.__transform(c,this.__worldTransform),
null!=a&&c.__contract(a.x-this.get_scrollRect().x,a.y-this.get_scrollRect().y,a.width,a.height),a=c)}else this.__worldAlpha=this.get_alpha(),this.__worldVisibleChanged=this.__worldVisible!=this.get_visible(),this.__worldVisible=this.get_visible(),this.__worldAlphaChanged=this.__worldAlpha!=this.get_alpha(),null!=this.get_scrollRect()&&(a=this.get_scrollRect().clone(),a.__transform(a,this.__worldTransform));this.__worldClipChanged=null==a&&null!=this.__worldClip||null!=a&&!a.equals(this.__worldClip);
this.__worldClip=a;b&&this.__renderDirty&&(this.__renderDirty=!1)}},__updateChildren:function(a){if((this.__renderable=this.get_visible()&&0!=this.get_scaleX()&&0!=this.get_scaleY()&&!this.__isMask)||this.__isMask)this.__worldAlpha=this.get_alpha(),this.__transformDirty&&(this.__transformDirty=!1,T.__worldTransformDirty--)},__updateMask:function(a){null!=this.__graphics&&(a.__commands.overrideMatrix(this.__worldTransform),a.__commands.append(this.__graphics.__commands),a.set___dirty(!0),a.__visible=
!0,null==a.__bounds&&(a.__bounds=new Ka),this.__graphics.__getBounds(a.__bounds,Ha.__identity))},__updateTransforms:function(a){var b=null!=a;a=b?a.clone():this.__transform;null==this.__worldTransform&&(this.__worldTransform=new Ha);b||null==this.parent?this.__worldTransform.copyFrom(a):(b=this.parent.__worldTransform,this.__worldTransform.a=a.a*b.a+a.b*b.c,this.__worldTransform.b=a.a*b.b+a.b*b.d,this.__worldTransform.c=a.c*b.a+a.d*b.c,this.__worldTransform.d=a.c*b.b+a.d*b.d,this.__worldTransform.tx=
a.tx*b.a+a.ty*b.c+b.tx,this.__worldTransform.ty=a.tx*b.b+a.ty*b.d+b.ty);null!=this.__scrollRect&&this.__worldTransform.__translateTransformed(-this.__scrollRect.x,-this.__scrollRect.y);this.__renderTransform.copyFrom(this.__worldTransform);null!=this.stage&&this.__renderTransform.concat(this.stage.__displayMatrix)},get_alpha:function(){return this.__alpha},get_blendMode:function(){return this.__blendMode},set_height:function(a){var b=new Ka,c=Ha.__temp;c.identity();this.__getBounds(b,c);a!=b.height?
this.set_scaleY(a/b.height):this.set_scaleY(1);return a},get_mask:function(){return this.__mask},set_name:function(a){return this.__name=a},get_scaleX:function(){return 0==this.__transform.b?this.__transform.a:Math.sqrt(this.__transform.a*this.__transform.a+this.__transform.b*this.__transform.b)},set_scaleX:function(a){if(0==this.__transform.b)a==this.__transform.a||this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++),this.__transform.a=a;else{var b=this.__rotationCosine*a,
c=this.__rotationSine*a;this.__transform.a==b&&this.__transform.b==c||this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++);this.__transform.a=b;this.__transform.b=c}return a},get_scaleY:function(){return 0==this.__transform.c?this.__transform.d:Math.sqrt(this.__transform.c*this.__transform.c+this.__transform.d*this.__transform.d)},set_scaleY:function(a){if(0==this.__transform.c)a==this.__transform.d||this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++),
this.__transform.d=a;else{var b=-this.__rotationSine*a,c=this.__rotationCosine*a;this.__transform.d==c&&this.__transform.c==b||this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++);this.__transform.c=b;this.__transform.d=c}return a},get_scrollRect:function(){return null==this.__scrollRect?null:this.__scrollRect.clone()},get_transform:function(){null==this.__objectTransform&&(this.__objectTransform=new yf(this));return this.__objectTransform},get_visible:function(){return this.__visible},
set_width:function(a){var b=new Ka,c=Ha.__temp;c.identity();this.__getBounds(b,c);a!=b.width?this.set_scaleX(a/b.width):this.set_scaleX(1);return a},get_x:function(){return this.__transform.tx},set_x:function(a){a==this.__transform.tx||this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++);return this.__transform.tx=a},get_y:function(){return this.__transform.ty},set_y:function(a){a==this.__transform.ty||this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++);
return this.__transform.ty=a},__class__:T,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_width:"set_width",get_visible:"get_visible",get_transform:"get_transform",get_scrollRect:"get_scrollRect",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_name:"set_name",get_mask:"get_mask",set_height:"set_height",get_blendMode:"get_blendMode",get_alpha:"get_alpha"}});var kb=function(){T.call(this);this.doubleClickEnabled=!1;this.mouseEnabled=
!0;this.__tabEnabled=this.needsSoftKeyboard=!1;this.tabIndex=-1};g["openfl.display.InteractiveObject"]=kb;kb.__name__=["openfl","display","InteractiveObject"];kb.__super__=T;kb.prototype=n(T.prototype,{__getInteractive:function(a){null!=a&&(a.push(this),null!=this.parent&&this.parent.__getInteractive(a));return!0},__hitTest:function(a,b,c,d,e,f){return!f.get_visible()||this.__isMask||e&&!this.mouseEnabled?!1:T.prototype.__hitTest.call(this,a,b,c,d,e,f)},get_tabEnabled:function(){return this.__tabEnabled},
__class__:kb,__properties__:n(T.prototype.__properties__,{get_tabEnabled:"get_tabEnabled"})});var bb=function(){kb.call(this);this.mouseChildren=!0;this.__children=[];this.__removedChildren=[]};g["openfl.display.DisplayObjectContainer"]=bb;bb.__name__=["openfl","display","DisplayObjectContainer"];bb.__super__=kb;bb.prototype=n(kb.prototype,{addChild:function(a){if(null!=a){null!=a.parent&&a.parent.removeChild(a);this.__children.push(a);a.parent=this;null!=this.stage&&a.__setStageReference(this.stage);
a.__transformDirty||(a.__transformDirty=!0,T.__worldTransformDirty++);a.__renderDirty||(a.__renderDirty=!0,T.__worldRenderDirty++);this.__renderDirty||(this.__renderDirty=!0,T.__worldRenderDirty++);var b=new J("added",!0);b.target=a;a.__dispatchEvent(b)}return a},removeChild:function(a){null!=a&&a.parent==this&&(a.__dispatchEvent(new J("removed",!0)),null!=this.stage&&a.__setStageReference(null),a.parent=null,r.remove(this.__children,a),this.__removedChildren.push(a),a.__transformDirty||(a.__transformDirty=
!0,T.__worldTransformDirty++),a.__renderDirty||(a.__renderDirty=!0,T.__worldRenderDirty++),this.__renderDirty||(this.__renderDirty=!0,T.__worldRenderDirty++));return a},removeChildAt:function(a){return 0<=a&&a<this.__children.length?this.removeChild(this.__children[a]):null},__broadcast:function(a,b){null==a.target&&(a.target=this);var c=kb.prototype.__broadcast.call(this,a,b);if(!a.__isCanceled&&b)for(var d=0,e=this.__children;d<e.length;){var f=e[d];++d;f.__broadcast(a,!0);if(a.__isCanceled)return!0}return c},
__enterFrame:function(a){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__enterFrame(a)}},__getBounds:function(a,b){kb.prototype.__getBounds.call(this,a,b);if(0!=this.__children.length){null!=b&&(this.__updateTransforms(b),this.__updateChildren(!0));for(var c=0,d=this.__children;c<d.length;){var e=d[c];++c;0!=e.get_scaleX()&&0!=e.get_scaleY()&&e.__getBounds(a,e.__worldTransform)}null!=b&&(this.__updateTransforms(),this.__updateChildren(!0))}},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||
this.__isMask||e&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b)||null!=this.get_scrollRect()&&!this.get_scrollRect().containsPoint(this.globalToLocal(new Ab(a,b))))return!1;var x=this.__children.length;if(e)if(null==d||!this.mouseChildren)for(;0<=--x;){if(this.__children[x].__hitTest(a,b,c,null,!0,this.__children[x]))return null!=d&&d.push(f),!0}else{if(null!=d){e=d.length;for(var g=!1,k=!1;0<=--x&&!(((g=this.__children[x].__getInteractive(null))||
this.mouseEnabled&&!k)&&this.__children[x].__hitTest(a,b,c,d,!0,this.__children[x])&&(k=!0,g)););if(k)return d.splice(e,0,f),!0}}else for(;0<=--x;)this.__children[x].__hitTest(a,b,c,d,!1,this.__children[x]);return!1},__hitTestMask:function(a,b){for(var c=this.__children.length;0<=--c;)if(this.__children[c].__hitTestMask(a,b))return!0;return!1},__renderCairo:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){kb.prototype.__renderCairo.call(this,a);a.maskManager.pushObject(this);for(var b=0,
c=this.__children;b<c.length;){var d=c[b];++b;d.__renderCairo(a)}b=0;for(c=this.__removedChildren;b<c.length;)d=c[b],++b,null==d.stage&&d.__cleanup();0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);a.maskManager.popObject(this)}},__renderCairoMask:function(a){null!=this.__graphics&&qa.renderMask(this.__graphics,a);for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderCairoMask(a)}},__renderCanvas:function(a){if(this.__renderable&&!(0>=
this.__worldAlpha)){kb.prototype.__renderCanvas.call(this,a);a.maskManager.pushObject(this);for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderCanvas(a)}b=0;for(c=this.__removedChildren;b<c.length;)d=c[b],++b,null==d.stage&&d.__cleanup();0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);a.maskManager.popObject(this)}},__renderCanvasMask:function(a){null!=this.__graphics&&k.renderMask(this.__graphics,a);var b=new Ka;this.__getBounds(b,
this.__transform);a.context.rect(0,0,b.width,b.height)},__renderDOM:function(a){kb.prototype.__renderDOM.call(this,a);a.maskManager.pushObject(this);for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderDOM(a)}b=0;for(c=this.__removedChildren;b<c.length;)d=c[b],++b,null==d.stage&&d.__renderDOM(a);0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);a.maskManager.popObject(this)},__renderGL:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){kb.prototype.__renderGL.call(this,
a);a.maskManager.pushObject(this);for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderGL(a)}b=0;for(c=this.__removedChildren;b<c.length;)d=c[b],++b,null==d.stage&&d.__cleanup();0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);a.maskManager.popObject(this)}},__setStageReference:function(a){if(this.stage!=a&&(null!=this.stage&&this.__dispatchEvent(new J("removedFromStage",!1,!1)),this.stage=a,null!=a&&this.__dispatchEvent(new J("addedToStage",
!1,!1)),null!=this.__children))for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__setStageReference(a)}},__update:function(a,b,c){kb.prototype.__update.call(this,a,b,c);if((this.__renderable||this.__isMask||this.__worldAlphaChanged||this.__worldClipChanged||this.__worldTransformChanged||this.__worldVisibleChanged)&&b){b=0;for(var d=this.__children;b<d.length;){var e=d[b];++b;e.__update(a,!0,c)}}},__updateChildren:function(a){kb.prototype.__updateChildren.call(this,a);for(var b=0,c=this.__children;b<
c.length;){var d=c[b];++b;d.__update(a,!0)}},get_numChildren:function(){return this.__children.length},__class__:bb,__properties__:n(kb.prototype.__properties__,{get_numChildren:"get_numChildren"})});var ub=function(){bb.call(this);this.buttonMode=!1;this.useHandCursor=!0;this.loaderInfo=dc.create(null)};g["openfl.display.Sprite"]=ub;ub.__name__=["openfl","display","Sprite"];ub.__super__=bb;ub.prototype=n(bb.prototype,{__getCursor:function(){return this.buttonMode&&this.useHandCursor?N.POINTER:null},
__hitTest:function(a,b,c,d,e,f){if(null!=this.hitArea){if(!this.hitArea.mouseEnabled)return this.hitArea.mouseEnabled=!0,a=this.hitArea.__hitTest(a,b,c,null,!0,f),this.hitArea.mouseEnabled=!1,a&&(d[d.length]=f),a}else{if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(bb.prototype.__hitTest.call(this,a,b,c,d,e,f))return e;if((!e||this.mouseEnabled)&&null!=this.__graphics&&this.__graphics.__hitTest(a,
b,c,this.__getWorldTransform()))return null!=d&&d.push(f),!0}return!1},__hitTestMask:function(a,b){return bb.prototype.__hitTestMask.call(this,a,b)||null!=this.__graphics&&this.__graphics.__hitTest(a,b,!0,this.__getWorldTransform())?!0:!1},get_graphics:function(){null==this.__graphics&&(this.__graphics=new zf(this));return this.__graphics},get_tabEnabled:function(){return this.__tabEnabled||this.buttonMode},__class__:ub,__properties__:n(bb.prototype.__properties__,{get_graphics:"get_graphics"})});
var Rc=function(){ub.call(this);new Af};g.Main=Rc;Rc.__name__=["Main"];Rc.__super__=ub;Rc.prototype=n(ub.prototype,{__class__:Rc});var Nd=function(){ua.current.addChild(this);Rc.call(this);this.dispatchEvent(new J("addedToStage",!1,!1))};g.DocumentClass=Nd;Nd.__name__=["DocumentClass"];Nd.__super__=Rc;Nd.prototype=n(Rc.prototype,{__class__:Nd});var Qd=function(){this.onChange=new Ra};g["lime.AssetLibrary"]=Qd;Qd.__name__=["lime","AssetLibrary"];Qd.prototype={exists:function(a,b){return!1},getBytes:function(a){return null},
getFont:function(a){return null},getImage:function(a){return null},getPath:function(a){return null},getText:function(a){a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){return!0},unload:function(){},__class__:Qd};var Rd=function(){this.type=new G;this.path=new G;this.className=new G;this.onChange=new Ra;var a=null;null!=ja.config&&Object.prototype.hasOwnProperty.call(ja.config,"assetsPrefix")&&(a=ja.config.assetsPrefix);if(null!=a)for(var b=this.path.keys();b.hasNext();){var c=
b.next(),d=a+this.path.get(c);this.path.set(c,d)}};g.DefaultAssetLibrary=Rd;Rd.__name__=["DefaultAssetLibrary"];Rd.__super__=Qd;Rd.prototype=n(Qd.prototype,{exists:function(a,b){var c;c=null!=b?D.__cast(b,String):null;var d=this.type.get(a);return null==d||d!=c&&("SOUND"!=c&&"MUSIC"!=c||"MUSIC"!=d&&"SOUND"!=d)&&"BINARY"!=c&&null!=c&&("BINARY"!=d||"TEXT"!=c)?!1:!0},getBytes:function(a){a=this.path.get(a);a=Sa.loaders.get(a);if(null==a)return null;a=a.bytes;return null!=a?a:null},getFont:function(a){return D.__cast(Z.createInstance(this.className.get(a),
[]),Sc)},getImage:function(a){return ra.fromImageElement(function(b){b=b.path.get(a);return Sa.images.get(b)}(this))},getPath:function(a){return this.path.get(a)},getText:function(a){a=this.path.get(a);a=Sa.loaders.get(a);if(null==a)return null;a=a.bytes;return null!=a?a.getString(0,a.length):null},isLocal:function(a,b){null!=b&&D.__cast(b,String);return!0},__class__:Rd});var Sd=function(a,b){b=b.split("u").join("");this.r=new RegExp(a,b)};g.EReg=Sd;Sd.__name__=["EReg"];Sd.prototype={match:function(a){this.r.global&&
(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new u("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new u("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=b;this.r.m=this.r.exec(0>c?a:r.substr(a,0,b+c));if(b=null!=this.r.m)this.r.s=a;return b}if(c=this.match(0>c?r.substr(a,
b,null):r.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return c},__class__:Sd};var hb=function(){};g["lovedna.core.IDisposable"]=hb;hb.__name__=["lovedna","core","IDisposable"];var ma=function(){this.offset=this._length=0};g["lovedna.ds.LArray"]=ma;ma.__name__=["lovedna","ds","LArray"];ma.__interfaces__=[hb];ma.prototype={Add:function(a){null==this._buffer&&(this._buffer=[],this._length=0);this._buffer[this.offset+this._length++]=a},Pop:function(){if(null==this._buffer||1>this._length)return null;
this._length--;return this._buffer[this.offset+this._length]},Get:function(a){return null==this._buffer||1>this._length||a>=this._length?null:this._buffer[a+this.offset]},Clear:function(){this.offset=this._length=0},Trim:function(){if(null!=this._buffer&&0<this._length&&!(0==this.offset&&this._length>=this._buffer.length)){var a=[];for(this._i=this._length;0<this._i--;)a[this._i]=this._buffer[this._i+this.offset];this._buffer=a;this.offset=0}},Copy:function(a){null==this._buffer&&(this._buffer=[],
this.offset=this._length=0);for(this._i=a._length;0<this._i--;)this._buffer[this._i]=a._buffer[this._i];this._length=a._length;this.offset=a.offset},Dispose:function(){this._buffer=null},RemoveAt:function(a,b){null==b&&(b=1);if(!(null==this._buffer||0>a||a>=this._length||1>b||(a+b>=this._length&&(b=this._length-a),1>b))){for(this._i=a;this._i<this._length-1;)this._buffer[this.offset+this._i]=this._buffer[this.offset+this._i+b],this._i++;this._length-=b}},Insert:function(a,b){if(!(0>a))if(null==this._buffer&&
(this._buffer=[],this.offset=this._length=0),a>=this._length)this._buffer[a+this.offset]=b,this._length=a+1;else{for(this._i=this._length;this._i>a;)this._buffer[this._i+this.offset]=this._buffer[this._i-1+this.offset],this._i--;this._buffer[a+this.offset]=b;this._length++}},Contains:function(a){return-1<this.IndexOf(a)},IndexOf:function(a){if(null==this._buffer)return-1;for(this._i=this._length;0<this._i--;)if(a==this._buffer[this._i+-this.offset])return this._i;return-1},Sort:function(a){null!=
this._buffer&&(this.Trim(),this._buffer.sort(a))},set_length:function(a){if(null==this._buffer)return 0;0<=a&&(this._length=a);return this._length},__class__:ma,__properties__:{set_length:"set_length"}};var Q=function(){this._constructed=!1;this.Construct()};g["lovedna.core.LObject"]=Q;Q.__name__=["lovedna","core","LObject"];Q.TriggerTick=function(a){a=Q._list._length;if(!(1>a)){Q._list1.Copy(Q._list);for(Q._list.Clear();0<a--;)Q._list1.Get(a).onLateConstruct();Q._list1.Clear()}};Q.prototype={Construct:function(){this._constructed||
(this._constructed=!0,this.onConstruct(),Q._list.Add(this))},onConstruct:function(){},onLateConstruct:function(){},__class__:Q};var Td=function(){};g["lovedna.events.IEventDispatcher"]=Td;Td.__name__=["lovedna","events","IEventDispatcher"];Td.prototype={__class__:Td};var z=function(a){Q.call(this);this._dispatcher=null!=a?a:this};g["lovedna.events.LEventDispatcher"]=z;z.__name__=["lovedna","events","LEventDispatcher"];z.__interfaces__=[hb,Td];z.__super__=Q;z.prototype=n(Q.prototype,{AddEventListener:function(a,
b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=0);a=a._type;if(null!=a&&null!=b)if(null==this._eventMap&&(this._eventMap=new G),null==c&&(c=0),null==d&&(d=!1),null==e&&(e=0),this._eventMap.exists(a)){a=this._eventMap.get(a);for(var f=a.length;0<f--;)if(a[f].match(b))return;a.push(new Ud(this,b,c,d,e));a.sort(l(this,this.sortByPriority))}else f=[],this._eventMap.set(a,f),f.push(new Ud(this,b,c,d,e))},DispatchEvent:function(a){if(null==this._eventMap)return!1;var b=a._type;if(null==b)return!1;
b=this._eventMap.get(b);if(null==b)return!1;null==this._eventList&&(this._eventList=[]);if(-1!=r.indexOf(this._eventList,a,0))return!1;this._eventList.push(a);a.setTarget(this._dispatcher);for(var c=b.length;0<c--;)b[c].dispatch(a);this._eventList.splice(0,this._eventList.length);return!0},RemoveEventListener:function(a,b){if(null!=this._eventMap){var c=a._type,d=this._eventMap.get(c);if(null!=d){for(var e=d.length;0<e--;){var f=d[e];f.match(b)&&(f.destroy(),d.splice(e,1))}0==d.length&&this._eventMap.remove(c);
this._eventMap.iterator().hasNext()||(this._eventMap=null)}}},Dispose:function(){this._dispatcher=this._eventList=this._eventMap=null},sortByPriority:function(a,b){var c=a.priority,d=b.priority;return c>d?1:c<d?-1:0},__class__:z});var Bf=function(){};g["haxe.IMap"]=Bf;Bf.__name__=["haxe","IMap"];var ga=function(){this.h={}};g["haxe.ds.IntMap"]=ga;ga.__name__=["haxe","ds","IntMap"];ga.__interfaces__=[Bf];ga.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return r.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:ga};var E=function(){this._2dz=0;this._componentListDirty=!1;this._componentLength=0;this._worldInverseDirty=!0;this._transformDirty=this._transformDirty1=!1;this.pivotX=this.pivotY=this.pivotZ=0;this.scaleX=
this.scaleY=this.scaleZ=1;this.x=this.y=this.z=this.rotationX=this.rotationY=this.rotationZ=0;this.visible=!0;this.childCount=0;this.destroyed=!1;z.call(this)};g["lovedna.g3d.core.Transform"]=E;E.__name__=["lovedna","g3d","core","Transform"];E.Destroy=function(a){null!=a&&(E._destroys.h[a.gid]=a)};E.EndFrame=function(){for(var a=E._destroys.iterator();a.hasNext();){var b=a.next();E._destroys.remove(b.gid);b._destroy()}Bb.ExitFrame()};E.__super__=z;E.prototype=n(z.prototype,{DistanceToCamera:function(a){return a.projectionViewMatrix.TransformVec3(this._worldPos.Set(this._local.d12,
this._local.d13,this._local.d14)).z},AddChild:function(a){if(null!=a&&a!=this){var b=a.parent;b==this||a.Contains(this)||(null!=b&&b.RemoveChild(a),null==this._childs&&(this._childs=[]),this._childs.push(a),a.parent=this,this.childCount=this._childs.length,a._transformDirty=a._transformDirty1=!0,null!=this.scene&&this.scene.ChildrenDirty())}},RemoveChild:function(a){if(null!=a&&a!=this&&null!=this._childs&&a.parent==this){var b=r.indexOf(this._childs,a,0);-1!=b&&(this._childs.splice(b,1),a.parent=
null,this.childCount=this._childs.length,null!=this.scene&&this.scene.ChildrenDirty())}},Contains:function(a){if(null==a||a==this)return!1;for(a=a.parent;null!=a;){if(a==this)return!0;var b=a.parent;if(b==a)break;a=b}return!1},GetWorldMatrix:function(){return this._world},GetWorldInverseMatrix:function(){null==this._worldInverse&&(this._worldInverse=new Ta);this._worldInverseDirty&&(this._worldInverse.Copy(this._world).Inverse(),this._worldInverseDirty=!1);return this._worldInverse},GetComponent:function(a){if(null==
this._componentMap||1>this._componentLength)return null;var b=qc.GetName(a);if(this._componentMap.exists(b))return this._componentMap.get(b);for(b=this._componentLength;0<b--;){var c=this._componentList[b];if(D.__instanceof(c,a))return c}return null},InFrustum:function(a){return a.ContainsPoint(this._worldPos.Set(this._local.d12,this._local.d13,this._local.d14))},onConstruct:function(){z.prototype.onConstruct.call(this);this.time=new Ec;this.set_layer(0);this.uuid=Rb.Get();this.gid=E._gid++;this.name=
"transform "+this.gid;this._local=new Ta;this._world=new Ta;this._worldPos=A.instance;this.pools=Za.GetInstance();this.lastChangeTime=0;this.pivot=new A},addScene:function(a){this.scene=a;this.onAddToScene()},removeScene:function(){this.onRemoveFromScene();this.scene=null},enterFrame:function(){if(!this.destroyed){null!=this.parent&&this.time.Multiply(this.parent.time);this._transformDirty=this._transformDirty1;this._transformDirty1=!1;this.onEnterFrameBefore();if(0<this._componentLength){this._componentListDirty&&
(this._componentListDirty=!1,this._componentList.sort(l(this,this.sortComponent)));for(var a=this._componentLength;0<a--;){var b=this._componentList[a];0>b.order&&b.enterFrame()}}this.onEnterFrame();this.destroyed?null:(null!=this.parent&&this.parent._transformDirty&&(this._transformDirty=!0),this._transformDirty&&(this._2dz=this.z,this._transformDirty1=!1,this.lastChangeTime=this.time.time,this._local.Identity(),null!=this.parent&&(this._local.Copy(this.parent._local),this._2dz+=this.parent._2dz),
this.onTransformBefore(),this.translation(),0!=this.rotationX&&this._local.AppendRotationX(this.rotationX),0!=this.rotationY&&this._local.AppendRotationY(this.rotationY),0!=this.rotationZ&&this._local.AppendRotationZ(this.rotationZ),1==this.scaleX&&1==this.scaleY&&1==this.scaleZ||this._local.AppendScaleV(this.scaleX,this.scaleY,this.scaleZ),this._world.Copy(this._local),this._worldInverseDirty=!0,0==this.pivotX&&0==this.pivotY&&0==this.pivotZ||this._world.AppendTranslationV(-this.pivot.x,-this.pivot.y,
-this.pivot.z),this.onTransformChange()));this.onTransform();if(0<this._componentLength)for(a=this._componentLength;0<a--;)b=this._componentList[a],0<=b.order&&b.enterFrame()}},translation:function(){0==this.x&&0==this.y&&0==this.z||this._local.AppendTranslationV(this.x,this.y,this.z)},exitFrame:function(){if(!this.destroyed&&null!=this.parent){this._transformDirty=this._transformDirty1;if(0<this._componentLength)for(var a=this._componentLength;0<a--;){var b=this._componentList[a];0>b.order&&b.exitFrame()}this.onExitFrame();
if(0<this._componentLength)for(a=this._componentLength;0<a--;)b=this._componentList[a],0<=b.order&&b.exitFrame()}},onAddToScene:function(){},onRemoveFromScene:function(){},onEnterFrameBefore:function(){},onEnterFrame:function(){},onExitFrame:function(){},onTransformBefore:function(){},onTransformChange:function(){},onTransform:function(){},_destroy:function(){this.onDestroy();this.Dispose();null!=this.scene&&this.scene.ChildrenDirty();null!=this.parent&&this.parent.RemoveChild(this);this.scene=this.parent=
this._childs=null;for(var a=this._componentLength;0<a--;)this._componentList[a].onRemove();this.name=this.uuid=this._componentMap=this._componentList=null;this._local.Dispose();this._local=null;this._world.Dispose();this.time=this.pools=this._worldPos=this._world=null},onDestroy:function(){},sortComponent:function(a,b){var c=a.order,d=b.order;return c>d?1:c<d?-1:0},set_visible:function(a){this.visible!=a&&(this.visible=a,null!=this.scene&&this.scene.ChildrenDirty());return a},set_layer:function(a){0<=
a&&31>=a&&(this.layer=a);return this.layer},set_x:function(a){this.x!=a&&(this.x=a,this._transformDirty=this._transformDirty1=!0);return a},set_y:function(a){this.y!=a&&(this.y=a,this._transformDirty=this._transformDirty1=!0);return a},set_z:function(a){this.z!=a&&(this.z=a,this._transformDirty=this._transformDirty1=!0);return a},set_rotationX:function(a){this.rotationX!=a&&(this.rotationX=a,this._transformDirty=this._transformDirty1=!0);return a},set_rotationY:function(a){this.rotationY!=a&&(this.rotationY=
a,this._transformDirty=this._transformDirty1=!0);return a},set_rotationZ:function(a){this.rotationZ!=a&&(this.rotationZ=a,this._transformDirty=this._transformDirty1=!0);return a},set_scaleX:function(a){this.scaleX!=a&&(this.scaleX=a,this._transformDirty=this._transformDirty1=!0);return a},set_scaleY:function(a){this.scaleY!=a&&(this.scaleY=a,this._transformDirty=this._transformDirty1=!0);return a},set_pivotX:function(a){this.pivotX!=a&&(this.pivotX=a,this._transformDirty=this._transformDirty1=!0);
return a},set_pivotY:function(a){this.pivotY!=a&&(this.pivotY=a,this._transformDirty=this._transformDirty1=!0);return a},__class__:E,__properties__:{set_pivotY:"set_pivotY",set_pivotX:"set_pivotX",set_scaleY:"set_scaleY",set_scaleX:"set_scaleX",set_rotationZ:"set_rotationZ",set_rotationY:"set_rotationY",set_rotationX:"set_rotationX",set_z:"set_z",set_y:"set_y",set_x:"set_x",set_visible:"set_visible",set_layer:"set_layer"}});var Vd=function(){this._failCode=0;E.call(this)};g.End=Vd;Vd.__name__=["End"];
Vd.__super__=E;Vd.prototype=n(E.prototype,{ShowFail:function(a){this._time=1.5;this._failCode=a;this._end.Load("end/ENDING"+this._failCode+".png");this._bg.material.color.set_a(0);this._end.material.color.set_a(0);this._con.set_visible(!1)},ShowSuccess:function(){this._time=1.5;this._failCode=0;this._end.Load("end/ENDING6.png");this._bg.material.color.set_a(0);this._end.material.color.set_a(0);this._con.set_visible(!1)},ShowComplete:function(){this._time=1.5;this._failCode=-1;this._end.Load("end/END_CHARA.png");
this._bg.material.color.set_a(0);this._end.material.color.set_a(0);this._con.set_visible(!0)},onConstruct:function(){var a=this;E.prototype.onConstruct.call(this);this._bg=new eb;this.AddChild(this._bg);this._end=new eb;this.AddChild(this._end);this._bg.Load("bg/LANGIT.png",!0);this._bg.mouseEnable=!0;this._bg.set_z(.1);this._end.set_z(.5);this._con=new E;this._ease=new ob;this.AddChild(this._con);this._retry=new vb;this._con.AddChild(this._retry);this._retry.set_x(300);this._retry.set_z(1.2);this._retry.Load("ui/RETRY0.png");
this._retry.onRelease=function(b){a.parent.RemoveChild(a);if(null!=a.onRetry)a.onRetry()};this._next=new vb;this._con.AddChild(this._next);this._next.Load("ui/NEXT0.png");this._next.set_x(300);this._next.set_y(-140);this._next.set_z(1.2);this._next.onRelease=function(b){a.parent.RemoveChild(a);if(null!=a.onNext)a.onNext()};this._option=new vb;this._con.AddChild(this._option);this._option.Load("ui/OPTION0.png");this._option.set_x(300);this._option.set_y(140);this._option.set_z(1.2);this._option.onRelease=
function(b){a.parent.RemoveChild(a);if(null!=a.onOption)a.onOption()};var b=new md(20);b.set_x(-300);b.material.renderingMode=200;b.set_z(2);this._con.AddChild(b);b.onRelease=function(b){null!=a.onShowMenu&&(a.parent.RemoveChild(a),a.onShowMenu())}},onExitFrame:function(){E.prototype.onEnterFrame.call(this);if(0<this._time){var a=this._ease.ExpoIn(1-this._time/1.5);this._time-=this.time.tick;this._bg.material.color.set_a(a);this._end.material.color.set_a(a);if(0>=this._time&&(this._time=0,this._con.set_visible(!0),
this._option.set_visible(!1),0!=this._failCode?(this._next.set_visible(!1),-1==this._failCode&&this._option.set_visible(!0)):this._next.set_visible(!0),null!=this.onShow))this.onShow()}},__class__:Vd});var pb=function(){E.call(this)};g["lovedna.g3d.display.Display"]=pb;pb.__name__=["lovedna","g3d","display","Display"];pb.__super__=E;pb.prototype=n(E.prototype,{isReady:function(){if(null==this.get_mesh())return!1;var a=this.GetMaterial();return null!=a&&this.get_mesh().IsReady()&&a.IsReady()?!0:!1},
GetMaterial:function(){return this.material},Raycast:function(a){if(null==this.get_mesh()||null!=this.boundingInfo.sphere&&!a.IntersectsSphere(this.boundingInfo.sphere)||null!=this.boundingInfo.box&&null==a.IntersectBox(this.boundingInfo.box))return null;if(0==this.raycastInfo.pickMode){var b=this.pools.PickInfo.Get();b.mode=0;b.z=a.start.Distance(this._worldPos.Set(this._local.d12,this._local.d13,this._local.d14));return b}b=this.get_mesh().geometry;if(null!=b){var c=Sb.instance;c.Copy(a);var d=
Ta.instance3.Copy(this._world).Inverse();c.ApplyMatrix4(d);this.raycastInfo.ray.Copy(c);b=b.Raycast(this.raycastInfo);if(null!=b)return b.mode=1,b.worldPos.Copy(this._world.TransformVec3(A.instance3.Copy(b.localPos))),b.z=a.start.Distance(b.worldPos),b}return null},onConstruct:function(){E.prototype.onConstruct.call(this);this.cameraCull=!0;this.receiveShadow=this.userCull=!1;this.shadowMode=1;this.queueID=200;this.renderSetting=new Cf;this.order=0;this.name="display "+this.gid;this.boundingInfo=
new Df;this.raycastInfo=new Ef;this.is3D=!0},onDestroy:function(){E.prototype.onDestroy.call(this);this.set_mesh(null);this.raycastInfo=this.renderSetting=this.material=null;this.boundingInfo.Dispose();this.boundingInfo=null},onTransformChange:function(){E.prototype.onTransformChange.call(this);this.userCull||this.cameraCull&&this.boundingInfo.Apply(this._world)},InFrustum:function(a){return null!=this.boundingInfo.sphere&&(a.IntersectsSphere(this.boundingInfo.sphere)||a.IntersectsBox(this.boundingInfo.box))?
!0:E.prototype.InFrustum.call(this,a)},onCustomRender:function(){return!1},onPerRender:function(){},onPostRender:function(){},get_mesh:function(){return this._mesh},set_mesh:function(a){return this._mesh=a},__class__:pb,__properties__:n(E.prototype.__properties__,{set_mesh:"set_mesh",get_mesh:"get_mesh"})});var fb=function(){this.anchorX=this.anchorY=.5;this.width=this.height=0;E.call(this)};g["lovedna.g3d.display.Display2D"]=fb;fb.__name__=["lovedna","g3d","display","Display2D"];fb.__super__=pb;
fb.prototype=n(pb.prototype,{onConstruct:function(){pb.prototype.onConstruct.call(this);this.set_pivotX(this.set_pivotY(.5));this.name="display2d "+this.gid;this.queueID=300;this.shadowMode=0;this.receiveShadow=!1;this.raycastInfo.pickMode=1;this.is3D=!1},translation:function(){if(D.__instanceof(this.parent,fb)){var a=this.parent;this._local.AppendTranslationV(this.x+a.width*(this.anchorX-.5),this.y+a.height*(.5-this.anchorY),this.z)}else pb.prototype.translation.call(this)},onTransformBefore:function(){pb.prototype.onTransformBefore.call(this);
if(0!=this.pivotX||0!=this.pivotY||0!=this.pivotZ){var a=this.pivotX,b=this.pivotY;-1<=a&&1>=a&&(a=this.pivotX*this.width);-1<=b&&1>=b&&(b=this.pivotY*this.height);this.pivot.Set(a,b,this.pivotZ)}},DistanceToCamera:function(a){return this.is3D?pb.prototype.DistanceToCamera.call(this,a):this._2dz},set_width:function(a){this.width!=a&&(this.width=a,this._transformDirty=this._transformDirty1=!0);return this.width},set_height:function(a){this.height!=a&&(this.height=a,this._transformDirty=this._transformDirty1=
!0);return this.height},__class__:fb,__properties__:n(pb.prototype.__properties__,{set_height:"set_height",set_width:"set_width"})});var eb=function(){this._ready=!1;fb.call(this)};g["lovedna.g3d.display.Image"]=eb;eb.__name__=["lovedna","g3d","display","Image"];eb.__super__=fb;eb.prototype=n(fb.prototype,{Load:function(a,b){null==b&&(b=!0);this._url!=a&&(this._url=a,b&&(this.set_width(-1),this.set_height(-1)),this._material.SetTexture(null),this._atlasLoader.Exist(this._url)?this.forceLoad():(this._ready=
!1,this._urlDirty=!0))},isReady:function(){return this._ready?fb.prototype.isReady.call(this):!1},GetMaterial:function(){return null==this.material?this._material:this.material},onConstruct:function(){fb.prototype.onConstruct.call(this);this._atlasLoader=cb.GetInstance();this._imageDirty=this._urlDirty=!1;this.material=this._material=new ec;this.name="image "+this.gid;this.set_type(0);this.set_fillDirection(0);this.set_fillAmount(1);this.smooth=!0;this.material.set_shader(new Ua("@image"));this.material.renderingMode=
200;this.material.cullFace=!1;this.material.depthWrite=!1;this._setting=new Ff},onDestroy:function(){fb.prototype.onDestroy.call(this);this._atlasLoader=null;this._material.Dispose();this._material=null;null!=this._geometry&&(this._geometry.Dispose(),this._geometry=null)},onEnterFrame:function(){fb.prototype.onEnterFrame.call(this);this._imageDirty?(this._imageDirty=!1,this.forceBuild()):this._urlDirty&&(this._urlDirty=!1,this.forceLoad())},forceLoad:function(){null!=this._sprite&&this._sprite.RemoveEventListener(C.INIT,
l(this,this.sprite_init));this._sprite=this._atlasLoader.Load(this._url);this._sprite.enable?(null==this._material.GetTexture()&&this._material.SetTexture(this._sprite._texture),this.forceBuild()):this._sprite.AddEventListener(C.INIT,l(this,this.sprite_init))},sprite_init:function(a){this._sprite.RemoveEventListener(C.INIT,l(this,this.sprite_init));null==this.material.GetTexture()&&this.material.SetTexture(this._sprite._texture);this._imageDirty=!0},forceBuild:function(){if(null!=this._sprite&&0!=
this._sprite.enable){0>=this.width&&this.set_width(this._sprite.width);0>=this.height&&this.set_height(this._sprite.height);if(0==this.type){var a=this._sprite.region.border;(0<a.x||0<a.y||0<a.width||0<a.height)&&this.set_type(2)}null==this._mesh&&(this._mesh=new Fc,this._geometry=new Da(Da.GetComponentValue([0,3])));this.drawSprite();this.DispatchEvent(C.INIT);this._transformDirty=this._transformDirty1=!0}},drawSprite:function(){null!=this._sprite&&this._sprite.enable&&(this._ready=!0,this._geometry.Clear(),
this._setting.border=this._customBorder,this._setting.width=this.width,this._setting.height=this.height,this._setting.fillAmount=this.fillAmount,this._setting.fillDirection=this.fillDirection,this._setting.type=this.type,this._setting.geometry=this._geometry,this._sprite.Draw(this._setting),this._geometry.Build(),this._mesh.FromGeometry(this._geometry),this.boundingInfo.From(this._geometry))},set_type:function(a){this.type!=a&&(this.type=a,this._imageDirty=!0);return a},set_fillDirection:function(a){this.fillDirection!=
a&&(this.fillDirection=a,3==this.type&&(this._imageDirty=!0));return a},set_fillAmount:function(a){0>a&&(a=0);1<a&&(a=1);this.fillAmount!=a&&(this.fillAmount=a,3==this.type&&(this._imageDirty=!0));return a},__class__:eb,__properties__:n(fb.prototype.__properties__,{set_fillAmount:"set_fillAmount",set_fillDirection:"set_fillDirection",set_type:"set_type"})});var vb=function(){eb.call(this)};g.GButton=vb;vb.__name__=["GButton"];vb.__super__=eb;vb.prototype=n(eb.prototype,{SetEnable:function(a){this.mouseEnable=
a;this.material.color.set_rgb(a?16777215:8947848)},onConstruct:function(){eb.prototype.onConstruct.call(this);this.mouseEnable=!0;this.AddEventListener(rc.CHANGE,l(this,this.this_change))},this_change:function(a){var b=a.action;if(3==b){if(null!=a.relatedTarget&&a.relatedTarget.target==this&&null!=this.onRelease)this.onRelease(this)}else 4==b?this.material.color.set_rgb(13421772):5==b&&this.material.color.set_rgb(16777215)},__class__:vb});var Af=function(){this._loaded=!1;aa.SetGlobalPath("assets");
cb.SetAtlas("ui.png");cb.SetAtlas("end.png");cb.SetAtlas("object.png");cb.SetAtlas("tile.png");qb.GetInstance().AddEventListener(C.INIT,l(this,this.view_init));this._shared=new nd("quest");this._menuShow=!1};g.GameStage=Af;Af.__name__=["GameStage"];Af.prototype={LoadLevel:function(a){this._success=!1;this._moved=0;this._level=a;this._loaded=!1;this._loader.Load("level/level"+this._level+".txt")},Reload:function(){this.LoadLevel(this._level)},Next:function(){this._level++;this.Reload()},menuSelectLv:function(a){this.LoadLevel(a);
this._menu.Select(a);this.hidemenu()},hidemenu:function(){this._scene.RemoveChild(this._menu);this._canvas.AddChild(this._container);this._menuShow=!1},showmenu:function(){this._scene.AddChild(this._menu);this._canvas.RemoveChild(this._container);this._menuShow=!0;this._menu.Select(this._level)},view_init:function(a){var b=this;La.set_targetFPS(30);this.sound=Cb.GetInstance();this._arr=new Wd(6,5);this._loader=new aa;this._loader.AddEventListener(C.COMPLETE,l(this,this.loader_complete));this._scene=
new Xd;this._scene.AddChild(new Yd);qb.GetInstance().AddScene(this._scene);this._canvas=new Zd(800,480,500);this._scene.AddChild(this._canvas);this._scene.camera.pickSystem.pickHandler.AddEventListener(rc.CHANGE,l(this,this.pickHandler_change));this._scene.camera.mouseEnable=!0;this._bg=new eb;this._bg.material.renderingMode=0;this._bg.Load("bg/PLAY-BG.png");this._canvas.AddChild(this._bg);this._container=new E;this._canvas.AddChild(this._container);this._container.set_x(-400);this._container.set_y(240);
this._menu=new $d;this._menu.onSelect=l(this,this.menuSelectLv);this._menuShow=!1;this._soundToggle=new ae;this._soundToggle.Skin("ui/SOUND_ON.png","ui/SOUND_OFF.png");this._container.AddChild(this._soundToggle);this._soundToggle.set_z(1);this._soundToggle.set_x(736);this._soundToggle.set_y(-420);this._soundToggle.onSelect=function(a,d){b.sound.stop=!d;b._shared.Set("soundoff",!d);d?b.sound.Play("sound/bgm_map.ogg",-1):b.sound.StopAll()};a=this._shared.Get("soundoff");null!=a?1==a?this._soundToggle.Select(!1):
this._soundToggle.Select(!0):this._soundToggle.Select(!0);a=new vb;a.Load("ui/CREDIT.png");this._container.AddChild(a);a.set_z(1);a.set_x(736);a.set_y(-310);a.onRelease=function(a){Lg.open("http://game.lovedna.net/");b._soundToggle.Select(!1)};this._retry=new vb;this._retry.set_z(1);this._retry.set_x(636);this._retry.set_y(-420);this._container.AddChild(this._retry);this._retry.Load("ui/RETRY0.png");this._retry.onRelease=function(a){b._success||b.Reload()};this._retry.mouseEnable=!1;this._progress=
new be;this._progress.set_pivotY(1);this._container.AddChild(this._progress);this._progress.set_z(1);this._progress.set_x(640);this._progress.set_y(-150);this._progress.set_height(200);this._end=new Vd;this._end.set_x(400);this._end.set_y(-240);this._end.set_z(3);this._end.onShow=function(){b.clear()};this._end.onRetry=function(){b.Reload()};this._end.onNext=function(){b.Next()};this._end.onOption=function(){b._level=1;b.Reload()};this._end.onShowMenu=function(){b.showmenu()};a=this._shared.Get("level");
null!=a?(this.LoadLevel(a),this._menu.SetMax(a),this._max=a):(this.LoadLevel(1),this._menu.SetMax(1),this._menu.Select(1),this._max=1);this.sound.Play("sound/bgm_map.ogg");this.sound.Play("sound/sfx_lose.ogg");this.sound.Play("sound/sfx_princess.ogg");this.sound.Play("sound/step.ogg");this.sound.Play("sound/sfx_sword.ogg");this.sound.Play("sound/sfx_win.ogg");this.sound.Play("sound/sfx_flame.ogg")},loader_complete:function(a){this.clear();this._moveMax=100;a=this._loader.GetCurrent();a=new Tc(a.text);
for(var b=a.get_length(),c=0;0<b--;){var d=a.ReadLine();if("bg"==d)c=1;else if("star"==d)c=2;else if("map"==d)c=3;else if(1==c)this._bg.Load("bg/"+d,!0);else if(2==c){var e=d.split(",");this._moveMax=ba.parseInt(e[0])}else if(3==c){e=new Gf;e.parse(d);this._container.AddChild(e._image);for(var d=0,f=e.width;d<f;){var x=d++;this._arr.Set(e.x+x,e.y,e)}d=0;for(f=e.height;d<f;)x=d++,this._arr.Set(e.x,e.y+x,e)}}this._loaded=!0;this._retry.mouseEnable=!0;this.setProgress(1);this.sound.Play("sound/bgm_map.ogg",
-1)},clear:function(){for(var a=this._arr._length;0<a--;){var b=this._arr._list[a];null!=b&&b.Destroy()}this._arr.Clear()},pickHandler_change:function(a){var b=a.action;if(this._menuShow)this._menu.Move(a.touch.motion.x);else{var c=W.instance;c.Copy(a.touch.position);this._canvas.ScreenToLocal(c);c.x+=400;c.y+=240;a=c.x/96|0;c=c.y/96|0;0>a||0>c||5<a||4<c||(1==b?this._success||null==this._select||0>a-this._xinc||0>c-this._yinc||6<a-this._xinc+this._select.width||5<c-this._yinc+this._select.height||
!this.testMove(a,c)||(this.moveTo(a-this._xinc,c-this._yinc),this._selectX=a,this._selectY=c):2==b?this._success||(b=this._arr.Get(a,c),null!=b&&1==b.moved&&(this._select=b,this._xinc=a-this._select.x,this._yinc=c-this._select.y,this._selectX=a,this._selectY=c)):3==b&&(this._select=null))}},fail:function(a){this._success=!0;this._retry.mouseEnable=!1;this._container.AddChild(this._end);this._end.ShowFail(a);this.sound.Play("sound/sfx_lose.ogg");this.sound.Stop("sound/bgm_map.ogg")},win:function(){this._success=
!0;this._retry.mouseEnable=!1;this._container.AddChild(this._end);20<=this._level?this._end.ShowComplete():(this._end.ShowSuccess(),this._level+1>this._max&&(this._max=this._level+1,this._menu.SetMax(this._max)),this._shared.Set("level",this._level+1));this.sound.Play("sound/sfx_win.ogg");this.sound.Stop("sound/bgm_map.ogg")},setProgress:function(a){this._progress.SetProgress(a)},testMove:function(a,b){var c=this._select.width,d=this._select.height,e=this._select.x,f=this._select.y,x=a-this._selectX,
g=b-this._selectY;if(1!=((0>x?-x:x)|0)+((0>g?-g:g)|0))return!1;for(var k=0;k<c;)for(var h=k++,l=0;l<d;){var m=l++,m=this._arr.Get(e+h+x,f+m+g);if(null!=m&&m!=this._select)return!1}return!0},moveTo:function(a,b){for(var c=this._select.width,d=this._select.height,e=this._select.x,f=this._select.y,x=0;x<c;)for(var g=x++,k=0;k<d;){var h=k++;this._arr.Set(e+g,f+h,null)}e=a;f=b;for(x=0;x<c;)for(g=x++,k=0;k<d;)h=k++,this._arr.Set(e+g,f+h,this._select);this._select.x=a;this._select.y=b;this._select.RefreshPosition();
""!=this._select.type&&this.check();this._moved++;this._success||this._moved>=this._moveMax&&this.fail(10);this.setProgress(1-this._moved/this._moveMax);this.sound.Play("sound/step.ogg")},check:function(){for(var a=new G,b=this._select.width,c=this._select.height,d=this._select.x,e=this._select.y,f=0,x=0;x<b;){var g=x++,k=this._arr.Get(d+g,e-1);null!=k&&""!=k.type&&(a.set(k.type,k),f++);k=this._arr.Get(d+g,e+c);null!=k&&""!=k.type&&(a.set(k.type,k),f++)}for(x=0;x<c;)g=x++,k=this._arr.Get(d-1,e+g),
null!=k&&""!=k.type&&(a.set(k.type,k),f++),k=this._arr.Get(d+b,e+g),null!=k&&""!=k.type&&(a.set(k.type,k),f++);if(0<f)switch(this._select.type){case "h":if(null!=va.s?a.existsReserved("s"):a.h.hasOwnProperty("s"))if(b=null!=va.s?a.getReserved("s"):a.h.s,b.Load("s1"),b.type="",0==this._select.state)this._select.Load("h1"),this._select.state=1;else if(2==this._select.state){this._select.Load("h3");this._select.state=1;this.fail(1);break}if(null!=va.m?a.existsReserved("m"):a.h.hasOwnProperty("m"))if(b=
null!=va.m?a.getReserved("m"):a.h.m,0==this._select.state){b.Load("m2");this._select.Load("h2");this.fail(3);break}else if(2==this._select.state){b.Load("m2");this._select.Load("hp1");this.fail(5);break}else 1==this._select.state&&(b.Load("m1"),b.type="",this._select.Load("h"),this._select.state=4);if(null!=va.p?a.existsReserved("p"):a.h.hasOwnProperty("p"))if(a=null!=va.p?a.getReserved("p"):a.h.p,0==this._select.state)a.Load(""),this._select.Load("hp"),this._select.state=2;else if(1==this._select.state){a.Load("p1");
this._select.Load("h");this.fail(2);break}else if(4==this._select.state){a.Load("");this._select.Load("hp");this.win();break}break;case "s":if(null!=va.h?a.existsReserved("h"):a.h.hasOwnProperty("h"))if(this._select.Load("s1"),a=null!=va.h?a.getReserved("h"):a.h.h,0==a.state)a.Load("h1"),this._select.type="",a.state=1;else if(2==a.state){a.Load("h3");a.state=1;this.fail(1);break}break;case "m":if(null!=va.h?a.existsReserved("h"):a.h.hasOwnProperty("h"))if(b=null!=va.h?a.getReserved("h"):a.h.h,1==
b.state){this._select.Load("m1");this._select.type="";b.Load("h");b.state=4;break}else if(0==b.state){this._select.Load("m2");this._select.type="";b.Load("h2");b.state=0;this.fail(3);break}else if(2==b.state){this._select.Load("m2");this._select.type="";b.Load("hp1");b.state=0;this.fail(5);break}if(null!=va.p?a.existsReserved("p"):a.h.hasOwnProperty("p")){a=null!=va.p?a.getReserved("p"):a.h.p;this._select.Load("m2");this._select.type="";a.Load("p2");a.state=0;this.fail(4);break}break;case "p":if(null!=
va.h?a.existsReserved("h"):a.h.hasOwnProperty("h"))if(b=null!=va.h?a.getReserved("h"):a.h.h,0==b.state)this._select.Load(""),this._select.type="",b.Load("hp"),b.state=2;else if(1==b.state){this._select.Load("p1");this._select.type="";b.Load("h");this.fail(2);break}else if(4==b.state){this._select.Load("");this._select.type="";b.Load("hp");this.win();break}if(null!=va.m?a.existsReserved("m"):a.h.hasOwnProperty("m"))(null!=va.m?a.getReserved("m"):a.h.m).Load("m2"),this._select.Load("p2"),this.fail(4)}},
__class__:Af};var r=function(){};g.HxOverrides=r;r.__name__=["HxOverrides"];r.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new u("Invalid date format : "+a);}};r.cca=function(a,b){var c=a.charCodeAt(b);
return c!=c?void 0:c};r.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};r.indexOf=function(a,b,c){var d=a.length;0>c&&(c+=d,0>c&&(c=0));for(;c<d;){if(a[c]===b)return c;c++}return-1};r.remove=function(a,b){var c=r.indexOf(a,b,0);if(-1==c)return!1;a.splice(c,1);return!0};r.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var od=function(){this.length=0};g.List=od;od.__name__=["List"];od.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},pop:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];null==this.h&&(this.q=null);this.length--;return a},__class__:od};Math.__name__=["Math"];var $d=function(){E.call(this)};g.Menu=$d;$d.__name__=["Menu"];$d.__super__=E;$d.prototype=n(E.prototype,{Move:function(a){this.set_rotationY(this.rotationY+.008726646259971648*-a);
this.set_rotationY(this.rotationY%6.283185307179586)},Select:function(a){this.set_rotationY(.017453292519943295*(a/20*360+90-18))},SetMax:function(a){this.Select(a);for(var b=0;20>b;){var c=b++;this._list[c].SetEnable(a>c)}},onConstruct:function(){E.prototype.onConstruct.call(this);this._list=[];this.set_z(1E3);for(var a=0;20>a;){var b=a++,c=new md(b+1);c.onRelease=l(this,this.select);var d=b%20;this.AddChild(c);var e=Math.cos(.3141592653589793*d),d=Math.sin(.3141592653589793*d);c.set_x(300*e);c.set_z(300*
d);c.set_rotationY(-.3141592653589793*b-1.5707963267948966);this._list.push(c);c.SetEnable(!1)}},select:function(a){this._selectid=a.id;if(null!=this.onSelect)this.onSelect(this._selectid)},__class__:$d});var md=function(a){this.id=a;eb.call(this)};g.MenuItem=md;md.__name__=["MenuItem"];md.__super__=vb;md.prototype=n(vb.prototype,{SetEnable:function(a){vb.prototype.SetEnable.call(this,a);this._txt.material.color.set_rgb(a?16777215:8947848)},onConstruct:function(){vb.prototype.onConstruct.call(this);
this.material.renderingMode=0;this.material.depthTest=!0;this.material.depthWrite=!0;this.Load("ui/LEVEL-BTN.png");var a=new Gc;a.material.depthTest=a.material.depthWrite=!0;a.material.renderingMode=200;a.set_y(-10);a.set_alignmentX(0);a.set_text(""+this.id);a.set_font("num_0.png");this.AddChild(a);a.set_width(66);a.set_height(70);a.set_z(1);this._txt=a},__class__:md});var Qb=function(){ub.call(this);var a=this.getBackgroundColor(),b=0;70>.299*(a>>16&255)+.587*(a>>8&255)+.114*(a&255)&&(b=16777215);
var a=this.getHeight()/2-3.5,c=this.getWidth()-60;this.outline=new ub;this.outline.get_graphics().beginFill(b,.07);this.outline.get_graphics().drawRect(0,0,c,7);this.outline.set_x(30);this.outline.set_y(a);this.addChild(this.outline);this.progress=new ub;this.progress.get_graphics().beginFill(b,.35);this.progress.get_graphics().drawRect(0,0,c-4,3);this.progress.set_x(32);this.progress.set_y(a+2);this.progress.set_scaleX(0);this.addChild(this.progress)};g.NMEPreloader=Qb;Qb.__name__=["NMEPreloader"];
Qb.__super__=ub;Qb.prototype=n(ub.prototype,{getBackgroundColor:function(){return 0},getHeight:function(){return ua.current.stage.stageHeight},getWidth:function(){return ua.current.stage.stageWidth},onInit:function(){},onLoaded:function(){this.dispatchEvent(new J("complete"))},onUpdate:function(a,b){var c=a/b;1<c&&(c=1);this.progress.set_scaleX(c)},__class__:Qb});var Lg=function(){};g.OpenURL=Lg;Lg.__name__=["OpenURL"];Lg.open=function(a){null==a&&(a="http://game.lovedna.net/");ua.getURL(new Uc(a))};
var be=function(){eb.call(this)};g.ProgressPanel=be;be.__name__=["ProgressPanel"];be.__super__=eb;be.prototype=n(eb.prototype,{SetProgress:function(a){this._img.set_fillAmount(a)},onConstruct:function(){eb.prototype.onConstruct.call(this);this.Load("ui/rating-panel.png");this._img=new eb;this._img.set_fillAmount(1);this._img.set_type(3);this._img.set_fillDirection(3);this._img.set_pivotY(1);this._img.set_y(-10);this._img.set_x(-1);this._img.Load("ui/rating-bar.png");this.AddChild(this._img);this._img.set_height(172);
this._img.set_z(.4)},__class__:be});var M=function(){};g.Reflect=M;M.__name__=["Reflect"];M.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};M.field=function(a,b){try{return a[b]}catch(c){return c instanceof u&&(c=c.val),null}};M.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};M.callMethod=function(a,b,c){return b.apply(a,c)};M.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=
d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};M.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};M.compareMethods=function(a,b){return a==b?!0:M.isFunction(a)&&M.isFunction(b)?a.scope==b.scope&&a.method==b.method&&null!=a.method:!1};M.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var Cb=function(){this._enable=!0;this._map=new G;this._enable=!0;this.stop=!1};g.SoundGroup=Cb;Cb.__name__=["SoundGroup"];
Cb._instance=null;Cb.GetInstance=function(){if(null!=Cb._instance)return Cb._instance;Cb._instance=new Cb;return Cb._instance};Cb.prototype={Play:function(a,b){null==b&&(b=1);if(this._enable){var c=null;this._map.exists(a)?(c=this._map.get(a),this.stop||(c.set_loop(b),c.Play())):(c=new ce,c.Load(a),this._map.set(a,c))}},Stop:function(a){if(this._enable){var b=null;this._map.exists(a)&&(b=this._map.get(a),b.Stop())}},StopAll:function(){for(var a=this._map.iterator();a.hasNext();)a.next().Stop()},__class__:Cb};
var ba=function(){};g.Std=ba;ba.__name__=["Std"];ba.string=function(a){return D.__string_rec(a,"")};ba["int"]=function(a){return a|0};ba.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=r.cca(a,1)&&88!=r.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};ba.parseFloat=function(a){return parseFloat(a)};var de=function(){this.b=""};g.StringBuf=de;de.__name__=["StringBuf"];de.prototype={add:function(a){this.b+=ba.string(a)},__class__:de};var P=function(){};g.StringTools=P;P.__name__=["StringTools"];
P.urlEncode=function(a){return encodeURIComponent(a)};P.startsWith=function(a,b){return a.length>=b.length&&r.substr(a,0,b.length)==b};P.isSpace=function(a,b){var c=r.cca(a,b);return 8<c&&14>c||32==c};P.ltrim=function(a){for(var b=a.length,c=0;c<b&&P.isSpace(a,c);)c++;return 0<c?r.substr(a,c,b-c):a};P.rtrim=function(a){for(var b=a.length,c=0;c<b&&P.isSpace(a,b-c-1);)c++;return 0<c?r.substr(a,0,b-c):a};P.trim=function(a){return P.ltrim(P.rtrim(a))};P.replace=function(a,b,c){return a.split(b).join(c)};
P.hex=function(a,b){var c="";do c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4;while(0<a);if(null!=b)for(;c.length<b;)c="0"+c;return c};P.fastCodeAt=function(a,b){return a.charCodeAt(b)};var Gf=function(){this.x=this.y=0};g.TileSet=Gf;Gf.__name__=["TileSet"];Gf.prototype={parse:function(a){a=a.split(",");this.y=ba.parseInt(a[0]);this.x=ba.parseInt(a[1]);this.moved=ba.parseInt(a[2]);this.width=ba.parseInt(a[3]);this.height=ba.parseInt(a[4]);this._objectid=a[5];this._image=new eb;this._image.set_pivotX(0);
this._image.set_pivotY(1);this._image.Load("tile/"+this.moved+""+this.width+""+this.height+".png",!0);this.state=0;this.type="";if(null!=this._objectid){switch(this._objectid){case "h":case "s":case "p":case "m":this.type=this._objectid}this.Load(this._objectid)}this.RefreshPosition()},RefreshPosition:function(){this._image.set_x(96*this.x);this._image.set_y(96*-this.y);this._image.set_z(.1*this.y)},Load:function(a){null==this._child&&(this._child=new eb,this._child.set_scaleX(this._child.set_scaleY(.65)),
this._child.set_x(48*this.width),this._child.set_y(48*-this.height),this._image.AddChild(this._child),this._child.set_z(1));""==a?this._child.Load(""):(this._child.Load("object/"+a+".png",!0),"h1"==a?Cb.GetInstance().Play("sound/sfx_sword.ogg"):"hp"==a?Cb.GetInstance().Play("sound/sfx_princess.ogg"):"m2"==a&&Cb.GetInstance().Play("sound/sfx_flame.ogg"))},Destroy:function(){null!=this._image&&E.Destroy(this._image);null!=this._child&&E.Destroy(this._child);this._child=this._image=null},__class__:Gf};
var ae=function(){E.call(this)};g.Toggle=ae;ae.__name__=["Toggle"];ae.__super__=E;ae.prototype=n(E.prototype,{Skin:function(a,b){this._b1=new vb;this._b1.onRelease=l(this,this.click);this._b1.Load(a);this.AddChild(this._b1);this._b2=new vb;this._b2.Load(b);this.AddChild(this._b2);this._b2.onRelease=l(this,this.click);this._b2.set_visible(!1)},Select:function(a){if(this._b1.visible!=a&&(this._b1.set_visible(a),this._b2.set_visible(!a),null!=this.onSelect))this.onSelect(this,a)},click:function(a){a==
this._b1?this.Select(!1):this.Select(!0)},__class__:ae});var X=g.ValueType={__ename__:["ValueType"],__constructs__:"TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(" ")};X.TNull=["TNull",0];X.TNull.toString=v;X.TNull.__enum__=X;X.TInt=["TInt",1];X.TInt.toString=v;X.TInt.__enum__=X;X.TFloat=["TFloat",2];X.TFloat.toString=v;X.TFloat.__enum__=X;X.TBool=["TBool",3];X.TBool.toString=v;X.TBool.__enum__=X;X.TObject=["TObject",4];X.TObject.toString=v;X.TObject.__enum__=X;X.TFunction=
["TFunction",5];X.TFunction.toString=v;X.TFunction.__enum__=X;X.TClass=function(a){a=["TClass",6,a];a.__enum__=X;a.toString=v;return a};X.TEnum=function(a){a=["TEnum",7,a];a.__enum__=X;a.toString=v;return a};X.TUnknown=["TUnknown",8];X.TUnknown.toString=v;X.TUnknown.__enum__=X;var Z=function(){};g.Type=Z;Z.__name__=["Type"];Z.getClass=function(a){return null==a?null:D.getClass(a)};Z.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};Z.getEnumName=function(a){return a.__ename__.join(".")};
Z.resolveClass=function(a){a=g[a];return null!=a&&a.__name__?a:null};Z.resolveEnum=function(a){a=g[a];return null!=a&&a.__ename__?a:null};Z.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw new u("Too many arguments");}};Z.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};Z.createEnum=function(a,b,c){var d=M.field(a,b);if(null==d)throw new u("No such constructor "+b);if(M.isFunction(d)){if(null==c)throw new u("Constructor "+b+" need parameters");return M.callMethod(a,d,c)}if(null!=c&&0!=c.length)throw new u("Constructor "+b+" does not need parameters");return d};Z.getClassFields=function(a){a=M.fields(a);
r.remove(a,"__name__");r.remove(a,"__interfaces__");r.remove(a,"__properties__");r.remove(a,"__super__");r.remove(a,"__meta__");r.remove(a,"prototype");return a};Z.getEnumConstructs=function(a){return a.__constructs__.slice()};Z["typeof"]=function(a){switch(typeof a){case "boolean":return X.TBool;case "string":return X.TClass(String);case "number":return Math.ceil(a)==a%2147483648?X.TInt:X.TFloat;case "object":if(null==a)return X.TNull;var b=a.__enum__;if(null!=b)return X.TEnum(b);a=D.getClass(a);
return null!=a?X.TClass(a):X.TObject;case "function":return a.__name__||a.__ename__?X.TObject:X.TFunction;case "undefined":return X.TNull;default:return X.TUnknown}};var sc={};g["_UInt.UInt_Impl_"]=sc;sc.__name__=["_UInt","UInt_Impl_"];sc.gt=function(a,b){var c=0>a;return c!=0>b?c:a>b};sc.toFloat=function(a){return 0>a?4294967296+a:a+0};var Hf=function(a,b){this.high=a;this.low=b};g["haxe._Int64.___Int64"]=Hf;Hf.__name__=["haxe","_Int64","___Int64"];Hf.prototype={__class__:Hf};var Mb=function(){this.buf=
new de;this.cache=[];this.useCache=Mb.USE_CACHE;this.useEnumIndex=Mb.USE_ENUM_INDEX;this.shash=new G;this.scount=0};g["haxe.Serializer"]=Mb;Mb.__name__=["haxe","Serializer"];Mb.run=function(a){var b=new Mb;b.serialize(a);return b.toString()};Mb.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),
this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+="r",this.buf.b=null==e?this.buf.b+"null":this.buf.b+(""+e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=M.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(M.field(a,
d))}this.buf.b+="g"},serialize:function(a){var b=Z["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:isNaN(a)?this.buf.b+="k":isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=a?this.buf.b+"t":this.buf.b+"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&
this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=a.length,d=0;d<c;){var e=d++;null==a[e]?b++:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case od:this.buf.b+="l";a=a.h;for(b=null;null!=a;)b=a[0],a=a[1],this.serialize(b);this.buf.b+="h";break;case Date:this.buf.b+="v";
this.buf.add(a.getTime());break;case G:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(null!=va[c]?a.getReserved(c):a.h[c]);this.buf.b+="h";break;case ga:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),this.buf.b+=":",this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c),this.serialize(a.h[c]);this.buf.b+="h";break;case fc:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=b.next(),d=M.field(c,"__id__"),M.deleteField(c,"__id__"),this.serialize(c),c.__id__=
d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case Y:d=0;e=a.length-2;b=new de;for(c=Mb.BASE64;d<e;){var f=a.get(d++),x=a.get(d++),g=a.get(d++);b.add(c.charAt(f>>2));b.add(c.charAt((f<<4|x>>4)&63));b.add(c.charAt((x<<2|g>>6)&63));b.add(c.charAt(g&63))}d==e?(e=a.get(d++),a=a.get(d++),b.add(c.charAt(e>>2)),b.add(c.charAt((e<<4|a>>4)&63)),b.add(c.charAt(a<<2&63))):d==e+1&&(a=a.get(d++),b.add(c.charAt(a>>2)),b.add(c.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=null==a.length?this.buf.b+
"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(Z.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(Z.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(D.__instanceof(a,ph))a=Z.getClassName(a),this.buf.b+="A",this.serializeString(a);
else if(D.__instanceof(a,qh))this.buf.b+="B",this.serializeString(Z.getEnumName(a));else{if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a)}break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(Z.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=ba.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=ba.string(b-2);
for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;case 5:throw new u("Cannot serialize function");default:throw new u("Cannot serialize "+ba.string(a));}},__class__:Mb};var Vc=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};g["haxe.Timer"]=Vc;Vc.__name__=["haxe","Timer"];Vc.stamp=function(){return(new Date).getTime()/1E3};Vc.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Vc};var wb=function(a){this.buf=
a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=wb.DEFAULT_RESOLVER;null==a&&(a=Z,wb.DEFAULT_RESOLVER=a);this.setResolver(a)};g["haxe.Unserializer"]=wb;wb.__name__=["haxe","Unserializer"];wb.initCodes=function(){for(var a=[],b=0,c=wb.BASE64.length;b<c;){var d=b++;a[wb.BASE64.charCodeAt(d)]=d}return a};wb.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(a){return null},resolveEnum:function(a){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},
readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return ba.parseFloat(r.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new u("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;
var b=this.unserialize();if("string"!=typeof b)throw new u("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw new u("Invalid enum format");var c=this.readDigits();if(0==c)return Z.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return Z.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();
case 100:return this.readFloat();case 121:var a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw new u("Invalid string length");var b=r.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return NaN;case 109:return-Infinity;case 112:return Infinity;case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=
null):a.push(this.unserialize())}return a;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new u("Invalid reference");return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new u("Invalid string reference");return this.scache[a];case 120:throw new u(this.unserialize());case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new u("Class not found "+a);a=Z.createEmptyInstance(b);
this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new u("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new u("Enum not found "+a);this.pos++;var c=this.readDigits(),d=Z.getEnumConstructs(b)[c];if(null==d)throw new u("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);
return a;case 108:a=new od;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:a=new G;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new ga;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);if(104!=b)throw new u("Invalid IntMap format");return a;case 77:a=new fc;for(this.cache.push(a);104!=
this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=r.substr(this.buf,this.pos,19),a=r.strDate(a),this.pos+=
19):(a=this.readFloat(),b=new Date,b.setTime(a),a=b),this.cache.push(a),a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw new u("Invalid bytes length");var e=wb.CODES;null==e&&(e=wb.initCodes(),wb.CODES=e);for(var f=this.pos,x=a&3,g=f+(a-x),b=Y.alloc(3*(a>>2)+(2<=x?x-1:0)),c=0;f<g;){var k=e[P.fastCodeAt(d,f++)],h=e[P.fastCodeAt(d,f++)];b.set(c++,k<<2|h>>4);k=e[P.fastCodeAt(d,f++)];b.set(c++,h<<4|k>>2);h=e[P.fastCodeAt(d,f++)];b.set(c++,k<<6|h)}2<=
x&&(h=e[P.fastCodeAt(d,f++)],g=e[P.fastCodeAt(d,f++)],b.set(c++,h<<2|g>>4),3==x&&(d=e[P.fastCodeAt(d,f++)],b.set(c++,g<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new u("Class not found "+a);a=Z.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw new u("Invalid custom data");return a;case 65:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new u("Class not found "+
a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new u("Enum not found "+a);return b}this.pos--;throw new u("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:wb};var If=function(){};g["haxe.Utf8"]=If;If.__name__=["haxe","Utf8"];If.iter=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;b(r.cca(a,e))}};var Wc=function(){this.a1=1;this.a2=0};g["haxe.crypto.Adler32"]=Wc;Wc.__name__=["haxe","crypto","Adler32"];Wc.read=function(a){var b=
new Wc,c=a.readByte(),d=a.readByte(),e=a.readByte();a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};Wc.prototype={update:function(a,b,c){var d=this.a1,e=this.a2,f=b;for(b+=c;f<b;)c=f++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},equals:function(a){return a.a1==this.a1&&a.a2==this.a2},__class__:Wc};var Jf=function(a){for(var b=a.length,c=1;b>1<<c;)c++;if(8<c||b!=1<<c)throw new u("BaseCode : base length must be a power of two.");this.base=a;this.nbits=c};g["haxe.crypto.BaseCode"]=Jf;Jf.__name__=
["haxe","crypto","BaseCode"];Jf.prototype={encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=8*a.length/b|0,e=Y.alloc(d+(0==8*a.length%b?0:1)),f=0,x=0,g=(1<<b)-1,k=0,h=0;h<d;){for(;x<b;)x+=8,f<<=8,f|=a.get(k++);x-=b;e.set(h++,c.b[f>>x&g])}0<x&&e.set(h++,c.b[f<<b-x&g]);return e},__class__:Jf};var Mg=function(){};g["haxe.crypto.Crc32"]=Mg;Mg.__name__=["haxe","crypto","Crc32"];Mg.make=function(a){var b=-1,c=a.b.bufferValue,d=0;for(a=a.length;d<a;){for(var e=d++,e=(b^c.bytes[e])&255,f=0;8>f;)f++,
e=1==(e&1)?e>>>1^-306674912:e>>>1;b=b>>>8^e}return b^-1};var fc=function(){this.h={};this.h.__keys__={}};g["haxe.ds.ObjectMap"]=fc;fc.__name__=["haxe","ds","ObjectMap"];fc.__interfaces__=[Bf];fc.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++fc.count);this.h[c]=b;this.h.__keys__[c]=a},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);
return r.iter(a)},__class__:fc};var Kf=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};g["haxe.ds._StringMap.StringMapIterator"]=Kf;Kf.__name__=["haxe","ds","_StringMap","StringMapIterator"];Kf.prototype={hasNext:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},__class__:Kf};var G=function(){this.h={}};g["haxe.ds.StringMap"]=G;G.__name__=["haxe","ds","StringMap"];G.__interfaces__=[Bf];G.prototype={set:function(a,b){null!=
va[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=va[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=va[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=va[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;
delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){var a=this.arrayKeys();return r.iter(a)},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Kf(this,this.arrayKeys())},__class__:G};var pd={};g["haxe.ds._Vector.Vector_Impl_"]=pd;pd.__name__=["haxe","ds","_Vector","Vector_Impl_"];pd.blit=function(a,
b,c,d,e){for(var f=0;f<e;){var x=f++;c[d+x]=a[b+x]}};var Y=function(a){this.length=a.byteLength;this.b=new Nb(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};g["haxe.io.Bytes"]=Y;Y.__name__=["haxe","io","Bytes"];Y.alloc=function(a){return new Y(new Lf(a))};Y.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=P.fastCodeAt(a,c++);55296<=d&&56319>=d&&(d=d-55232<<10|P.fastCodeAt(a,c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|
d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new Y((new Nb(b)).buffer)};Y.ofData=function(a){var b=a.hxBytes;return null!=b?b:new Y(a)};Y.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+d>b.length)throw new u($a.OutsideBounds);0==c&&d==b.length?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+d),a)},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw new u($a.OutsideBounds);for(var c="",d=this.b,
e=String.fromCharCode,f=a,x=a+b;f<x;){var g=d[f++];if(128>g){if(0==g)break;c+=e(g)}else if(224>g)c+=e((g&63)<<6|d[f++]&127);else if(240>g)var k=d[f++],c=c+e((g&31)<<12|(k&127)<<6|d[f++]&127);else var k=d[f++],h=d[f++],g=(g&15)<<18|(k&127)<<12|(h&127)<<6|d[f++]&127,c=c+e((g>>10)+55232),c=c+e(g&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:Y};var Mf=function(){this.b=[]};g["haxe.io.BytesBuffer"]=Mf;Mf.__name__=["haxe","io","BytesBuffer"];Mf.prototype={addBytes:function(a,
b,c){if(0>b||0>c||b+c>a.length)throw new u($a.OutsideBounds);a=a.b;var d=b;for(b+=c;d<b;)c=d++,this.b.push(a[c])},getBytes:function(){var a=new Y((new Nb(this.b)).buffer);this.b=null;return a},__class__:Mf};var ee=function(){};g["haxe.io.Input"]=ee;ee.__name__=["haxe","io","Input"];ee.prototype={readByte:function(){throw new u("Not implemented");},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw new u($a.OutsideBounds);for(;0<d;)e[b]=this.readByte(),b++,d--;return c},read:function(a){for(var b=
Y.alloc(a),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw new u($a.Blocked);c+=d;a-=d}return b},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},__class__:ee};var fe=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw new u($a.OutsideBounds);this.b=a.b;this.pos=b;this.totlen=this.len=c};g["haxe.io.BytesInput"]=fe;fe.__name__=["haxe","io","BytesInput"];fe.__super__=ee;fe.prototype=n(ee.prototype,{readByte:function(){if(0==
this.len)throw new u(new ge);this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new u($a.OutsideBounds);if(0==this.len&&0<c)throw new u(new ge);this.len<c&&(c=this.len);var d=this.b;a=a.b;for(var e=0;e<c;){var f=e++;a[b+f]=d[this.pos+f]}this.pos+=c;this.len-=c;return c},__class__:fe});var ge=function(){};g["haxe.io.Eof"]=ge;ge.__name__=["haxe","io","Eof"];ge.prototype={toString:function(){return"Eof"},__class__:ge};var $a=g["haxe.io.Error"]={__ename__:["haxe",
"io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};$a.Blocked=["Blocked",0];$a.Blocked.toString=v;$a.Blocked.__enum__=$a;$a.Overflow=["Overflow",1];$a.Overflow.toString=v;$a.Overflow.__enum__=$a;$a.OutsideBounds=["OutsideBounds",2];$a.OutsideBounds.toString=v;$a.OutsideBounds.__enum__=$a;$a.Custom=function(a){a=["Custom",3,a];a.__enum__=$a;a.toString=v;return a};var Tb=function(){};g["haxe.io.FPHelper"]=Tb;Tb.__name__=["haxe","io","FPHelper"];Tb.i32ToFloat=function(a){var b=
a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,b-127)};Tb.floatToI32=function(a){if(0==a)return 0;var b;b=0>a?-a:a;var c=Math.floor(Math.log(b)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);b=Math.round(8388608*(b/Math.pow(2,c)-1))&8388607;return(0>a?-2147483648:0)|c+127<<23|b};Tb.i64ToDouble=function(a,b){var c=(b>>20&2047)-1023,d=4294967296*(b&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==d&&-1023==c?0:(1-(b>>>31<<1))*(1+Math.pow(2,-52)*d)*
Math.pow(2,c)};Tb.doubleToI64=function(a){var b=Tb.i64tmp;if(0==a)b.low=0,b.high=0;else{var c;c=0>a?-a:a;var d=Math.floor(Math.log(c)/.6931471805599453);c=4503599627370496*(c/Math.pow(2,d)-1);c=Math.round(c);b.low=c|0;b.high=(0>a?-2147483648:0)|d+1023<<20|c/4294967296|0}return b};var Xc=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=r.substr(a,0,c),a=r.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=r.substr(a,
0,b),a=r.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=r.substr(a,b+1,null),this.file=r.substr(a,0,b)):(this.ext=null,this.file=a)};g["haxe.io.Path"]=Xc;Xc.__name__=["haxe","io","Path"];Xc.withoutExtension=function(a){a=new Xc(a);a.ext=null;return a.toString()};Xc.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:Xc};var Ub=g["haxe.zip.Huffman"]={__ename__:["haxe","zip","Huffman"],
__constructs__:["Found","NeedBit","NeedBits"]};Ub.Found=function(a){a=["Found",0,a];a.__enum__=Ub;a.toString=v;return a};Ub.NeedBit=function(a,b){var c=["NeedBit",1,a,b];c.__enum__=Ub;c.toString=v;return c};Ub.NeedBits=function(a,b){var c=["NeedBits",2,a,b];c.__enum__=Ub;c.toString=v;return c};var Nf=function(){};g["haxe.zip.HuffTools"]=Nf;Nf.__name__=["haxe","zip","HuffTools"];Nf.prototype={treeDepth:function(a){switch(a[1]){case 0:return 0;case 2:throw new u("assert");case 1:var b=a[3];a=this.treeDepth(a[2]);
b=this.treeDepth(b);return 1+(a<b?a:b)}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b)switch(a[1]){case 1:return b=a[3],Ub.NeedBit(this.treeCompress(a[2]),this.treeCompress(b));default:throw new u("assert");}for(var c=1<<b,d=[],e=0;e<c;)e++,d.push(Ub.Found(-1));this.treeWalk(d,0,0,b,a);return Ub.NeedBits(b,d)},treeWalk:function(a,b,c,d,e){switch(e[1]){case 1:var f=e[3],x=e[2];0<d?(this.treeWalk(a,b,c+1,d-1,x),this.treeWalk(a,b|1<<c,c+1,d-1,f)):a[b]=this.treeCompress(e);
break;default:a[b]=this.treeCompress(e)}},treeMake:function(a,b,c,d){if(d>b)throw new u("Invalid huffman");var e=c<<5|d;if(a.h.hasOwnProperty(e))return Ub.Found(a.h[e]);c<<=1;d+=1;return Ub.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},make:function(a,b,c,d){var e=[],f=[];if(32<d)throw new u("Invalid huffman");for(var x=0;x<d;)x++,e.push(0),f.push(0);for(x=0;x<c;){var g=x++,g=a[g+b];if(g>=d)throw new u("Invalid huffman");e[g]++}for(var x=0,g=1,k=d-1;g<k;){var h=g++,x=x+e[h]<<1;f[h]=x}e=
new ga;for(x=0;x<c;)g=x++,k=a[g+b],0!=k&&(h=f[k-1],f[k-1]=h+1,e.h[h<<5|k]=g);return this.treeCompress(Ub.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},__class__:Nf};var Of=function(a){this.buffer=Y.alloc(65536);this.pos=0;a&&(this.crc=new Wc)};g["haxe.zip._InflateImpl.Window"]=Of;Of.__name__=["haxe","zip","_InflateImpl","Window"];Of.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=Y.alloc(65536);this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);
this.buffer=a},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:Of};var U=g["haxe.zip._InflateImpl.State"]={__ename__:["haxe","zip","_InflateImpl","State"],__constructs__:"Head Block CData Flat Crc Dist DistOne Done".split(" ")};
U.Head=["Head",0];U.Head.toString=v;U.Head.__enum__=U;U.Block=["Block",1];U.Block.toString=v;U.Block.__enum__=U;U.CData=["CData",2];U.CData.toString=v;U.CData.__enum__=U;U.Flat=["Flat",3];U.Flat.toString=v;U.Flat.__enum__=U;U.Crc=["Crc",4];U.Crc.toString=v;U.Crc.__enum__=U;U.Dist=["Dist",5];U.Dist.toString=v;U.Dist.__enum__=U;U.DistOne=["DistOne",6];U.DistOne.toString=v;U.DistOne.__enum__=U;U.Done=["Done",7];U.Done.toString=v;U.Done.__enum__=U;var Va=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);
this["final"]=!1;this.htools=new Nf;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?U.Head:U.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];for(a=0;19>a;)a++,this.lengths.push(-1);this.window=new Of(c)};g["haxe.zip.InflateImpl"]=Va;Va.__name__=["haxe","zip","InflateImpl"];Va.run=function(a,b){null==b&&(b=65536);for(var c=Y.alloc(b),d=new Mf,e=new Va(a);;){var f=e.readBytes(c,0,b);d.addBytes(c,0,f);if(f<
b)break}return d.getBytes()};Va.prototype={buildFixedHuffman:function(){if(null!=Va.FIXED_HUFFMAN)return Va.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}Va.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return Va.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&
(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=
a&255;this.needed--;this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a[1]){case 0:return a[2];case 1:var b=a[3];a=a[2];return this.applyHuffman(this.getBit()?b:a);case 2:return this.applyHuffman(a[3][this.getBits(a[2])])}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=
e;a[c]=e;c++;break;case 16:e=c+3+this.getBits(2);if(e>b)throw new u("Invalid data");for(;c<e;)a[c]=d,c++;break;case 17:c+=3+this.getBits(3);if(c>b)throw new u("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw new u("Invalid data");break;default:throw new u("Invalid data");}}},inflateLoop:function(){switch(this.state[1]){case 0:var a=this.input.readByte();if(8!=(a&15))throw new u("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw new u("Invalid data");
if(c)throw new u("Unsupported dictionary");this.state=U.Block;return!0;case 4:a=this.window.checksum();if(null==a)return this.state=U.Done,!0;b=Wc.read(this.input);if(!a.equals(b))throw new u("Invalid CRC");this.state=U.Done;return!0;case 7:return!1;case 1:switch(this["final"]=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw new u("Invalid data");this.state=U.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=
this.buildFixedHuffman(),this.huffdist=null,this.state=U.CData,!0;case 2:for(var a=this.getBits(5)+257,b=this.getBits(5)+1,c=this.getBits(4)+4,d=0;d<c;){var e=d++;this.lengths[Va.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(;19>c;)d=c++,this.lengths[Va.CODE_LENGTHS_POS[d]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];d=0;for(e=a+b;d<e;)d++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=U.CData;return!0;default:throw new u("Invalid data");
}case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this["final"]?U.Crc:U.Block),0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=U.CData),0<this.needed;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=U.CData);return 0<
this.needed;case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this["final"]?U.Crc:U.Block;else{b-=257;a=Va.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw new u("Invalid data");this.len=Va.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=Va.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw new u("Invalid data");this.dist=Va.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw new u("Invalid data");
this.state=1==this.dist?U.DistOne:U.Dist}return!0}},__class__:Va};var Ng=function(){};g["haxe.zip.Uncompress"]=Ng;Ng.__name__=["haxe","zip","Uncompress"];Ng.run=function(a,b){return Va.run(new fe(a),b)};var u=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,u)};g["js._Boot.HaxeError"]=u;u.__name__=["js","_Boot","HaxeError"];u.__super__=Error;u.prototype=n(Error.prototype,{__class__:u});var D=function(){};g["js.Boot"]=D;D.__name__=
["js","Boot"];D.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=D.__nativeClassName(a);return null!=a?D.__resolveNativeClass(a):null};D.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;)var f=d++,c=2!=
f?c+(","+D.__string_rec(a[f],b)):c+D.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+D.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(x){return x instanceof u&&(x=x.val),"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==
c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+D.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};D.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||D.__interfLoop(f,b))return!0}return D.__interfLoop(a.__super__,b)};D.__instanceof=function(a,b){if(null==b)return!1;switch(b){case rh:return(a|0)===a;case mh:return"number"==
typeof a;case sh:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Mh:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||D.__interfLoop(D.getClass(a),b))return!0}else{if("object"==typeof b&&D.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==ph&&null!=a.__name__||b==qh&&null!=a.__ename__?!0:a.__enum__==b}};D.__cast=function(a,b){if(D.__instanceof(a,b))return a;throw new u("Cannot cast "+ba.string(a)+
" to "+ba.string(b));};D.__nativeClassName=function(a){a=D.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};D.__isNativeObj=function(a){return null!=D.__nativeClassName(a)};D.__resolveNativeClass=function(a){return kh[a]};var Pf=function(){};g["js.Browser"]=Pf;Pf.__name__=["js","Browser"];Pf.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return b instanceof u&&(b=b.val),null}};var Og=function(){};g["js.html._CanvasElement.CanvasUtil"]=
Og;Og.__name__=["js","html","_CanvasElement","CanvasUtil"];Og.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var Vb=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;){var c=b++;this.a[c]=0}this.byteLength=a}};g["js.html.compat.ArrayBuffer"]=Vb;Vb.__name__=["js","html","compat","ArrayBuffer"];Vb.sliceImpl=function(a,b){var c=
new Nb(this,a,null==b?null:b-a),d=new Lf(c.byteLength);(new Nb(d)).set(c);return d};Vb.prototype={slice:function(a,b){return new Vb(this.a.slice(a,b))},__class__:Vb};var Pg=function(a,b,c){this.buf=a;this.offset=null==b?0:b;this.length=null==c?a.byteLength-this.offset:c;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new u($a.OutsideBounds);};g["js.html.compat.DataView"]=Pg;Pg.__name__=["js","html","compat","DataView"];Pg.prototype={getInt8:function(a){a=this.buf.a[this.offset+
a];return 128<=a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,b){var c=this.getUint16(a,b);return 32768<=c?c-65536:c},getUint16:function(a,b){return b?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,b){var c=this.offset+a,d=this.buf.a[c++],e=this.buf.a[c++],f=this.buf.a[c++],c=this.buf.a[c++];return b?d|e<<8|f<<16|c<<24:c|f<<8|e<<16|d<<24},getUint32:function(a,b){var c=this.getInt32(a,
b);return 0>c?c+4294967296:c},getFloat32:function(a,b){return Tb.i32ToFloat(this.getInt32(a,b))},getFloat64:function(a,b){var c=this.getInt32(a,b),d=this.getInt32(a+4,b);return Tb.i64ToDouble(b?c:d,b?d:c)},setInt8:function(a,b){this.buf.a[a+this.offset]=0>b?b+128&255:b&255},setUint8:function(a,b){this.buf.a[a+this.offset]=b&255},setInt16:function(a,b,c){this.setUint16(a,0>b?b+65536:b,c)},setUint16:function(a,b,c){a+=this.offset;c?(this.buf.a[a]=b&255,this.buf.a[a++]=b>>8&255):(this.buf.a[a++]=b>>
8&255,this.buf.a[a]=b&255)},setInt32:function(a,b,c){this.setUint32(a,b,c)},setUint32:function(a,b,c){a+=this.offset;c?(this.buf.a[a++]=b&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>>24):(this.buf.a[a++]=b>>>24,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b&255)},setFloat32:function(a,b,c){this.setUint32(a,Tb.floatToI32(b),c)},setFloat64:function(a,b,c){b=Tb.doubleToI64(b);c?(this.setUint32(a,b.low),this.setUint32(a,b.high)):(this.setUint32(a,b.high),
this.setUint32(a,b.low))},__class__:Pg};var tc=function(){};g["js.html.compat.Uint8Array"]=tc;tc.__name__=["js","html","compat","Uint8Array"];tc._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new Vb(c)}else if(D.__instanceof(a,Vb))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,
c.byteOffset=0,c.buffer=new Vb(c);else throw new u("TODO "+ba.string(a));c.subarray=tc._subarray;c.set=tc._set;return c};tc._set=function(a,b){if(D.__instanceof(a.buffer,Vb)){if(a.byteLength+b>this.byteLength)throw new u("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new u("set() outside of range");c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new u("TODO");};tc._subarray=
function(a,b){var c=tc._new(this.slice(a,b));c.byteOffset=a;return c};var Qf=function(){this.enabled=!0;this.audio=new G;this.font=new G;this.image=new G;this.version=69669};g["lime.AssetCache"]=Qf;Qf.__name__=["lime","AssetCache"];Qf.prototype={clear:function(a){if(null==a)this.audio=new G,this.font=new G,this.image=new G;else{for(var b=this.audio.keys();b.hasNext();){var c=b.next();P.startsWith(c,a)&&this.audio.remove(c)}for(b=this.font.keys();b.hasNext();)c=b.next(),P.startsWith(c,a)&&this.font.remove(c);
for(b=this.image.keys();b.hasNext();)c=b.next(),P.startsWith(c,a)&&this.image.remove(c)}},__class__:Qf};var Ra=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Void_Void"]=Ra;Ra.__name__=["lime","app","Event_Void_Void"];Ra.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,
0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?c++:this.remove(a[c]),!this.canceled););},__class__:Ra};var H=function(){};g["lime.Assets"]=H;H.__name__=["lime",
"Assets"];H.exists=function(a,b){H.initialize();null==b&&(b="BINARY");var c=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=r.substr(a,d,null);c=H.getLibrary(c);return null!=c?c.exists(d,b):!1};H.getBytes=function(a){H.initialize();var b=a.substring(0,a.indexOf(":")),c;c=a.indexOf(":")+1;c=r.substr(a,c,null);var d=H.getLibrary(b);if(null!=d)if(d.exists(c,"BINARY")){if(d.isLocal(c,"BINARY"))return d.getBytes(c);Ba.log('[Assets] String or Bytes asset "'+a+'" exists, but only asynchronously')}else Ba.log('[Assets] There is no String or Bytes asset with an ID of "'+
a+'"');else Ba.log('[Assets] There is no asset library named "'+b+'"');return null};H.getFont=function(a,b){null==b&&(b=!0);H.initialize();if(b&&H.cache.enabled&&H.cache.font.exists(a))return H.cache.font.get(a);var c=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=r.substr(a,d,null);var e=H.getLibrary(c);if(null!=e)if(e.exists(d,"FONT")){if(e.isLocal(d,"FONT"))return c=e.getFont(d),b&&H.cache.enabled&&H.cache.font.set(a,c),c;Ba.log('[Assets] Font asset "'+a+'" exists, but only asynchronously')}else Ba.log('[Assets] There is no Font asset with an ID of "'+
a+'"');else Ba.log('[Assets] There is no asset library named "'+c+'"');return null};H.getImage=function(a,b){null==b&&(b=!0);H.initialize();if(b&&H.cache.enabled&&H.cache.image.exists(a)){var c=H.cache.image.get(a);if(H.isValidImage(c))return c}var c=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=r.substr(a,d,null);var e=H.getLibrary(c);if(null!=e)if(e.exists(d,"IMAGE")){if(e.isLocal(d,"IMAGE"))return c=e.getImage(d),b&&H.cache.enabled&&H.cache.image.set(a,c),c;Ba.log('[Assets] Image asset "'+
a+'" exists, but only asynchronously')}else Ba.log('[Assets] There is no Image asset with an ID of "'+a+'"');else Ba.log('[Assets] There is no asset library named "'+c+'"');return null};H.getLibrary=function(a){if(null==a||""==a)a="default";return H.libraries.get(a)};H.getPath=function(a){H.initialize();var b=a.substring(0,a.indexOf(":")),c;c=a.indexOf(":")+1;c=r.substr(a,c,null);var d=H.getLibrary(b);if(null!=d){if(d.exists(c,null))return d.getPath(c);Ba.log('[Assets] There is no asset with an ID of "'+
a+'"')}else Ba.log('[Assets] There is no asset library named "'+b+'"');return null};H.getText=function(a){H.initialize();var b=a.substring(0,a.indexOf(":")),c;c=a.indexOf(":")+1;c=r.substr(a,c,null);var d=H.getLibrary(b);if(null!=d)if(d.exists(c,"TEXT")){if(d.isLocal(c,"TEXT"))return d.getText(c);Ba.log('[Assets] String asset "'+a+'" exists, but only asynchronously')}else Ba.log('[Assets] There is no String asset with an ID of "'+a+'"');else Ba.log('[Assets] There is no asset library named "'+b+'"');
return null};H.initialize=function(){H.initialized||(H.registerLibrary("default",new Rd),H.initialized=!0)};H.isValidImage=function(a){return!0};H.registerLibrary=function(a,b){if(H.libraries.exists(a)){if(H.libraries.get(a)==b)return;H.unloadLibrary(a)}null!=b&&b.onChange.add(H.library_onChange);H.libraries.set(a,b)};H.unloadLibrary=function(a){H.initialize();var b=H.libraries.get(a);null!=b&&(H.cache.clear(a+":"),b.onChange.remove(H.library_onChange),b.unload());H.libraries.remove(a)};H.library_onChange=
function(){H.cache.clear();H.onChange.dispatch()};var Rf=function(a){this.gameDeviceCache=new ga;this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;Hc.init()};g["lime._backend.html5.HTML5Application"]=Rf;Rf.__name__=["lime","_backend","html5","HTML5Application"];Rf.prototype={convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 20:return 1073741881;case 144:return 1073741907;
case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 45:return 1073741897;case 46:return 127;case 36:return 1073741898;case 35:return 1073741901;case 33:return 1073741899;case 34:return 1073741902;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;
case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}return a},create:function(a){},exec:function(){window.addEventListener("keydown",l(this,this.handleKeyEvent),!1);window.addEventListener("keyup",l(this,this.handleKeyEvent),
!1);window.addEventListener("focus",l(this,this.handleWindowEvent),!1);window.addEventListener("blur",l(this,this.handleWindowEvent),!1);window.addEventListener("resize",l(this,this.handleWindowEvent),!1);window.addEventListener("beforeunload",l(this,this.handleWindowEvent),!1);CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(a,b,c){return!1});for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=
window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var f=(new Date).getTime(),x=Math.max(0,16-(f-a)),g=window.setTimeout(function(){b(f+x)},x);a=f+x;return g});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();
this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){this.updateGameDevices();this.currentUpdate=(new Date).getTime();this.currentUpdate>=this.nextUpdate&&(this.deltaTime=this.currentUpdate-this.lastUpdate,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=this.parent.__renderers[0]&&(this.parent.__renderers[0].onRender.dispatch(),this.parent.__renderers[0].flip()),this.nextUpdate=0>this.framePeriod?this.nextUpdate=this.currentUpdate:this.currentUpdate+this.framePeriod,
this.lastUpdate=this.currentUpdate);window.requestAnimationFrame(l(this,this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.__windows[0]){var b=this.convertKeyCode(null!=a.keyCode?a.keyCode:a.which),c;c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.__windows[0].onKeyDown.dispatch(b,c),this.parent.__windows[0].onKeyDown.canceled&&a.preventDefault()):(this.parent.__windows[0].onKeyUp.dispatch(b,c),this.parent.__windows[0].onKeyUp.canceled&&
a.preventDefault())}},handleWindowEvent:function(a){if(null!=this.parent.__windows[0])switch(a.type){case "focus":this.parent.__windows[0].onFocusIn.dispatch();this.parent.__windows[0].onActivate.dispatch();break;case "blur":this.parent.__windows[0].onFocusOut.dispatch();this.parent.__windows[0].onDeactivate.dispatch();break;case "resize":a=this.parent.__windows[0].__width;var b=this.parent.__windows[0].__height;this.parent.__windows[0].backend.handleResize();this.parent.__windows[0].__width==a&&
this.parent.__windows[0].__height==b||this.parent.__windows[0].onResize.dispatch(this.parent.__windows[0].__width,this.parent.__windows[0].__height);break;case "beforeunload":this.parent.__windows[0].onClose.dispatch()}},setFrameRate:function(a){this.framePeriod=60<=a?-1:0<a?1E3/a:1E3;return a},updateGameDevices:function(){var a=Ma.__getDeviceData();if(null!=a)for(var b,c,d,e,f,x=0,g=a.length;x<g;)if(b=x++,e=a[b],null!=e){if(!this.gameDeviceCache.h.hasOwnProperty(b)){f=new Sf;f.id=b;f.connected=e.connected;
c=0;for(d=e.buttons.length;c<d;){var k=c++;f.buttons.push(e.buttons[k].value)}c=0;for(d=e.axes.length;c<d;)k=c++,f.axes.push(e.axes[k]);"standard"==e.mapping&&(f.isGamepad=!0);this.gameDeviceCache.h[b]=f;e.connected&&(Ma.__connect(b),f.isGamepad&&Wa.__connect(b))}f=this.gameDeviceCache.h[b];d=Ma.devices.h[b];c=Wa.devices.h[b];if(e.connected){for(var h=0,l=e.buttons.length;h<l;){var m=h++,k=e.buttons[m].value;if(k!=f.buttons[m]){if(6==m)d.onAxisMove.dispatch(e.axes.length,k),null!=c&&c.onAxisMove.dispatch(4,
k);else if(7==m)d.onAxisMove.dispatch(e.axes.length+1,k),null!=c&&c.onAxisMove.dispatch(5,k);else if(0<k?d.onButtonDown.dispatch(m):d.onButtonUp.dispatch(m),null!=c){switch(m){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<k?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}f.buttons[m]=
k}}b=0;for(k=e.axes.length;b<k;)h=b++,e.axes[h]!=f.axes[h]&&(d.onAxisMove.dispatch(h,e.axes[h]),null!=c&&c.onAxisMove.dispatch(h,e.axes[h]),f.axes[h]=e.axes[h])}else f.connected&&(f.connected=!1,Ma.__disconnect(b),Wa.__disconnect(b))}},__class__:Rf};var Sf=function(){this.connected=!0;this.buttons=[];this.axes=[]};g["lime._backend.html5.GameDeviceData"]=Sf;Sf.__name__=["lime","_backend","html5","GameDeviceData"];Sf.prototype={__class__:Sf};var uc=function(){};g["lime._backend.html5.HTML5Mouse"]=uc;
uc.__name__=["lime","_backend","html5","HTML5Mouse"];uc.__cursor=null;uc.__hidden=null;uc.set_cursor=function(a){if(uc.__cursor!=a){if(!uc.__hidden)for(var b=0,c=xb.current.__windows;b<c.length;){var d=c[b];++b;switch(a[1]){case 0:d.backend.element.style.cursor="default";break;case 1:d.backend.element.style.cursor="crosshair";break;case 3:d.backend.element.style.cursor="move";break;case 4:d.backend.element.style.cursor="pointer";break;case 5:d.backend.element.style.cursor="nesw-resize";break;case 6:d.backend.element.style.cursor=
"ns-resize";break;case 7:d.backend.element.style.cursor="nwse-resize";break;case 8:d.backend.element.style.cursor="ew-resize";break;case 9:d.backend.element.style.cursor="text";break;case 10:d.backend.element.style.cursor="wait";break;case 11:d.backend.element.style.cursor="wait";break;default:d.backend.element.style.cursor="auto"}}uc.__cursor=a}return uc.__cursor};var Tf=function(a){this.parent=a};g["lime._backend.html5.HTML5Renderer"]=Tf;Tf.__name__=["lime","_backend","html5","HTML5Renderer"];Tf.prototype=
{create:function(){this.createContext();switch(this.parent.context[1]){case 0:this.parent.window.backend.canvas.addEventListener("webglcontextlost",l(this,this.handleEvent),!1),this.parent.window.backend.canvas.addEventListener("webglcontextrestored",l(this,this.handleEvent),!1)}},createContext:function(){if(null!=this.parent.window.backend.div)this.parent.context=db.DOM(this.parent.window.backend.div),this.parent.type=ha.DOM;else if(null!=this.parent.window.backend.canvas){var a=null,a={alpha:Object.prototype.hasOwnProperty.call(this.parent.window.config,
"background")&&null==this.parent.window.config.background?!0:!1,antialias:Object.prototype.hasOwnProperty.call(this.parent.window.config,"antialiasing")?0<this.parent.window.config.antialiasing:!1,depth:Object.prototype.hasOwnProperty.call(this.parent.window.config,"depthBuffer")?this.parent.window.config.depthBuffer:!0,premultipliedAlpha:!0,stencil:Object.prototype.hasOwnProperty.call(this.parent.window.config,"stencilBuffer")?this.parent.window.config.stencilBuffer:!1,preserveDrawingBuffer:!1},
a=Og.getContextWebGL(this.parent.window.backend.canvas,a);null==a?(this.parent.context=db.CANVAS(this.parent.window.backend.canvas.getContext("2d")),this.parent.type=ha.CANVAS):(m.context=a,this.parent.context=db.OPENGL(m.context),this.parent.type=ha.OPENGL)}},flip:function(){},handleEvent:function(a){switch(a.type){case "webglcontextlost":a.preventDefault();this.parent.context=null;this.parent.onContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onContextRestored.dispatch(this.parent.context)}},
__class__:Tf};var qd=function(a){this.unusedTouchesPool=new od;this.currentTouches=new ga;this.parent=a;null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"element")&&(this.element=a.config.element)};g["lime._backend.html5.HTML5Window"]=qd;qd.__name__=["lime","_backend","html5","HTML5Window"];qd.prototype={close:function(){this.parent.application.removeWindow(this.parent)},create:function(a){this.setWidth=this.parent.__width;this.setHeight=this.parent.__height;this.parent.id=qd.windowID++;
D.__instanceof(this.element,HTMLCanvasElement)?this.canvas=this.element:this.div=window.document.createElement("div");null!=this.canvas?(a=this.canvas.style,a.setProperty("-webkit-transform","translateZ(0)",null),a.setProperty("transform","translateZ(0)",null)):null!=this.div&&(a=this.div.style,a.setProperty("-webkit-transform","translate3D(0,0,0)",null),a.setProperty("transform","translate3D(0,0,0)",null),a.position="relative",a.overflow="hidden",a.setProperty("-webkit-user-select","none",null),
a.setProperty("-moz-user-select","none",null),a.setProperty("-ms-user-select","none",null),a.setProperty("-o-user-select","none",null));0==this.parent.__width&&0==this.parent.__height&&(null!=this.element?(this.parent.set_width(this.element.clientWidth),this.parent.set_height(this.element.clientHeight)):(this.parent.set_width(window.innerWidth),this.parent.set_height(window.innerHeight)),this.parent.set_fullscreen(!0));null!=this.canvas?(this.canvas.width=this.parent.__width,this.canvas.height=this.parent.__height):
(this.div.style.width=this.parent.__width+"px",this.div.style.height=this.parent.__height+"px");this.handleResize();if(null!=this.element){null!=this.canvas?this.element!=this.canvas&&this.element.appendChild(this.canvas):this.element.appendChild(this.div);a="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(var b=0;b<a.length;){var c=a[b];++b;this.element.addEventListener(c,l(this,this.handleMouseEvent),!0)}window.document.addEventListener("dragstart",function(a){return"img"==
a.target.nodeName.toLowerCase()?(a.preventDefault(),!1):!0},!1);this.element.addEventListener("touchstart",l(this,this.handleTouchEvent),!0);this.element.addEventListener("touchmove",l(this,this.handleTouchEvent),!0);this.element.addEventListener("touchend",l(this,this.handleTouchEvent),!0);this.element.addEventListener("gamepadconnected",l(this,this.handleGamepadEvent),!0);this.element.addEventListener("gamepaddisconnected",l(this,this.handleGamepadEvent),!0)}},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":Ma.__connect(a.gamepad.index);
"standard"==a.gamepad.mapping&&Wa.__connect(a.gamepad.index);break;case "gamepaddisconnected":Ma.__disconnect(a.gamepad.index),Wa.__disconnect(a.gamepad.index)}},handleMouseEvent:function(a){var b=0,c=0;if("wheel"!=a.type)switch(null!=this.element?null!=this.canvas?(c=this.canvas.getBoundingClientRect(),b=this.parent.__width/c.width*(a.clientX-c.left),c=this.parent.__height/c.height*(a.clientY-c.top)):null!=this.div?(c=this.div.getBoundingClientRect(),b=a.clientX-c.left,c=a.clientY-c.top):(c=this.element.getBoundingClientRect(),
b=this.parent.__width/c.width*(a.clientX-c.left),c=this.parent.__height/c.height*(a.clientY-c.top)):(b=a.clientX,c=a.clientY),a.type){case "mousedown":this.parent.onMouseDown.dispatch(b,c,a.button);break;case "mouseenter":this.parent.onEnter.dispatch();break;case "mouseleave":this.parent.onLeave.dispatch();break;case "mouseup":this.parent.onMouseUp.dispatch(b,c,a.button);break;case "mousemove":this.parent.onMouseMove.dispatch(b,c)}else this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY)},handleResize:function(){var a=
this.parent.__fullscreen||0==this.setWidth&&0==this.setHeight;if(null!=this.element&&(null==this.div||null!=this.div&&a))if(a){if(this.parent.__width!=this.element.clientWidth||this.parent.__height!=this.element.clientHeight)this.parent.set_width(this.element.clientWidth),this.parent.set_height(this.element.clientHeight),null!=this.canvas?this.element!=this.canvas&&(this.canvas.width=this.element.clientWidth,this.canvas.height=this.element.clientHeight):(this.div.style.width=this.element.clientWidth+
"px",this.div.style.height=this.element.clientHeight+"px")}else{var a=0!=this.setWidth?this.element.clientWidth/this.setWidth:1,b;b=0!=this.setHeight?this.element.clientHeight/this.setHeight:1;var c=this.element.clientWidth,d=this.element.clientHeight,e=0,f=0;a<b?(d=Math.floor(this.setHeight*a),f=Math.floor((this.element.clientHeight-d)/2)):(c=Math.floor(this.setWidth*b),e=Math.floor((this.element.clientWidth-c)/2));null!=this.canvas?this.element!=this.canvas&&(this.canvas.style.width=c+"px",this.canvas.style.height=
d+"px",this.canvas.style.marginLeft=e+"px",this.canvas.style.marginTop=f+"px"):(this.div.style.width=c+"px",this.div.style.height=d+"px",this.div.style.marginLeft=e+"px",this.div.style.marginTop=f+"px")}},handleTouchEvent:function(a){a.preventDefault();var b=null;null!=this.element&&(b=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.element.getBoundingClientRect());var c=this.setWidth,d=this.setHeight;if(0==c||0==d)null!=b?(c=b.width,d=b.height):
d=c=1;for(var e=0,f=a.changedTouches;e<f.length;){var x=f[e];++e;var g=0,k=0;null!=b?(g=c/b.width*(x.clientX-b.left),k=d/b.height*(x.clientY-b.top)):(g=x.clientX,k=x.clientY);switch(a.type){case "touchstart":var h=this.unusedTouchesPool.pop();null==h?h=new rb(g/c,k/d,x.identifier,0,0,x.force,this.parent.id):(h.x=g/c,h.y=k/d,h.id=x.identifier,h.dx=0,h.dy=0,h.pressure=x.force,h.device=this.parent.id);this.currentTouches.h[x.identifier]=h;rb.onStart.dispatch(h);null==this.primaryTouch&&(this.primaryTouch=
h);h==this.primaryTouch&&this.parent.onMouseDown.dispatch(g,k,0);break;case "touchend":h=this.currentTouches.h[x.identifier];if(null!=h){var l=h.x,m=h.y;h.x=g/c;h.y=k/d;h.dx=h.x-l;h.dy=h.y-m;h.pressure=x.force;rb.onEnd.dispatch(h);this.currentTouches.remove(x.identifier);this.unusedTouchesPool.add(h);h==this.primaryTouch&&(this.parent.onMouseUp.dispatch(g,k,0),this.primaryTouch=null)}break;case "touchmove":h=this.currentTouches.h[x.identifier],null!=h&&(l=h.x,m=h.y,h.x=g/c,h.y=k/d,h.dx=h.x-l,h.dy=
h.y-m,h.pressure=x.force,rb.onMove.dispatch(h),h==this.primaryTouch&&this.parent.onMouseMove.dispatch(g,k))}}},resize:function(a,b){},setFullscreen:function(a){return!1},__class__:qd};var he=function(){};g["lime.app.IModule"]=he;he.__name__=["lime","app","IModule"];he.prototype={__class__:he};var gc=function(){this.onExit=new Yc;this.__renderers=[];this.__windows=[]};g["lime.app.Module"]=gc;gc.__name__=["lime","app","Module"];gc.__interfaces__=[he];gc.prototype={addRenderer:function(a){a.onRender.add(function(a,
c){return function(){a(c)}}(l(this,this.render),a));a.onContextLost.add(function(a,c){return function(){a(c)}}(l(this,this.onRenderContextLost),a));a.onContextRestored.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onRenderContextRestored),a));this.__renderers.push(a)},addWindow:function(a){a.onActivate.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowActivate),a));a.onClose.add(function(a,c){return function(){a(c)}}(l(this,this.__onWindowClose),a));a.onCreate.add(function(a,
c){return function(){a(c)}}(l(this,this.onWindowCreate),a));a.onDeactivate.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowDeactivate),a));a.onDropFile.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onWindowDropFile),a));a.onEnter.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowEnter),a));a.onFocusIn.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowFocusIn),a));a.onFocusOut.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowFocusOut),
a));a.onFullscreen.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowFullscreen),a));a.onKeyDown.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onKeyDown),a));a.onKeyUp.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onKeyUp),a));a.onLeave.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowLeave),a));a.onMinimize.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowMinimize),a));a.onMouseDown.add(function(a,c){return function(d,e,f){a(c,
d,e,f)}}(l(this,this.onMouseDown),a));a.onMouseMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onMouseMove),a));a.onMouseMoveRelative.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onMouseMoveRelative),a));a.onMouseUp.add(function(a,c){return function(d,e,f){a(c,d,e,f)}}(l(this,this.onMouseUp),a));a.onMouseWheel.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onMouseWheel),a));a.onMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onWindowMove),
a));a.onResize.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onWindowResize),a));a.onRestore.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowRestore),a));a.onTextEdit.add(function(a,c){return function(d,e,f){a(c,d,e,f)}}(l(this,this.onTextEdit),a));a.onTextInput.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onTextInput),a));if(-1<a.id)this.onWindowCreate(a);this.__windows.push(a)},registerModule:function(a){this.__application=a;a.onExit.add(l(this,this.onModuleExit),
!1,0);a.onUpdate.add(l(this,this.update));for(a=Wa.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}Wa.onConnect.add(l(this,this.__onGamepadConnect));for(a=Ma.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);Ma.onConnect.add(l(this,this.__onJoystickConnect));rb.onStart.add(l(this,this.onTouchStart));rb.onMove.add(l(this,this.onTouchMove));rb.onEnd.add(l(this,this.onTouchEnd))},setPreloader:function(a){null!=this.__preloader&&(this.__preloader.onProgress.remove(l(this,
this.onPreloadProgress)),this.__preloader.onComplete.remove(l(this,this.onPreloadComplete)));this.__preloader=a;if(null==a||a.complete)this.onPreloadComplete();else a.onProgress.add(l(this,this.onPreloadProgress)),a.onComplete.add(l(this,this.onPreloadComplete))},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,b){},onGamepadButtonUp:function(a,b){},onGamepadConnect:function(a){Ba.log("onGamepadConnect (module)")},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,b,
c){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c){},onKeyDown:function(a,b,c){},onKeyUp:function(a,b,c){},onModuleExit:function(a){},onMouseDown:function(a,b,c,d){},onMouseMove:function(a,b,c){},onMouseMoveRelative:function(a,b,c){},onMouseUp:function(a,b,c,d){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,
b){},onRenderContextLost:function(a){},onRenderContextRestored:function(a,b){},onTextEdit:function(a,b,c,d){},onTextInput:function(a,b){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(a){},onWindowClose:function(a){},onWindowCreate:function(a){},onWindowDeactivate:function(a){},onWindowDropFile:function(a,b){},onWindowEnter:function(a){},onWindowFocusIn:function(a){},onWindowFocusOut:function(a){},onWindowFullscreen:function(a){},onWindowLeave:function(a){},
onWindowMove:function(a,b,c){},onWindowMinimize:function(a){},onWindowResize:function(a,b,c){},onWindowRestore:function(a){},render:function(a){},update:function(a){},__onGamepadConnect:function(a){this.onGamepadConnect(a);a.onAxisMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onGamepadAxisMove),a));a.onButtonDown.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onGamepadButtonDown),a));a.onButtonUp.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onGamepadButtonUp),
a));a.onDisconnect.add(function(a,c){return function(){a(c)}}(l(this,this.onGamepadDisconnect),a))},__onJoystickConnect:function(a){this.onJoystickConnect(a);a.onAxisMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onJoystickAxisMove),a));a.onButtonDown.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onJoystickButtonDown),a));a.onButtonUp.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onJoystickButtonUp),a));a.onDisconnect.add(function(a,c){return function(){a(c)}}(l(this,
this.onJoystickDisconnect),a));a.onHatMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onJoystickHatMove),a));a.onTrackballMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onJoystickTrackballMove),a))},__onWindowClose:function(a){this.onWindowClose(a);r.remove(this.__windows,a)},__class__:gc};var xb=function(){this.onUpdate=new Yc;gc.call(this);null==xb.current&&(xb.current=this);this.modules=[];this.windowByID=new ga;this.backend=new Rf(this);this.registerModule(this)};
g["lime.app.Application"]=xb;xb.__name__=["lime","app","Application"];xb.current=null;xb.__super__=gc;xb.prototype=n(gc.prototype,{addModule:function(a){a.registerModule(this);this.modules.push(a);if(0<this.__renderers.length)for(var b=0,c=this.__renderers;b<c.length;){var d=c[b];++b;a.addRenderer(d)}if(0<this.__windows.length)for(b=0,c=this.__windows;b<c.length;)d=c[b],++b,a.addWindow(d);a.setPreloader(this.__preloader)},addRenderer:function(a){gc.prototype.addRenderer.call(this,a);for(var b=0,c=
this.modules;b<c.length;){var d=c[b];++b;d.addRenderer(a)}},createWindow:function(a){gc.prototype.addWindow.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addWindow(a)}null==a.renderer&&(b=new Uf(a),this.addRenderer(b));a.create(this);this.windowByID.h[a.id]=a;a.onCreate.dispatch()},exec:function(){xb.current=this;return this.backend.exec()},onModuleExit:function(a){this.backend.exit()},onWindowClose:function(a){this.removeWindow(a)},removeWindow:function(a){null!=a&&this.windowByID.h.hasOwnProperty(a.id)&&
(r.remove(this.__windows,a),this.windowByID.remove(a.id),a.close(),this.__windows[0]==a&&(this.window=null))},setPreloader:function(a){gc.prototype.setPreloader.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.setPreloader(a)}},__class__:xb});var vc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Dynamic_Void"]=vc;vc.__name__=["lime","app","Event_Dynamic_Void"];vc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=
!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,
c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:vc};var ie=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Float_Float_Int_Void"]=ie;ie.__name__=["lime","app","Event_Float_Float_Int_Void"];ie.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,
0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,f=0;f<d.length&&(d[f](a,b,c),e[f]?f++:this.remove(d[f]),!this.canceled););},__class__:ie};var Zc=function(){this.canceled=
!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Float_Float_Void"]=Zc;Zc.__name__=["lime","app","Event_Float_Float_Void"];Zc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?e++:this.remove(c[e]),!this.canceled););},__class__:Zc};var je=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Int_Float_Void"]=je;je.__name__=["lime","app","Event_Int_Float_Void"];
je.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,
1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?e++:this.remove(c[e]),!this.canceled););},__class__:je};var ke=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Int_Int_Void"]=ke;ke.__name__=["lime","app","Event_Int_Int_Void"];ke.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,
0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?e++:this.remove(c[e]),!this.canceled););},__class__:ke};
var Yc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Int_Void"]=Yc;Yc.__name__=["lime","app","Event_Int_Void"];Yc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:Yc};var Vf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_Int_lime_ui_JoystickHatPosition_Void"]=Vf;Vf.__name__=["lime",
"app","Event_Int_lime_ui_JoystickHatPosition_Void"];Vf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:Vf};var Wf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_String_Int_Int_Void"]=
Wf;Wf.__name__=["lime","app","Event_String_Int_Int_Void"];Wf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:Wf};var le=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_String_Void"]=
le;le.__name__=["lime","app","Event_String_Void"];le.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:le};var Xf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_graphics_RenderContext_Void"]=
Xf;Xf.__name__=["lime","app","Event_lime_graphics_RenderContext_Void"];Xf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:Xf};var Yf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_ui_GamepadAxis_Float_Void"]=Yf;Yf.__name__=["lime","app","Event_lime_ui_GamepadAxis_Float_Void"];Yf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=
!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=
this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?e++:this.remove(c[e]),!this.canceled););},__class__:Yf};var me=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_ui_GamepadButton_Void"]=me;me.__name__=["lime","app","Event_lime_ui_GamepadButton_Void"];me.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,
a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:me};
var Zf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_ui_Gamepad_Void"]=Zf;Zf.__name__=["lime","app","Event_lime_ui_Gamepad_Void"];Zf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},
remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:Zf};var $f=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_ui_Joystick_Void"]=$f;$f.__name__=
["lime","app","Event_lime_ui_Joystick_Void"];$f.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,
1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:$f};var ne=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=ne;ne.__name__=["lime","app","Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"];ne.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=
0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=
!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?e++:this.remove(c[e]),!this.canceled););},__class__:ne};var rd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app.Event_lime_ui_Touch_Void"]=rd;rd.__name__=["lime","app","Event_lime_ui_Touch_Void"];rd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);
this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)M.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?d++:this.remove(b[d]),!this.canceled););},__class__:rd};
var gb=function(a){if(null!=a){null==gb.__threadPool&&(gb.__threadPool=new ag,gb.__threadPool.doWork.add(gb.threadPool_doWork),gb.__threadPool.onComplete.add(gb.threadPool_onComplete),gb.__threadPool.onError.add(gb.threadPool_onError));var b=new oe;b.future=this;gb.__threadPool.queue({promise:b,work:a})}};g["lime.app.Future"]=gb;gb.__name__=["lime","app","Future"];gb.__threadPool=null;gb.threadPool_doWork=function(a){try{var b=a.work();gb.__threadPool.sendComplete({promise:a.promise,result:b})}catch(c){c instanceof
u&&(c=c.val),gb.__threadPool.sendError({promise:a.promise,error:c})}};gb.threadPool_onComplete=function(a){a.promise.complete(a.result)};gb.threadPool_onError=function(a){a.promise.error(a.error)};gb.prototype={onComplete:function(a){null!=a&&(this.__completed?a(this.value):this.__errored||(null==this.__completeListeners&&(this.__completeListeners=[]),this.__completeListeners.push(a)));return this},__class__:gb};var Sa=function(){this.loaded=this.total=0;this.onProgress=new ke;this.onComplete=new Ra;
this.onProgress.add(l(this,this.update))};g["lime.app.Preloader"]=Sa;Sa.__name__=["lime","app","Preloader"];Sa.prototype={create:function(a){},load:function(a,b){for(var c=null,d=H.cache.version,e=0,f=a.length;e<f;){var x=e++,c=a[x];switch(b[x]){case "IMAGE":Sa.images.exists(c)||(x=new Image,Sa.images.set(c,x),x.onload=l(this,this.image_onLoad),x.src=c+"?"+d,this.total++);break;case "BINARY":Sa.loaders.exists(c)||(x=new pe,Sa.loaders.set(c,x),this.total++);break;case "TEXT":Sa.loaders.exists(c)||
(x=new pe,Sa.loaders.set(c,x),this.total++);break;case "FONT":this.total++,this.loadFont(c)}}for(c=Sa.loaders.keys();c.hasNext();)e=c.next(),Sa.loaders.get(e).load(e+"?"+d).onComplete(l(this,this.loader_onComplete));0==this.total&&this.start()},loadFont:function(a){var b=this;if(window.document.fonts&&(nh=window.document.fonts,l(nh,nh.load)))window.document.fonts.load("1em '"+a+"'").then(function(a){b.loaded++;b.onProgress.dispatch(b.loaded,b.total);b.loaded==b.total&&b.start()});else{var c=window.document.createElement("span");
c.innerHTML="giItT1WQy@!-/#";var d=c.style;d.position="absolute";d.left="-10000px";d.top="-10000px";d.fontSize="300px";d.fontFamily="sans-serif";d.fontVariant="normal";d.fontStyle="normal";d.fontWeight="normal";d.letterSpacing="0";window.document.body.appendChild(c);var e=c.offsetWidth;d.fontFamily="'"+a+"', sans-serif";var f=null,x=!1;a=function(){if(c.offsetWidth!=e){if(!x)return x=!0,!1;b.loaded++;null!=f&&window.clearInterval(f);c.parentNode.removeChild(c);c=null;b.onProgress.dispatch(b.loaded,
b.total);b.loaded==b.total&&b.start();return!0}return!1};a()||(f=window.setInterval(a,50))}},start:function(){this.complete=!0;this.onComplete.dispatch()},update:function(a,b){},image_onLoad:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==this.total&&this.start()},loader_onComplete:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==this.total&&this.start()},__class__:Sa};var oe=function(){this.future=new gb};g["lime.app.Promise"]=
oe;oe.__name__=["lime","app","Promise"];oe.prototype={complete:function(a){if(!this.future.__errored&&(this.future.__completed=!0,this.future.value=a,null!=this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__completeListeners=null}return this},error:function(a){if(!this.future.__completed&&(this.future.__errored=!0,this.future.__errorMessage=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<
c.length;){var d=c[b];++b;d(a)}this.future.__errorListeners=null}return this},progress:function(a){if(!this.future.__errored&&!this.future.__completed&&null!=this.future.__progressListeners)for(var b=0,c=this.future.__progressListeners;b<c.length;){var d=c[b];++b;d(a)}return this},__class__:oe};var th=function(){};g["lime.audio.ALAudioContext"]=th;th.__name__=["lime","audio","ALAudioContext"];var uh=function(){};g["lime.audio.ALCAudioContext"]=uh;uh.__name__=["lime","audio","ALCAudioContext"];var Qg=
function(){};g["lime.audio.AudioBuffer"]=Qg;Qg.__name__=["lime","audio","AudioBuffer"];Qg.fromBytes=function(a){return null};var Wb=g["lime.audio.AudioContext"]={__ename__:["lime","audio","AudioContext"],__constructs__:["OPENAL","HTML5","WEB","FLASH","CUSTOM"]};Wb.OPENAL=function(a,b){var c=["OPENAL",0,a,b];c.__enum__=Wb;c.toString=v;return c};Wb.HTML5=function(a){a=["HTML5",1,a];a.__enum__=Wb;a.toString=v;return a};Wb.WEB=function(a){a=["WEB",2,a];a.__enum__=Wb;a.toString=v;return a};Wb.FLASH=function(a){a=
["FLASH",3,a];a.__enum__=Wb;a.toString=v;return a};Wb.CUSTOM=function(a){a=["CUSTOM",4,a];a.__enum__=Wb;a.toString=v;return a};var Hc=function(){};g["lime.audio.AudioManager"]=Hc;Hc.__name__=["lime","audio","AudioManager"];Hc.context=null;Hc.init=function(a){if(null==Hc.context)if(null==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,Hc.context=Wb.WEB(new AudioContext)}catch(b){b instanceof u&&(b=b.val),Hc.context=Wb.HTML5(new bg)}else Hc.context=a};var Rg=function(){};g["lime.audio.AudioSource"]=
Rg;Rg.__name__=["lime","audio","AudioSource"];Rg.prototype={__class__:Rg};var vh=function(){};g["lime.audio.FlashAudioContext"]=vh;vh.__name__=["lime","audio","FlashAudioContext"];var bg=function(){};g["lime.audio.HTML5AudioContext"]=bg;bg.__name__=["lime","audio","HTML5AudioContext"];bg.prototype={__class__:bg};var Sg=function(){};g["lime.graphics.ConsoleRenderContext"]=Sg;Sg.__name__=["lime","graphics","ConsoleRenderContext"];Sg.prototype={__class__:Sg};var wh=function(){};g["lime.graphics.FlashRenderContext"]=
wh;wh.__name__=["lime","graphics","FlashRenderContext"];var ra=function(a,b,c,d,e,f,x){null==e&&(e=-1);null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=d;this.height=e;this.version=0;if(null==x)if(null!=xb.current&&null!=xb.current.__renderers[0])switch(xb.current.__renderers[0].context[1]){case 2:case 1:this.type=wa.CANVAS;break;case 3:this.type=wa.FLASH;break;default:this.type=wa.DATA}else this.type=wa.DATA;else this.type=x;if(null==a){if(0<d&&0<e)switch(this.type[1]){case 0:this.buffer=
new hc(null,d,e);xa.createCanvas(this,d,e);null!=f&&this.fillRect(new sd(0,0,d,e),f);break;case 1:a=d*e*4,a=null!=a?new Nb(a):null,this.buffer=new hc(a,d,e),null!=f&&this.fillRect(new sd(0,0,d,e),f)}}else this.__fromImageBuffer(a)};g["lime.graphics.Image"]=ra;ra.__name__=["lime","graphics","Image"];ra.__base64Encoder=null;ra.fromBytes=function(a,b){if(null==a)return null;var c=new ra;c.__fromBytes(a,b);return c};ra.fromCanvas=function(a){if(null==a)return null;var b=new hc(null,a.width,a.height);
b.set_src(a);a=new ra(b);a.type=wa.CANVAS;return a};ra.fromFile=function(a,b,c){var d=new ra;d.__fromFile(a,b,c);return d};ra.fromImageElement=function(a){if(null==a)return null;var b=new hc(null,a.width,a.height);b.set_src(a);a=new ra(b);a.type=wa.CANVAS;return a};ra.__base64Encode=function(a){var b;switch(a.length%3){case 1:b="==";break;case 2:b="=";break;default:b=""}null==ra.__base64Encoder&&(ra.__base64Encoder=new Jf(Y.ofString(ra.__base64Chars)));return ra.__base64Encoder.encodeBytes(a).toString()+
b};ra.__isJPG=function(a){return 255==a.b[0]&&216==a.b[1]};ra.__isPNG=function(a){return 137==a.b[0]&&80==a.b[1]&&78==a.b[2]&&71==a.b[3]&&13==a.b[4]&&10==a.b[5]&&26==a.b[6]&&10==a.b[7]};ra.__isGIF=function(a){if(71==a.b[0]&&73==a.b[1]&&70==a.b[2]&&56==a.b[3]){var b=a.b[4];return(55==b||57==b)&&97==a.b[5]}return!1};ra.prototype={clone:function(){if(null!=this.buffer){this.type==wa.CANVAS?xa.convertToCanvas(this):xa.convertToData(this);var a=new ra(this.buffer.clone(),this.offsetX,this.offsetY,this.width,
this.height,null,this.type);a.version=this.version;return a}return new ra(null,this.offsetX,this.offsetY,this.width,this.height,null,this.type)},fillRect:function(a,b,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type[1]){case 0:xa.fillRect(this,a,b,c);break;case 1:xa.convertToData(this);if(0==this.buffer.data.length)break;qe.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null!=c)switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>8&255)<<16|(b>>16&255)<<
8|b>>24&255;break;default:b=(b&255)<<24|(b>>24&255)<<16|(b>>16&255)<<8|b>>8&255}else b=(b&255)<<24|(b>>24&255)<<16|(b>>16&255)<<8|b>>8&255;this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),b)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,
b,c){var d=this,e=new Image;e.addEventListener("load",function(a){d.buffer=new hc(null,e.width,e.height);d.buffer.__srcImage=e;d.offsetX=0;d.offsetY=0;d.width=d.buffer.width;d.height=d.buffer.height;null!=c&&c(d)},!1);e.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){var c="";if(ra.__isPNG(a))c="image/png";else if(ra.__isJPG(a))c="image/jpeg";else if(ra.__isGIF(a))c="image/gif";else throw new u("Image tried to read PNG/JPG Bytes, but found an invalid header.");this.__fromBase64(ra.__base64Encode(a),
c,b)},__fromFile:function(a,b,c){var d=this,e=new Image;e.crossOrigin="Anonymous";e.onload=function(a){d.buffer=new hc(null,e.width,e.height);d.buffer.__srcImage=e;d.width=e.width;d.height=e.height;null!=b&&b(d)};e.onerror=function(a){null!=c&&c()};e.src=a},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&xa.convertToData(this);
return this.buffer.data},get_format:function(){return this.buffer.format},set_format:function(a){if(this.buffer.format!=a)switch(this.type[1]){case 1:qe.setFormat(this,a)}return this.buffer.format=a},get_premultiplied:function(){return this.buffer.premultiplied},get_rect:function(){return new sd(0,0,this.width,this.height)},get_src:function(){null==this.buffer.__srcCanvas&&xa.convertToCanvas(this);return this.buffer.get_src()},get_transparent:function(){return null==this.buffer?!1:this.buffer.transparent},
set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:ra,__properties__:{get_rect:"get_rect",set_transparent:"set_transparent",get_transparent:"get_transparent",get_src:"get_src",get_premultiplied:"get_premultiplied",set_format:"set_format",get_format:"get_format",get_data:"get_data"}};var hc=function(a,b,c,d,e){null==d&&(d=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=d;this.format=null==e?0:e;this.premultiplied=
!1;this.transparent=!0};g["lime.graphics.ImageBuffer"]=hc;hc.__name__=["lime","graphics","ImageBuffer"];hc.prototype={clone:function(){var a=new hc(this.data,this.width,this.height,this.bitsPerPixel);if(null!=this.data){var b=this.data.byteLength,b=null!=b?new Nb(b):null;a.data=b;b=this.data;b=null!=b?new Nb(b):null;a.data.set(b)}else null!=this.__srcImageData?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcImageData.width,
a.__srcCanvas.height=this.__srcImageData.height,a.__srcImageData=a.__srcContext.createImageData(this.__srcImageData.width,this.__srcImageData.height),b=new Uint8ClampedArray(this.__srcImageData.data),a.__srcImageData.data.set(b)):null!=this.__srcCanvas?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcCanvas.width,a.__srcCanvas.height=this.__srcCanvas.height,a.__srcContext.drawImage(this.__srcCanvas,0,0)):a.__srcImage=
this.__srcImage;a.bitsPerPixel=this.bitsPerPixel;a.format=this.format;a.premultiplied=this.premultiplied;a.transparent=this.transparent;return a},get_src:function(){return null!=this.__srcImage?this.__srcImage:this.__srcCanvas},set_src:function(a){D.__instanceof(a,Image)?this.__srcImage=a:D.__instanceof(a,HTMLCanvasElement)&&(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a},get_stride:function(){return 4*this.width},__class__:hc,__properties__:{get_stride:"get_stride",
set_src:"set_src",get_src:"get_src"}};var wa=g["lime.graphics.ImageType"]={__ename__:["lime","graphics","ImageType"],__constructs__:["CANVAS","DATA","FLASH","CUSTOM"]};wa.CANVAS=["CANVAS",0];wa.CANVAS.toString=v;wa.CANVAS.__enum__=wa;wa.DATA=["DATA",1];wa.DATA.toString=v;wa.DATA.__enum__=wa;wa.FLASH=["FLASH",2];wa.FLASH.toString=v;wa.FLASH.__enum__=wa;wa.CUSTOM=["CUSTOM",3];wa.CUSTOM.toString=v;wa.CUSTOM.__enum__=wa;var db=g["lime.graphics.RenderContext"]={__ename__:["lime","graphics","RenderContext"],
__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM NONE".split(" ")};db.OPENGL=function(a){a=["OPENGL",0,a];a.__enum__=db;a.toString=v;return a};db.CANVAS=function(a){a=["CANVAS",1,a];a.__enum__=db;a.toString=v;return a};db.DOM=function(a){a=["DOM",2,a];a.__enum__=db;a.toString=v;return a};db.FLASH=function(a){a=["FLASH",3,a];a.__enum__=db;a.toString=v;return a};db.CAIRO=function(a){a=["CAIRO",4,a];a.__enum__=db;a.toString=v;return a};db.CONSOLE=function(a){a=["CONSOLE",5,a];a.__enum__=
db;a.toString=v;return a};db.CUSTOM=function(a){a=["CUSTOM",6,a];a.__enum__=db;a.toString=v;return a};db.NONE=["NONE",7];db.NONE.toString=v;db.NONE.__enum__=db;var Uf=function(a){this.onRender=new Ra;this.onContextRestored=new Xf;this.onContextLost=new Ra;this.window=a;this.backend=new Tf(this);this.window.renderer=this};g["lime.graphics.Renderer"]=Uf;Uf.__name__=["lime","graphics","Renderer"];Uf.prototype={create:function(){this.backend.create()},flip:function(){this.backend.flip()},__class__:Uf};
var ha=g["lime.graphics.RendererType"]={__ename__:["lime","graphics","RendererType"],__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM".split(" ")};ha.OPENGL=["OPENGL",0];ha.OPENGL.toString=v;ha.OPENGL.__enum__=ha;ha.CANVAS=["CANVAS",1];ha.CANVAS.toString=v;ha.CANVAS.__enum__=ha;ha.DOM=["DOM",2];ha.DOM.toString=v;ha.DOM.__enum__=ha;ha.FLASH=["FLASH",3];ha.FLASH.toString=v;ha.FLASH.__enum__=ha;ha.CAIRO=["CAIRO",4];ha.CAIRO.toString=v;ha.CAIRO.__enum__=ha;ha.CONSOLE=["CONSOLE",5];ha.CONSOLE.toString=
v;ha.CONSOLE.__enum__=ha;ha.CUSTOM=["CUSTOM",6];ha.CUSTOM.toString=v;ha.CUSTOM.__enum__=ha;var Tg=function(){};g["lime.graphics.cairo.Cairo"]=Tg;Tg.__name__=["lime","graphics","cairo","Cairo"];Tg.prototype={arc:function(a,b,c,d,e){},clip:function(){},curveTo:function(a,b,c,d,e,f){},identityMatrix:function(){},lineTo:function(a,b){},moveTo:function(a,b){},newPath:function(){},paint:function(){},paintWithAlpha:function(a){},rectangle:function(a,b,c,d){},restore:function(){},save:function(){},setSourceRGB:function(a,
b,c){},get_currentPoint:function(){return null},get_hasCurrentPoint:function(){return!1},set_matrix:function(a){return a},set_source:function(a){return a},__class__:Tg,__properties__:{set_source:"set_source",set_matrix:"set_matrix",get_hasCurrentPoint:"get_hasCurrentPoint",get_currentPoint:"get_currentPoint"}};var Ug={};g["lime.graphics.cairo._CairoImageSurface.CairoImageSurface_Impl_"]=Ug;Ug.__name__=["lime","graphics","cairo","_CairoImageSurface","CairoImageSurface_Impl_"];Ug.fromImage=function(a){return null};
var td={};g["lime.graphics.cairo._CairoPattern.CairoPattern_Impl_"]=td;td.__name__=["lime","graphics","cairo","_CairoPattern","CairoPattern_Impl_"];td.__properties__={set_filter:"set_filter"};td.createForSurface=function(a){return 0};td.set_filter=function(a,b){return b};var Vg={};g["lime.graphics.cairo._CairoSurface.CairoSurface_Impl_"]=Vg;Vg.__name__=["lime","graphics","cairo","_CairoSurface","CairoSurface_Impl_"];Vg.flush=function(a){};var m=function(){};g["lime.graphics.opengl.GL"]=m;m.__name__=
["lime","graphics","opengl","GL"];m.context=null;m.disableVertexAttribArray=function(a){m.context.disableVertexAttribArray(a)};var xa=function(){};g["lime.graphics.utils.ImageCanvasUtil"]=xa;xa.__name__=["lime","graphics","utils","ImageCanvasUtil"];xa.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(xa.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,0,0)),c.__srcImage=null):null==c.__srcCanvas&&null!=
c.data?(a.set_transparent(!0),xa.createCanvas(a,c.width,c.height),xa.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==wa.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=wa.CANVAS};xa.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&xa.convertToCanvas(a);if(null!=c.__srcCanvas&&
null==c.data)xa.createImageData(a),a.type==wa.CANVAS&&(a.dirty=!1);else if(a.type==wa.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)xa.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,c.height);var d=c.__srcImageData.data.buffer,d=null!=d?new Nb(d):null;c.data=d}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=wa.DATA};xa.createCanvas=function(a,b,c){var d=a.buffer;null==d.__srcCanvas&&(d.__srcCanvas=window.document.createElement("canvas"),
d.__srcCanvas.width=b,d.__srcCanvas.height=c,a.get_transparent()?d.__srcContext=d.__srcCanvas.getContext("2d"):(a.get_transparent()||d.__srcCanvas.setAttribute("moz-opaque","true"),d.__srcContext=d.__srcCanvas.getContext("2d",{alpha:!1})),d.__srcContext.mozImageSmoothingEnabled=!1,d.__srcContext.msImageSmoothingEnabled=!1,d.__srcContext.imageSmoothingEnabled=!1)};xa.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,
a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));var b=a.__srcImageData.data.buffer,b=null!=b?new Nb(b):null;a.data=b}};xa.fillRect=function(a,b,c,d){xa.convertToCanvas(a);var e,f;1==d?(d=c>>16&255,e=c>>8&255,f=c&255,c=a.get_transparent()?c>>24&255:255):(d=c>>24&255,e=c>>16&255,f=c>>8&255,c=a.get_transparent()?c&255:255);0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:
(a.buffer.__srcContext.fillStyle="rgba("+d+", "+e+", "+f+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY),a.dirty=!0,a.version++)};xa.sync=function(a,b){a.type==wa.CANVAS?xa.convertToCanvas(a,b):xa.convertToData(a,b)};var qe=function(){};g["lime.graphics.utils.ImageDataUtil"]=qe;qe.__name__=["lime","graphics","utils","ImageDataUtil"];qe.fillRect=function(a,b,c,d){switch(d){case 1:c=(c>>16&255)<<24|(c>>8&255)<<16|(c&255)<<8|c>>24&255;break;
case 2:c=(c>>8&255)<<24|(c>>16&255)<<16|(c>>24&255)<<8|c&255;break}a.get_transparent()||(c=(c>>24&255)<<24|(c>>16&255)<<16|(c>>8&255)<<8|255,255);d=a.buffer.data;if(null!=d){var e=a.buffer.format;a.buffer.premultiplied&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(Db.a16=Db.__alpha16[c&255],c=((c>>24&255)*Db.a16>>16&255)<<24|((c>>16&255)*Db.a16>>16&255)<<16|((c>>8&255)*Db.a16>>16&255)<<8|c&255));b=new cg(a,b);for(var f,x=0,g=b.height;x<g;){f=x++;f=b.offset+b.stride*f;for(var k=0,h=b.width;k<h;){var l=k++,
l=f+4*l;switch(e){case 2:d[l]=c>>8&255;d[l+1]=c>>16&255;d[l+2]=c>>24&255;d[l+3]=c&255;break;case 0:d[l]=c>>24&255;d[l+1]=c>>16&255;d[l+2]=c>>8&255;d[l+3]=c&255;break;case 1:d[l]=c&255,d[l+1]=c>>24&255,d[l+2]=c>>16&255,d[l+3]=c>>8&255}}}a.dirty=!0;a.version++}};qe.setFormat=function(a,b){var c=a.buffer.data;if(null!=c){var d,e=c.length/4|0,f,x,g,k,h,l,m,p,n,t,r,q;switch(a.get_format()){case 0:f=0;x=1;g=2;k=3;break;case 1:f=1;x=2;g=3;k=0;break;case 2:f=2,x=1,g=0,k=3}switch(b){case 0:h=0;l=1;m=2;p=3;
break;case 1:h=1;l=2;m=3;p=0;break;case 2:h=2,l=1,m=0,p=3}for(var u=0;u<e;)d=4*u++,n=c[d+f],t=c[d+x],r=c[d+g],q=c[d+k],c[d+h]=n,c[d+l]=t,c[d+m]=r,c[d+p]=q;a.buffer.format=b;a.dirty=!0;a.version++}};var cg=function(a,b){this.image=a;null==b?this.rect=a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=0),0>b.height&&(b.height=0),this.rect=b);this.stride=a.buffer.get_stride();this.x=Math.ceil(this.rect.x);
this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.offset=this.stride*(this.y+a.offsetY)+4*(this.x+a.offsetX)};g["lime.graphics.utils._ImageDataUtil.ImageDataView"]=cg;cg.__name__=["lime","graphics","utils","_ImageDataUtil","ImageDataView"];cg.prototype={__class__:cg};var re=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=
f};g["lime.math.Matrix3"]=re;re.__name__=["lime","math","Matrix3"];re.prototype={__class__:re};var na={};g["lime.math._Matrix4.Matrix4_Impl_"]=na;na.__name__=["lime","math","_Matrix4","Matrix4_Impl_"];na._new=function(a){if(null==a||16!=a.length)a=na.__identity,a=null!=a?new Float32Array(a):null;return a};na.append=function(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],x=a[1],g=a[5],k=a[9],h=a[13],l=a[2],m=a[6],p=a[10],n=a[14],t=a[3],r=a[7],q=a[11],u=a[15],v=na.get(b,0),w=na.get(b,4),y=na.get(b,8),z=na.get(b,
12),B=na.get(b,1),C=na.get(b,5),D=na.get(b,9),A=na.get(b,13),F=na.get(b,2),H=na.get(b,6),G=na.get(b,10),E=na.get(b,14),I=na.get(b,3),K=na.get(b,7),J=na.get(b,11),L=na.get(b,15);a[0]=c*v+x*w+l*y+t*z;a[1]=c*B+x*C+l*D+t*A;a[2]=c*F+x*H+l*G+t*E;a[3]=c*I+x*K+l*J+t*L;a[4]=d*v+g*w+m*y+r*z;a[5]=d*B+g*C+m*D+r*A;a[6]=d*F+g*H+m*G+r*E;a[7]=d*I+g*K+m*J+r*L;a[8]=e*v+k*w+p*y+q*z;a[9]=e*B+k*C+p*D+q*A;a[10]=e*F+k*H+p*G+q*E;a[11]=e*I+k*K+p*J+q*L;a[12]=f*v+h*w+n*y+u*z;a[13]=f*B+h*C+n*D+u*A;a[14]=f*F+h*H+n*G+u*E;a[15]=
f*I+h*K+n*J+u*L};na.createOrtho=function(a,b,c,d,e,f){var g=1/(b-a),k=1/(d-c),h=1/(f-e);return na._new(function(l){l=[2*g,0,0,0,0,2*k,0,0,0,0,-2*h,0,-(a+b)*g,-(c+d)*k,-(e+f)*h,1];return null!=l?new Float32Array(l):null}(this))};na.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1};na.get=function(a,b){return a[b]};na.set=function(a,b,c){return a[b]=c};var sd=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==
b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};g["lime.math.Rectangle"]=sd;sd.__name__=["lime","math","Rectangle"];sd.prototype={offset:function(a,b){this.x+=a;this.y+=b},__toFlashRectangle:function(){return null},__class__:sd};var dg=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};g["lime.math.Vector2"]=dg;dg.__name__=["lime","math","Vector2"];dg.prototype={__class__:dg};var xh=function(){};g["lime.math.Vector4"]=xh;xh.__name__=["lime","math","Vector4"];var Db=
{};g["lime.math.color._RGBA.RGBA_Impl_"]=Db;Db.__name__=["lime","math","color","_RGBA","RGBA_Impl_"];Db.__alpha16=null;Db.__clamp=null;Db.a16=null;var pe=function(){this.promise=new oe};g["lime.net.HTTPRequest"]=pe;pe.__name__=["lime","net","HTTPRequest"];pe.prototype={load:function(a){var b=this;this.bytesTotal=this.bytesLoaded=0;var c=new XMLHttpRequest;c.addEventListener("progress",l(this,this.request_onProgress),!1);c.onreadystatechange=function(){4==c.readyState&&(null!=c.status&&200<=c.status&&
400>=c.status?(b.bytes=Xb.ofData(c.response),b.promise.complete(b.bytes)):b.promise.error(c.status))};c.open("GET",a,!0);c.responseType="arraybuffer";c.send("");return this.promise.future},request_onProgress:function(a){this.promise.progress(a.loaded/a.total)},__class__:pe};var eg=function(){this.onError=new vc;this.onComplete=new vc;this.doWork=new vc};g["lime.system.BackgroundWorker"]=eg;eg.__name__=["lime","system","BackgroundWorker"];eg.prototype={run:function(a){this.canceled=!1;this.__runMessage=
a;this.__doWork()},sendComplete:function(a){this.canceled||(this.canceled=!0,this.onComplete.dispatch(a))},sendError:function(a){this.canceled||(this.canceled=!0,this.onError.dispatch(a))},__doWork:function(){this.doWork.dispatch(this.__runMessage)},__class__:eg};var se=function(){};g["lime.system.System"]=se;se.__name__=["lime","system","System"];se.embed=Hb.lime.embed=function(a,b,c,d,e){var f=null,f="string"==typeof a?window.document.getElementById(D.__cast(a,String)):null==a?window.document.createElement("div"):
a;a=null;null!=d&&""!=d&&(d=P.replace(d,"#",""),a=-1<d.indexOf("0x")?ba.parseInt(d):ba.parseInt("0x"+d));null==b&&(b=0);null==c&&(c=0);ja.config.windows[0].background=a;ja.config.windows[0].element=f;ja.config.windows[0].width=b;ja.config.windows[0].height=c;ja.config.assetsPrefix=e;ja.create()};se.getTimer=function(){return(new Date).getTime()};var ag=function(a,b){null==b&&(b=1);null==a&&(a=0);this.onError=new vc;this.onComplete=new vc;this.doWork=new vc;this.minThreads=a;this.maxThreads=b;this.currentThreads=
0};g["lime.system.ThreadPool"]=ag;ag.__name__=["lime","system","ThreadPool"];ag.prototype={queue:function(a){this.doWork.dispatch(a)},sendComplete:function(a){this.onComplete.dispatch(a)},sendError:function(a){this.onError.dispatch(a)},__class__:ag};var Sc=function(a){null!=a&&(this.name=a);null!=this.__fontPath&&this.__fromFile(this.__fontPath)};g["lime.text.Font"]=Sc;Sc.__name__=["lime","text","Font"];Sc.prototype={__fromFile:function(a){this.__fontPath=a},__class__:Sc};var Wa=function(a){this.onDisconnect=
new Ra;this.onButtonUp=new me;this.onButtonDown=new me;this.onAxisMove=new Yf;this.id=a;this.connected=!0};g["lime.ui.Gamepad"]=Wa;Wa.__name__=["lime","ui","Gamepad"];Wa.__connect=function(a){if(!Wa.devices.h.hasOwnProperty(a)){var b=new Wa(a);Wa.devices.h[a]=b;Wa.onConnect.dispatch(b)}};Wa.__disconnect=function(a){var b=Wa.devices.h[a];null!=b&&(b.connected=!1);Wa.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};Wa.prototype={get_guid:function(){return Ma.__getDeviceData()[this.id].id},get_name:function(){return Ma.__getDeviceData()[this.id].id},
__class__:Wa,__properties__:{get_name:"get_name",get_guid:"get_guid"}};var Ma=function(a){this.onTrackballMove=new je;this.onHatMove=new Vf;this.onDisconnect=new Ra;this.onButtonUp=new Yc;this.onButtonDown=new Yc;this.onAxisMove=new je;this.id=a;this.connected=!0};g["lime.ui.Joystick"]=Ma;Ma.__name__=["lime","ui","Joystick"];Ma.__connect=function(a){if(!Ma.devices.h.hasOwnProperty(a)){var b=new Ma(a);Ma.devices.h[a]=b;Ma.onConnect.dispatch(b)}};Ma.__disconnect=function(a){var b=Ma.devices.h[a];null!=
b&&(b.connected=!1);Ma.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};Ma.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};Ma.prototype={__class__:Ma};var ib={};g["lime.ui._KeyModifier.KeyModifier_Impl_"]=ib;ib.__name__=["lime","ui","_KeyModifier","KeyModifier_Impl_"];ib.__properties__={get_shiftKey:"get_shiftKey",get_metaKey:"get_metaKey",get_ctrlKey:"get_ctrlKey",get_altKey:"get_altKey"};ib.get_altKey=
function(a){return 0<(a&256)||0<(a&512)};ib.get_ctrlKey=function(a){return 0<(a&64)||0<(a&128)};ib.get_metaKey=function(a){return 0<(a&1024)||0<(a&2048)};ib.get_shiftKey=function(a){return 0<(a&1)||0<(a&2)};var te=function(){};g["lime.ui.Mouse"]=te;te.__name__=["lime","ui","Mouse"];te.__properties__={set_cursor:"set_cursor"};te.set_cursor=function(a){return uc.set_cursor(a)};var N=g["lime.ui.MouseCursor"]={__ename__:["lime","ui","MouseCursor"],__constructs__:"ARROW CROSSHAIR DEFAULT MOVE POINTER RESIZE_NESW RESIZE_NS RESIZE_NWSE RESIZE_WE TEXT WAIT WAIT_ARROW CUSTOM".split(" ")};
N.ARROW=["ARROW",0];N.ARROW.toString=v;N.ARROW.__enum__=N;N.CROSSHAIR=["CROSSHAIR",1];N.CROSSHAIR.toString=v;N.CROSSHAIR.__enum__=N;N.DEFAULT=["DEFAULT",2];N.DEFAULT.toString=v;N.DEFAULT.__enum__=N;N.MOVE=["MOVE",3];N.MOVE.toString=v;N.MOVE.__enum__=N;N.POINTER=["POINTER",4];N.POINTER.toString=v;N.POINTER.__enum__=N;N.RESIZE_NESW=["RESIZE_NESW",5];N.RESIZE_NESW.toString=v;N.RESIZE_NESW.__enum__=N;N.RESIZE_NS=["RESIZE_NS",6];N.RESIZE_NS.toString=v;N.RESIZE_NS.__enum__=N;N.RESIZE_NWSE=["RESIZE_NWSE",
7];N.RESIZE_NWSE.toString=v;N.RESIZE_NWSE.__enum__=N;N.RESIZE_WE=["RESIZE_WE",8];N.RESIZE_WE.toString=v;N.RESIZE_WE.__enum__=N;N.TEXT=["TEXT",9];N.TEXT.toString=v;N.TEXT.__enum__=N;N.WAIT=["WAIT",10];N.WAIT.toString=v;N.WAIT.__enum__=N;N.WAIT_ARROW=["WAIT_ARROW",11];N.WAIT_ARROW.toString=v;N.WAIT_ARROW.__enum__=N;N.CUSTOM=["CUSTOM",12];N.CUSTOM.toString=v;N.CUSTOM.__enum__=N;var rb=function(a,b,c,d,e,f,g){this.x=a;this.y=b;this.id=c;this.dx=d;this.dy=e;this.pressure=f;this.device=g};g["lime.ui.Touch"]=
rb;rb.__name__=["lime","ui","Touch"];rb.prototype={__class__:rb};var $c=function(a){this.onTextInput=new le;this.onTextEdit=new Wf;this.onRestore=new Ra;this.onResize=new ke;this.onMove=new Zc;this.onMouseWheel=new Zc;this.onMouseUp=new ie;this.onMouseMoveRelative=new Zc;this.onMouseMove=new Zc;this.onMouseDown=new ie;this.onMinimize=new Ra;this.onLeave=new Ra;this.onKeyUp=new ne;this.onKeyDown=new ne;this.onFullscreen=new Ra;this.onFocusOut=new Ra;this.onFocusIn=new Ra;this.onEnter=new Ra;this.onDropFile=
new le;this.onDeactivate=new Ra;this.onCreate=new Ra;this.onClose=new Ra;this.onActivate=new Ra;this.config=a;this.__height=this.__width=0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;null!=a&&(Object.prototype.hasOwnProperty.call(a,"width")&&(this.__width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(this.__height=a.height),Object.prototype.hasOwnProperty.call(a,"x")&&(this.__x=a.x),Object.prototype.hasOwnProperty.call(a,"y")&&(this.__y=a.y),Object.prototype.hasOwnProperty.call(a,
"fullscreen")&&(this.__fullscreen=a.fullscreen),Object.prototype.hasOwnProperty.call(a,"borderless")&&(this.__borderless=a.borderless),Object.prototype.hasOwnProperty.call(a,"resizable")&&(this.__resizable=a.resizable),Object.prototype.hasOwnProperty.call(a,"title")&&(this.__title=a.title));this.backend=new qd(this)};g["lime.ui.Window"]=$c;$c.__name__=["lime","ui","Window"];$c.prototype={close:function(){this.backend.close()},create:function(a){this.application=a;this.backend.create(a);null!=this.renderer&&
this.renderer.create()},resize:function(a,b){this.backend.resize(a,b);this.__width=a;this.__height=b},set_fullscreen:function(a){return this.__fullscreen=this.backend.setFullscreen(a)},set_height:function(a){this.resize(this.__width,a);return this.__height},set_width:function(a){this.resize(a,this.__height);return this.__width},__class__:$c,__properties__:{set_width:"set_width",set_height:"set_height",set_fullscreen:"set_fullscreen"}};var Xb=function(a,b){Y.call(this,b)};g["lime.utils.Bytes"]=Xb;
Xb.__name__=["lime","utils","Bytes"];Xb.alloc=function(a){a=Y.alloc(a);return new Xb(a.length,a.b.bufferValue)};Xb.ofData=function(a){a=Y.ofData(a);return new Xb(a.length,a.b.bufferValue)};Xb.ofString=function(a){a=Y.ofString(a);return new Xb(a.length,a.b.bufferValue)};Xb.__super__=Y;Xb.prototype=n(Y.prototype,{__class__:Xb});var ud=function(){};g["lime.utils.GLUtils"]=ud;ud.__name__=["lime","utils","GLUtils"];ud.compileShader=function(a,b){var c=m.context.createShader(b);m.context.shaderSource(c,
a);m.context.compileShader(c);if(0==m.context.getShaderParameter(c,35713))switch(b){case 35633:throw new u("Error compiling vertex shader");case 35632:throw new u("Error compiling fragment shader");default:throw new u("Error compiling unknown shader type");}return c};ud.createProgram=function(a,b){var c=ud.compileShader(a,35633),d=ud.compileShader(b,35632),e=m.context.createProgram();m.context.attachShader(e,c);m.context.attachShader(e,d);m.context.linkProgram(e);if(0==m.context.getProgramParameter(e,
35714))throw new u("Unable to initialize the shader program.");return e};var Wg=function(){};g["lime.utils.compress.Deflate"]=Wg;Wg.__name__=["lime","utils","compress","Deflate"];Wg.decompress=function(a){a=pako.inflateRaw(a.b.bufferValue);return Y.ofData(a)};var Xg=function(){};g["lime.utils.compress.LZMA"]=Xg;Xg.__name__=["lime","utils","compress","LZMA"];Xg.decompress=function(a){return null};var Yg=function(){};g["lime.utils.compress.Zlib"]=Yg;Yg.__name__=["lime","utils","compress","Zlib"];Yg.decompress=
function(a){a=pako.inflate(a.b.bufferValue);return Y.ofData(a)};var fg=function(){var a=new vd,b=M.field(a,y.DecodeReflect("3115118110101"));b.push(M.field(a.root,y.DecodeReflect("3108097118101")));b.push(b[0](y.DecodeReflect("3101109097110116115111104046110111105116097099111108")))};g["lovedna.core.CoreType"]=fg;fg.__name__=["lovedna","core","CoreType"];fg.prototype={__class__:fg};var Yb=function(){};g["lovedna.core.ITrigger"]=Yb;Yb.__name__=["lovedna","core","ITrigger"];Yb.prototype={__class__:Yb};
var Zb=function(a,b){this._handler=a;this._time=b};g["lovedna.core.DelayCall"]=Zb;Zb.__name__=["lovedna","core","DelayCall"];Zb.__interfaces__=[Yb];Zb.Add=function(a,b){if(null==b)return null;var c=Oa.GetInstance();if(0>=a)return b(c.GetTime()),null;var d=new Zb(b,c.GetTime()+a);c.Add(d);return d};Zb.Remove=function(a){Oa.GetInstance().Remove(a)};Zb.prototype={TriggerTick:function(a){return a>=this._time?(this._handler(a),!1):!0},TriggerStart:function(a){},TriggerEnd:function(a){},__class__:Zb};var vd=
function(){this.envs=[];vd.instance=this;this.root=window;this.envs=[]};g["lovedna.core.EnvJS"]=vd;vd.__name__=["lovedna","core","EnvJS"];vd.instance=null;vd.prototype={__class__:vd};var Oa=function(){if(null!=Oa._instance)throw new u("instance error");Oa._instance=this;this._list=[];this._timeScale=1;this._frameTime=16;this._timer=new Vc(this._frameTime);this._timer.run=l(this,this.timerHandler);Ba.log('  `7MM                           `7MM"""Yb. `7MN.   `7MF\'     db      \r\n    MM                             MM    `Yb. MMN.    M      ;MM:     \r\n    MM  ,pW"Wq.`7M\'   `MF\'.gP"Ya   MM     `Mb M YMb   M     ,V^MM.    \r\n    MM 6W\'   `Wb VA   ,V ,M\'   Yb  MM      MM M  `MN. M    ,M  `MM    \r\n    MM 8M     M8  VA ,V  8M""""""  MM     ,MP M   `MM.M    AbmmmqMA   \r\n    MM YA.   ,A9   VVV   YM.    ,  MM    ,dP\' M     YMM   A\'     VML  \r\n  .JMML.`Ybmd9\'     W     `Mbmmd\'.JMMmmmdP\' .JML.    YM .AMA.   .AMMA.');
h.init()};g["lovedna.core.LTrigger"]=Oa;Oa.__name__=["lovedna","core","LTrigger"];Oa._instance=null;Oa.GetInstance=function(){return null==Oa._instance?(new fg,new Oa):Oa._instance};Oa.prototype={GetTime:function(){return Vc.stamp()*this._timeScale},Add:function(a){return-1==r.indexOf(this._list,a,0)?(this._list.push(a),a.TriggerStart(this.GetTime()),!0):!1},Remove:function(a){a=r.indexOf(this._list,a,0);-1!=a&&this._list.splice(a,1)},timerHandler:function(){Q.TriggerTick();var a=this._list.length;
if(!(1>a))for(var b=this.GetTime();0<a--;){var c=this._list[a];c.TriggerTick(b)||(r.remove(this._list,c),c.TriggerEnd(b))}},__class__:Oa};var Ib=function(){z.call(this);this.root=ua.current;this.stage=this.root.stage;this.stage.addEventListener("enterFrame",l(this,this.stage_enterFrame));this.stage.addEventListener("exitFrame",l(this,this.stage_exitFrame));this.stage.addEventListener("activate",l(this,this.stage_activate));this.stage.addEventListener("deactivate",l(this,this.stage_activate));this.stage.addEventListener("resize",
l(this,this.stage_resize))};g["lovedna.core.LoveDNA"]=Ib;Ib.__name__=["lovedna","core","LoveDNA"];Ib._instance=null;Ib.GetInstance=function(){if(null!=Ib._instance)return Ib._instance;Ib._instance=new Ib;return Ib._instance};Ib.__super__=z;Ib.prototype=n(z.prototype,{stage_enterFrame:function(a){this.DispatchEvent(C.ENTER_FRAME)},stage_exitFrame:function(a){this.DispatchEvent(C.EXIT_FRAME)},stage_activate:function(a){this.DispatchEvent("activate"==a.type?C.ACTIVATE:C.DEACTIVATE)},stage_resize:function(a){this.DispatchEvent(C.RESIZE)},
__class__:Ib});var Wd=function(a,b){this._list=[];this._width=a;this._height=b;this._length=a*b;this._v2=W.instance};g["lovedna.ds.Array2"]=Wd;Wd.__name__=["lovedna","ds","Array2"];Wd.__interfaces__=[hb];Wd.prototype={Clear:function(){this._list.splice(0,this._list.length)},Get:function(a,b){return 0>a||0>b||a>=this._width||b>=this._height?null:this._list[0>a||0>b?-1:a>=this._width||b>=this._height?-1:b*this._width+a]},Set:function(a,b,c){0>a||0>b||a>=this._width||b>=this._height||(this._list[0>a||
0>b?-1:a>=this._width||b>=this._height?-1:b*this._width+a]=c)},__class__:Wd};var ic=function(a){null==a&&(a=0);this.value=0;this.value=a};g["lovedna.ds.Bit32"]=ic;ic.__name__=["lovedna","ds","Bit32"];ic.prototype={Open:function(a){this.value|=1<<a;return this},IsOpen:function(a){a=1<<a;return(this.value&a)==a},Clear:function(){this.value=0;return this},__class__:ic};var jc=function(a,b){null==b&&(b=0);null==a&&(a=0);this._dirty=!0;this.Set2(a,b)};g["lovedna.ds.V2"]=jc;jc.__name__=["lovedna","ds",
"V2"];jc.prototype={GetFloat32Array:function(){this._dirty&&(this.update(),this._dirty=!1);return this._data},Set2:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x!=a&&(this.x=a,this._dirty=!0);a;this.y!=b&&(this.y=b,this._dirty=!0);b;this._dirty=!0;return this},update:function(){null==this._data&&(this._data=new Float32Array(2));this._data[0]=this.x;this._data[1]=this.y},__class__:jc};var wc=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);jc.call(this,a,b);this.z!=c&&(this.z=c,this._dirty=
!0);c};g["lovedna.ds.V3"]=wc;wc.__name__=["lovedna","ds","V3"];wc.__super__=jc;wc.prototype=n(jc.prototype,{Set3:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x!=a&&(this.x=a,this._dirty=!0);a;this.y!=b&&(this.y=b,this._dirty=!0);b;this.z!=c&&(this.z=c,this._dirty=!0);c;this._dirty=!0;return this},update:function(){null==this._data&&(this._data=new Float32Array(3));this._data[0]=this.x;this._data[1]=this.y;this._data[2]=this.z},__class__:wc});var kc=function(a,b,c,d){null==d&&
(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);wc.call(this,a,b,c);this.w!=d&&(this.w=d,this._dirty=!0);d};g["lovedna.ds.V4"]=kc;kc.__name__=["lovedna","ds","V4"];kc.__super__=wc;kc.prototype=n(wc.prototype,{Set4:function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.Set3(a,b,c);this.w!=d&&(this.w=d,this._dirty=!0);d;this._dirty=!0;return this},update:function(){null==this._data&&(this._data=new Float32Array(4));this._data[0]=this.x;this._data[1]=this.y;this._data[2]=
this.z;this._data[3]=this.w},__class__:kc});var Na=function(a){this._type=a};g["lovedna.events.LEvent"]=Na;Na.__name__=["lovedna","events","LEvent"];Na.prototype={setTarget:function(a){this._target=a},__class__:Na};var ue=function(a){this._type=a};g["lovedna.events.LTouchEvent"]=ue;ue.__name__=["lovedna","events","LTouchEvent"];ue.__super__=Na;ue.prototype=n(Na.prototype,{get_touch:function(){null==this._touch&&(this._touch=new Ic(0));return this._touch},__class__:ue,__properties__:{get_touch:"get_touch"}});
var C=function(){};g["lovedna.events.Events"]=C;C.__name__=["lovedna","events","Events"];var lc=function(a){this._type=a};g["lovedna.events.LKeyEvent"]=lc;lc.__name__=["lovedna","events","LKeyEvent"];lc.__super__=Na;lc.prototype=n(Na.prototype,{__class__:lc});var Ud=function(a,b,c,d,e){0>e&&(e=0);this._dispatcher=a;this._callback=b;this.priority=c;this._once=d;this._delay=e;this._eventList=new ma};g["lovedna.events.LListener"]=Ud;Ud.__name__=["lovedna","events","LListener"];Ud.prototype={dispatch:function(a){var b=
this;null!=this._callback&&(this._eventList.Add(a),0<this._delay?(null!=this._timer&&this._timer.stop(),this._timer=new Vc(this._delay|0),this._timer.run=function(){b._timer.stop();b._timer=null;b.execute()}):this.execute())},destroy:function(){this._dispatcher=this._callback=null;this._delay=0;this._eventList.Dispose();this._eventList=null},match:function(a){return M.compareMethods(this._callback,a)},execute:function(){if(null!=this._callback&&null!=this._eventList){var a=this._eventList._length;
if(0!=a){for(var b=0;b<a;){var c=b++;this._callback(this._eventList.Get(c))}this._once&&null!=this._dispatcher&&this._dispatcher.RemoveEventListener(this._eventList.Get(0),this._callback);if(null!=this._eventList){for(b=0;b<a;)c=b++,this._eventList.Get(c).customData=null;this._eventList.Clear()}}}},__class__:Ud};var La=function(){};g["lovedna.g3d.Application"]=La;La.__name__=["lovedna","g3d","Application"];La.__properties__={set_targetFPS:"set_targetFPS"};La.GC=function(){La._gcDirty=!0};La.enterFrame=
function(a){};La.exitFrame=function(){1==La._gcDirty&&(La._gcDirty=!1,Zg.gc())};La.set_targetFPS=function(a){return 1>=a?La.targetFPS=1:90<=a?La.targetFPS=90:La.targetFPS=a};var Zd=function(a,b,c){null==c&&(c=-1);null==b&&(b=-1);null==a&&(a=-1);this._dirty=!0;this.distance=this._width=this._height=-1;this._width=a;this._height=b;this._w2=this._width>>1;this._h2=this._height>>1;this.set_distance(c);E.call(this)};g["lovedna.g3d.Canvas2D"]=Zd;Zd.__name__=["lovedna","g3d","Canvas2D"];Zd.__super__=E;Zd.prototype=
n(E.prototype,{ScreenToLocal:function(a){if(null!=this.scene){var b=this.scene.currentCamera;null!=b&&(b.ScreenToCenter(a,!0),a.x*=this._w2*this._canvasScaleX/this.scaleX,a.y*=-this._h2*this._canvasScaleY/this.scaleY)}return a},onConstruct:function(){E.prototype.onConstruct.call(this);1>this._width||1>this._height?this.set_scaleMode(0):this.set_scaleMode(1);this._canvasScaleX=this._canvasScaleY=1;this.position=new A},onEnterFrame:function(){E.prototype.onEnterFrame.call(this);this.updateCanvas()},
onTransformChange:function(){E.prototype.onTransformChange.call(this);this.position.Copy(this._worldPos.Set(this._local.d12,this._local.d13,this._local.d14))},camera_change:function(a){this._dirty=!0},updateCanvas:function(){if(null!=this.scene){var a=this.scene.currentCamera;if(null!=a&&(this._camera!=a&&(this._dirty=!0,null!=this._camera&&this._camera.RemoveEventListener(C.CHANGE,l(this,this.camera_change)),this._camera=a,this._camera.AddEventListener(C.CHANGE,l(this,this.camera_change)),0>=this.distance&&
this.set_distance(this._camera.near+100)),this._dirty)){this._dirty=!1;var b=this.distance;1>b&&(b=1);var c=F.width,d=F.height,e=this._width,f=this._height,g=this.scaleMode;0==g?0<this._width||0<this._height?g=1:(e=c,f=d):(1>this._width&&(e=c),1>this._height&&(f=d));1>e&&(e=c);1>f&&(f=d);this._w2=.5*e;this._h2=.5*f;var d=A.instance1,k=A.instance2;d.x=-1;d.y=-1;d.z=1;d;k.x=1;k.y=1;k.z=1;k;c=a.projectionViewInverseMatrix;c.TransformVec3(d,!0);c.TransformVec3(k,!0);var h=b/a.far,c=B.Abs((k.x-d.x)*h),
h=B.Abs((k.y-d.y)*h),d=c/e,k=h/f;this._canvasScaleX=d;this._canvasScaleY=k;switch(g){case 3:k=d;break;case 4:d=k;break;case 1:e/f>c/h?k=d:d=k}a=a.lookAtRay.At(b);this.set_x(a.x);this.set_y(a.y);this.set_z(a.z);this.DispatchEvent(C.RESIZE);this.set_scaleX(d);this.set_scaleY(k);for(a=this.childCount;0<a--;);}}},set_distance:function(a){a!=this.distance&&(this.distance=a,this._dirty=!0);return this.distance},set_scaleMode:function(a){a!=this.scaleMode&&(this.scaleMode=a,this._dirty=!0);return this.scaleMode},
__class__:Zd,__properties__:n(E.prototype.__properties__,{set_scaleMode:"set_scaleMode",set_distance:"set_distance"})});var Za=function(){this.PickInfo=Za.addPool(new mc(function(){return new ad}));this.Ray=Za.addPool(new mc(function(){return new Sb}));this.Vec2=Za.addPool(new mc(function(){return new W}));this.Vec3=Za.addPool(new mc(function(){return new A}));this._list=Za.list};g["lovedna.g3d.FramePools"]=Za;Za.__name__=["lovedna","g3d","FramePools"];Za._instance=null;Za.GetInstance=function(){return null==
Za._instance?new Za:Za._instance};Za.addPool=function(a){Za.list.push(a);return a};Za.prototype={reset:function(){for(var a=this._list.length;0<a--;)this._list[a].Reset()},__class__:Za};var oa=function(){};g["lovedna.g3d.FrameStats"]=oa;oa.__name__=["lovedna","g3d","FrameStats"];oa.EnterFrame=function(a){oa.transformCount=0;oa.displayCount=0;oa.drawCount=0;oa._frameTime+=a.tick;oa._frameCount++;1<=oa._frameTime&&(oa._frameTime%=1,oa.fps=oa._frameCount,oa._frameCount=0);oa.logicTime=oa.renderTime=
0};oa.ExitFrame=function(){};var Xd=function(){this._waitFrame=!1;this.order=this._lastFrameTime=0;this.frameTime=-1;z.call(this)};g["lovedna.g3d.Scene"]=Xd;Xd.__name__=["lovedna","g3d","Scene"];Xd.__super__=z;Xd.prototype=n(z.prototype,{ChildrenDirty:function(){this._childrenDirty=this._childrenDirty1=!0},AddChild:function(a){this.root.AddChild(a);this._childrenDirty=this._childrenDirty1=!0},RemoveChild:function(a){this.root.RemoveChild(a);this._childrenDirty=this._childrenDirty1=!0},onConstruct:function(){z.prototype.onConstruct.call(this);
this.uuid=Rb.Get();this.name="scene("+this.uuid+")";this.visible=!0;this.time=new Ec;this.root=new E;this._childs=new ma;this._displays=new ma;this._caneras=new ma;this._lastList=new ga;this.camera=new wd;this.root.AddChild(this.camera);this.light=new ve;this.root.AddChild(this.light)},resize:function(){for(var a=this._caneras._length;0<a--;)this._caneras.Get(a).resize();this.DispatchEvent(C.RESIZE)},onAddToView:function(){this._view=qb.GetInstance();this._lastFrameTime=0},enter:function(){this._waitFrame=
this.time.time<this._lastFrameTime+this.frameTime;if(!this._waitFrame){this._lastFrameTime=this.time.time;this.root.time.Multiply(this.time);this.onEnterFrame();var a,b;if(this._childrenDirty){this._childrenDirty=this._childrenDirty1=!1;for(a=this._childs._length;0<a--;)b=this._childs.Get(a),this._lastList.h[b.gid]=b;this._caneras.Clear();this._childs.Clear();this._displays.Clear();this.makelist();for(a=this._lastList.iterator();a.hasNext();){var c=a.next();c.removeScene();this._lastList.remove(c.gid)}this._cameraSortDirty=
!0}oa.transformCount+=this._childs._length;oa.displayCount+=this._displays._length;this._cameraSortDirty&&(this._cameraSortDirty=!1,0<this._caneras._length&&this._caneras.Sort(l(this,this.sortCamera)));a=this._childs._length;for(c=0;c<a;)b=c++,b=this._childs.Get(b),b.enterFrame()}},render:function(){for(var a=this._caneras._length,b,c=0;c<a;)b=c++,b=this._caneras.Get(b),b.visible&&(this.currentCamera=b,this.currentCamera.render(this._waitFrame))},exit:function(){if(!this._waitFrame){var a,b;a=this._childs._length;
for(var c=0;c<a;)b=c++,b=this._childs.Get(b),b.exitFrame();this.onExitFrame();this._childrenDirty=this._childrenDirty1}},onEnterFrame:function(){},onExitFrame:function(){},makelist:function(){for(var a=this.root.childCount,b=0;b<a;){var c=b++;this._addChild(this.root._childs[c])}},_addChild:function(a){if(a.visible){this._childs.Add(a);null==a.scene&&a.addScene(this);this._lastList.remove(a.gid);D.__instanceof(a,wd)?this._caneras.Add(a):D.__instanceof(a,pb)&&this._displays.Add(a);var b=a.GetComponent(we);
if(null!=b){var c=b.GetChildList();a=c._length;for(var d=0;d<a;){var e=d++;this._childs.Add(c.Get(e))}b=b.GetDisplayList();a=b._length;for(c=0;c<a;)d=c++,this._displays.Add(b.Get(d))}else for(b=a.childCount,c=0;c<b;)d=c++,this._addChild(a._childs[d])}},sortCamera:function(a,b){var c=a.order,d=b.order;return c!=d?c<d?-1:1:0},__class__:Xd});var Ia=function(){this._activeLocation=-1;this._hasBind=this._hasDispatch=!1;this.location=-1;this.enable=!1;z.call(this)};g["lovedna.gl.Texture"]=Ia;Ia.__name__=
["lovedna","gl","Texture"];Ia.lost=function(a){Ia._textureID=0;for(var b=Ia._textureMap.iterator();b.hasNext();)b.next().Unload(a)};Ia.__super__=z;Ia.prototype=n(z.prototype,{SetBitmapData:function(a){if(this._image!=a)if(this._image=a,null==this._image)this.enable=!1;else{this.enable=!0;a=this._image.width;var b=this._image.height;this.size.Set2(a,b);this.isPow2=0<a&&0==(a&a-1)&&0<b&&0==(b&b-1);this.DispatchEvent(C.INIT)}},SetData:function(a,b,c){this.size.Set2(b,c);this.isPow2=0<b&&0==(b&b-1)&&
0<c&&0==(c&c-1);this.enable=!0;this.uploadFromUInt8Array(a)},Bind:function(a){this._time=a;this._hasBind||null==this._image||(this.uploadFromBitmapData(this._image),this._hasBind=!0,this._image.dispose(),this._image=null);null==this._texture?this._hasBind&&!this._hasDispatch&&(this._hasDispatch=!0,this.DispatchEvent(C.RESTORE)):0>this.location||Ia._activeID==this.id&&Ia._locationID==this.location||(Ia._activeID=this.id,Ia._locationID=this.location,m.context.activeTexture(33984+this.location),m.context.bindTexture(3553,
this._texture),this._magFilterMode!=this.magFilterMode&&(this._magFilterMode=this.magFilterMode,m.context.texParameteri(3553,10240,this._magFilterMode)),this._minFilterMode!=this.minFilterMode&&(this._minFilterMode=this.minFilterMode,m.context.texParameteri(3553,10241,this._minFilterMode)),this._activeLocation=this.location,this.location=-1)},Unload:function(a){a<=this._time||null==this._texture||(this._hasBind=!1,this.onUnload())},SetFormatRGBA:function(){this._format=6408},onConstruct:function(){z.prototype.onConstruct.call(this);
this.id=Ia._textureID++;this.magFilterMode=this.minFilterMode=9728;this._internalformat=this._internalformat=this._format=6408;this.size=new jc(0,0)},onUnload:function(){null!=this._image&&(this._image.dispose(),this._image=null);this.enable=!1;this._time=0;this.variable=null;this._hasDispatch=this.isPow2=!1;null!=this._texture&&(Ia._textureMap.remove(this.id),-1!=this._activeLocation&&m.context.activeTexture(33984+this._activeLocation),m.context.bindTexture(3553,null),m.context.deleteTexture(this._texture),
this._texture=null)},uploadFromBitmapData:function(a){this.uploadFromUInt8Array(a.image.get_data())},uploadFromUInt8Array:function(a){null==this._texture&&(this._texture=m.context.createTexture(),Ia._textureMap.h[this.id]=this);m.context.bindTexture(3553,this._texture);m.context.texParameteri(3553,10240,9729);m.context.texParameteri(3553,10241,9729);var b=this.size.x|0,c=this.size.y|0;this.isPow2?(m.context.texParameteri(3553,10242,10497),m.context.texParameteri(3553,10243,10497)):(m.context.texParameteri(3553,
10242,33071),m.context.texParameteri(3553,10243,33071));m.context.texImage2D(3553,0,this._internalformat,b,c,0,this._format,5121,a)},__class__:Ia});var Eb=function(){this.depthFunc=this.blendType=0;this.cullFaceSide=1029;this.frontFaceDirection=2304;this.stencilMask=-1;this.depthWrite=!0;Eb._instance=this;this.capabilities=new ga;this._viewPortList=new ma;this._vec4Pool=new mc(function(){return new kc});this._lost=!1;this._time=0;this._renderTextureList=new ma};g["lovedna.gl.GLState"]=Eb;Eb.__name__=
["lovedna","gl","GLState"];Eb._instance=null;Eb.GetInstance=function(){return null==Eb._instance?new Eb:Eb._instance};Eb.prototype={Init:function(){this.depthWrite=!this.depthWrite;1==this.depthWrite?null:(this.depthWrite=!0,m.context.depthMask(!0));this.blendType=0;for(var a=this.capabilities.keys();a.hasNext();){var b=a.next();this.capabilities.remove(b)}this.SetBlendType(2);1==this.capabilities.h[2929]?null:(this.capabilities.h[2929]=!0,m.context.enable(2929));1==this.capabilities.h[32823]?null:
(this.capabilities.h[32823]=!0,m.context.enable(32823));1==this.capabilities.h[2884]?null:(this.capabilities.h[2884]=!0,m.context.enable(2884));this.stencilMask=-1;1==this.stencilMask?null:(this.stencilMask=1,m.context.stencilMask(1));this.frontFaceDirection=-1;2305!=this.frontFaceDirection?(this.frontFaceDirection=2305,m.context.frontFace(2305)):null;this.cullFaceSide=-1;1029!=this.cullFaceSide?(this.cullFaceSide=1029,m.context.cullFace(1029)):null;this.depthFunc=0},SetEnable:function(a,b){this.capabilities.h[a]==
b?null:(this.capabilities.h[a]=b)?m.context.enable(a):m.context.disable(a)},SetDepthWrite:function(a){this.depthWrite==a?null:(this.depthWrite=a,m.context.depthMask(a))},SetBlendType:function(a){if(this.blendType!=a)if(this.blendType=a,1==a)0==this.capabilities.h[3042]?null:(this.capabilities.h[3042]=!1,m.context.disable(3042));else switch(1==this.capabilities.h[3042]?null:(this.capabilities.h[3042]=!0,m.context.enable(3042)),a){case 2:m.context.blendEquationSeparate(32774,32774);m.context.blendFuncSeparate(770,
771,1,771);break;case 3:m.context.blendEquation(32774);m.context.blendFunc(770,1);break;case 5:m.context.blendEquation(32774);m.context.blendFunc(0,768);break;case 4:m.context.blendEquation(32774),m.context.blendFunc(0,769)}},PushViewPort:function(a,b,c,d){this._viewPortList.Add(this._vec4Pool.Get().Set4(a,b,c,d));m.context.viewport(a|0,b|0,c|0,d|0)},PopViewPort:function(){this._viewPortList.Pop();var a=this._viewPortList._length;0<a&&(a=this._viewPortList.Get(a-1),m.context.viewport(a.x|0,a.y|0,
a.z|0,a.w|0))},GetViewPort:function(){return this._viewPortList.Get(this._viewPortList._length-1)},PushRenderTarget:function(a){this._renderTextureList.Add(a);null==a?(m.context.bindFramebuffer(36160,null),m.context.bindTexture(3553,null)):a.Begin(this._time)},PopRenderTarget:function(){var a=this._renderTextureList.Pop();null!=a&&a.End();a=this._renderTextureList._length;1>a||(a=this._renderTextureList.Get(a-1),null!=a&&a.Begin(this._time))},Clear:function(a){0<a&&m.context.clear(a)},EnterFrame:function(a,
b){this._time=a;this._renderTextureList.Clear();R.enterFrame(a,b)},ExitFrame:function(){Ia._activeID=-1;m.context.bindFramebuffer(36160,null);m.context.bindRenderbuffer(36161,null);m.context.bindBuffer(34962,null);m.context.bindBuffer(34963,null);m.context.bindTexture(3553,null);0==this.capabilities.h[2884]?null:(this.capabilities.h[2884]=!1,m.context.disable(2884));1==this.capabilities.h[2929]?null:(this.capabilities.h[2929]=!0,m.context.enable(2929));this.SetBlendType(1);1==this.depthWrite?null:
(this.depthWrite=!0,m.context.depthMask(!0));this._viewPortList.Clear();this._vec4Pool.Reset();R.exitFrame()},Lost:function(a){Ja.lost(a);R.lost(a);this._lost=!0},__class__:Eb};var mc=function(a,b){this._list=[];this._index=0;this._create=a;this._reset=b;this.count=0};g["lovedna.utils.FramePool"]=mc;mc.__name__=["lovedna","utils","FramePool"];mc.prototype={Get:function(){var a=null;this._index<this._list.length?a=this._list[this._index++]:(a=this._create(),this._list[this._index++]=a);null!=this._reset&&
this._reset(a);this.count=this._list.length;return a},Reset:function(){this._index=0},__class__:mc};var Pa=function(){this.a=1;this.r=this.g=this.b=0};g["lovedna.math.Color"]=Pa;Pa.__name__=["lovedna","math","Color"];Pa.__interfaces__=[hb];Pa.RgbToRgba=function(a,b){Pa.instance.set_a(b);Pa.instance.set_rgb(a);return Pa.instance.get_rgba()};Pa.prototype={Dispose:function(){this._data=null},Set:function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set_r(a);this.set_g(b);
this.set_b(c);this.set_a(d);this.dirty=!0;return this},Copy:function(a){if(a==this)return this;this.set_r(a.r);this.set_g(a.g);this.set_b(a.b);this.set_a(a.a);return this},GetFloat32Array:function(){if(null==this._data){var a=[this.r,this.g,this.b,this.a];this._data=null!=a?new Float32Array(a):null}this.dirty&&(this._data[0]=this.r,this._data[1]=this.g,this._data[2]=this.b,this._data[3]=this.a,this.dirty=!1);return this._data},Sub:function(a,b){null==b?(this.set_r(this.r-a.r),this.set_g(this.g-a.g),
this.set_b(this.b-a.b),this.set_a(this.a-a.a)):(this.set_r(a.r-b.r),this.set_g(a.g-b.g),this.set_b(a.b-b.b),this.set_a(a.a-b.a));this.dirty=!0;return this},ToArray:function(a,b){null==b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;a[b+3]=this.a;return a},set_r:function(a){a!=this.r&&(this.r=a,this.dirty=!0);return a},set_g:function(a){a!=this.g&&(this.g=a,this.dirty=!0);return a},set_b:function(a){a!=this.b&&(this.b=a,this.dirty=!0);return a},set_a:function(a){a!=this.a&&(this.a=a,this.dirty=!0);
return a},get_rgba:function(){return(255*this.r|0)<<24|(255*this.g|0)<<16|(255*this.b|0)<<8|255*this.a|0},set_rgba:function(a){this.set_r(.00392156863*(a>>24&255));this.set_g(.00392156863*(a>>16&255));this.set_b(.00392156863*(a>>8&255));this.set_a(.00392156863*(a&255));this.dirty=!0;return a},set_rgb:function(a){this.set_r(.00392156863*(a>>16&255));this.set_g(.00392156863*(a>>8&255));this.set_b(.00392156863*(a&255));this.dirty=!0;return a},__class__:Pa,__properties__:{set_rgb:"set_rgb",set_rgba:"set_rgba",
get_rgba:"get_rgba",set_a:"set_a",set_b:"set_b",set_g:"set_g",set_r:"set_r"}};var xe=function(a,b){this.stencilBuffer=!1;Ia.call(this);this.Resize(a,b);this.clearMask=17664;this._state=Eb.GetInstance()};g["lovedna.gl.RenderTexture"]=xe;xe.__name__=["lovedna","gl","RenderTexture"];xe.__super__=Ia;xe.prototype=n(Ia.prototype,{Resize:function(a,b){4>a&&(a=4);null==b?b=a:4>b&&(b=4);if(this.size.x!=a||this.size.y!=b)this._resized=!0,this.size.Set2(a,b);this.enable=!0},Begin:function(a){this._resized&&
(this._resized=!1,null!=this._frameBuffer&&(m.context.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),null!=this._renderBuffer&&(m.context.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null));if(!(1>this.size.x||1>this.size.y)){if(null==this._frameBuffer){a=this.size.x|0;var b=this.size.y|0;this._frameBuffer=m.context.createFramebuffer();m.context.bindFramebuffer(36160,this._frameBuffer);this._renderBuffer=m.context.createRenderbuffer();m.context.bindRenderbuffer(36161,this._renderBuffer);
this.stencilBuffer?(m.context.renderbufferStorage(36161,34041,a,b),m.context.framebufferRenderbuffer(36160,33306,36161,this._renderBuffer)):(m.context.renderbufferStorage(36161,33189,a,b),m.context.framebufferRenderbuffer(36160,36096,36161,this._renderBuffer));null==this._texture&&(this._texture=m.context.createTexture());this.enable=!0;m.context.bindTexture(3553,this._texture);this._hasBind=!0;m.context.texImage2D(3553,0,6408,a,b,0,6408,5121,null);m.context.texParameteri(3553,10240,9729);m.context.texParameteri(3553,
10241,9729);0<a&&0==(a&a-1)?m.context.texParameteri(3553,10242,10497):m.context.texParameteri(3553,10242,33071);0<b&&0==(b&b-1)?m.context.texParameteri(3553,10243,10497):m.context.texParameteri(3553,10243,33071);m.context.framebufferTexture2D(36160,36064,3553,this._texture,0);m.context.bindFramebuffer(36160,null);m.context.bindRenderbuffer(36161,null)}m.context.bindFramebuffer(36160,this._frameBuffer);m.context.bindTexture(3553,this._texture);this.location=0}},End:function(){m.context.bindFramebuffer(36160,
null)},ReadPixels:function(a,b,c,d,e,f,g){null==g&&(g=5121);null==f&&(f=6408);this._state.PushRenderTarget(this);m.context.readPixels(a,b,c,d,f,g,e);this._state.PopRenderTarget()},onUnload:function(){Ia.prototype.onUnload.call(this);null!=this._frameBuffer&&(m.context.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null);null!=this._renderBuffer&&(m.context.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null)},__class__:xe});var F=function(){};g["lovedna.g3d.Screen"]=F;F.__name__=
["lovedna","g3d","Screen"];F._screenDrawer=null;F._screenTextureData=null;F.Screenshot=function(){if(!F.renderToTexture)return null;var a=F.renderTexture.size.x|0,b=F.renderTexture.size.y|0,c=a*b*4;null==F._screenTextureData?(c=null!=c?new Nb(c):null,F._screenTextureData=c):c!=F._screenTextureData.length&&(c=null!=c?new Nb(c):null,F._screenTextureData=c);F.renderTexture.ReadPixels(0,0,a,b,F._screenTextureData);return F._screenTextureData};F.ScreenshotToTexture=function(){F._screenTexture.SetFormatRGBA();
F._screenTexture.SetData(F._screenTextureData,F.renderTexture.size.x|0,F.renderTexture.size.y|0);return F._screenTexture};F.setSize=function(a,b){F.width=a|0;F.height=b|0;var c;c=F.height<F.width?2:1;F.currentOrientation!=c&&(F.currentOrientation=c,qb.GetInstance().DispatchEvent(C.ORIENTATION_CHANGE));c=F.width;var d=F.height;c>F.maxRenderTextureSize&&(c=F.maxRenderTextureSize);d>F.maxRenderTextureSize&&(d=F.maxRenderTextureSize);F.renderTexture.Resize(c,d);null==F._screenDrawer&&(F._screenDrawer=
new gg)};var qb=function(){this._frameTime=new kc;z.call(this);this._ins=!1;null==qb._instance&&(qb._instance=this,this._ins=!0)};g["lovedna.g3d.View"]=qb;qb.__name__=["lovedna","g3d","View"];qb.__interfaces__=[Yb];qb._instance=null;qb.GetInstance=function(){return null==qb._instance?new qb:qb._instance};qb.__super__=z;qb.prototype=n(z.prototype,{TriggerTick:function(a){if(this._resizeDirty){this._resizeDirty=!1;a=this._stage.stageWidth;var b=this._stage.stageHeight;F.setSize(a,b);if(this._stageWidth!=
a||this._stageHeight!=b)for(this._stageWidth=a|0,this._stageHeight=b|0,this._glview.set_width(this._stageWidth),this._glview.set_height(this._stageHeight),this._i=this._sceneCount;0<this._i--;)this._sceneList[this._i].resize()}this._lostedDirty&&(this._lostedDirty=!1,this._haslosted&&(this._state.Lost(this._currentTime.time),lb.GetInstance().lost(this._currentTime),La.GC()),this._lost||lb.GetInstance().restore(this._currentTime));if(this._sceneDirty)for(this._sceneDirty=!1,this._sceneList.sort(l(this,
this.sortScene)),a=this._sceneList.length;0<a--;)b=this._sceneList[a],this._sceneMap.exists(b.uuid)||(this._sceneMap.set(b.uuid,!0),b.onAddToView());this._initDirty&&(this._initDirty=!1,this.init(),this.DispatchEvent(C.INIT));return this._resizeDirty||this._sceneDirty?!0:!1},sceneDirty:function(){this._sceneDirty||(this._sceneDirty=!0,this._trigger.Add(this))},AddScene:function(a){-1==r.indexOf(this._sceneList,a,0)&&(this._sceneList.push(a),this._sceneCount=this._sceneList.length,this.sceneDirty())},
TriggerStart:function(a){},TriggerEnd:function(a){},onConstruct:function(){z.prototype.onConstruct.call(this);this._trigger=Oa.GetInstance();this._init=this._visible=!1;this._active=!0;this._stageWidth=this._stageHeight=0;this._sceneList=[];this._lost=this._haslosted=!1;this._sceneCount=0;this._sceneDirty=!0;this.backGround=new Pa;this.backGround.set_a(1);this.backGround.set_rgb(11259375);this._currentTime=new Ec;this._framePools=Za.GetInstance()},onLateConstruct:function(){z.prototype.onLateConstruct.call(this);
if(this._ins)if(Jc.get_isSupported()){this._sceneMap=new G;var a=Ib.GetInstance();this._stage=a.stage;a.AddEventListener(C.ACTIVATE,l(this,this.stage_activate));a.AddEventListener(C.DEACTIVATE,l(this,this.stage_activate));a.AddEventListener(C.RESIZE,l(this,this.stage_resize));this._stage.addEventListener("glcontextlost",l(this,this.stage_contextLost));this._stage.addEventListener("glcontextrestored",l(this,this.stage_contextLost));this._glview=new Jc;this._glview.addEventListener("addedToStage",l(this,
this.this_addedToStage));this._glview.addEventListener("removedFromStage",l(this,this.this_addedToStage));a.root.addChild(this._glview);this._trigger.Add(this);this._state=Eb.GetInstance();Ua.Build()}else Ba.log("not support gl")},this_addedToStage:function(a){if(this._visible="addedToStage"==a.type)this._time=this._trigger.GetTime(),0==this._init&&(this._resizeDirty=this._initDirty=this._init=this._enable=!0,this._trigger.Add(this))},stage_activate:function(a){(this._active=a._type==C.ACTIVATE._type)?
(this._time=this._trigger.GetTime(),this._resizeDirty=!0,this._trigger.Add(this)):this._stage.set_frameRate(3)},stage_resize:function(a){this._resizeDirty=!0;this._trigger.Add(this)},stage_contextLost:function(a){(this._lost="glcontextlost"==a.type)&&!this._haslosted&&(this._lostedDirty=this._haslosted=!0,this._trigger.Add(this));!this._lost&&this._haslosted&&(this._haslosted=!1,this._lostedDirty=!0,this._trigger.Add(this),this._state.Init())},init:function(){this._time=this._trigger.GetTime();this._glview.set_render(l(this,
this.render));this._state.Init();this._frameTime=new kc},sortScene:function(a,b){var c=a.order,d=b.order;return c>d?-1:c<d?1:0},render:function(a){if(this._visible){a=this._trigger.GetTime();var b=a-this._time,b=b*La.timeScale;this._time=a;.1<b&&(b%=.1);this._currentTime.set(b,this._time);Ec.targetTick=1/La.targetFPS;if(!La.pause){oa.EnterFrame(this._currentTime);this._framePools.reset();La.enterFrame(this._currentTime);if(this._active&&!this._lost){this._stage.set_frameRate(La.targetFPS);this._frameTime.Set4(this._time,
b,Math.sin(this._time),Math.cos(this._time));R.SetFrameUniform("_Time",this._frameTime.GetFloat32Array());this._state.EnterFrame(this._time,b);this._state.PushRenderTarget(null);this._state.PushViewPort(0,0,this._stageWidth,this._stageHeight);m.context.clearDepth(1);m.context.colorMask(!0,!0,!0,!0);m.context.clearColor(0,0,0,1);this._state.SetDepthWrite(!0);m.context.clear(17664);if(0<this._sceneCount){lb.GetInstance().onEnterFrame(this._currentTime);for(this._i=this._sceneCount;0<this._i--;)a=this._sceneList[this._i],
a.visible&&(a.time.Multiply(this._currentTime),a.enter());for(this._i=this._sceneCount;0<this._i--;)a=this._sceneList[this._i],a.visible&&a.render();for(this._i=this._sceneCount;0<this._i--;)this._sceneList[this._i].exit();lb.GetInstance().onExitFrame(this._currentTime)}this._state.ExitFrame()}oa.logicTime=this._trigger.GetTime()-this._time-oa.renderTime;oa.ExitFrame();E.EndFrame();if(null!=this.onUpdate)this.onUpdate();La.exitFrame()}}},__class__:qb});var gg=function(){this._screenGeometry=new Da(Da.GetComponentValue([0,
3]));this._screenGeometry.AddQuad([-1,-1,0,1,-1,0,-1,1,0,1,1,0],[0,0,1,0,0,1,1,1]);this._screenGeometry.AddIndex(0,1,2);this._screenGeometry.AddIndex(1,3,2);this._screenGeometry.Build();this._mesh=new Fc;this._mesh.FromGeometry(this._screenGeometry);this._material=new ye;this._trigger=Oa.GetInstance()};g["lovedna.g3d._helper.ScreenDrawer"]=gg;gg.__name__=["lovedna","g3d","_helper","ScreenDrawer"];gg.prototype={draw:function(){var a=this._trigger.GetTime(),b=this._material.shader.program;b.Bind(a);
b.SetTexture("_Texture0",F.renderTexture);this._mesh.Bind(a);this._mesh.SetBufferLocation(0,b.GetVariable("_InPosition").attribute);a=b.GetVariable("_InUv").attribute;-1!=a&&this._mesh.SetBufferLocation(3,a);b.Apply();m.context.drawElements(4,this._mesh.count,5123,0);b.UnBind();this._mesh.UnBind()},__class__:gg};var wd=function(){this._width=this._height=this._widthHalf=this._heightHalf=this._time=0;this._cameraDirty=!0;this.ratio=1;this.focusDistance=0;this.fov=60;this.far=2E3;this.near=50;this.focusX=
this.focusY=this.focusZ=0;this.type=1;this.order=0;this.auto=!1;E.call(this)};g["lovedna.g3d.camera.Camera"]=wd;wd.__name__=["lovedna","g3d","camera","Camera"];wd.__super__=E;wd.prototype=n(E.prototype,{ScreenToWorld:function(a,b,c){a=B.LerpTo(-this._widthHalf,this._widthHalf,-1,1,a-this._widthHalf);b=B.LerpTo(-this._heightHalf,this._heightHalf,1,-1,b-this._heightHalf);var d=this.pools.Vec3.Get(),e=this.pools.Vec3.Get();d.x=a;d.y=b;d.z=-1;d;e.x=a;e.y=b;e.z=1;e;this.projectionViewInverseMatrix.TransformVec3(d,
!0);this.projectionViewInverseMatrix.TransformVec3(e,!0);e.x-=d.x;e.y-=d.y;e.z-=d.z;e.Scale(c/(this.far-this.near)).Add(d,null);return e},GetZByWidth:function(a){var b=this.pools.Vec3.Get(),c=this.pools.Vec3.Get();b.x=-1;b.y=-1;b.z=-1;b;c.x=1;c.y=1;c.z=1;c;this.projectionViewInverseMatrix.TransformVec3(b,!0);this.projectionViewInverseMatrix.TransformVec3(c,!0);a/=c.x-b.x;c.Copy(this.lookAtRay.direction).Scale(a).Add(this._worldPos.Set(this._local.d12,this._local.d13,this._local.d14),null);return c.z},
ScreenToCenter:function(a,b){null==b&&(b=!1);a.x-=this._widthHalf;a.y=this._heightHalf-a.y;b&&(a.x/=this._widthHalf,a.y/=this._heightHalf)},onConstruct:function(){E.prototype.onConstruct.call(this);this.name="camera"+this.gid;this.layers=new ic(-1);this.frustum=new ze;this.position=new wc;this.lookAtRay=new Sb;this.projectionMatrix=new Ta;this.viewMatrix=new Ta;this.projectionViewMatrix=new Ta;this.projectionViewInverseMatrix=new Ta;this.viewInverseMatrix=new Ta;this._V3_0=new A;this._V3_1=new A;
this._cameraDirty=!0;this.set_z(1E3);this.backGround=new Pa;this.backGround.set_rgb(11259375);this._collector=$b.GetInstance();this.mouseEnable=!1;this._renderSystem=ac.GetInstance();this.pickSystem=new Ae(this);this._displayList=this._collector._displayList;this._pickList=this._collector._pickList;this._state=Eb.GetInstance()},onDestroy:function(){E.prototype.onDestroy.call(this);this.frustum.Dispose();this.position=this.frustum=null;this.lookAtRay.Dispose();this.lookAtRay=null;this.projectionMatrix.Dispose();
this.projectionMatrix=null;this.viewMatrix.Dispose();this.viewMatrix=null;this.viewMatrix.Dispose();this.viewMatrix=null;this.projectionViewMatrix.Dispose();this.projectionViewMatrix=null;this.projectionViewInverseMatrix.Dispose();this.projectionViewInverseMatrix=null;this.viewInverseMatrix.Dispose();this._V3_1=this._V3_0=this.viewInverseMatrix=null;this.backGround.Dispose();this._collector=this.backGround=null;this.pickSystem.Dispose();this._state=this.layers=this.pickSystem=null},onAddToScene:function(){E.prototype.onAddToScene.call(this);
this.resize()},onTransform:function(){E.prototype.onTransform.call(this);this.updateCamera()},onTransformChange:function(){E.prototype.onTransformChange.call(this);this._cameraDirty=!0},onEnterFrame:function(){if(this.auto){this._time+=this.time.tick;var a=300*Math.cos(this._time),b=300*Math.sin(this._time);this.set_x(b);this.set_z(.8*a)}E.prototype.onEnterFrame.call(this)},updateCamera:function(){if(this._cameraDirty){this._cameraDirty=!1;var a=this._worldPos.Set(this._local.d12,this._local.d13,
this._local.d14);this.position.Set3(a.x,a.y,a.z);this._V3_0.Copy(a);this._V3_1.Set(this.focusX,this.focusY,this.focusZ);this.viewMatrix.LookAt(this._V3_0,this._V3_1);this.lookAtRay.Set(this._V3_0,this._V3_1);this._V3_1.Sub(this._V3_0,null);this.focusDistance=this._V3_1.get_length();1==this.type?this.projectionMatrix.Perspective(this.fov,this.ratio,this.near,this.far):this.projectionMatrix.Orthographic(-this._widthHalf,this._widthHalf,this._heightHalf,-this._heightHalf,this.near,this.far);this.viewInverseMatrix.Copy(this.viewMatrix);
this.viewInverseMatrix.Inverse();this.projectionViewMatrix.Copy(this.projectionMatrix);this.projectionViewMatrix.Append(this.viewMatrix);this.frustum.FromMatrix(this.projectionViewMatrix);this.projectionViewInverseMatrix.Copy(this.projectionMatrix);this.projectionViewInverseMatrix.Append(this.viewMatrix);this.projectionViewInverseMatrix.Inverse();this._V3_0.Set(-1,-1,-1);this._V3_1.Set(1,1,1);this.projectionViewInverseMatrix.TransformVec3(this._V3_0,!0);this.projectionViewInverseMatrix.TransformVec3(this._V3_1,
!0);this._frustumDistance=this._V3_1.z-this._V3_0.z;this.DispatchEvent(C.CHANGE);this.GetZByWidth(640)}},resize:function(){var a=F.width,b=F.height;if(a!=this._width||b!=this._height)this._width=a,this._height=b,this._widthHalf=.5*this._width,this._heightHalf=.5*this._height,this.ratio=this._width/this._height,this._cameraDirty=!0,this.DispatchEvent(C.RESIZE)},render:function(a){null==a&&(a=!1);a||(this.pickSystem.touchManager.Reset(),this.pickSystem.touchManager.AutoTrigger(!1),this._collector.collect(this,
this.scene._displays));a=this.renderTarget;null==a&&F.renderToTexture&&(a=F.renderTexture);null!=a?(this._state.PushRenderTarget(a),this._state.PushViewPort(0,0,a.size.x,a.size.y)):this._state.PushRenderTarget(null);m.context.clearDepth(1);m.context.colorMask(!0,!0,!0,!0);var b=F.backgroundColor;m.context.clearColor(b.r,b.g,b.b,b.a);null!=a?this._state.Clear(a.clearMask):m.context.clear(17664);this._renderSystem.Render(this._displayList,this);this._state.PopRenderTarget();this._state.PopViewPort();
this.pickSystem.pick(this._pickList);F.renderToTexture&&null!=a&&a!=this.renderTarget&&this.drawToScreen()},drawToScreen:function(){this._state.PushRenderTarget(null);this._state.PushViewPort(0,0,F.width,F.height);m.context.clearDepth(1);m.context.colorMask(!0,!0,!0,!0);m.context.clearColor(F.backgroundColor.r,F.backgroundColor.g,F.backgroundColor.b,0);m.context.clear(17664);F._screenDrawer.draw();this._state.PopRenderTarget();this._state.PopViewPort()},__class__:wd});var $b=function(){this._queue=
new ga;this._ququeList=new ma;$b._instance=this;this._sortHandler=new ga;this.SetRenderingModeSort(0,l(this,this.opaqueSort));this.SetRenderingModeSort(200,l(this,this.transparentSort));this.SetRenderingModeSort(100,l(this,this.opaqueSort));this._displayList=new ma;this._pickList=new ma};g["lovedna.g3d.collector.DisplayCollector"]=$b;$b.__name__=["lovedna","g3d","collector","DisplayCollector"];$b._instance=null;$b.GetInstance=function(){return null==$b._instance?new $b:$b._instance};$b.prototype=
{SetRenderingModeSort:function(a,b){null!=b&&(this._sortHandler.h[a]=b)},GetRenderingModeSort:function(a){return this._sortHandler.h[a]},collect:function(a,b){this._displayList.Clear();this._pickList.Clear();this._ququeList.Clear();for(var c=this._queue.keys();c.hasNext();){var d=c.next();this._queue.h[d].Clear()}for(var c=b._length,d=a.layers,e=a.frustum,f,g,k=a.mouseEnable&&a.pickSystem.isPicking(),h=null!=a.material,m=0;m<c;)f=m++,f=b.Get(f),f.userCull||!d.IsOpen(f.layer)||!f.isReady()||f.cameraCull&&
!f.InFrustum(e)||(k&&f.mouseEnable&&this._pickList.Add(f),g=f.renderSetting,h?(g.material=a.material,this._displayList.Add(f)):(g.material=f.GetMaterial(),g.camera=a,g.distanceToCamera=f.DistanceToCamera(a),this._queue.h.hasOwnProperty(f.queueID)?g=this._queue.h[f.queueID]:(g=new hg,this._queue.h[f.queueID]=g),g.Add(f)));if(h)return this._displayList;for(c=this._queue.keys();c.hasNext();)d=c.next(),this._ququeList.Add(d);1<this._ququeList._length&&this._ququeList.Sort(l(this,this.sortHandler));c=
this._ququeList._length;if(0<c)for(d=0;d<c;)e=d++,this._queue.get(this._ququeList.Get(e)).Sort();return this._displayList},addDisplay:function(a){this._displayList.Add(a)},sortHandler:function(a,b){return a!=b?a<b?-1:1:0},opaqueSort:function(a,b){var c=a.order,d=b.order;if(c!=d)return c>d?1:-1;c=a.GetMaterial().get_id();d=b.GetMaterial().get_id();return c!=d?c>d?1:-1:0},transparentSort:function(a,b){var c=a.order,d=b.order;if(c!=d)return c>d?1:-1;c=a.renderSetting.distanceToCamera;d=b.renderSetting.distanceToCamera;
if(c!=d)return c>d?1:-1;c=a.GetMaterial().get_id();d=b.GetMaterial().get_id();return c!=d?c>d?1:-1:0},__class__:$b};var ig=function(a){this.mode=a;this._list=new ma;this._collector=$b.GetInstance()};g["lovedna.g3d.collector.ModeList"]=ig;ig.__name__=["lovedna","g3d","collector","ModeList"];ig.prototype={Sort:function(){var a=this._collector.GetRenderingModeSort(this.mode);null!=a&&this._list.Sort(a);a=this._list._length;if(!(1>a))for(var b=0;b<a;){var c=b++;this._collector.addDisplay(this._list.Get(c))}},
__class__:ig};var hg=function(){this._mode=new ga;this._dirty=!1;this._modelist=new ma};g["lovedna.g3d.collector.QueueList"]=hg;hg.__name__=["lovedna","g3d","collector","QueueList"];hg.prototype={Clear:function(){for(var a=this._mode.iterator();a.hasNext();)a.next()._list.Clear()},Add:function(a){var b=a.GetMaterial().renderingMode,c=this._mode.h[b];null==c&&(c=new ig(b),this._mode.h[b]=c,this._dirty=!0);c._list.Add(a)},Sort:function(){if(this._dirty){this._dirty=!1;this._modelist.Clear();for(var a=
this._mode.keys();a.hasNext();){var b=a.next();this._modelist.Add(b)}1<this._modelist._length&&this._modelist.Sort(l(this,this.sortHandler))}a=this._modelist._length;for(b=0;b<a;){var c=b++;this._mode.get(this._modelist.Get(c)).Sort()}},sortHandler:function(a,b){return a!=b?a<b?-1:1:0},__class__:hg};var Bb=function(){};g["lovedna.g3d.component.Component"]=Bb;Bb.__name__=["lovedna","g3d","component","Component"];Bb.ExitFrame=function(){for(var a=Bb._destroys._length;0<a--;)Bb._destroys.Get(a).onDestroy();
Bb._destroys.Clear()};Bb.__super__=Q;Bb.prototype=n(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._started=!1;this.order=0;this._enableDirty=this._enable=!0},enterFrame:function(){if(!this._enable)this._started&&this._enableDirty&&(this._enableDirty=!1,this.onDisable());else if(this._started)this.onEnterFrame()},exitFrame:function(){if(this._enable)if(this._started){if(this._enableDirty)if(this._enableDirty=!1,this._enable)this.onEnable();else this.onDisable();this.onExitFrame()}else this._started=
!0,this._transformTime=this._transform.time,this.onStart()},onStart:function(){},onEnable:function(){},onDisable:function(){},onEnterFrame:function(){},onExitFrame:function(){},onRemove:function(){Bb._destroys.Add(this)},onDestroy:function(){this._transformTime=this._transform=null},__class__:Bb});var we=function(){};g["lovedna.g3d.component.CustomVisit"]=we;we.__name__=["lovedna","g3d","component","CustomVisit"];we.__super__=Bb;we.prototype=n(Bb.prototype,{GetChildList:function(){this._childs.Clear();
for(var a=this._transform.childCount,b=0;b<a;){var c=b++;this._addTransform(this._transform._childs[c])}return this._childs},GetDisplayList:function(){return this._displays},onConstruct:function(){Bb.prototype.onConstruct.call(this);this._childs=new ma;this._displays=new ma},_addTransform:function(a){this._childs.Add(a);for(var b=a.childCount,c=0;c<b;){var d=c++;this._addTransform(a._childs[d])}},__class__:we});var Ec=function(){this.time=this.tick=0;this.timeScale=1};g["lovedna.g3d.core.Time"]=Ec;
Ec.__name__=["lovedna","g3d","core","Time"];Ec.targetTick=null;Ec.prototype={set:function(a,b){this.tick=a;this.time=b},Multiply:function(a){this.time=a.time;this.tick=a.tick*this.timeScale},__class__:Ec};var Df=function(){};g["lovedna.g3d.culling.BoundingInfo"]=Df;Df.__name__=["lovedna","g3d","culling","BoundingInfo"];Df.prototype={Dispose:function(){this._sphere=this._box=this.sphere=this.box=null},From:function(a){this._box=a.box;this._sphere=a.sphere},Apply:function(a){null!=this._sphere&&(null==
this.sphere&&(this.box=new bd,this.sphere=new cd),this.box.Copy(this._box),this.sphere.Copy(this._sphere),this.box.ApplyMat4(a),this.sphere.ApplyMat4(a))},__class__:Df};var xc=function(){E.call(this)};g["lovedna.g3d.display.Shape"]=xc;xc.__name__=["lovedna","g3d","display","Shape"];xc.__super__=pb;xc.prototype=n(pb.prototype,{FromGeometry:function(a){this._geometry.SetAttributes(a.attribute);this._geometry.Copy(a);this._geometryDirty=!0;this.boundingInfo.From(this._geometry);return this},onConstruct:function(){pb.prototype.onConstruct.call(this);
this._trangleIndex=0;this._mesh=new Fc;this.material=new ec;this.material.set_shader(new Ua("@shape"));this._geometry=new Da(35);this.name="shape "+this.gid},onEnterFrame:function(){pb.prototype.onEnterFrame.call(this);this._geometryDirty&&(this._geometryDirty=!1,this._geometry.Build(),this._mesh.FromGeometry(this._geometry))},set_mesh:function(a){return a},__class__:xc});var Yd=function(){this._active=!1;E.call(this)};g["lovedna.g3d.display.Loading"]=Yd;Yd.__name__=["lovedna","g3d","display","Loading"];
Yd.__super__=xc;Yd.prototype=n(xc.prototype,{isReady:function(){return this._active?xc.prototype.isReady.call(this):!1},onConstruct:function(){xc.prototype.onConstruct.call(this);var a=new Be;a.Create(20,20,5,20,null,!0);this.FromGeometry(a);this.set_rotationX(1.5707963267948966);this.pivot.Set(-60,60,0);this._loading=aa.loading;this._active=!1;this._loading.AddEventListener(C.ACTIVATE,l(this,this.loading_activate));this._loading.AddEventListener(C.DEACTIVATE,l(this,this.loading_activate));this.queueID=
400},onExitFrame:function(){xc.prototype.onExitFrame.call(this);if(this._active){var a=this.time.tick;this.set_rotationY(this.rotationY+a);this.set_rotationZ(this.rotationZ-a);a=this.scene.currentCamera.ScreenToWorld(0,0,600);this.set_x(a.x+40);this.set_y(a.y-40);this.set_z(a.z)}},loading_activate:function(a){this._active=a==C.ACTIVATE},__class__:Yd});var jg=function(){this._paramKey=new ma};g["lovedna.utils.string.RichChunk"]=jg;jg.__name__=["lovedna","utils","string","RichChunk"];jg.prototype={Parse:function(a,
b){this._paramMap=new G;this.next=this.value=this.name=null;this._paramKey.Clear();this.start=b;a=P.replace(a,"<","");a=P.replace(a,">","");a=y.Trim(a);this.type=-1;var c=a.indexOf("/");if(0==c)this.type=1,this.name=r.substr(a,c+1,null);else{c==a.length-1&&(this.type=0,a=y.Trim(r.substr(a,0,a.length-1)));var c=a.indexOf(" "),d=a.indexOf("=");-1==c&&-1==d?this.name=a:-1!=c&&-1!=d?d<c?(c=a.split("="),this.name=y.Trim(c[0]),1<c.length&&(this.value=c[1])):(this.name=r.substr(a,0,c),this.parseParams(r.substr(a,
c+1,null))):-1!=c?(this.name=r.substr(a,0,c),this.parseParams(r.substr(a,c+1,null))):-1!=d&&(this.name=y.Trim(r.substr(a,0,d)),this.parseParams(r.substr(a,d+1,null)))}},GetParam:function(a){return null==this._paramMap?null:this._paramMap.get(a)},GetParams:function(){return this._paramMap},setNext:function(a){this.next=a},parseParams:function(a){a=y.Trim(a);if(-1==a.indexOf(" ")&&-1==a.indexOf("="))this.value=a;else{a=a.split(" ");var b=a.length;if(0!=b)for(var c=0;c<b;){var d=c++,d=y.Trim(a[d]);if(""!=
d){var d=d.split("="),e=y.Trim(d[0]),f=null;1<d.length&&(f=y.Trim(d[1]));this._paramKey.Add(e);this._paramMap.set(e,f)}}}},__class__:jg};var dd=function(){this._chunkList=new ma;this._list=new ma};g["lovedna.utils.string.RichTextParser"]=dd;dd.__name__=["lovedna","utils","string","RichTextParser"];dd.prototype={Parse:function(a){this.value=a;this._chunkList.Clear();dd._pool.Reset();for(a=a.length;;){var b=y.Utf8IndexOf(this.value,"<",0),c=y.Utf8IndexOf(this.value,">",b),d=c-b;if(0<d){if(this.addChunk(b,
y.Utf8Substr(this.value,b,d+1)),this.value=y.Utf8Substr(this.value,0,b)+y.Utf8Substr(this.value,c+1),this.value.length>a)break}else break;a--;if(0>a)break}this.buildChunk();return this._list},addChunk:function(a,b){var c=dd._pool.Get();c.Parse(b,a);this._chunkList.Add(c)},buildChunk:function(){this._list.Clear();for(var a=this._chunkList._length,b=null,c=0;c<a;){var d=c++,b=this._chunkList.Get(d);if(null==b)break;-1==b.type?(this._list.Add(b),b.setNext(this.getNextChunk(d+1,b.name))):0==b.type&&this._list.Add(b)}},
getNextChunk:function(a,b){for(var c=a,d=this._chunkList._length;c<d;){var e=c++,f=this._chunkList.Get(e);if(f.name==b&&1==f.type)return this._chunkList.RemoveAt(e),f}return null},__class__:dd};var Gc=function(){this._charPool=new mc(function(){return new kg},function(a){a.Reset()});this.alignmentX=this.alignmentY=-1;this.lineSpace=this.letterSpace=0;fb.call(this)};g["lovedna.g3d.display.Text"]=Gc;Gc.__name__=["lovedna","g3d","display","Text"];Gc.__super__=fb;Gc.prototype=n(fb.prototype,{GetMaterial:function(){return null==
this.material?this._material:this.material},onConstruct:function(){fb.prototype.onConstruct.call(this);this.name="text "+this.gid;this._textDirty=!1;this.material=this._material=new ec;this.material.set_shader(new Ua("@image"));this.material.renderingMode=200;this.material.cullFace=!1;this.material.depthWrite=!1;this.set_font("default.png");this._charList=new ma;this._geometry=new Da(Da.GetComponentValue([0,3,5]));this._mesh=new Fc;this._lineWidthList=new ma;this._lineHeightList=new ma;this.set_width(200);
this.set_height(100);this.set_htmlText(!0);this._linkSetting=new Ce;this._linkList=new ma},onEnterFrame:function(){fb.prototype.onEnterFrame.call(this);this._textDirty&&(this.updateChars(),this.drawText(),this._textDirty=!1)},updateChars:function(){if(this._font!=this.font)if(null!=this._fnt&&(this._fnt.enable||this._fnt.RemoveEventListener(C.INIT,l(this,this.fnt_init))),this._font=this.font,this._fnt=Ob.GetInstance().Get(this._font),this._fnt.enable)this.fnt_init();else{this._fnt.AddEventListener(C.INIT,
l(this,this.fnt_init));return}if(this._fnt.enable){var a=this.text.length;if(!(1>a)){this._charList.Clear();this._lineWidthList.Clear();this._lineHeightList.Clear();this._linkList.Clear();this._charPool.Reset();this._text=this.text;var b=null;this.htmlText&&(b=Gc._richTextParser.Parse(this._text),this._text=Gc._richTextParser.value);for(var a=this._text.length,c=sa.GetByName(this.style),d=0;d<a;){var e=d++,f=r.cca(this._text,e),g=this._charPool.Get();g.index=e;g.charinfo=this._fnt.GetCharInfo(f);
g.styleID=c.id;this._charList.Add(g)}if(this.htmlText){c=b._length;for(d=0;d<c;)e=d++,b.Get(e);for(d=0;d<c;)e=d++,e=b.Get(e),f=e.name,"style"==f?this.setStyle(e):"a"==f&&this.setLink(e)}c=b=0;e=d=this._fnt.lineHeight;for(f=0;f<a;){var g=f++,k=this._charList.Get(g),h=k.charinfo;if(null!=h){var m=h.id;if(13==m||10==m){b=0;c+=e;this._lineWidthList.Add(b);this._lineHeightList.Add(e);e=d;continue}}m=sa.GetById(k.styleID);m=1>m.size?1:m.size/this._fnt.size;k.scale=m;var n=h.width*m,t=h.height*m,p=d*m;p>
e&&(e=p);b+=h.xoffset*m;b+h.xadvance>this.width&&(this._lineWidthList.Add(b),this._lineHeightList.Add(e),b=0,c+=e+this.lineSpace);if(c+e>this.height){this._charList.set_length(g);c-=e+this.lineSpace;break}k.rect.Set(b,c+h.yoffset*m-this.height,n,t);k.lineIndex=this._lineWidthList._length;b+=h.xadvance*m+this.letterSpace}this._lineWidthList.Add(b);this._lineHeightList.Add(e);this._maxHeight=c+e}}},drawText:function(){this._geometry.Clear();var a=this._charList._length;if(!(1>a)){var b=this._fnt.scaleW,
c=this._fnt.scaleW,d=Pa.instance;d.set_rgb(16777215);d.set_a(1);var d=0,e=this._maxHeight-this.height;0<this.alignmentY||(e=0==this.alignmentY?.5*e:0);for(var f=this.pools.Vec3.Get(),g=this.pools.Vec3.Get(),k=this.pools.Vec3.Get(),h=this.pools.Vec3.Get(),l=0;l<a;){var m=l++,m=this._charList.Get(m),n=m.charinfo;if(null!=n){var p=n.id;if(13==p||10==p)continue}var p=this._lineWidthList.Get(m.lineIndex),t=this.width-p;0<this.alignmentX||(t=0==this.alignmentX?.5*t:0);var r=n.x/b,q=(n.x+n.width)/b,p=n.y/
c,u=(n.y+n.height)/c,n=this.pools.Vec2.Get().Set(r,p),p=this.pools.Vec2.Get().Set(q,p),r=this.pools.Vec2.Get().Set(r,u),q=this.pools.Vec2.Get().Set(q,u),u=-1!=m.link.id;if(null!=this.onDrawChar)this.onDrawChar(m);var v=sa.GetById(m.styleID),w=Pa.RgbToRgba(u?v.linkColor:v.color,1),y;y=v.italic?6*m.scale:0;var z=m.rect.get_left()+t,t=m.rect.get_right()+t,B=-m.rect.get_top()+e,m=-m.rect.get_bottom()+e;f.x=z+y;f.y=B;f.z=0;f;g.x=t+y;g.y=B;g.z=0;g;k.x=z;k.y=m;k.z=0;k;h.x=t;h.y=m;h.z=0;h;this._geometry.AddVertex(f,
n,null,w);this._geometry.AddVertex(g,p,null,w);w=Pa.RgbToRgba(u?v.gradientLinkColor:v.gradientColor,1);this._geometry.AddVertex(k,r,null,w);this._geometry.AddVertex(h,q,null,w);this._geometry.AddIndex(d,d+2,d+3);this._geometry.AddIndex(d,d+3,d+1);d+=4}this._geometry.Build();this._mesh.FromGeometry(this._geometry)}},fnt_init:function(a){this._fnt.RemoveEventListener(C.INIT,l(this,this.fnt_init));this.GetMaterial().SetTexture(lb.GetInstance().Load(this.font));this._textDirty=!0},setStyle:function(a){if(null!=
a.next){var b=a.value;null==b&&(b=a.GetParam("name"));if(null!=b){var b=sa.GetByName(b).id,c=a.start;for(a=a.next.start;c<a;){var d=c++;this._charList.Get(d).styleID=b}}}},setLink:function(a){if(null!=a.next){var b=a.value;null==b&&(b=a.GetParam("name"));null==b&&(b="");var c=a.start,d=a.next.start,e=r.substr(this._text,c,d-c);this._linkSetting.id=this._linkList._length;this._linkSetting.text=e;this._linkSetting.name=b;this._linkSetting.start=c;this._linkSetting.end=d;this._linkSetting.params=a.GetParams();
for(a=null;c<d;)a=c++,a=this._charList.Get(a),a.link.Copy(this._linkSetting),a=a.link;this._linkList.Add(a)}},set_htmlText:function(a){this.htmlText!=a&&(this.htmlText=a,this._textDirty=!0);return a},set_text:function(a){this.text!=a&&(this.text=a,this._textDirty=!0);return a},set_font:function(a){this.font!=a&&(this.font=a,this._textDirty=!0);return a},set_alignmentX:function(a){0<a&&(a=1);0>a&&(a=-1);a!=this.alignmentX&&(this.alignmentX=a,this._textDirty=!0);return a},__class__:Gc,__properties__:n(fb.prototype.__properties__,
{set_alignmentX:"set_alignmentX",set_font:"set_font",set_htmlText:"set_htmlText",set_text:"set_text"})});var Ff=function(){};g["lovedna.g3d.display.image.ImageSetting"]=Ff;Ff.__name__=["lovedna","g3d","display","image","ImageSetting"];Ff.prototype={__class__:Ff};var kg=function(){this.rect=new xd;this.scale=1;this.link=new Ce};g["lovedna.g3d.display.text.Char"]=kg;kg.__name__=["lovedna","g3d","display","text","Char"];kg.prototype={Reset:function(){this.charinfo=null;this.styleID=0;this.link.Reset()},
__class__:kg};var Ce=function(){this.id=-1};g["lovedna.g3d.display.text.LinkSetting"]=Ce;Ce.__name__=["lovedna","g3d","display","text","LinkSetting"];Ce.prototype={Reset:function(){this.id=-1;this.text=null;this.end=this.start=0;this.name="";this.params=null},Copy:function(a){this.id=a.id;this.start=a.start;this.end=a.end;this.name=a.name;this.text=a.text;this.params=a.params;return this},__class__:Ce};var sa=function(a){this.name=a;this.id=sa._ID++;this.size=0;this.italic=!1;this.color=16777215;
this.gradientColor=14540253;this.linkColor=16711680;this.linkPressColor=this.gradientLinkColor=13369344;this.gradientlinkPressColor=11141120};g["lovedna.g3d.display.text.TextStyle"]=sa;sa.__name__=["lovedna","g3d","display","text","TextStyle"];sa.defaultStyle=null;sa.AddStyle=function(a){var b=a.name;null==b&&(b="default");if(sa._nameMap.exists(b))throw Ba.log(b+" has exist"),new u("--");sa._nameMap.set(b,a);sa._idMap.h[a.id]=a};sa.GetByName=function(a){null!=a&&sa._nameMap.exists(a)||(a="default");
return sa._nameMap.exists(a)?sa._nameMap.get(a):(null==sa.defaultStyle&&(sa.defaultStyle=new sa("default"),sa.AddStyle(sa.defaultStyle)),sa.defaultStyle)};sa.GetById=function(a){return sa._idMap.h.hasOwnProperty(a)?sa._idMap.h[a]:sa.GetByName("default")};sa.prototype={__class__:sa};var Ic=function(a){null==a&&(a=0);Q.call(this);this.id=a};g["lovedna.ui.LTouch"]=Ic;Ic.__name__=["lovedna","ui","LTouch"];Ic.__interfaces__=[hb];Ic.__super__=Q;Ic.prototype=n(Q.prototype,{Dispose:function(){this._activeObjectList=
this._actions=this._frameActions=this.lastTime=this.time=this.down=this.motion=this.lastPosition=this.position=null},Begin:function(){this._actions.Clear();this._frameActions.Clear()},Update:function(){this._frameActions.Clear()},End:function(){this.action=0;this.active=!1},AddAction:function(a){this._actions.Open(a);this._frameActions.Open(a)},HasAction:function(a){return this._actions.IsOpen(a)},IsAction:function(a){return this._frameActions.IsOpen(a)},Copy:function(a){this.id=a.id;this.action=
a.action;this.active=a.active;this.userAction=a.userAction;this.position.Copy(a.position);this.lastPosition.Copy(a.lastPosition);this.motion.Copy(a.motion);this.down.Copy(a.down);this.time.Copy(a.time);this.lastTime.Copy(a.lastTime);this._frameActions.value=a._frameActions.value;this._actions.value=a._actions.value;this._activeObjectList=a._activeObjectList;return this},AddObject:function(a){null!=a&&(this._activeObjectList.Contains(a)||this._activeObjectList.Add(a))},ClearObject:function(){this._activeObjectList.Clear()},
Construct:function(){Q.prototype.Construct.call(this);this.active=!1;this.action=0;this.userAction=!1;this.position=new W;this.lastPosition=new W;this.motion=new W;this.down=new W;this.time=new A;this.lastTime=new A;this._frameActions=new ic;this._actions=new ic;this._activeObjectList=new ma},__class__:Ic});var rc=function(a){this._type=a;this.touch=new Ic};g["lovedna.g3d.event.PickEvent"]=rc;rc.__name__=["lovedna","g3d","event","PickEvent"];rc.__super__=Na;rc.prototype=n(Na.prototype,{__class__:rc});
var yc=function(){};g["lovedna.g3d.geometry.Mesh"]=yc;yc.__name__=["lovedna","g3d","geometry","Mesh"];yc.prototype={FromGeometry:function(a){this.geometry=a},IsReady:function(){return null==this.geometry?!1:!0},Bind:function(a){this._bindTime=a;null!=this._indexBuffer&&3<this._indexBuffer.count&&this._indexBuffer.Bind(this._bindTime)},UnBind:function(){this._indexBuffer.UnBind()},SetBufferLocation:function(a,b){},__class__:yc};var Fc=function(){};g["lovedna.g3d.geometry.CombineMesh"]=Fc;Fc.__name__=
["lovedna","g3d","geometry","CombineMesh"];Fc.__super__=yc;Fc.prototype=n(yc.prototype,{FromGeometry:function(a){yc.prototype.FromGeometry.call(this,a);null!=this.geometry&&(1>this.geometry.triangleCount&&0!=this.geometry.vertexCount%3&&this.geometry.Build(),null==this._buffer&&(this._buffer=new De),this._buffer.SetData(this.geometry.GetAttributeData(0)),this._buffer.stride=this.geometry.byteStride,a=this.geometry.triangleCount,2<a&&(null==this._indexBuffer&&(this._indexBuffer=new Ee),this._indexBuffer.SetData(this.geometry.indexData,
a),this.count=a))},IsReady:function(){return null==this._buffer||3>this.geometry.vertexCount?!1:yc.prototype.IsReady.call(this)},Bind:function(a){yc.prototype.Bind.call(this,a);this._buffer.Bind(a)},UnBind:function(){yc.prototype.UnBind.call(this);this._buffer.UnBind()},SetBufferLocation:function(a,b){0>b||this.geometry._componentSet.IsOpen(a)&&this._buffer.SetAndApply(b,Da._size[a],this.geometry._vertexOffsetByteLength[a])},__class__:Fc});var Da=function(a){null==a&&(a=0);this.autoBuildBounding=
!0;this.id=Da._id++;this._componentSet=new ic;this._componentCombined=!0;this._componentDataMap=new ga;this.indexData=[];this._vertexOffset=[];this._vertexOffsetByteLength=[];this.SetAttributes(a);this.pools=Za.GetInstance()};g["lovedna.g3d.geometry.Geometry"]=Da;Da.__name__=["lovedna","g3d","geometry","Geometry"];Da.__interfaces__=[hb];Da.GetComponentValue=function(a){var b=ic.instance;b.Clear();for(var c=a.length;0<c--;){var d=a[c];if(7<=d)throw new u("component less than 7");b.Open(d)}return b.value};
Da.prototype={GetAttributeData:function(a){return this._componentDataMap.h[a]},Copy:function(a){this.attribute=a.attribute;this.vertexCount=a.vertexCount;this.triangleCount=a.triangleCount;this.dataStride=a.dataStride;this.byteStride=a.byteStride;this.autoBuildBounding=a.autoBuildBounding;null!=a.sphere&&(null==this.sphere&&(this.sphere=new cd),this.sphere.Copy(a.sphere));null!=a.box&&(null==this.box&&(this.box=new bd),this.box.Copy(a.box));this._componentSet.value=a._componentSet.value;yd.CopyTo(a._vertexOffset,
this._vertexOffset);yd.CopyTo(a._vertexOffsetByteLength,this._vertexOffsetByteLength);yd.CopyTo(a.indexData,this.indexData,0,this.triangleCount);for(var b=this._componentDataMap.keys();b.hasNext();){var c=b.next();yd.CopyTo(a._componentDataMap.h[c],this._componentDataMap.h[c])}this._trangleIndex=a._trangleIndex;return this},Dispose:function(){this.pools=this._vertexOffsetByteLength=this._vertexOffset=this._componentSet=this.indexData=this._componentDataMap=null;null!=this.box&&(this.box.Dispose(),
this.box=null);null!=this.sphere&&(this.sphere.Dispose(),this.sphere=null)},SetAttributes:function(a){null==a&&(a=0);this.dataStride=0;1>a?a=11:128<=a&&(a=127);this.attribute=this._componentSet.value=a;for(a=0;7>a;){var b=a++;this._componentSet.IsOpen(b)&&(this._vertexOffset[b]=this.dataStride,this.dataStride+=Da._size[b],this._componentDataMap.h.hasOwnProperty(b)||(this._componentDataMap.h[b]=[]))}this.autoBuildBounding&&null==this.box&&(this.box=new bd,this.sphere=new cd);this.Clear();return this},
Clear:function(){this._trangleIndex=this.triangleCount=this.vertexCount=0;this.autoBuildBounding&&null!=this.box&&this.box.Reset()},AddVertex:function(a,b,c,d,e){null==d&&(d=-1);this.autoBuildBounding&&this.box.ExpandByVertex(a);var f=0,g=this._componentDataMap.h[0],f=this.vertexCount*(this._componentCombined?this.dataStride:Da._size[0])+(this._componentCombined?this._vertexOffset[0]:0);g[f++]=a.x;g[f++]=a.y;g[f++]=a.z;null!=b&&this._componentSet.IsOpen(3)&&(g=this._componentDataMap.h[this._componentCombined?
0:3],f=this.vertexCount*(this._componentCombined?this.dataStride:Da._size[3])+(this._componentCombined?this._vertexOffset[3]:0),g[f++]=b.x,g[f++]=b.y);null!=c&&this._componentSet.IsOpen(1)&&(g=this._componentDataMap.h[this._componentCombined?0:1],f=this.vertexCount*(this._componentCombined?this.dataStride:Da._size[1])+(this._componentCombined?this._vertexOffset[1]:0),g[f++]=c.x,g[f++]=c.y,g[f++]=c.z);null!=e&&this._componentSet.IsOpen(2)&&(g=this._componentDataMap.h[this._componentCombined?0:2],f=
this.vertexCount*(this._componentCombined?this.dataStride:Da._size[2])+(this._componentCombined?this._vertexOffset[2]:0),g[f++]=e.x,g[f++]=e.y,g[f++]=e.z);this._componentSet.IsOpen(5)&&(g=this._componentDataMap.h[this._componentCombined?0:5],f=this.vertexCount*(this._componentCombined?this.dataStride:Da._size[5])+(this._componentCombined?this._vertexOffset[5]:0),a=Pa.instance,a.set_rgba(d),g[f++]=a.r,g[f++]=a.g,g[f++]=a.b,g[f++]=a.a);this.vertexCount++},AddQuad:function(a,b,c,d,e){if(12>a.length)throw new u("position count must 12");
e=this.vertexCount;var f=[],g=A.instance6.FromArray(a,0),k=A.instance7.FromArray(a,3),h=A.instance8.FromArray(a,6);a=A.instance9.FromArray(a,9);this.box.ExpandByVertex(g).ExpandByVertex(k).ExpandByVertex(h).ExpandByVertex(a);this.AddVertexAttribute(0,e,g.ToArray(f));this.AddVertexAttribute(0,e+1,k.ToArray(f));this.AddVertexAttribute(0,e+2,h.ToArray(f));this.AddVertexAttribute(0,e+3,a.ToArray(f));if(this._componentSet.IsOpen(3)){if(null==b)throw new u("not uv data");if(8>b.length)throw new u("uv count must 8");
a=this.pools.Vec2.Get().FromArray(b,0);var l=this.pools.Vec2.Get().FromArray(b,2),m=this.pools.Vec2.Get().FromArray(b,4);b=this.pools.Vec2.Get().FromArray(b,6);this.AddVertexAttribute(3,e,a.ToArray(f));this.AddVertexAttribute(3,e+1,l.ToArray(f));this.AddVertexAttribute(3,e+2,m.ToArray(f));this.AddVertexAttribute(3,e+3,b.ToArray(f))}this._componentSet.IsOpen(1)&&(null==d&&(d=A.instance4.Copy(g).Sub(k,null),g=A.instance5.Copy(g).Sub(h,null),d.Cross(g)),d.Normalize(),d.ToArray(f),this.AddVertexAttribute(1,
e,f),this.AddVertexAttribute(1,e+1,f),this.AddVertexAttribute(1,e+2,f),this.AddVertexAttribute(1,e+3,f));if(this._componentSet.IsOpen(5)){var n=Pa.instance.Set(1,1,1,1);null==c?(n.set_r(1),n.set_g(1),n.set_b(1),n.set_a(1),n.dirty=!0,n.ToArray(f),this.AddVertexAttribute(5,e,f),this.AddVertexAttribute(5,e+1,f),this.AddVertexAttribute(5,e+2,f),this.AddVertexAttribute(5,e+3,f)):3<c.length?(this.AddVertexAttribute(5,e,function(a){n.set_rgba(c[0]);n.dirty=!0;return n}(this).ToArray(f)),this.AddVertexAttribute(5,
e+1,function(a){n.set_rgba(c[1]);n.dirty=!0;return n}(this).ToArray(f)),this.AddVertexAttribute(5,e+2,function(a){n.set_rgba(c[2]);n.dirty=!0;return n}(this).ToArray(f)),this.AddVertexAttribute(5,e+3,function(a){n.set_rgba(c[3]);n.dirty=!0;return n}(this).ToArray(f))):(d=c.length,0==d&&(n.set_r(1),n.set_g(1),n.set_b(1),n.set_a(1),n.dirty=!0,n.ToArray(f)),0<d&&(n.set_rgba(c[0]),n.dirty=!0,n.ToArray(f)),this.AddVertexAttribute(5,e,f),1<d&&(n.set_rgba(c[1]),n.dirty=!0,n.ToArray(f)),this.AddVertexAttribute(5,
e+1,f),2<d&&(n.set_rgba(c[2]),n.dirty=!0,n.ToArray(f)),this.AddVertexAttribute(5,e+2,f),4<d&&(n.set_rgba(c[3]),n.dirty=!0,n.ToArray(f)),this.AddVertexAttribute(5,e+3,f))}this.vertexCount+=4},AddVertexAttribute:function(a,b,c){if(this._componentSet.IsOpen(a)){var d;d=this._componentCombined?this._componentDataMap.h[0]:this._componentDataMap.h[a];b=(this._componentCombined?this._vertexOffset[a]:0)+b*(this._componentCombined?this.dataStride:Da._size[a]);if(this.autoBuildBounding&&0==a){var e=A.instance6;
e.FromArray(c);this.box.ExpandByVertex(e)}switch(a){case 0:case 1:case 2:d[b++]=c[0];d[b++]=c[1];d[b++]=c[2];break;case 3:case 4:d[b++]=c[0];d[b++]=c[1];break;case 5:d[b++]=c[0];d[b++]=c[1];d[b++]=c[2];d[b++]=c[3];break;default:throw new u("unknow attribute type");}}},AddIndex:function(a,b,c){this.indexData[this._trangleIndex++]=a;this.indexData[this._trangleIndex++]=b;this.indexData[this._trangleIndex++]=c},Build:function(){this.autoBuildBounding&&(this.sphere.center.Copy(this.box.GetCenter()),this.sphere.radius=
.5*this.box.GetSize().get_length());this.vertexCount++;this.triangleCount=this._trangleIndex;this.byteStride=4*this.dataStride;for(var a=0;7>a;){var b=a++;this._componentSet.IsOpen(b)&&(this._vertexOffsetByteLength[b]=4*this._vertexOffset[b])}return this},Raycast:function(a){var b=this.triangleCount;if(3>b)return null;var c=a.count;0<c&&b>c&&(b=c);var c=b/3|0,d=this.pools.Vec3.Get(),e=this.pools.Vec3.Get(),f=this.pools.Vec3.Get(),g=this.GetAttributeData(0),k;k=this._componentCombined?this._vertexOffset[0]:
0;var h;for(h=this._componentCombined?this.dataStride:Da._size[0];0<c--;){var l=3*c,b=this.indexData[l],m=this.indexData[l+1],l=this.indexData[l+2];d.FromArray(g,b*h+k);e.FromArray(g,m*h+k);f.FromArray(g,l*h+k);var n=a.ray.IntersectsTriangle(d,e,f,a.backfaceCulling);if(null!=n)return a=this.pools.PickInfo.Get(),a.triangle.Set(b,m,l),a.localPos.Copy(n),a}return null},__class__:Da};var Be=function(a){null==a&&(a=0);0==a&&(a=Da.GetComponentValue([0,1,5]));Da.call(this,a)};g["lovedna.g3d.geometry.primitive.Torus"]=
Be;Be.__name__=["lovedna","g3d","geometry","primitive","Torus"];Be.__super__=Da;Be.prototype=n(Da.prototype,{Create:function(a,b,c,d,e,f){null==f&&(f=!1);null==e&&(e=-1);3>a&&(a=3);3>b&&(b=3);for(var g=zd.instance,k=Math.cos,h=Math.sin,l=this.pools.Vec3.Get(),m=this.pools.Vec2.Get(),n=this.pools.Vec3.Get(),p=0,t=a+1;p<t;)for(var r=p++,q=6.283185307179586/a*r,u=k(q),q=h(q),v=0,w=b+1;v<w;){var y=v++,z=6.283185307179586/b*y,B=(u*c+d)*k(z),C=q*c,D=(u*c+d)*h(z);l.x=B;l.y=C;l.z=D;l;C=B=null;if(this._componentSet.IsOpen(1)){var D=
u*k(z),A=u*h(z),B=n;B.x=D;B.y=q;B.z=A;B}this._componentSet.IsOpen(3)&&(y*=1/a,D=1/b*r+.5,1<D&&--D,D=1-D,C=m,m.Set(1-y,D));this.AddVertex(l,C,B,f?function(a){g.h=57.29577951308232*z;g.s=1;g.v=1;return g}(this).ToColor().get_rgba():e)}for(c=0;c<a;)for(d=c++,e=0;e<b;)f=e++,f=(b+1)*d+f,this.AddIndex(f,f+b+1,f+1),this.AddIndex(f+b+1,f+b+2,f+1);this.Build();return this},__class__:Be});var ve=function(){E.call(this);this.type=0;this.set_shininess(0);this.position=new wc;this.ambientColor=new kc(.2,.2,.2,
1);this.diffuseColor=new kc(.2,.2,.2,1);this.specularColor=new kc(1,1,1,1);this.diffuseRange=new jc(.5,1)};g["lovedna.g3d.light.Light"]=ve;ve.__name__=["lovedna","g3d","light","Light"];ve.__super__=E;ve.prototype=n(E.prototype,{onConstruct:function(){E.prototype.onConstruct.call(this);this.set_x(1);this.set_y(10);this.set_y(1);this.name="light "+this.gid},onTransformChange:function(){E.prototype.onTransformChange.call(this);var a=this._worldPos.Set(this._local.d12,this._local.d13,this._local.d14);
a.Normalize();this.position.Set3(a.x,a.y,a.z)},set_shininess:function(a){a!=this.shininess&&0<a&&(this.shininess=a);return this.shininess},__class__:ve,__properties__:n(E.prototype.__properties__,{set_shininess:"set_shininess"})});var cb=function(){z.call(this);cb._instance=this};g["lovedna.g3d.loader.AtlasLoader"]=cb;cb.__name__=["lovedna","g3d","loader","AtlasLoader"];cb._instance=null;cb.GetInstance=function(){return null==cb._instance?new cb:cb._instance};cb.SetAtlas=function(a){cb.GetInstance().AddAtlas(a)};
cb.__super__=z;cb.prototype=n(z.prototype,{AddAtlas:function(a){this._url.Set(a);if(null==this._url.ext||1>this._url.ext.length)a+=".png";this._atlasMap.set(a,!0)},Exist:function(a){this._url.Set(a);a=this._url.dir+".png";var b=!1;this._atlasMap.exists(a)&&(b=!0);var c=this._url.toString(),d=null;return this._spriteMap.exists(c)?(d=this._spriteMap.get(c),d.enable):b?this._loader.Exist(a):this._loader.Exist(c)},Load:function(a){this._url.Set(a);a=this._url.dir+".png";var b=!1;this._atlasMap.exists(a)&&
(b=!0);var c=this._url.toString(),d=null;this._spriteMap.exists(c)?d=this._spriteMap.get(c):b?(d=new V(this._url.file),d.set_texture(this._loader.Load(a,!0)),d.atlasName=a,this._spriteMap.set(c,d),Fb._atlas.exists(a)&&d.setup(Fb.GetAtlas(a))):(d=new V,this._spriteMap.set(c,d),d.set_texture(this._loader.Load(c)),d._texture.enable&&d.setup(null));return d},onConstruct:function(){z.prototype.onConstruct.call(this);this._url=new Ea;this._loader=lb.GetInstance();this._atlasMap=new G;this._spriteMap=new G},
Setup:function(a,b){null==b&&(b=!0);if(b){var c=this._spriteMap.get(a);null!=c&&c.setup(null);for(var d=Fb.GetAtlas(a),e=Ea.WithoutExtension(a),f=d.GetSpriteList(),g=f.length;0<g--;)c=Ea.Combine(e,f[g].name+".png"),c=this._spriteMap.get(c),null!=c&&c.setup(d)}else d=this._spriteMap.get(a),null!=d&&d.setup(null)},__class__:cb});var Ob=function(){z.call(this,null);Ob._instance=this;this._initMap=new G};g["lovedna.g3d.loader.FntLoader"]=Ob;Ob.__name__=["lovedna","g3d","loader","FntLoader"];Ob._instance=
null;Ob.GetInstance=function(){return null==Ob._instance?new Ob:Ob._instance};Ob.__super__=z;Ob.prototype=n(z.prototype,{Get:function(a){if(this._fntMap.exists(a))return this._fntMap.get(a);var b=new ed;this._fntMap.set(a,b);lb.GetInstance().Load(a,!0);return b},onConstruct:function(){z.prototype.onConstruct.call(this);this._fntMap=new G},Parse:function(a,b){if(1!=this._initMap.get(a)&&null!=b){var c=b.readInt();if(!(Xa.get_length(b)<c)){var c=b.readUTFBytes(c),d=this._fntMap.get(a);null==d&&(d=new ed,
this._fntMap.set(a,d));d.Parse(c);this._initMap.set(a,!0)}}},__class__:Ob});var bc=function(){z.call(this);bc._instance=this;this._spineMap=new G};g["lovedna.g3d.loader.SpineLoader"]=bc;bc.__name__=["lovedna","g3d","loader","SpineLoader"];bc._instance=null;bc.GetInstance=function(){return null==bc._instance?new bc:bc._instance};bc.__super__=z;bc.prototype=n(z.prototype,{GetSpineData:function(a){if(this._spineMap.exists(a))return this._spineMap.get(a);var b=new Fe(a);this._spineMap.set(a,b);return b},
Parse:function(a,b){this.GetSpineData(a).Parse(b)},__class__:bc});var V=function(a){z.call(this,null);this.pools=Za.GetInstance();this.name=a};g["lovedna.g3d.loader.SpriteTexture"]=V;V.__name__=["lovedna","g3d","loader","SpriteTexture"];V._sliceListX=null;V._sliceListY=null;V.__super__=z;V.prototype=n(z.prototype,{Draw:function(a){this._image=a;switch(this._image.type){case 1:this.simpleFill();break;case 2:this.slicedFill();break;case 3:this.filledFill();break;case 0:this.simpleFill();break;default:this.simpleFill()}this._image.geometry.Build();
this._image=null},onConstruct:function(){z.prototype.onConstruct.call(this);this.enable=!1;this.region=new Ge;this.uv00=(new W).Set(0,0);this.uv01=(new W).Set(0,1);this.uv11=(new W).Set(1,1);this.uv10=(new W).Set(1,0)},setup:function(a){if(null==a)this.enable=!0,this.width=this._texture.size.x,this.height=this._texture.size.y,this.region.rect.Set(0,0,this.width,this.height),this.uv00.Set(0,1),this.uv01.Set(0,0),this.uv11.Set(1,0),this.uv10.Set(1,1),this.DispatchEvent(C.INIT);else if(a.enable&&a.name==
this.atlasName){this.region.Copy(a._sprites.get(this.name));this.enable=!0;a=this._texture.size.x;var b=this._texture.size.y,c=this.region.rect;this.region.rotated?(this.width=c.height,this.height=c.width,this.uv00.Set(c.x/a,c.y/b),this.uv01.Set(c.get_right()/a,c.y/b),this.uv10.Set(c.x/a,c.get_bottom()/b),this.uv11.Set(c.get_right()/a,c.get_bottom()/b)):(this.uv00.Set(c.x/a,c.get_bottom()/b),this.uv01.Set(c.x/a,c.y/b),this.uv11.Set(c.get_right()/a,c.y/b),this.uv10.Set(c.get_right()/a,c.get_bottom()/
b),this.width=c.width,this.height=c.height);this.DispatchEvent(C.INIT)}},simpleFill:function(){var a=this._image.geometry,b=this._image.width,c=this._image.height;a.AddVertex(this.pools.Vec3.Get().Set(0,0,0),this.uv00);a.AddVertex(this.pools.Vec3.Get().Set(b,0,0),this.uv10);a.AddVertex(this.pools.Vec3.Get().Set(0,c,0),this.uv01);a.AddVertex(this.pools.Vec3.Get().Set(b,c,0),this.uv11);a.AddIndex(0,1,2);a.AddIndex(1,3,2)},slicedFill:function(){var a=this._image.geometry,b=this._image.width,c=this._image.height,
d=this.width,e=this.height,f=this.region.border;null!=this._image.border&&(f=this._image.border);var g=3,k=3;0>=f.x&&g--;0>=f.width&&g--;0>=f.y&&k--;0>=f.height&&k--;1<g&&b==d&&(g=1);1<k&&c==e&&(k=1);if(1==g&&1==k)this.simpleFill();else{null==V._sliceListX?(V._sliceListX=new ma,V._sliceListY=new ma):(V._sliceListX.Clear(),V._sliceListY.Clear());V._sliceListX.Add(0);V._sliceListX.Add(0);0<f.x&&(V._sliceListX.Add(f.x),V._sliceListX.Add(f.x));0<f.width&&(V._sliceListX.Add(b-f.width),V._sliceListX.Add(d-
f.width));V._sliceListX.Add(b);V._sliceListX.Add(d);V._sliceListY.Add(c);V._sliceListY.Add(e);0<f.y&&(V._sliceListY.Add(c-f.y),V._sliceListY.Add(e-f.y));0<f.height&&(V._sliceListY.Add(f.height),V._sliceListY.Add(f.height));V._sliceListY.Add(0);V._sliceListY.Add(0);for(var b=0,c=W.instance,f=this.region.rotated,h=0;h<g;)for(var l=h++,m=l+1,n=0;n<k;){var p=n++,t=p+1,r=V._sliceListX.Get(2*l),q=V._sliceListY.Get(2*p),u=V._sliceListX.Get(2*m),v=V._sliceListY.Get(2*t),w=V._sliceListX.Get(2*l+1),p=V._sliceListY.Get(2*
p+1),y=V._sliceListX.Get(2*m+1),t=V._sliceListY.Get(2*t+1);c.Lerp(this.uv00,this.uv11,w/d,p/e,f);a.AddVertex(this.pools.Vec3.Get().Set(r,q,0),c);c.Lerp(this.uv00,this.uv11,y/d,p/e,f);a.AddVertex(this.pools.Vec3.Get().Set(u,q,0),c);c.Lerp(this.uv00,this.uv11,w/d,t/e,f);a.AddVertex(this.pools.Vec3.Get().Set(r,v,0),c);c.Lerp(this.uv00,this.uv11,y/d,t/e,f);a.AddVertex(this.pools.Vec3.Get().Set(u,v,0),c);a.AddIndex(b,b+1,b+2);a.AddIndex(b+1,b+3,b+2);b+=4}}},filledFill:function(){if(1==this._image.fillAmount)this.simpleFill();
else switch(this._image.fillDirection){case 0:this.fillLeft();break;case 1:this.fillTop();break;case 2:this.fillRight();break;case 3:this.fillBottom();break;case 4:this.fillCenter();break;default:this.simpleFill()}},fillLeft:function(){var a=this._image.geometry,b=this._image.height,c=this._image.fillAmount,d=this.region.rotated,e=this._image.width*c,f=W.instance;a.AddVertex(this.pools.Vec3.Get().Set(0,0,0),this.uv00);f.Lerp(this.uv00,this.uv11,c,0,d);a.AddVertex(this.pools.Vec3.Get().Set(e,0,0),
f);a.AddVertex(this.pools.Vec3.Get().Set(0,b,0),this.uv01);f.Lerp(this.uv00,this.uv11,c,1,d);a.AddVertex(this.pools.Vec3.Get().Set(e,b,0),f);a.AddIndex(0,1,2);a.AddIndex(1,3,2)},fillTop:function(){var a=this._image.geometry,b=this._image.width,c=this._image.height,d=this.region.rotated,e=1-this._image.fillAmount,f=c*e,g=W.instance;g.Lerp(this.uv00,this.uv11,0,e,d);a.AddVertex(this.pools.Vec3.Get().Set(0,f,0),g);g.Lerp(this.uv00,this.uv11,1,e,d);a.AddVertex(this.pools.Vec3.Get().Set(b,f,0),g);a.AddVertex(this.pools.Vec3.Get().Set(0,
c,0),this.uv01);a.AddVertex(this.pools.Vec3.Get().Set(b,c,0),this.uv11);a.AddIndex(0,1,2);a.AddIndex(1,3,2)},fillRight:function(){var a=this._image.geometry,b=this._image.width,c=this._image.height,d=this.region.rotated,e=1-this._image.fillAmount,f=b*e,g=W.instance;g.Lerp(this.uv00,this.uv11,e,0,d);a.AddVertex(this.pools.Vec3.Get().Set(f,0,0),g);a.AddVertex(this.pools.Vec3.Get().Set(b,0,0),this.uv10);g.Lerp(this.uv00,this.uv11,e,1,d);a.AddVertex(this.pools.Vec3.Get().Set(f,c,0),g);a.AddVertex(this.pools.Vec3.Get().Set(b,
c,0),this.uv11);a.AddIndex(0,1,2);a.AddIndex(1,3,2)},fillBottom:function(){var a=this._image.geometry,b=this._image.fillAmount,c=this._image.width,d=this.region.rotated,e=this._image.height*b,f=W.instance;a.AddVertex(this.pools.Vec3.Get().Set(0,0,0),this.uv00);a.AddVertex(this.pools.Vec3.Get().Set(c,0,0),this.uv10);f.Lerp(this.uv00,this.uv11,0,b,d);a.AddVertex(this.pools.Vec3.Get().Set(0,e,0),f);f.Lerp(this.uv00,this.uv11,1,b,d);a.AddVertex(this.pools.Vec3.Get().Set(c,e,0),f);a.AddIndex(0,1,2);a.AddIndex(1,
3,2)},fillCenter:function(){var a=this._image.geometry,b=this._image.fillAmount,c=this._image.width,d=this._image.height,e=.5*c,f=this.region.rotated,g=A.instance.Set(e,.5*d,0),k=W.instance;k.Lerp(this.uv00,this.uv11,.5,.5,f);var h=W.instance1,l=0;a.AddVertex(g,k);.125>b?(h.Lerp(this.uv00,this.uv11,.5,0,f),a.AddVertex(this.pools.Vec3.Get().Set(g.x,0,0),h),l=b/.125,h.Lerp(this.uv00,this.uv11,.5+.5*l,0,f),a.AddVertex(this.pools.Vec3.Get().Set(g.x+e*l,0,0),h),a.AddIndex(0,1,2)):.375>b?(h.Lerp(this.uv00,
this.uv11,.5,0,f),a.AddVertex(this.pools.Vec3.Get().Set(g.x,0,0),h),h.Lerp(this.uv00,this.uv11,1,0,f),a.AddVertex(this.pools.Vec3.Get().Set(c,0,0),h),l=(b-.125)/.25,h.Lerp(this.uv00,this.uv11,1,l,f),a.AddVertex(this.pools.Vec3.Get().Set(c,d*l,0),h),a.AddIndex(0,1,2),a.AddIndex(0,2,3)):.625>b?(h.Lerp(this.uv00,this.uv11,.5,0,f),a.AddVertex(this.pools.Vec3.Get().Set(g.x,0,0),h),h.Lerp(this.uv00,this.uv11,1,0,f),a.AddVertex(this.pools.Vec3.Get().Set(c,0,0),h),l=1,h.Lerp(this.uv00,this.uv11,1,l,f),a.AddVertex(this.pools.Vec3.Get().Set(c,
d*l,0),h),l=1-(b-.375)/.25,h.Lerp(this.uv00,this.uv11,l,1,f),a.AddVertex(this.pools.Vec3.Get().Set(c*l,d,0),h),a.AddIndex(0,1,2),a.AddIndex(0,2,3),a.AddIndex(0,3,4)):.875>b?(h.Lerp(this.uv00,this.uv11,.5,0,f),a.AddVertex(this.pools.Vec3.Get().Set(g.x,0,0),h),h.Lerp(this.uv00,this.uv11,1,0,f),a.AddVertex(this.pools.Vec3.Get().Set(c,0,0),h),h.Lerp(this.uv00,this.uv11,1,1,f),a.AddVertex(this.pools.Vec3.Get().Set(c,d,0),h),h.Lerp(this.uv00,this.uv11,0,1,f),a.AddVertex(this.pools.Vec3.Get().Set(0,d,0),
h),l=1-(b-.625)/.25,h.Lerp(this.uv00,this.uv11,0,l,f),a.AddVertex(this.pools.Vec3.Get().Set(0,d*l,0),h),a.AddIndex(0,1,2),a.AddIndex(2,3,4),a.AddIndex(0,4,5)):1>b&&(h.Lerp(this.uv00,this.uv11,.5,0,f),a.AddVertex(this.pools.Vec3.Get().Set(g.x,0,0),h),h.Lerp(this.uv00,this.uv11,1,0,f),a.AddVertex(this.pools.Vec3.Get().Set(c,0,0),h),h.Lerp(this.uv00,this.uv11,1,1,f),a.AddVertex(this.pools.Vec3.Get().Set(c,d,0),h),h.Lerp(this.uv00,this.uv11,0,1,f),a.AddVertex(this.pools.Vec3.Get().Set(0,d,0),h),h.Lerp(this.uv00,
this.uv11,0,0,f),a.AddVertex(this.pools.Vec3.Get().Set(0,0,0),h),l=(b-.875)/.125,h.Lerp(this.uv00,this.uv11,.5*l,0,f),a.AddVertex(this.pools.Vec3.Get().Set(e*l,0,0),h),a.AddIndex(0,1,2),a.AddIndex(2,3,4),a.AddIndex(0,4,5),a.AddIndex(0,5,6))},set_texture:function(a){this._texture!=a&&(this._texture=a);return this._texture},__class__:V,__properties__:{set_texture:"set_texture"}});var lb=function(){lb._instance=this;z.call(this)};g["lovedna.g3d.loader.TextureLoader"]=lb;lb.__name__=["lovedna","g3d",
"loader","TextureLoader"];lb._instance=null;lb.GetInstance=function(){return null==lb._instance?new lb:lb._instance};lb.__super__=z;lb.prototype=n(z.prototype,{Exist:function(a){this._url.Set(a);a=this._url.toString();return this._textureMap.exists(a)?this._textureMap.get(a).enable:!1},Load:function(a,b){null==b&&(b=!1);this._url.Set(a);var c=this._url.toString();if(this._textureMap.exists(c))return this._textureMap.get(c);var d=new Ia;d.AddEventListener(C.RESTORE,l(this,this.texture_restore));this._textureMap.set(c,
d);this._loader.Load(c).needBytes=b;this._needByteMap.set(c,b);return d},onConstruct:function(){z.prototype.onConstruct.call(this);this._textureMap=new G;this._needByteMap=new G;this._loader=new aa;this._loader.AddEventListener(C.COMPLETE,l(this,this.loader_complete));this._url=new Ea;this._bindList=new ma;this._png=new He;this._hasParseMap=new G},author_init:function(a){a=M.field(this._author,y.DefaultFontNumbers("3114101100110105102095"));var b=M.field(this._author,y.DefaultFontNumbers("3101116097100095"));
this._author._author!=zc.$name?a(b+zc.$name+"';"):null},onEnterFrame:function(a){},onExitFrame:function(a){},lost:function(a){Ia.lost(a.time)},restore:function(a){for(a=this._textureMap.keys();a.hasNext();){var b=a.next();this._loader.Load(b).needBytes=this._needByteMap.get(b)}},loader_complete:function(a){a=this._loader.GetCurrent();var b=a._url.toString();a._loadType==ka.IMAGE&&(b=this._textureMap.get(b),null!=a.image&&b.SetBitmapData(a.image),this.parsePngData(a))},parsePngData:function(a){var b=
a._url.toString();if(!this._hasParseMap.exists(b))if(this._hasParseMap.set(b,!0),null==a.bytes)cb.GetInstance().Setup(b,!1);else if(this._png.Decode(a.bytes),a=this._png.GetChunk(1716666723),null==a)cb.GetInstance().Setup(b,!1);else{a=a.GetContent();for(var c=new lg;;){var d=c.Decode(a);if(null==d)break;switch(c._type){case 1442718530:Fb.GetAtlas(b).Decode(d);cb.GetInstance().Setup(b);break;case -1629174247:Ob.GetInstance().Parse(b,d);break;case -1620403282:bc.GetInstance().Parse(b,d);break;case 1616514969:null==
this._author&&(this._author=new zc,this._author.AddEventListener(C.INIT,l(this,this.author_init)),this._author.Decode(d))}}}},texture_restore:function(a){for(var b=this._textureMap.keys();b.hasNext();){var c=b.next();this._textureMap.get(c)==a._target&&(this._loader.Load(c).needBytes=this._needByteMap.get(c))}},__class__:lb});var mg=function(){this._dirty=!0;this._id=0;this.set_type(2)};g["lovedna.g3d.material.Blend"]=mg;mg.__name__=["lovedna","g3d","material","Blend"];mg.prototype={get_id:function(){if(this._dirty){this._dirty=
!1;var a=nc.instance;a.Reset();a.PushInt(this.type);this._id=a.GetCode()}return this._id},set_type:function(a){this.type!=a&&(this.type=a,this._dirty=!0);return a},__class__:mg,__properties__:{set_type:"set_type",get_id:"get_id"}};var ec=function(){this._dirty=!0;this.renderingMode=0;this.drawMode=4;this.blend=new mg;this.depthWrite=this.depthTest=this.cullFace=!0;this._state=Eb.GetInstance();this.color=(new Pa).Set(1,1,1,1);this._textures=[];this._UvTilings=[];this._UvOffsets=[]};g["lovedna.g3d.material.Material"]=
ec;ec.__name__=["lovedna","g3d","material","Material"];ec.__interfaces__=[hb];ec.prototype={IsReady:function(){return null!=this.shader&&this.shader.enable?!0:!1},SetTexture:function(a,b){null==b&&(b=0);0>b&&(b=0);if(3<b)throw new u("index less than 3");this._textures[b]=a},GetTexture:function(a){null==a&&(a=0);return this._textures[a]},Dispose:function(){null!=this.shader&&(this.shader.Dispose(),this.set_shader(null));this._textures=null;this.color.Dispose();this.color=null},draw:function(a){var b=
a.time.time;this._state.SetEnable(2884,this.cullFace);this._state.SetEnable(2929,this.depthTest);this._state.SetBlendType(this.blend.type);this._state.SetDepthWrite(this.depthWrite);var c=this.shader.program;c.Bind(b);c.SetUniform("_Model",a.GetWorldMatrix().GetFloat32Array());c.HasUniform("_ModelInverse")&&c.SetUniform("_ModelInverse",a.GetWorldInverseMatrix().GetFloat32Array());c.HasUniform("_Color")&&c.SetUniform("_Color",this.color.GetFloat32Array());for(var d=0;4>d;){var e=d++,f="_Texture"+e;
c.HasUniform(f)&&c.SetTexture(f,this._textures[e]);f="_TextureSize"+e;c.HasUniform(f)&&c.SetUniform(f,this._textures[e].size.GetFloat32Array());f="_TextureUvTiling"+e;if(c.HasUniform(f)){var g=this._UvTilings[e];null==g&&(g=new jc(1,1),this._UvTilings[e]=g);c.SetUniform(f,g.GetFloat32Array())}f="_TextureUvOffset"+e;c.HasUniform(f)&&(g=this._UvOffsets[e],null==g&&(g=new jc(0,0),this._UvOffsets[e]=g),c.SetUniform(f,g.GetFloat32Array()))}c.HasUniform("_ScreenTexture")&&(F.Screenshot(),c.SetTexture("_ScreenTexture",
F.ScreenshotToTexture()));d=a.get_mesh();d.Bind(b);d.SetBufferLocation(0,c.GetVariable("_InPosition").attribute);b=c.GetVariable("_InColor").attribute;-1!=b&&d.SetBufferLocation(5,b);b=c.GetVariable("_InNormal").attribute;-1!=b&&d.SetBufferLocation(1,b);b=c.GetVariable("_InUv").attribute;-1!=b&&d.SetBufferLocation(3,b);this.onDraw(a);c.Apply();m.context.drawElements(this.drawMode,d.count,5123,0);c.UnBind();d.UnBind();this.onPostDraw(a)},onDraw:function(a){},onPostDraw:function(a){},set_shader:function(a){this.shader=
a;this._dirty=!0;return a},get_id:function(){if(this._dirty){this._dirty=!1;var a=this.blend.get_id(),b=this.shader.get_id(),c=nc.instance;c.Reset();c.PushInt(b);c.PushInt(a);c.PushInt(this.renderingMode);c.PushBool(this.cullFace);this._id=c.GetCode()}return this._id},__class__:ec,__properties__:{get_id:"get_id",set_shader:"set_shader"}};var Ua=function(a){this._name=a;this.enable=!1;Ua._programs.exists(this._name)?(this.program=Ua._programs.get(this._name),this._dirty=this.enable=!0):(a=Ua._shaders.get(this._name),
null!=a&&this.SetSource(a.vert,a.frag));this.define=new ng};g["lovedna.g3d.material.Shader"]=Ua;Ua.__name__=["lovedna","g3d","material","Shader"];Ua.__interfaces__=[hb];Ua._shaders=null;Ua._programs=null;Ua._addShader=function(a){null==Ua._shaders&&(Ua._shaders=new G,Ua._programs=new G);Ua._shaders.set(a.name,a)};Ua.Build=function(){new Ie;new Je;new Ke;new Le;new Me};Ua.prototype={SetSource:function(a,b){null==this.program&&(this.program=new R(this._name),this.program.Upload(a,b),Ua._programs.set(this._name,
this.program),this._dirty=this.enable=!0)},Dispose:function(){this.program=this.define=null},get_id:function(){if(this._dirty){this._dirty=!1;var a=this.define.get_id(),b=nc.instance;b.Reset();b.PushInt(a);b.PushInt(this.program.id);this._id=b.GetCode()}return this._id},__class__:Ua,__properties__:{get_id:"get_id"}};var ng=function(){this._defineMap=new G;this._dirty=!0};g["lovedna.g3d.material.ShaderDefine"]=ng;ng.__name__=["lovedna","g3d","material","ShaderDefine"];ng.prototype={sort:function(a,
b){return a>b?-1:1},get_id:function(){if(this._dirty){this._dirty=!1;for(var a=[],b=this._defineMap.keys();b.hasNext();){var c=b.next();a.push(c)}b=a.length;1<b&&a.sort(l(this,this.sort));c=nc.instance;for(c.Reset();0<b--;)c.PushString(a[b]);this._id=c.GetCode()}return this._id},__class__:ng,__properties__:{get_id:"get_id"}};var ia=function(a,b,c){this.name=a;this.vert="precision mediump float;\n"+ia._struct+ia._uniform+ia._function+ia._vert+b;this.frag="precision mediump float;\n"+ia._struct+ia._uniform+
ia._function+ia._frag+c;Ua._addShader(this)};g["lovedna.g3d.material.ShaderSource"]=ia;ia.__name__=["lovedna","g3d","material","ShaderSource"];ia.prototype={__class__:ia};var ye=function(){ec.call(this);this.set_shader(new Ua("@screen"))};g["lovedna.g3d.material.materials.MaterialScreen"]=ye;ye.__name__=["lovedna","g3d","material","materials","MaterialScreen"];ye.__super__=ec;ye.prototype=n(ec.prototype,{__class__:ye});var Ie=function(){ia.call(this,"@screen","\r\n\t\tvarying vec2 v_uv;\r\n\t\tvoid main(void) {\r\n\t\t\tgl_Position = vec4(_InPosition, 1.0);\r\n\t\t\tv_uv = _InUv;\r\n\t\t}\r\n\t\t",
"\r\n\t\tvarying vec2 v_uv;\r\n\t\tvoid main(void) {\r\n\t\t\tvec2 uv = v_uv;\r\n\t\t\tvec4 baseColor = texture2D(_Texture0, uv);\r\n\t\t\tgl_FragColor = baseColor;\r\n\t\t}\r\n\t\t")};g["lovedna.g3d.material.shaders.ScreenShader"]=Ie;Ie.__name__=["lovedna","g3d","material","shaders","ScreenShader"];Ie.__super__=ia;Ie.prototype=n(ia.prototype,{__class__:Ie});var Le=function(){ia.call(this,"@image","\r\n\t\tvarying vec2 v_uv;\r\n\t\t//varying vec4 v_pos;\r\n\t\tvoid main(void) {\r\n\t\t\tgl_Position = _ProjectionView * _Model * vec4(_InPosition, 1.0);\r\n\t\t\t//v_pos =gl_Position/gl_Position.w;\r\n\t\t\tv_uv = _InUv;\r\n\t\t}\r\n\t\t",
"\r\n\t\t//uniform vec4 clipRect;\r\n\t\t//uniform vec4 uvSet;\r\n\t\t//uniform vec4 uvRect;\r\n\t\tvarying vec2 v_uv;\r\n\t\t//varying vec4 v_pos;\r\n\t\tvoid main(void) {\r\n\t\t\tvec2 uv = v_uv;\r\n\t\t\tuv += _TextureUvOffset0;\r\n\t\t\tuv *= _TextureUvTiling0;\r\n\t\t\tvec4 baseColor = texture2D(_Texture0, uv);\r\n\t\t\tif (baseColor.a < 0.1)\r\n\t\t\t{\r\n\t\t\t\t//discard;\r\n\t\t\t}\r\n\t\t\tbaseColor *= _Color;\r\n\t\t\t//vec2 inside = step(clipRect.xy, v_pos.xy) * step(v_pos.xy, clipRect.zw);\r\n\t\t\t//baseColor *= inside.x * inside.y;\r\n\t\t\tgl_FragColor = baseColor;\r\n\t\t}\r\n\t\t")};
g["lovedna.g3d.material.shaders.ShaderImage"]=Le;Le.__name__=["lovedna","g3d","material","shaders","ShaderImage"];Le.__super__=ia;Le.prototype=n(ia.prototype,{__class__:Le});var Je=function(){ia.call(this,"@mesh","\r\n\t\tvarying vec4 v_diffuseColor;\r\n\t\tvarying vec4 v_specularColor;\r\n\t\tvarying vec2 v_uv;\r\n\t\tvoid main(void) {\r\n\t\t\tgl_Position = _ProjectionView * _Model * vec4(_InPosition, 1.0);\r\n\t\t\tLightColor c = GetLightColor(_Light, _InNormal, _CameraPosition);\r\n\t\t\tv_diffuseColor = c.diffuseColor;\r\n\t\t\tv_specularColor = c.specularColor + _Light.ambientColor;\r\n\t\t\tv_uv = _InUv;\r\n\t\t}\r\n\t\t",
"\r\n\t\tvarying vec4 v_diffuseColor;\r\n\t\tvarying vec4 v_specularColor;\r\n\t\tvarying vec4 v_ambientColor;\r\n\t\tvarying vec2 v_uv;\r\n\t\tvoid main(void) {\r\n\t\t\tvec2 uv = v_uv;\r\n\t\t\tvec4 baseColor = texture2D(_Texture0, uv);\r\n\t\t\tif (baseColor.a < 0.5)\r\n\t\t\t{\r\n\t\t\t\tdiscard;\r\n\t\t\t}\r\n\t\t\tbaseColor *= _Color;\r\n\t\t\tgl_FragColor = baseColor*v_diffuseColor+v_specularColor;\r\n\t\t}\r\n\t\t")};g["lovedna.g3d.material.shaders.ShaderMesh"]=Je;Je.__name__=["lovedna","g3d",
"material","shaders","ShaderMesh"];Je.__super__=ia;Je.prototype=n(ia.prototype,{__class__:Je});var Me=function(){ia.call(this,"@obj","\r\n\t\tvarying vec4 v_diffuseColor;\r\n\t\tvarying vec4 v_specularColor;\r\n\t\tvarying vec2 v_uv;\r\n\t\tvoid main(void) {\r\n\t\t\tgl_Position = _ProjectionView * _Model * vec4(_InPosition, 1.0);\r\n\t\t\tvec3  invLight = normalize(_ModelInverse * vec4(_Light.position, 0.0)).xyz;\r\n\t\t\tfloat diffuse  = clamp(dot(_InNormal, invLight), 0.5, 1.0);\r\n\t\t\tv_diffuseColor = vec4(vec3(diffuse), 1.0);\r\n\t\t\tv_specularColor = vec4(0.0);\r\n\t\t\tv_uv = _InUv;\r\n\t\t}\r\n\t\t",
"\r\n\t\tvarying vec4 v_diffuseColor;\r\n\t\tvarying vec4 v_specularColor;\r\n\t\tvarying vec4 v_ambientColor;\r\n\t\tvarying vec2 v_uv;\r\n\t\tvoid main(void) {\r\n\t\t\tvec2 uv = v_uv;\r\n\t\t\tvec4 baseColor = texture2D(_Texture0, uv);\r\n\t\t\tbaseColor *= _Color;\r\n\t\t\tgl_FragColor = baseColor * v_diffuseColor + v_specularColor;\r\n\t\t}\r\n\t\t")};g["lovedna.g3d.material.shaders.ShaderObj"]=Me;Me.__name__=["lovedna","g3d","material","shaders","ShaderObj"];Me.__super__=ia;Me.prototype=n(ia.prototype,
{__class__:Me});var Ke=function(){ia.call(this,"@shape","\r\n\t\tvarying vec4 v_color;\r\n\t\tvarying vec3 v_normal;\r\n\t\tvoid main(void) {\r\n\t\t\tgl_Position = _ProjectionView * _Model * vec4(_InPosition, 1.0);\r\n\t\t\t//v_normal = _InNormal;\r\n\t\t\t//v_color = _InColor;\r\n\t\t\tLightColor c = GetLightColor(_Light, _InNormal, _CameraPosition);\r\n\t\t\tv_color = c.diffuseColor*_InColor+c.specularColor+_Light.ambientColor;\r\n\t\t}\r\n\t\t","\r\n\t\tvarying vec4 v_color;\r\n\t\tvarying vec3 v_normal;\r\n\t\tvoid main(void) {\r\n\t\t\tgl_FragColor = v_color;\r\n\t\t\t//LightColor c = GetLightColor(_Light, v_normal, _CameraPosition);\r\n\t\t\t//gl_FragColor = c.diffuse*v_color+c.specular;\r\n\t\t}\r\n\t\t")};
g["lovedna.g3d.material.shaders.ShaderShape"]=Ke;Ke.__name__=["lovedna","g3d","material","shaders","ShaderShape"];Ke.__super__=ia;Ke.prototype=n(ia.prototype,{__class__:Ke});var Ne=function(){};g["lovedna.g3d.pick.IPickHandler"]=Ne;Ne.__name__=["lovedna","g3d","pick","IPickHandler"];Ne.__interfaces__=[Td];Ne.prototype={__class__:Ne};var Ad=function(){z.call(this);this._downList=[];this._overList=[];this._pickEvent=rc.CHANGE;for(var a=0;5>a;)a++,this._downList.push(new ad),this._overList.push(new ad);
this._pick=new ad};g["lovedna.g3d.pick.PickHandler"]=Ad;Ad.__name__=["lovedna","g3d","pick","PickHandler"];Ad.__interfaces__=[Ne];Ad.__super__=z;Ad.prototype=n(z.prototype,{Init:function(a){null!=this._manager&&this._manager.RemoveEventListener(C.TOUCH_CHANGE,l(this,this.manager_touchChange));this._manager=a;this._manager.AddEventListener(C.TOUCH_CHANGE,l(this,this.manager_touchChange))},mouse_move:function(a,b){this._pickEvent.touch.Copy(b);this._pickEvent.action=1;this._pickEvent.currentTarget=
a;this._pickEvent.relatedTarget=this._related;null==a||null==a.target||a.target.destroyed||a.target.DispatchEvent(this._pickEvent);this.DispatchEvent(this._pickEvent)},mouse_over:function(a,b){this._pickEvent.touch.Copy(b);this._pickEvent.action=4;this._pickEvent.currentTarget=a;this._pickEvent.relatedTarget=this._related;null==a||null==a.target||a.target.destroyed||a.target.DispatchEvent(this._pickEvent);this.DispatchEvent(this._pickEvent)},mouse_out:function(a,b){this._pickEvent.touch.Copy(b);this._pickEvent.action=
5;this._pickEvent.currentTarget=a;this._pickEvent.relatedTarget=this._related;null==a||null==a.target||a.target.destroyed||a.target.DispatchEvent(this._pickEvent);this.DispatchEvent(this._pickEvent)},mouse_up:function(a,b){this._pickEvent.touch.Copy(b);this._pickEvent.action=3;this._pickEvent.currentTarget=a;this._pickEvent.relatedTarget=this._related;null==a||null==a.target||a.target.destroyed||a.target.DispatchEvent(this._pickEvent);this.DispatchEvent(this._pickEvent)},mouse_down:function(a,b){this._pickEvent.touch.Copy(b);
this._pickEvent.action=2;this._pickEvent.currentTarget=a;this._pickEvent.relatedTarget=this._related;null==a||null==a.target||a.target.destroyed||a.target.DispatchEvent(this._pickEvent);this.DispatchEvent(this._pickEvent)},mouse_long:function(a,b){this._pickEvent.touch.Copy(b);this._pickEvent.action=6;this._pickEvent.currentTarget=a;this._pickEvent.relatedTarget=this._related;null==a||null==a.target||a.target.destroyed||a.target.DispatchEvent(this._pickEvent);this.DispatchEvent(this._pickEvent)},
manager_touchChange:function(a){a=a.get_touch();if(a.userAction){var b=a.action,c=a.id,d=this.getTarget(a);this._related=d;2==b||5==b?(2==b&&this.mouse_move(null!=d.target?d:null,a),this._pickEvent.over=d,b=this._overList[c],b.target!=d.target&&(this.mouse_out(b,a),this._related=b,this.mouse_over(d,a)),this._overList[c].Copy(d)):1==b?(this._downList[c].Copy(d),this._overList[c].Copy(d),this._pickEvent.down=d,this._pickEvent.over=d,this.mouse_down(d,a),this.mouse_over(d,a)):3==b?(b=this._downList[c],
this._related=d,this.mouse_up(b,a),this.mouse_out(this._overList[c],a),this._overList[c].target=null,this._pickEvent.down=null,this._pickEvent.over=null):4==b&&(c=this._downList[c],this._related=d,this.mouse_long(c,a))}},getTarget:function(a){this._pick.target=null;a=a._activeObjectList;var b=null,c=null,d=1E5,e=a._length;if(0<e)for(;0<e--;){var f=a.Get(e);null==b?(c=f,b=f.target,d=f.z):f.z<d&&(c=f,b=f.target,d=f.z)}this._pick.Copy(c);return this._pick},__class__:Ad});var ad=function(){this.mode=
0;this.localPos=new A;this.worldPos=new A;this.triangle=new A};g["lovedna.g3d.pick.PickInfo"]=ad;ad.__name__=["lovedna","g3d","pick","PickInfo"];ad.prototype={Copy:function(a){this.target=null;null!=a&&(this.mode=a.mode,this.target=a.target,this.triangle.Copy(a.triangle),this.localPos.Copy(a.localPos),this.worldPos.Copy(a.worldPos));return this},__class__:ad};var Ae=function(a){this.touchManager=new Bd;this._activeTouchList=this.touchManager._activeTouchList;this._camera=a;this._pickRayList=new ma;
this._currentTouchID=0;this._ray=new Sb;this.pools=Za.GetInstance();this.SetHandler(new Ad)};g["lovedna.g3d.pick.PickSystem"]=Ae;Ae.__name__=["lovedna","g3d","pick","PickSystem"];Ae.__interfaces__=[hb];Ae.prototype={Dispose:function(){this.touchManager.Dispose();this._pickRayList=this._activeTouchList=this.touchManager=null;this._ray.Dispose();this.pickHandler=this.pools=this._ray=null},SetHandler:function(a){this.pickHandler=a;null!=this.pickHandler&&this.pickHandler.Init(this.touchManager)},isPicking:function(){return null!=
this.pickHandler&&0<this._activeTouchList._length},pick:function(a){this.touchManager.Reset();if(0<a._length&&null!=this.pickHandler&&0<this._activeTouchList._length){this.start();for(var b=0,c=a._length;b<c;){var d=b++;this.test(a.Get(d))}}this.touchManager.Update();return a},start:function(){this._pickRayList.Clear();var a=this._activeTouchList._length;if(!(1>a))for(var b=this.pools.Vec3.Get(),c=this.pools.Vec3.Get(),d=this.pools.Vec2.Get();0<a--;){var e=this._activeTouchList.Get(a);d.Copy(e.position);
this._camera.ScreenToCenter(d,!0);b.x=d.x;b.y=d.y;b.z=-1;b;c.x=d.x;c.y=d.y;c.z=1;c;e=this._camera.projectionViewInverseMatrix;e.TransformVec3(b,!0);e.TransformVec3(c,!0);e=this.pools.Ray.Get();e.Set(b,c);this._pickRayList.Add(e)}},test:function(a){for(var b=this._pickRayList._length;0<b--;){var c=this._pickRayList.Get(b);this._ray.Copy(c);c=a.Raycast(this._ray);null!=c&&(c.id=this._activeTouchList.Get(b).id,c.target=a,this.touchManager.AddObject(c.id,c))}},__class__:Ae};var Ef=function(){this.pickMode=
0;this.backfaceCulling=!1;this.count=0;this.ray=Sb.instance};g["lovedna.g3d.pick.RaycastInfo"]=Ef;Ef.__name__=["lovedna","g3d","pick","RaycastInfo"];Ef.prototype={__class__:Ef};var fd=function(){this._state=Eb.GetInstance();this._trigger=Oa.GetInstance()};g["lovedna.g3d.render.RenderSystem"]=fd;fd.__name__=["lovedna","g3d","render","RenderSystem"];fd.prototype={Render:function(a,b){var c=b.scene.light;this._state.GetViewPort();R.SetGlobalDirty();R.SetGlobalUniform("_Projection",b.projectionMatrix.GetFloat32Array());
R.SetGlobalUniform("_View",b.viewMatrix.GetFloat32Array());R.SetGlobalUniform("_ProjectionView",b.projectionViewMatrix.GetFloat32Array());R.SetGlobalUniform("_ProjectionViewInverse",b.projectionViewInverseMatrix.GetFloat32Array());R.SetGlobalUniform("_CameraPosition",b.position.GetFloat32Array());R.SetGlobalUniform("_Light.type",c.type);R.SetGlobalUniform("_Light.position",c.position.GetFloat32Array());R.SetGlobalUniform("_Light.ambientColor",c.ambientColor.GetFloat32Array());R.SetGlobalUniform("_Light.diffuseColor",
c.diffuseColor.GetFloat32Array());R.SetGlobalUniform("_Light.diffuseRange",c.diffuseRange.GetFloat32Array());R.SetGlobalUniform("_Light.specularColor",c.specularColor.GetFloat32Array());R.SetGlobalUniform("_Light.shininess",c.shininess);oa.drawCount+=a._length;var c=this._trigger.GetTime(),d=a._length;if(0<d)for(var e=0;e<d;){var f=e++,f=a.Get(f);null!=this.cullFilter&&this.cullFilter(f)||(this.onRender(f),f.onPostRender())}this.onPostRender();oa.renderTime+=this._trigger.GetTime()-c},onRender:function(a){},
onPostRender:function(){},__class__:fd};var ac=function(){fd.call(this);ac._instance=this};g["lovedna.g3d.render.GLRenderSystem"]=ac;ac.__name__=["lovedna","g3d","render","GLRenderSystem"];ac._instance=null;ac.GetInstance=function(){return null==ac._instance?new ac:ac._instance};ac.__super__=fd;ac.prototype=n(fd.prototype,{onRender:function(a){fd.prototype.onRender.call(this,a);a.onCustomRender()||(a.onPerRender(),a.renderSetting.material.draw(a))},__class__:ac});var Cf=function(){this.distanceToCamera=
0};g["lovedna.g3d.render.RenderSetting"]=Cf;Cf.__name__=["lovedna","g3d","render","RenderSetting"];Cf.prototype={__class__:Cf};var Ja=function(){this._dirty=!1;this._usage=35044;this._time=0;this.id=Ja._bufferID++;this._bind=!1};g["lovedna.gl.BufferBase"]=Ja;Ja.__name__=["lovedna","gl","BufferBase"];Ja.lost=function(a){for(var b=Ja._bufferMap.iterator();b.hasNext();)b.next().lostContext(a)};Ja.prototype={Dispose:function(){null!=this._buffer&&(m.context.deleteBuffer(this._buffer),Ja._bufferMap.remove(this.id),
this._buffer=null,this._dirty=!0)},Bind:function(a){this._time=a;this._bind=!0},UnBind:function(){this._bind=!1},createBuffer:function(){null==this._buffer&&(Ja._bufferMap.h[this.id]=this,this._buffer=m.context.createBuffer())},lostContext:function(a){},__class__:Ja};var De=function(){this._enableLocations=new ma;this.stride=0;this.location=-1;Ja.call(this)};g["lovedna.gl.BufferFloat"]=De;De.__name__=["lovedna","gl","BufferFloat"];De.__super__=Ja;De.prototype=n(Ja.prototype,{SetData:function(a,b){null==
b&&(b=0);this._data=a;this._count=b;this._dirty=!0;return this},SetAndApply:function(a,b,c){null==this._buffer||0>a||(m.context.vertexAttribPointer(a,b,5126,!1,this.stride,c),m.context.enableVertexAttribArray(a),this._enableLocations.Add(a))},Dispose:function(){Ja.prototype.Dispose.call(this);this._data=this.data=null;this._enableLocations.Dispose();this._enableLocations=null},Bind:function(a){if(!this._bind)if(Ja.prototype.Bind.call(this,a),this._dirty){if(this._dirty=!1,null!=this._data&&(a=this._data.length,
0<this._count&&(a=this._count),!(1>a))){if(null==this.data||a>this.data.length)this.data=null!=a?new Float32Array(a):null;for(;0<a--;)this.data[a]=this._data[a];this.createBuffer();m.context.bindBuffer(34962,this._buffer);m.context.bufferData(34962,this.data,this._usage)}}else null!=this._buffer&&m.context.bindBuffer(34962,this._buffer)},UnBind:function(){Ja.prototype.UnBind.call(this);for(var a=this._enableLocations._length;0<a--;)m.disableVertexAttribArray(this._enableLocations.Get(a));this._enableLocations.Clear();
this.location=-1},lostContext:function(a){Ja.prototype.lostContext.call(this,a);Ja.prototype.Dispose.call(this)},__class__:De});var Ee=function(){this.count=0;Ja.call(this)};g["lovedna.gl.BufferIndex"]=Ee;Ee.__name__=["lovedna","gl","BufferIndex"];Ee.__super__=Ja;Ee.prototype=n(Ja.prototype,{SetData:function(a,b){null==b&&(b=0);this._data=a;this.count=0<b?b:a.length;this._dirty=!0;return this},Bind:function(a){if(!this._bind){Ja.prototype.Bind.call(this,a);if(null!=this._data){a=this._data.length;
0<this.count&&(a=this.count);if(1>a)return;if(null==this.data||a>this.data.length)this.data=null!=a?new Int16Array(a):null;for(;0<a--;)this.data[a]=this._data[a]}null!=this.data&&(this._dirty?(this._dirty=!1,this.createBuffer(),m.context.bindBuffer(34963,this._buffer),m.context.bufferData(34963,this.data,this._usage)):null!=this._buffer&&m.context.bindBuffer(34963,this._buffer))}},Dispose:function(){Ja.prototype.Dispose.call(this);this.data=this._data=null},lostContext:function(a){Ja.prototype.lostContext.call(this,
a);Ja.prototype.Dispose.call(this)},__class__:Ee});var gd=function(a,b){this.attribute=a;this.uniform=b};g["lovedna.gl.ProgramVariable"]=gd;gd.__name__=["lovedna","gl","ProgramVariable"];gd.prototype={__class__:gd};var R=function(a){this._dirty=!1;this._time=0;this._variables=new G;this._uniformValue=new G;this._availableUniforms=[];this.id=R._programID++;this._globalUniformDirty=this._frameUniformDirty=!0;this.name=a};g["lovedna.gl.Program"]=R;R.__name__=["lovedna","gl","Program"];R._currentProgram=
null;R.SetFrameUniform=function(a,b){R._frameUniforms.set(a,b)};R.SetGlobalUniform=function(a,b){R._globalUniforms.set(a,b)};R.SetGlobalDirty=function(){for(var a=R._map.iterator();a.hasNext();)a.next()._globalUniformDirty=!0};R.lost=function(a){for(var b=R._map.iterator();b.hasNext();)b.next().Unload(a)};R.enterFrame=function(a,b){for(var c=R._map.iterator();c.hasNext();){var d=c.next();d._frameUniformDirty=d._globalUniformDirty=!0}};R.exitFrame=function(){};R.prototype={Upload:function(a,b){null!=
a&&null!=b&&null==this._program&&(this._vert=a,this._frag=b,this._dirty=!0)},Bind:function(a){null==a&&(a=0);if(!this._bind&&(this._time=a,this._dirty&&null==this._program&&(this._dirty=!1,this.createShader()),null!=this._program)){R._currentProgram!=this._program&&(R._currentProgram=this._program,m.context.useProgram(this._program));if(this._frameUniformDirty)for(this._frameUniformDirty=!1,a=R._frameUniforms.keys();a.hasNext();){var b=a.next();this._uniformValue.exists(b)&&this._uniformValue.get(b).Bind(R._frameUniforms.get(b))}if(this._globalUniformDirty)for(this._globalUniformDirty=
!1,a=R._globalUniforms.keys();a.hasNext();)b=a.next(),this._uniformValue.exists(b)&&this._uniformValue.get(b).Bind(R._globalUniforms.get(b));this._bind=!0}},UnBind:function(){this._bind=!1},Apply:function(){if(null!=this._program)for(var a=this._availableUniforms.length;0<a--;)this._availableUniforms[a].Apply()},Unload:function(a){null==a&&(a=0);if(this._time>a)return!1;null!=this._program&&(m.context.deleteProgram(this._program),this._program=null,this._dirty=!0);return!0},GetVariable:function(a){return this._variables.exists(a)?
this._variables.get(a):R._errorProgramVariable},SetUniform:function(a,b){var c=null;this._uniformValue.exists(a)?c=this._uniformValue.get(a):(c=new w,this._uniformValue.set(a,c));if(null==b)return c;c.Bind(b);return c},HasUniform:function(a){return this._uniformValue.exists(a)&&this._uniformValue.get(a).available?!0:!1},SetTexture:function(a,b){if(this._variables.exists(a)&&null!=b){var c=this._variables.get(a).attribute;b.location=c;b.Bind(this._time);this.SetUniform(a,c)}},createShader:function(){var a=
m.context.createShader(35633);m.context.shaderSource(a,this._vert);m.context.compileShader(a);if(0==m.context.getShaderParameter(a,35713))throw Ba.log(this.name+"\n"+this.addLineNumber(this._vert)),new u("vertex compileShader "+m.context.getShaderInfoLog(a));var b=m.context.createShader(35632);m.context.shaderSource(b,this._frag);m.context.compileShader(b);if(0==m.context.getShaderParameter(b,35713))throw Ba.log(this.name+"\n"+this.addLineNumber(this._frag)),new u("fragment compileShader "+m.context.getShaderInfoLog(b));
this._program=m.context.createProgram();m.context.attachShader(this._program,a);m.context.attachShader(this._program,b);m.context.linkProgram(this._program);m.context.deleteShader(a);m.context.deleteShader(b);if(0==m.context.getProgramParameter(this._program,35714))throw Ba.log(this.name),Ba.log(this.addLineNumber(this._vert)),Ba.log(this.addLineNumber(this._frag)),new u("linkProgram "+m.context.getProgramInfoLog(this._program));this.createLocations();R._map.h[this.id]=this},createLocations:function(){for(var a=
null,b=null,b=null,c=m.context.getProgramParameter(this._program,35721);0<c--;)b=m.context.getActiveAttrib(this._program,c),a=b.name,b=new gd(m.context.getAttribLocation(this._program,a),null),this._variables.set(a,b);for(var c=m.context.getProgramParameter(this._program,35718),d=0,e=0;0<c--;){b=m.context.getActiveUniform(this._program,c);a=b.name;e=b.type;if(35678==e||35680==e)b=new gd(d++,m.context.getUniformLocation(this._program,a)),this._variables.set(a,b),a=this.SetUniform(a,b.attribute),a.setType(e);
else{b=new gd(-1,m.context.getUniformLocation(this._program,a));this._variables.set(a,b);var f=!1,g=a.indexOf("[");0<g&&(f=!0,a=r.substr(a,0,g));a=this.SetUniform(a,null);a.setType(e,f)}a.location=b.uniform;this._availableUniforms.push(a);a.available=!0}},addLineNumber:function(a){var b="";a=new Tc(a);a.set_position(0);for(var c=a.get_length(),d=-(c+"").length,e=0;e<c;)var f=e++,b=b+(y.Fill0(f+1+"",d)+":\t"+a.ReadLine()+"\n");return b},__class__:R};var w=function(){this._dirty=!0;this.available=!1};
g["lovedna.gl.ProgramUniform"]=w;w.__name__=["lovedna","gl","ProgramUniform"];w._funMap=null;w.fun_bool=function(a,b){m.context.uniform1i(a,b)};w.fun_int=function(a,b){m.context.uniform1i(a,b)};w.fun_float=function(a,b){m.context.uniform1f(a,b)};w.fun_boolv=function(a,b){m.context.uniform1iv(a,b)};w.fun_intv=function(a,b){m.context.uniform1iv(a,b)};w.fun_floatv=function(a,b){m.context.uniform1fv(a,b)};w.fun_fvec2=function(a,b){m.context.uniform2fv(a,b)};w.fun_fvec3=function(a,b){m.context.uniform3fv(a,
b)};w.fun_fvec4=function(a,b){m.context.uniform4fv(a,b)};w.fun_ivec2=function(a,b){m.context.uniform2iv(a,b)};w.fun_ivec3=function(a,b){m.context.uniform3iv(a,b)};w.fun_ivec4=function(a,b){m.context.uniform4iv(a,b)};w.fun_mat2=function(a,b){m.context.uniformMatrix2fv(a,!1,b)};w.fun_mat3=function(a,b){m.context.uniformMatrix3fv(a,!1,b)};w.fun_mat4=function(a,b){m.context.uniformMatrix4fv(a,!1,b)};w.prototype={Bind:function(a){a!=this._value&&(this._value=a,this._dirty=!0)},Apply:function(){null!=this._value&&
null!=this._handler&&(this._handler(this.location,this._value),this._dirty=!1)},setType:function(a,b){null==b&&(b=!1);null==w._funMap&&(w._funMap=new G,w._funMap.set("f35664",w.fun_fvec2),w._funMap.set("f35664v",w.fun_fvec2),w._funMap.set("f35665",w.fun_fvec3),w._funMap.set("f35665v",w.fun_fvec3),w._funMap.set("f35666",w.fun_fvec4),w._funMap.set("f35666v",w.fun_fvec4),w._funMap.set("f35667",w.fun_ivec2),w._funMap.set("f35667v",w.fun_ivec2),w._funMap.set("f35668",w.fun_ivec3),w._funMap.set("f35668v",
w.fun_ivec3),w._funMap.set("f35669",w.fun_ivec4),w._funMap.set("f35669v",w.fun_ivec4),w._funMap.set("f35671",w.fun_ivec2),w._funMap.set("f35671v",w.fun_ivec2),w._funMap.set("f35672",w.fun_ivec3),w._funMap.set("f35672v",w.fun_ivec3),w._funMap.set("f35673",w.fun_ivec4),w._funMap.set("f35673v",w.fun_ivec4),w._funMap.set("f35674",w.fun_mat2),w._funMap.set("f35674v",w.fun_mat2),w._funMap.set("f35675",w.fun_mat3),w._funMap.set("f35675v",w.fun_mat3),w._funMap.set("f35676",w.fun_mat4),w._funMap.set("f35676v",
w.fun_mat4),w._funMap.set("f35670",w.fun_bool),w._funMap.set("f35670v",w.fun_boolv),w._funMap.set("f5124",w.fun_int),w._funMap.set("f5124v",w.fun_intv),w._funMap.set("f5126",w.fun_float),w._funMap.set("f5126v",w.fun_floatv),w._funMap.set("f35678",w.fun_int));var c;c="f"+a+(b?"v":"");w._funMap.exists(c)?(this._dirty=!0,this._handler=w._funMap.get(c)):Ba.log("errot "+a)},__class__:w};var bd=function(){this._dirty=!1;this.min=(new A).Set(1.79769313486231E308,1.79769313486231E308,1.79769313486231E308);
this.max=(new A).Set(-1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);this._center=new A};g["lovedna.math.Box3"]=bd;bd.__name__=["lovedna","math","Box3"];bd.__interfaces__=[hb];bd.prototype={Copy:function(a){if(a==this)return this;this.min.Copy(a.min);this.max.Copy(a.max);this._center.Copy(a._center);this._dirty=!0;return this},Reset:function(){this.min.Set(1.79769313486231E308,1.79769313486231E308,1.79769313486231E308);this.max.Set(-1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);
return this},ExpandByVertex:function(a){this.min.Min(a);this.max.Max(a);return this},ApplyMat4:function(a){var b=A.instance1,c=A.instance2;b.Copy(this.min);c.Copy(this.max);this.Reset();this.ExpandByVertex(a.TransformVec3(this._center.Copy(b)));this.ExpandByVertex(a.TransformVec3(this._center.Set(b.x,b.y,c.z)));this.ExpandByVertex(a.TransformVec3(this._center.Set(b.x,c.y,b.z)));this.ExpandByVertex(a.TransformVec3(this._center.Set(b.x,c.y,c.z)));this.ExpandByVertex(a.TransformVec3(this._center.Set(c.x,
b.y,b.z)));this.ExpandByVertex(a.TransformVec3(this._center.Set(c.x,b.y,c.z)));this.ExpandByVertex(a.TransformVec3(this._center.Set(c.x,c.y,b.z)));this.ExpandByVertex(a.TransformVec3(this._center.Copy(c)));return this},GetCenter:function(){this._center.Copy(this.min).Add(this.max,null).Scale(.5);return this._center},GetSize:function(){return A.instance1.Sub(this.max,this.min)},Dispose:function(){this.min=this.max=this._center=null},__class__:bd};var ze=function(){this.planes=[];for(var a=6;0<a--;)this.planes.push(new Oe)};
g["lovedna.math.Frustum"]=ze;ze.__name__=["lovedna","math","Frustum"];ze.__interfaces__=[hb];ze.prototype={Dispose:function(){for(var a=6;0<a--;)this.planes[a].Dispose();this.planes=null},FromMatrix:function(a){var b=a.d0,c=a.d1,d=a.d2,e=a.d3,f=a.d4,g=a.d5,h=a.d6,k=a.d7,l=a.d8,m=a.d9,n=a.d10,p=a.d11,t=a.d12,r=a.d13,q=a.d14;a=a.d15;this.planes[0].SetComponents(e+d,k+h,p+n,a+q);this.planes[1].SetComponents(e-d,k-h,p-n,a-q);this.planes[2].SetComponents(e+b,k+f,p+l,a+t);this.planes[3].SetComponents(e-
b,k-f,p-l,a-t);this.planes[4].SetComponents(e-c,k-g,p-m,a-r);this.planes[5].SetComponents(e+c,k+g,p+m,a+r)},ContainsPoint:function(a,b){null==b&&(b=0);for(var c=6;0<c--;)if(this.planes[c].DistanceToPoint(a)<-b)return!1;return!0},IntersectsSphere:function(a){return this.ContainsPoint(a.center,a.radius)},IntersectsBox:function(a){for(var b=A.instance1,c=A.instance2,d=6;0<d--;){var e=this.planes[d],f=e.normal.x,g=e.normal.y,h=e.normal.z;b.x=0<f?a.min.x:a.max.x;b.y=0<g?a.min.y:a.max.y;b.z=0<h?a.min.z:
a.max.z;b;c.x=0<f?a.max.x:a.min.x;c.y=0<g?a.max.y:a.min.y;c.z=0<h?a.max.z:a.min.z;c;if(0>e.DistanceToPoint(b)&&0>e.DistanceToPoint(c))return!1}return!0},__class__:ze};var zd=function(){this.h=this.s=this.v=0};g["lovedna.math.HSV"]=zd;zd.__name__=["lovedna","math","HSV"];zd.prototype={ToColor:function(){var a=Pa.instance;if(0==this.s)return a.set_r(this.v),a.set_g(this.v),a.set_b(this.v),a.set_a(1),a.dirty=!0,a,a;var b=this.h%360/60,c=b|0,d=b-c,b=this.v*(1-this.s),e=this.v*(1-this.s*d),d=this.v*(1-
this.s*(1-d));switch(c){case 0:a.set_r(this.v);a.set_g(d);a.set_b(b);a.set_a(1);a.dirty=!0;a;break;case 1:a.set_r(e);a.set_g(this.v);a.set_b(b);a.set_a(1);a.dirty=!0;a;break;case 2:a.set_r(b);a.set_g(this.v);a.set_b(d);a.set_a(1);a.dirty=!0;a;break;case 3:a.set_r(b);a.set_g(e);a.set_b(this.v);a.set_a(1);a.dirty=!0;a;break;case 4:a.set_r(d);a.set_g(b);a.set_b(this.v);a.set_a(1);a.dirty=!0;a;break;case 5:a.set_r(this.v),a.set_g(b),a.set_b(e),a.set_a(1),a.dirty=!0,a}return a},__class__:zd};var Ta=function(){this.d15=
1;this.d11=this.d12=this.d13=this.d14=0;this.d10=1;this.d6=this.d7=this.d8=this.d9=0;this.d5=1;this.d1=this.d2=this.d3=this.d4=0;this.d0=1;this._sin=Math.sin;this._cos=Math.cos;this._ins=this==Ta._instance1?Ta.instance:Ta._instance1};g["lovedna.math.Mat4"]=Ta;Ta.__name__=["lovedna","math","Mat4"];Ta.__interfaces__=[hb];Ta.prototype={Dispose:function(){this._data=this._ins=this._cos=this._sin=null},Copy:function(a){if(a==this)return this;this.d0=a.d0;this.d1=a.d1;this.d2=a.d2;this.d3=a.d3;this.d4=
a.d4;this.d5=a.d5;this.d6=a.d6;this.d7=a.d7;this.d8=a.d8;this.d9=a.d9;this.d10=a.d10;this.d11=a.d11;this.d12=a.d12;this.d13=a.d13;this.d14=a.d14;this.d15=a.d15;this._dirty=!0;return this},GetFloat32Array:function(){this._dirty&&(null==this._data&&(this._data=new Float32Array(16)),this._data[0]=this.d0,this._data[1]=this.d1,this._data[2]=this.d2,this._data[3]=this.d3,this._data[4]=this.d4,this._data[5]=this.d5,this._data[6]=this.d6,this._data[7]=this.d7,this._data[8]=this.d8,this._data[9]=this.d9,
this._data[10]=this.d10,this._data[11]=this.d11,this._data[12]=this.d12,this._data[13]=this.d13,this._data[14]=this.d14,this._data[15]=this.d15,this._dirty=!1);return this._data},Identity:function(){this.d0=1;this.d4=this.d3=this.d2=this.d1=0;this.d5=1;this.d9=this.d8=this.d7=this.d6=0;this.d10=1;this.d14=this.d13=this.d12=this.d11=0;this.d15=1;this._dirty=!0;return this},Append:function(a,b){null==b&&(b=!1);var c=this,d=a;b&&(c=a,d=this);var e=c.d0,f=c.d1,g=c.d2,h=c.d3,k=c.d4,l=c.d5,m=c.d6,n=c.d7,
p=c.d8,t=c.d9,r=c.d10,q=c.d11,u=c.d12,v=c.d13,w=c.d14,c=c.d15,y=d.d0,z=d.d1,B=d.d2,C=d.d3,D=d.d4,A=d.d5,F=d.d6,H=d.d7,G=d.d8,E=d.d9,I=d.d10,K=d.d11,J=d.d12,L=d.d13,M=d.d14,d=d.d15;this.d0=y*e+z*k+B*p+C*u;this.d1=y*f+z*l+B*t+C*v;this.d2=y*g+z*m+B*r+C*w;this.d3=y*h+z*n+B*q+C*c;this.d4=D*e+A*k+F*p+H*u;this.d5=D*f+A*l+F*t+H*v;this.d6=D*g+A*m+F*r+H*w;this.d7=D*h+A*n+F*q+H*c;this.d8=G*e+E*k+I*p+K*u;this.d9=G*f+E*l+I*t+K*v;this.d10=G*g+E*m+I*r+K*w;this.d11=G*h+E*n+I*q+K*c;this.d12=J*e+L*k+M*p+d*u;this.d13=
J*f+L*l+M*t+d*v;this.d14=J*g+L*m+M*r+d*w;this.d15=J*h+L*n+M*q+d*c;this._dirty=!0;return this},AppendTranslationV:function(a,b,c){this.d12=this.d0*a+this.d4*b+this.d8*c+this.d12;this.d13=this.d1*a+this.d5*b+this.d9*c+this.d13;this.d14=this.d2*a+this.d6*b+this.d10*c+this.d14;this.d15=this.d3*a+this.d7*b+this.d11*c+this.d15;this._dirty=!0;return this},AppendScaleV:function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.d0*=a;this.d1*=a;this.d2*=a;this.d3*=a;this.d4*=b;this.d5*=b;this.d6*=b;
this.d7*=b;this.d8*=c;this.d9*=c;this.d10*=c;this.d11*=c;this._dirty=!0;return this},AppendRotationX:function(a){var b=this._sin(a);a=this._cos(a);this._ins.d0=1;this._ins.d1=0;this._ins.d2=0;this._ins.d3=0;this._ins.d4=0;this._ins.d5=a;this._ins.d6=b;this._ins.d7=0;this._ins.d8=0;this._ins.d9=-b;this._ins.d10=a;this._ins.d11=0;this._ins.d12=0;this._ins.d13=0;this._ins.d14=0;this._ins.d15=1;this.Append(this._ins);return this},AppendRotationY:function(a){var b=this._sin(a);a=this._cos(a);this._ins.d0=
a;this._ins.d1=0;this._ins.d2=-b;this._ins.d3=0;this._ins.d4=0;this._ins.d5=1;this._ins.d6=0;this._ins.d7=0;this._ins.d8=b;this._ins.d9=0;this._ins.d10=a;this._ins.d11=0;this._ins.d12=0;this._ins.d13=0;this._ins.d14=0;this._ins.d15=1;this.Append(this._ins);return this},AppendRotationZ:function(a){var b=this._sin(a);a=this._cos(a);this._ins.d0=a;this._ins.d1=b;this._ins.d2=0;this._ins.d3=0;this._ins.d4=-b;this._ins.d5=a;this._ins.d6=0;this._ins.d7=0;this._ins.d8=0;this._ins.d9=0;this._ins.d10=1;this._ins.d11=
0;this._ins.d12=0;this._ins.d13=0;this._ins.d14=0;this._ins.d15=1;this.Append(this._ins);return this},LookAt:function(a,b,c){if(null!=a){var d=a.x,e=a.y;a=a.z;var f=0,g=0,h=0,k=0,l=1,m=0;null!=b&&(f=b.x,g=b.y,h=b.z);null!=c&&(k=c.x,l=c.y,m=c.z);if(d!=f||e!=g||a!=h){var n,p;b=d-f;c=e-g;g=a-h;f=1/Math.sqrt(b*b+c*c+g*g);b*=f;c*=f;g*=f;h=l*g-m*c;m=m*b-k*g;k=k*c-l*b;f=Math.sqrt(h*h+m*m+k*k);0==f?k=m=h=0:(f=1/f,h*=f,m*=f,k*=f);l=c*k-g*m;n=g*h-b*k;p=b*m-c*h;f=Math.sqrt(l*l+n*n+p*p);0==f?p=n=l=0:(f=1/f,l*=
f,n*=f,p*=f);this.d0=h;this.d1=l;this.d2=b;this.d3=0;this.d4=m;this.d5=n;this.d6=c;this.d7=0;this.d8=k;this.d9=p;this.d10=g;this.d11=0;this.d12=-(h*d+m*e+k*a);this.d13=-(l*d+n*e+p*a);this.d14=-(b*d+c*e+g*a);this.d15=1;this._dirty=!0}}return this},Frustum:function(a,b,c,d,e,f){null==f&&(f=1E4);null==e&&(e=1);0>=e&&(e=1);var g=b-a,h=d-c,k=2*e;this.d0=k/g;this.d4=0;this.d8=(b+a)/g;this.d1=this.d12=0;this.d5=k/h;this.d9=(d+c)/h;this.d6=this.d2=this.d13=0;this.d10=-(f+e)/(f-e);this.d14=-f*k/(f-e);this.d7=
this.d3=0;this.d11=-1;this.d15=0;this._dirty=!0;return this},Perspective:function(a,b,c,d){null==d&&(d=1E4);null==c&&(c=1);null==b&&(b=1);null==a&&(a=60);0>=c&&(c=1);a=c*Math.tan(.008726646259971648*a);var e=-a;this.Frustum(e*b,a*b,e,a,c,d);return this},Orthographic:function(a,b,c,d,e,f){var g=b-a,h=c-d,k=f-e;this.d0=2/g;this.d8=this.d4=0;this.d12=-((b+a)/g);this.d1=0;this.d5=2/h;this.d9=0;this.d13=-((c+d)/h);this.d6=this.d2=0;this.d10=-2/k;this.d14=-((f+e)/k);this.d11=this.d7=this.d3=0;this.d15=
1;this._dirty=!0;return this},Inverse:function(){var a=this.getDeterminant();if(1E-11<(0>a?-a:a)){var a=-1/a,b=this.d0,c=this.d4,d=this.d8,e=this.d12,f=this.d1,g=this.d5,h=this.d9,k=this.d13,l=this.d2,m=this.d6,n=this.d10,p=this.d14,t=this.d3,r=this.d7,q=this.d11,u=this.d15;this.d0=a*(g*(n*u-p*q)-h*(m*u-p*r)+k*(m*q-n*r));this.d1=-a*(f*(n*u-p*q)-h*(l*u-p*t)+k*(l*q-n*t));this.d2=a*(f*(m*u-p*r)-g*(l*u-p*t)+k*(l*r-m*t));this.d3=-a*(f*(m*q-n*r)-g*(l*q-n*t)+h*(l*r-m*t));this.d4=-a*(c*(n*u-p*q)-d*(m*u-p*
r)+e*(m*q-n*r));this.d5=a*(b*(n*u-p*q)-d*(l*u-p*t)+e*(l*q-n*t));this.d6=-a*(b*(m*u-p*r)-c*(l*u-p*t)+e*(l*r-m*t));this.d7=a*(b*(m*q-n*r)-c*(l*q-n*t)+d*(l*r-m*t));this.d8=a*(c*(h*u-k*q)-d*(g*u-k*r)+e*(g*q-h*r));this.d9=-a*(b*(h*u-k*q)-d*(f*u-k*t)+e*(f*q-h*t));this.d10=a*(b*(g*u-k*r)-c*(f*u-k*t)+e*(f*r-g*t));this.d11=-a*(b*(g*q-h*r)-c*(f*q-h*t)+d*(f*r-g*t));this.d12=-a*(c*(h*p-k*n)-d*(g*p-k*m)+e*(g*n-h*m));this.d13=a*(b*(h*p-k*n)-d*(f*p-k*l)+e*(f*n-h*l));this.d14=-a*(b*(g*p-k*m)-c*(f*p-k*l)+e*(f*m-g*
l));this.d15=a*(b*(g*n-h*m)-c*(f*n-h*l)+d*(f*m-g*l));this._dirty=!0}return this},TransformVec3:function(a,b){null==b&&(b=!1);var c=a.x,d=a.y,e=a.z,f=this.d0*c+this.d4*d+this.d8*e+this.d12,g=this.d1*c+this.d5*d+this.d9*e+this.d13,h=this.d2*c+this.d6*d+this.d10*e+this.d14;b&&(c=1/(this.d3*c+this.d7*d+this.d11*e+this.d15),f*=c,g*=c,h*=c);a.x=f;a.y=g;a.z=h;a;return a},GetMaxScaleOnAxis:function(){var a=this.d0*this.d0+this.d1*this.d1+this.d2*this.d2,b=this.d4*this.d4+this.d5*this.d5+this.d6*this.d6;return Math.sqrt(B.Max(a>
b?a:b,this.d8*this.d8+this.d9*this.d9+this.d10*this.d10))},getDeterminant:function(){return-1*((this.d0*this.d5-this.d4*this.d1)*(this.d10*this.d15-this.d14*this.d11)-(this.d0*this.d9-this.d8*this.d1)*(this.d6*this.d15-this.d14*this.d7)+(this.d0*this.d13-this.d12*this.d1)*(this.d6*this.d11-this.d10*this.d7)+(this.d4*this.d9-this.d8*this.d5)*(this.d2*this.d15-this.d14*this.d3)-(this.d4*this.d13-this.d12*this.d5)*(this.d2*this.d11-this.d10*this.d3)+(this.d8*this.d13-this.d12*this.d9)*(this.d2*this.d7-
this.d6*this.d3))},__class__:Ta};var Oe=function(){this.normal=(new A).Set(0,0,1);this.length=0;this._vec=A.instance};g["lovedna.math.Plane"]=Oe;Oe.__name__=["lovedna","math","Plane"];Oe.__interfaces__=[hb];Oe.prototype={Dispose:function(){this._vec=this.normal=null},DistanceToPoint:function(a){return this.normal.Dot(a,null)+this.length},SetComponents:function(a,b,c,d){this.normal.Set(a,b,c);this.length=d;this.Normalize()},Normalize:function(){var a=1/this.normal.get_length();this.normal.Scale(a);
this.length*=a},__class__:Oe};var A=function(){this.x=this.y=this.z=0;this._sqrt=Math.sqrt};g["lovedna.math.Vec3"]=A;A.__name__=["lovedna","math","Vec3"];A.prototype={Set:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;return this},Copy:function(a){if(a==this)return this;this.x=a.x;this.y=a.y;this.z=a.z;return this},Add:function(a,b){null==b?(this.x+=a.x,this.y+=a.y,this.z+=a.z):(this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z);return this},Sub:function(a,b){null==
b?(this.x-=a.x,this.y-=a.y,this.z-=a.z):(this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z);return this},Scale:function(a){this.x*=a;this.y*=a;this.z*=a;return this},Min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},Max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},Dot:function(a,b){return null==b?this.x*a.x+this.y*a.y+this.z*a.z:b.x*a.x+b.y*a.y+b.z*a.z},Cross:function(a,b){var c,d,e;null==b?(c=
this.y*a.z-this.z*a.y,d=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x):(c=a.y*b.z-a.z*b.y,d=a.z*b.x-a.x*b.z,e=a.x*b.y-a.y*b.x);this.x=c;this.y=d;this.z=e;return this},Normalize:function(){var a=this._sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0!=a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;this;return this},Distance:function(a,b){var c=A.instance;null==b?(c.x=this.x-a.x,c.y=this.y-a.y,c.z=this.z-a.z):(c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z);c;return c._sqrt(c.x*c.x+c.y*c.y+c.z*
c.z)},FromArray:function(a,b){null==b&&(b=0);b<a.length+3&&(this.x=a[b],this.y=a[b+1],this.z=a[b+2]);return this},ToArray:function(a,b){null==b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},get_length:function(){return this._sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},__class__:A,__properties__:{get_length:"get_length"}};var Sb=function(){this.start=new A;this.direction=new A;this._vec3=A.instance};g["lovedna.math.Ray"]=Sb;Sb.__name__=["lovedna","math","Ray"];Sb.__interfaces__=[hb];
Sb.prototype={Dispose:function(){this._vec3=this.direction=this.start=null},Copy:function(a){if(a==this)return this;this.start.Copy(a.start);this.direction.Copy(a.direction);return this},Set:function(a,b){this.start.Copy(a);this.direction.Sub(b,a);this.direction.Normalize()},At:function(a){this._vec3.Copy(this.direction);this._vec3.Scale(a);this._vec3.Add(this.start,null);return this._vec3},DistanceToPoint:function(a){var b=A.instance;b.Sub(a,this.start);var c=b.Dot(this.direction,null),d=0;return d=
0>c?this.start.Distance(a):b.Copy(this.direction).Scale(c).Add(this.start,null).Distance(a)},IntersectsSphere:function(a){return null==a?!1:this.DistanceToPoint(a.center)<=a.radius},IntersectBox:function(a){var b=0,c=1.79769313486231E308;if(1E-6>B.Abs(this.direction.x)){if(this.start.x<a.min.x||this.start.x>a.max.x)return null}else{var d=1/this.direction.x,e=(a.min.x-this.start.x)*d,d=(a.max.x-this.start.x)*d;if(e>d)var f=e,e=d,d=f;e>b&&(b=e);d<c&&(c=d);if(b>c)return null}if(1E-6>B.Abs(this.direction.y)){if(this.start.y<
a.min.y||this.start.y>a.max.y)return null}else if(d=1/this.direction.y,e=(a.min.y-this.start.y)*d,d*=a.max.y-this.start.y,e>d&&(f=e,e=d,d=f),e>b&&(b=e),d<c&&(c=d),b>c)return null;if(1E-6>B.Abs(this.direction.z)){if(this.start.z<a.min.z||this.start.z>a.max.z)return null}else if(d=1/this.direction.z,e=(a.min.z-this.start.z)*d,a=(a.max.z-this.start.z)*d,e>a&&(d=e,e=a,a=d),e>b&&(b=e),a<c&&(c=a),b>c)return null;return this.At(0<=b?b:c)},IntersectsTriangle:function(a,b,c,d){null==d&&(d=!1);var e=A.instance1,
f=A.instance2,g=A.instance3,h=A.instance4;null==a?(f.x-=b.x,f.y-=b.y,f.z-=b.z):(f.x=b.x-a.x,f.y=b.y-a.y,f.z=b.z-a.z);f;null==a?(g.x-=c.x,g.y-=c.y,g.z-=c.z):(g.x=c.x-a.x,g.y=c.y-a.y,g.z=c.z-a.z);g;h.Cross(f,g);b=this.direction.Dot(h,null);c=0;if(0<b){if(d)return null;c=1}else if(0>b)c=-1,b=-b;else return null;e.Sub(this.start,a);a=c*this.direction.Dot(g.Cross(e,g),null);if(0>a)return null;f=c*this.direction.Dot(f.Cross(e),null);if(0>f||a+f>b)return null;e=-c*(e.x*h.x+e.y*h.y+e.z*h.z);return 0>e?null:
this.At(e/b)},ApplyMatrix4:function(a){a.TransformVec3(this.direction.Add(this.start,null));a.TransformVec3(this.start);this.direction.Sub(this.start,null);this.direction.Normalize();return this},__class__:Sb};var W=function(){this.x=this.y=0};g["lovedna.math.Vec2"]=W;W.__name__=["lovedna","math","Vec2"];W.prototype={Set:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;return this},Copy:function(a){if(a==this)return this;this.x=a.x;this.y=a.y;return this},Sub:function(a,b){null==b?(this.x-=
a.x,this.y-=a.y):(this.x=a.x-b.x,this.y=a.y-b.y);return this},Lerp:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=c);e&&(e=c,c=d,d=e);return this.Set(B.Lerp(a.x,b.x,c),B.Lerp(a.y,b.y,d))},FromArray:function(a,b){null==b&&(b=0);b<a.length+2&&(this.x=a[b],this.y=a[b+1]);return this},ToArray:function(a,b){null==b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},__class__:W};var xd=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this._vec2=new W;this.x=a;this.y=b;this.width=c;
this.height=d};g["lovedna.math.Rect"]=xd;xd.__name__=["lovedna","math","Rect"];xd.prototype={Set:function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d;return this},Copy:function(a){if(a==this)return this;this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this},get_bottom:function(){return this.y+this.height},get_left:function(){return this.x},get_right:function(){return this.x+this.width},get_top:function(){return this.y},
__class__:xd,__properties__:{get_top:"get_top",get_right:"get_right",get_left:"get_left",get_bottom:"get_bottom"}};var cd=function(){this.center=new A;this.radius=0};g["lovedna.math.Sphere"]=cd;cd.__name__=["lovedna","math","Sphere"];cd.__interfaces__=[hb];cd.prototype={Copy:function(a){if(a==this)return this;this.center.Copy(a.center);this.radius=a.radius;return this},ApplyMat4:function(a){a.TransformVec3(this.center);this.radius*=a.GetMaxScaleOnAxis();return this},Dispose:function(){this.center=
null},__class__:cd};var ya=function(){z.call(this);this._trigger=Oa.GetInstance();this._currentState=null;this._pause=this._playing=!1;this._loop=1;this._position=0;this._volume=1;this._active=!0;if(null==ya._loader){ya._loader=new aa;ya._loader.AddEventListener(C.COMPLETE,l(this,this.loader_complete));ya._loadingMap=new G;var a=Ib.GetInstance();a.AddEventListener(C.ACTIVATE,l(this,this._activateHandler));a.AddEventListener(C.DEACTIVATE,l(this,this._activateHandler))}this._id=ya._ID++;ya._medias.h[this._id]=
this};g["lovedna.media.Media"]=ya;ya.__name__=["lovedna","media","Media"];ya.__interfaces__=[Yb];ya._loader=null;ya._loadingMap=null;ya.SetActive=function(a){for(var b=ya._medias.iterator();b.hasNext();)b.next().activehandler(a)};ya.__super__=z;ya.prototype=n(z.prototype,{Load:function(a){if(a!=this._url){this._url=a;var b=null;ya._loadingMap.exists(a)?(b=ya._loadingMap.get(a),-1==r.indexOf(b,this,0)&&b.push(this)):(b=[],b.push(this),ya._loader.Load(a).userData=a,ya._loadingMap.set(a,b))}},Play:function(){this._playing=
!0;this._pause=!1;this.changeState(za.play)},Stop:function(){this._playing=!1;this._position=0;this.changeState(za.stop)},TriggerTick:function(a){this.applyState();return!1},TriggerStart:function(a){},TriggerEnd:function(a){},_activateHandler:function(a){ya.SetActive(a._type==C.ACTIVATE._type)},changeState:function(a){this._currentState=a;this._trigger.Add(this)},applyState:function(){if(this._currentState==za.active||this._active){var a=this._currentState;if(null!=a)switch(a[1]){case 1:this.doPlay();
break;case 2:this.doPause();break;case 3:this.doResume();break;case 5:this.doPosition();break;case 4:this.doStop();break;case 0:this.doActive()}}},activehandler:function(a){this._active!=a&&(this._active=a,this.changeState(za.active))},doPlay:function(){},doPause:function(){},doResume:function(){},doStop:function(){},doPosition:function(){},doActive:function(){},loadComplete:function(a){},loader_complete:function(a){a=ya._loader.GetCurrent();for(var b=a.userData,c=ya._loadingMap.get(b),d=c.length;0<
d--;)c.pop().loadComplete(a);ya._loadingMap.remove(b)},set_loop:function(a){return this._loop=a},__class__:ya,__properties__:{set_loop:"set_loop"}});var ce=function(){ya.call(this);this._transform=new Kc};g["lovedna.media.Audio"]=ce;ce.__name__=["lovedna","media","Audio"];ce.__super__=ya;ce.prototype=n(ya.prototype,{loadComplete:function(a){ya.prototype.loadComplete.call(this,a);a=a.sound;null!=a?this.init(a):this._url=null},doPlay:function(){this._playing=!0;if(this._active){if(null==this._sound)return;
null!=this._channel&&(this._channel.removeEventListener("soundComplete",l(this,this.channel_soundComplete)),this._channel.stop(),this._channel=null);this._channel=this._sound.play(this._position,0,this._transform);null!=this._channel&&this._channel.addEventListener("soundComplete",l(this,this.channel_soundComplete))}this.DispatchEvent(C.START)},doPause:function(){this._playing=!1;if(this._active){if(null==this._channel)return;this._position=this._channel.get_position();this._channel.removeEventListener("soundComplete",
l(this,this.channel_soundComplete));this._channel.stop();this._channel=null}this.DispatchEvent(C.PAUSE)},doActive:function(){this._playing&&(this._active?null!=this._sound&&(null!=this._channel&&(this._channel.removeEventListener("soundComplete",l(this,this.channel_soundComplete)),this._channel.stop(),this._channel=null),this._channel=this._sound.play(this._position,0,this._transform),null!=this._channel&&this._channel.addEventListener("soundComplete",l(this,this.channel_soundComplete))):null!=this._channel&&
(this._position=this._channel.get_position(),this._channel.removeEventListener("soundComplete",l(this,this.channel_soundComplete)),this._channel.stop(),this._channel=null))},doStop:function(){this.doPause();this._position=0;this.DispatchEvent(C.STOP)},doPosition:function(){null!=this._sound&&this._playing&&(null!=this._channel&&(this._channel.removeEventListener("soundComplete",l(this,this.channel_soundComplete)),this._channel.stop(),this._channel=null),this._channel=this._sound.play(this._position,
0,this._transform),null!=this._channel&&this._channel.addEventListener("soundComplete",l(this,this.channel_soundComplete)))},init:function(a){this.doStop();this._sound=a;null!=this._sound&&(this.duration=this._sound.get_length(),this.applyState())},channel_soundComplete:function(a){this._channel.stop();this._channel.removeEventListener("soundComplete",l(this,this.channel_soundComplete));this._channel=null;this._position=0;this._playing=!1;0>this._loop?(this._playing=!0,this._channel=this._sound.play(0,
0,this._transform),this._channel.addEventListener("soundComplete",l(this,this.channel_soundComplete)),this.DispatchEvent(C.LOOP)):0<this._loop?(this._loop--,0<this._loop?(this._playing=!0,this._channel=this._sound.play(0,0,this._transform),this._channel.addEventListener("soundComplete",l(this,this.channel_soundComplete)),this.DispatchEvent(C.LOOP)):(this._currentState=za.stop,this.DispatchEvent(C.FINISH))):(this._currentState=za.stop,this.DispatchEvent(C.FINISH))},__class__:ce});var za=g["lovedna.media.MediaState"]=
{__ename__:["lovedna","media","MediaState"],__constructs__:"active play pause resume stop postion".split(" ")};za.active=["active",0];za.active.toString=v;za.active.__enum__=za;za.play=["play",1];za.play.toString=v;za.play.__enum__=za;za.pause=["pause",2];za.pause.toString=v;za.pause.__enum__=za;za.resume=["resume",3];za.resume.toString=v;za.resume.__enum__=za;za.stop=["stop",4];za.stop.toString=v;za.stop.__enum__=za;za.postion=["postion",5];za.postion.toString=v;za.postion.__enum__=za;var mb=function(){this._hashCode=
-1;Q.call(this)};g["lovedna.net.LoadData"]=mb;mb.__name__=["lovedna","net","LoadData"];mb.__interfaces__=[hb];mb.New=function(){var a=null;0<mb.cache.length?(a=mb.cache.pop(),a.Clear()):a=new mb;return a};mb.__super__=Q;mb.prototype=n(Q.prototype,{Dispose:function(){-1==r.indexOf(mb.cache,this,0)&&(mb.cache.push(this),this.Clear())},Copy:function(a){this._loadType=a._loadType;this._hashCode=a._hashCode;this._url.Copy(a._url);this._full=a._full;this.bytes=a.bytes;this.text=a.text;this.image=a.image;
this.sound=a.sound;this.font=a.font;this.needBytes=a.needBytes;this.userData=a.userData},SetURL:function(a,b,c){this._full=a;Ea.IsHttp(a)||null==c||(this._full=Ea.Combine(c,a));this._url.Set(a);if(null==b){if(this._loadType=ka.BINARY,null!=this._url.ext)switch(this._url.ext.toLowerCase()){case "jpg":case "jpeg":case "png":case "gif":this._loadType=ka.IMAGE;break;case "otf":case "ttf":this._loadType=ka.FONT;break;case "wav":case "ogg":case "m4a":this._loadType=ka.SOUND;break;case "mp3":case "mp2":this._loadType=
ka.SOUND;break;case "text":case "txt":case "json":case "xml":case "svg":case "css":case "plist":this._loadType=ka.TEXT;break;default:this._loadType=ka.BINARY}}else this._loadType=b;a=nc.instance;a.Reset();a.PushInt(this._loadType[1]);a.PushString(this._full);a.PushString(this._url.toString());return this._hashCode=a.GetCode()},Clear:function(){this._full=this.sound=this.font=this.text=this.userData=this.image=this.bytes=null;this.needBytes=!1},onConstruct:function(){Q.prototype.onConstruct.call(this);
this._url=new Ea("");this.needBytes=!1},__class__:mb});var Pe=function(){this._count=this._total=0;z.call(this);this._count=this._total=0;this._trigger=Oa.GetInstance();this._show=!1};g["lovedna.net.LoaderLoading"]=Pe;Pe.__name__=["lovedna","net","LoaderLoading"];Pe.__super__=z;Pe.prototype=n(z.prototype,{Add:function(){1>this._count&&(null!=this._action&&(Zb.Remove(this._action),this._action=null),this._action=Zb.Add(.5,l(this,this._addLoading)));this._count++;this._total++},Remove:function(){this._count--;
1>this._count&&(null!=this._action&&(Zb.Remove(this._action),this._action=null),this._action=Zb.Add(.1,l(this,this._removeLoading)))},AddEventListener:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=0);z.prototype.AddEventListener.call(this,a,b,c,d,e);this._show&&this.DispatchEvent(C.ACTIVATE)},_addLoading:function(a){this._action=null;this.DispatchEvent(C.ACTIVATE);this._show=!0},_removeLoading:function(a){this.DispatchEvent(C.DEACTIVATE);this._action=null;this._show=!1},__class__:Pe});
var y=Hb.StringUtil=function(){};g["lovedna.utils.StringUtil"]=y;y.__name__=["lovedna","utils","StringUtil"];y.Fill0=function(a,b){var c=0>b;0>b&&(b=-b);var d="";b-=a.length;for(var e=0;e<b;)e++,d+="0";return c?d+a:a+d};y.Create=function(a,b){null==b&&(b=0);if(0==b)return"";for(var c="";0<b--;)c+=a;return c};y.Reverse=function(a){for(var b="",c=a.length;0<=--c;)b+=a.charAt(c);return b};y.ParseBin=function(a){for(var b=0,c=0,d=a.length;0<d--;){var e=a.charAt(d);"0"==e?c++:"1"==e&&(b+=1<<c,c++)}return b};
y.ToBin=function(a){var b="",b=0==(a&1)?b+"0":b+"1";if(1<a)for(;!(a=.5*a|0,b=0==(a&1)?b+"0":b+"1",2>a););return y.Reverse(b)};y.Replace=function(a,b){if(null==b)return a;var c=b.length;if(0==c)return a;for(var d=0;d<c;)for(var e=d++,f="%"+e+"%",g=f.length,h=a.indexOf(f),e=b[e];-1!=h;)a=r.substr(a,0,h)+e+r.substr(a,h+g,null),h=a.indexOf(f);return a};y.ReplaceString=function(a,b,c){return P.replace(a,b,c)};y.ToUpperCaseFirstLetter=function(a){return a.charAt(0).toUpperCase()+r.substr(a,1,null).toLowerCase()};
y.Trim=function(a,b){null==b&&(b="");a=P.trim(a);if(""==b)return a;0==a.indexOf(b)&&(a=r.substr(a,1,null));a.lastIndexOf(b)==a.length-1&&(a=r.substr(a,0,-1));return a};y.Ltrim=function(a){return P.ltrim(a)};y.Rtrim=function(a){return P.rtrim(a)};y.Int2Hex=function(a,b){null==b&&(b=0);return P.hex(a,b)};y.Hex2Int=function(a){if(0==a.indexOf("0x"))return 10<a.length&&(a=r.substr(a,0,10)),ba.parseInt(a);8<a.length&&(a=r.substr(a,0,8));return ba.parseInt("0x"+a)};y.Repeat=function(a,b){var c="";if(sc.gt(b,
0))for(;sc.gt(b--,0);)c+=a;return c};y.GetLength=function(a){return Pb.GetStringLength(a)};y.GetCRC=function(a){var b=new nb(0);b.writeUTFBytes(a);return Pb.GetCrc32(b)};y.Utf8Length=function(a){return a.length};y.Utf8IndexOf=function(a,b,c){null==c&&(c=0);var d=b.length;if(1>d)return-1;var e=a.length;0>c&&(c=0);if(d==b.length&&e==a.length)return a.indexOf(b,c);if(d+c>e)return-1;y._charCodeList.Clear();If.iter(b,y.utf8chars);y._charCodeList1.Clear();b=y._charCodeList._length;for(e=0;e<b;){var f=e++;
y._charCodeList1.Add(y._charCodeList.Get(f))}y._charCodeList.Clear();If.iter(a,y.utf8chars);b=y._charCodeList._length;a=!1;for(e=-1;c<b;){f=c++;a=!0;for(var e=f,g=0;g<d;){var h=g++;if(y._charCodeList.Get(f+h)!=y._charCodeList1.Get(h)){a=!1;break}}if(a)return e}return-1};y.Utf8Substr=function(a,b,c){null==c&&(c=-1);0>b&&(b=0);-1==c&&(c=a.length-b);return b>=a.length?"":r.substr(a,b,c)};y.Utf8Replace=function(a,b,c){if(b==c)return a;var d=c.length;if(1>d)return a;var e=b.length;if(1>e)return a;if(e==
b.length&&a.length==a.length)return P.replace(a,b,c);for(var f=0,g=y.Utf8IndexOf(a,b,f);-1!=g;)a=y.Utf8Substr(a,0,g)+c+y.Utf8Substr(a,g+e),f+=d,g=y.Utf8IndexOf(a,b,f);return a};y.Utf8Split=function(a,b){null==b&&(b="");var c=a.length,d=b.length;if(a.length==c&&d==b.length)return a.split(b);var e=[];if(1>c)return e;if(1>d){for(d=0;d<c;){var f=d++;e.push(y.Utf8Substr(a,f,1))}return e}for(c=y.Utf8IndexOf(a,b,0);-1!=c;)e.push(y.Utf8Substr(a,0,c)),a=y.Utf8Substr(a,c+d),c=y.Utf8IndexOf(a,b,0);0<a.length&&
e.push(a);return e};y.AddFont=function(a,b){null==b&&(b=3);for(var c=a.length,d=b+"";0<c--;)d+=y.Fill0(r.cca(a,c)+"",-b);return d};y.DefaultFontNumbers=function(a){var b=ba.parseInt(r.substr(a,0,1));a=r.substr(a,1,null);for(var c=a.length/b|0,d="";0<c--;)var e=r.substr(a,c*b,b),d=d+String.fromCharCode(ba.parseInt(e));return d};y.DecodeReflect=function(a){var b=ba.parseInt(r.substr(a,0,1));a=r.substr(a,1,null);for(var c=a.length/b|0,d="";0<c--;)var e=r.substr(a,c*b,b),d=d+String.fromCharCode(ba.parseInt(e));
return d};y.utf8chars=function(a){y._charCodeList.Add(a)};y.prototype={__class__:y};var h=function(a){this.stopEvent=!1;this._code=a;h._map.h[this._code]=this;this.releaseTime=this.lastReleaseTime=this.pressTime=this.lastPressTime=0;this.stopEvent=!1};g["lovedna.ui.LKey"]=h;h.__name__=["lovedna","ui","LKey"];h._map=null;h.NUMBER_0=null;h.NUMBER_1=null;h.NUMBER_2=null;h.NUMBER_3=null;h.NUMBER_4=null;h.NUMBER_5=null;h.NUMBER_6=null;h.NUMBER_7=null;h.NUMBER_8=null;h.NUMBER_9=null;h.A=null;h.B=null;h.C=
null;h.D=null;h.E=null;h.F=null;h.G=null;h.H=null;h.I=null;h.J=null;h.K=null;h.L=null;h.M=null;h.N=null;h.O=null;h.P=null;h.Q=null;h.R=null;h.S=null;h.T=null;h.U=null;h.V=null;h.W=null;h.X=null;h.Y=null;h.Z=null;h.NUMPAD_0=null;h.NUMPAD_1=null;h.NUMPAD_2=null;h.NUMPAD_3=null;h.NUMPAD_4=null;h.NUMPAD_5=null;h.NUMPAD_6=null;h.NUMPAD_7=null;h.NUMPAD_8=null;h.NUMPAD_9=null;h.NUMPAD_MULTIPLY=null;h.NUMPAD_ADD=null;h.NUMPAD_ENTER=null;h.NUMPAD_SUBTRACT=null;h.NUMPAD_DECIMAL=null;h.NUMPAD_DIVIDE=null;h.F1=
null;h.F2=null;h.F3=null;h.F4=null;h.F5=null;h.F6=null;h.F7=null;h.F8=null;h.F9=null;h.F10=null;h.F11=null;h.F12=null;h.F13=null;h.F14=null;h.F15=null;h.BACKSPACE=null;h.TAB=null;h.ALTERNATE=null;h.ENTER=null;h.COMMAND=null;h.SHIFT=null;h.CONTROL=null;h.CAPS_LOCK=null;h.NUMPAD=null;h.ESCAPE=null;h.SPACE=null;h.PAGE_UP=null;h.PAGE_DOWN=null;h.END=null;h.HOME=null;h.LEFT=null;h.RIGHT=null;h.UP=null;h.DOWN=null;h.INSERT=null;h.DELETE=null;h.SEMICOLON=null;h.EQUAL=null;h.COMMA=null;h.MINUS=null;h.PERIOD=
null;h.SLASH=null;h.BACKSLASH=null;h.QUOTE=null;h.BACKQUOTE=null;h.LEFTBRACKET=null;h.RIGHTBRACKET=null;h.init=function(){h._map=new ga;oc.Init();h.NUMBER_0=new h(48);h.NUMBER_1=new h(49);h.NUMBER_2=new h(50);h.NUMBER_3=new h(51);h.NUMBER_4=new h(52);h.NUMBER_5=new h(53);h.NUMBER_6=new h(54);h.NUMBER_7=new h(55);h.NUMBER_8=new h(56);h.NUMBER_9=new h(57);h.A=new h(65);h.B=new h(66);h.C=new h(67);h.D=new h(68);h.E=new h(69);h.F=new h(70);h.G=new h(71);h.H=new h(72);h.I=new h(73);h.J=new h(74);h.K=new h(75);
h.L=new h(76);h.M=new h(77);h.N=new h(78);h.O=new h(79);h.P=new h(80);h.Q=new h(81);h.R=new h(82);h.S=new h(83);h.T=new h(84);h.U=new h(85);h.V=new h(86);h.W=new h(87);h.X=new h(88);h.Y=new h(89);h.Z=new h(90);h.NUMPAD_0=new h(96);h.NUMPAD_1=new h(97);h.NUMPAD_2=new h(98);h.NUMPAD_3=new h(99);h.NUMPAD_4=new h(100);h.NUMPAD_5=new h(101);h.NUMPAD_6=new h(102);h.NUMPAD_7=new h(103);h.NUMPAD_8=new h(104);h.NUMPAD_9=new h(105);h.NUMPAD_MULTIPLY=new h(106);h.NUMPAD_ADD=new h(107);h.NUMPAD_ENTER=new h(108);
h.NUMPAD_SUBTRACT=new h(109);h.NUMPAD_DECIMAL=new h(110);h.NUMPAD_DIVIDE=new h(111);h.F1=new h(112);h.F2=new h(113);h.F3=new h(114);h.F4=new h(115);h.F5=new h(116);h.F6=new h(119);h.F7=new h(118);h.F8=new h(119);h.F9=new h(120);h.F10=new h(121);h.F11=new h(122);h.F12=new h(123);h.F13=new h(124);h.F14=new h(125);h.F15=new h(126);h.BACKSPACE=new h(8);h.TAB=new h(9);h.ALTERNATE=new h(18);h.ENTER=new h(13);h.COMMAND=new h(15);h.SHIFT=new h(16);h.CONTROL=new h(17);h.CAPS_LOCK=new h(20);h.NUMPAD=new h(21);
h.ESCAPE=new h(27);h.SPACE=new h(32);h.PAGE_UP=new h(33);h.PAGE_DOWN=new h(34);h.END=new h(35);h.HOME=new h(36);h.LEFT=new h(37);h.RIGHT=new h(39);h.UP=new h(38);h.DOWN=new h(40);h.INSERT=new h(45);h.DELETE=new h(46);h.SEMICOLON=new h(186);h.EQUAL=new h(187);h.COMMA=new h(188);h.MINUS=new h(189);h.PERIOD=new h(190);h.SLASH=new h(191);h.BACKSLASH=new h(220);h.QUOTE=new h(222);h.BACKQUOTE=new h(192);h.LEFTBRACKET=new h(219);h.RIGHTBRACKET=new h(221)};h.keyDown=function(a,b){null==b&&(b=0);var c=h._map.h[a];
null!=c&&(c.stopEvent=!1,c.pressed||(c.pressed=!0,c.lastPressTime=c.pressTime,c.pressTime=b,h._event_change._dispatcher=c,lc.CHANGE.key=c,h._event_change.DispatchEvent(lc.CHANGE)));return c};h.keyUp=function(a,b){null==b&&(b=0);var c=h._map.h[a];null!=c&&(c.stopEvent=!1,c.pressed&&(c.pressed=!1,c.lastReleaseTime=c.releaseTime,c.releaseTime=b,h._event_change._dispatcher=c,lc.CHANGE.key=c,h._event_change.DispatchEvent(lc.CHANGE)));return c};h.prototype={__class__:h};var oc=function(){oc._init=!0;Q.call(this)};
g["lovedna.ui.KeyManager"]=oc;oc.__name__=["lovedna","ui","KeyManager"];oc.Init=function(){oc._init||new oc};oc.__super__=Q;oc.prototype=n(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._trigger=Oa.GetInstance()},onLateConstruct:function(){Q.prototype.onLateConstruct.call(this);var a=ua.current.stage;null!=a&&(a.addEventListener("keyDown",l(this,this.stage_keyDown)),a.addEventListener("keyUp",l(this,this.stage_keyUp)))},stage_keyUp:function(a){var b=h.keyUp(a.keyCode,
this._trigger.GetTime());null==b?Ba.log(a.keyCode+" unset"):(h.altKey=a.altKey,h.shiftKey=a.shiftKey,h.commandKey=a.commandKey,h.controlKey=a.controlKey,b.stopEvent&&(a.stopImmediatePropagation(),a.stopPropagation()),b.stopEvent=!1)},stage_keyDown:function(a){var b=h.keyDown(a.keyCode,this._trigger.GetTime());null==b?Ba.log(a.keyCode+" unset"):(h.altKey=a.altKey,h.shiftKey=a.shiftKey,h.commandKey=a.commandKey,h.controlKey=a.controlKey,b.stopEvent&&(a.stopImmediatePropagation(),a.stopPropagation()),
b.stopEvent=!1)},__class__:oc});var aa=function(){this.forceLoadFromHttp=!1;z.call(this,null)};g["lovedna.net.LLoader"]=aa;aa.__name__=["lovedna","net","LLoader"];aa.__interfaces__=[Yb];aa._storage=null;aa.SetGlobalPath=function(a){aa._globalPath=a};aa.complete=function(a){for(var b=aa._loaderList.length;0<b--;)aa._loaderList[b].checkComplete(a)};aa.__super__=z;aa.prototype=n(z.prototype,{Load:function(a,b){var c=this._rootPath;null==c&&(c=aa._globalPath);var d=aa._loadData.SetURL(a,b,c),e=null;this._loadMap.h.hasOwnProperty(d)?
e=this._loadMap.h[d]:(e=mb.New(),e.SetURL(a,b,c),this._loadMap.h[d]=e,this._loadList.Insert(0,e));this._loading||(this._running=!0,Oa.GetInstance().Add(this));return e},GetCurrent:function(){return this._copy},TriggerTick:function(a){this._running=!1;this.load();return!1},TriggerStart:function(a){},TriggerEnd:function(a){},onConstruct:function(){z.prototype.onConstruct.call(this);aa._loaderList.push(this);this._loadMap=new ga;this._loadList=new ma;this._copy=mb.New();this._running=this._loading=!1;
this._dataLoader=new Qe;this._dataLoader.addEventListener("complete",l(this,this.dataLoader_complete));this._dataLoader.addEventListener("ioError",l(this,this.dataLoader_ioError));this._dataLoader.set_dataFormat(0);this._dataLoader.addEventListener("progress",l(this,this.dataLoader_progress));this._loader=new Re;this._loader.contentLoaderInfo.addEventListener("complete",l(this,this.loader_complete));this._loader.contentLoaderInfo.addEventListener("ioError",l(this,this.loader_ioError));this._request=
new Uc},checkComplete:function(a){this._loadMap.h.hasOwnProperty(a._hashCode)&&(this._copy.Copy(a),this.fileComplete())},getNextLoadData:function(){return 0<this._loadList._length?this._loadList.Pop():null},load:function(){if(!this._loading&&(this._current=this.getNextLoadData(),null!=this._current)){var a=this._current._hashCode;if(aa._loadingMap.h.hasOwnProperty(a))this.load();else{this._loading=!0;aa._loadingMap.h[a]=!0;var b=this._current._full,c=this._current._url.toString(),d=this._current._loadType,
e=this._current.needBytes;if(!this.forceLoadFromHttp){a+="";if(this.existFile(a)){b=Xa.toBytes(aa._storage.GetBytes(a));this._current.bytes=Pb.ToByteArray(b);this.dataComplete();return}if(e&&ca.exists(c,"BINARY")){this.assets_load_bytes(ca.getBytes(c));return}if(d==ka.TEXT&&ca.exists(c,"TEXT")){this.assets_load_text(ca.getText(c));return}if(d==ka.IMAGE&&ca.exists(c,"IMAGE")){this.assets_load_image(ca.getBitmapData(c));return}if(d==ka.SOUND){if(ca.exists(c,"MUSIC")){this.assets_load_sound(ca.getMusic(c));
return}if(ca.exists(c,"SOUND")){this.assets_load_sound(ca.getMusic(c));return}}else{if(d==ka.FONT&&ca.exists(c,"FONT")){this.assets_load_font(ca.getFont(c));return}if(ca.exists(c,"BINARY")){this.assets_load_bytes(ca.getBytes(c));return}}}Ea.IsHttp(b)&&(c=this.getVersion(c),""!=c&&(b=Ea.HasParam(b)?b+("&r="+c):b+("?r="+c)));this._request.url=b;if(!e){if(d==ka.IMAGE){this._loader.load(this._request);aa.loading.Add();return}if(d==ka.SOUND){b=new Jb;b.addEventListener("complete",l(this,this.soundLoader_complete));
b.addEventListener("ioError",l(this,this.soundLoader_ioError));aa.loading.Add();b.load(this._request);return}}aa.loading.Add();this._dataLoader.load(this._request)}}},loadComplete:function(){this._loading=!1;this._copy.Copy(this._current);var a=this._copy._hashCode;aa._loadingMap.remove(a);this._loadMap.remove(a);aa.complete(this._copy);this.fileComplete();this.load()},fileComplete:function(){if(null!=this._copy){var a=this._copy._hashCode;if(this._loadMap.h.hasOwnProperty(a)){this._loadMap.remove(a);
for(var b=this._loadList._length;0<b--;){var c=this._loadList.Get(b);if(c._hashCode==a){this._loadList.RemoveAt(b);-1==r.indexOf(mb.cache,c,0)&&(mb.cache.push(c),c.Clear());break}}}this.DispatchEvent(C.COMPLETE);this._copy.Clear();null!=this._current&&(this._current.Dispose(),this._current=null)}},dataLoader_progress:function(a){},dataLoader_ioError:function(a){Ba.log("error data:"+this._current._url.toString());aa.loading.Remove();this.loadComplete()},dataLoader_complete:function(a){aa.loading.Remove();
a=this._dataLoader.data;var b=new nb(0);b.writeBytes(a);this._current.bytes=b;this._current.bytes.position=0;this._dataLoader.data=null;this.saveFile();this.dataComplete()},dataComplete:function(){var a=this._current._loadType,b=!0;a!=ka.BINARY&&(a==ka.IMAGE?(b=!1,a=new Se,a.bytes=this._current.bytes,a.handler=l(this,this.fromBytesComplete),Kb.GetInstance().Add(a)):a==ka.SOUND?(a=Qg.fromBytes(Pb.ToBytes(this._current.bytes)),a=Jb.fromAudioBuffer(a),this._current.sound=a):a!=ka.FONT&&a==ka.TEXT&&(a=
Xa.get_length(this._current.bytes),this._current.text=this._current.bytes.readUTFBytes(a)));b&&this.loadComplete()},fromBytesComplete:function(a){null==a?this._loader.load(this._request):(this._current.image=a,this.loadComplete())},loader_ioError:function(a){Ba.log("error image:"+this._current._url.toString());aa.loading.Remove();this.loadComplete()},loader_complete:function(a){a=this._loader.contentLoaderInfo.content;aa.loading.Remove();null!=a&&(this._current.image=a.bitmapData,a.set_bitmapData(null));
this.loadComplete();this._loader.unload()},soundLoader_ioError:function(a){Ba.log("error sound:"+this._current._url.toString());aa.loading.Remove();a=a.target;a.removeEventListener("complete",l(this,this.soundLoader_complete));a.removeEventListener("ioError",l(this,this.soundLoader_ioError));this.loadComplete()},soundLoader_complete:function(a){aa.loading.Remove();a=a.target;a.removeEventListener("complete",l(this,this.soundLoader_complete));a.removeEventListener("ioError",l(this,this.soundLoader_ioError));
this._current.sound=a;this.loadComplete()},saveFile:function(){},existFile:function(a){return!1},getVersion:function(a){return aa._versionMap.exists(a)?aa._versionMap.get(a):""},assets_load_bytes:function(a){this._current.bytes=a;this.dataComplete()},assets_load_text:function(a){this._current.text=a;this.loadComplete()},assets_load_image:function(a){this._current.image=a;this.loadComplete()},assets_load_sound:function(a){this._current.sound=a;this.loadComplete()},assets_load_font:function(a){this._current.font=
a;this.loadComplete()},__class__:aa});var og=function(){};g["lovedna.utils.woker.IWorkerJob"]=og;og.__name__=["lovedna","utils","woker","IWorkerJob"];og.prototype={__class__:og};var Ac=function(){Q.call(this)};g["lovedna.utils.woker.WorkerJob"]=Ac;Ac.__name__=["lovedna","utils","woker","WorkerJob"];Ac.__interfaces__=[og];Ac.__super__=Q;Ac.prototype=n(Q.prototype,{WorkerBegin:function(a){},WorkerExecute:function(a){},WorkerEnd:function(a){},__class__:Ac});var Se=function(){Q.call(this)};g["lovedna.net.JobBmdFromBytes"]=
Se;Se.__name__=["lovedna","net","JobBmdFromBytes"];Se.__super__=Ac;Se.prototype=n(Ac.prototype,{WorkerExecute:function(a){Ac.prototype.WorkerExecute.call(this,a);sb.fromBytes(this.bytes,null,l(this,this.f))},WorkerEnd:function(a){Ac.prototype.WorkerEnd.call(this,a);this.handler(this._bmd);this.handler=this.bytes=this._bmd=null},f:function(a){this._bmd=a},__class__:Se});var nd=function(a){null==a&&(a="shared");Q.call(this);if(""==a||null==a)a="shared";this._map=new G;this._sharedObject=jb.getLocal(a);
this._dirty=!1;this._trigger=Oa.GetInstance()};g["lovedna.net.LSharedObject"]=nd;nd.__name__=["lovedna","net","LSharedObject"];nd.__interfaces__=[Yb];nd.__super__=Q;nd.prototype=n(Q.prototype,{TriggerTick:function(a){this.Flush();return!1},TriggerStart:function(a){},TriggerEnd:function(a){},Set:function(a,b){this._dirty?this._sharedObject.setProperty(a,b):(this._sharedObject.setProperty(a,b),this._dirty=!0,this._trigger.Add(this))},Get:function(a){var b=null;Object.prototype.hasOwnProperty.call(this._sharedObject.data,
a)&&(b=M.field(this._sharedObject.data,a));return null!=b?b:b=M.getProperty(this._sharedObject.data,a)},Flush:function(){this._dirty&&(this._dirty=!1,this._sharedObject.flush())},__class__:nd});var pg=function(){};g["lovedna.net.LStorage"]=pg;pg.__name__=["lovedna","net","LStorage"];pg.__super__=Q;pg.prototype=n(Q.prototype,{GetBytes:function(a){return null},__class__:pg});var ka=g["lovedna.net.LoadType"]={__ename__:["lovedna","net","LoadType"],__constructs__:["BINARY","TEXT","IMAGE","SOUND","FONT"]};
ka.BINARY=["BINARY",0];ka.BINARY.toString=v;ka.BINARY.__enum__=ka;ka.TEXT=["TEXT",1];ka.TEXT.toString=v;ka.TEXT.__enum__=ka;ka.IMAGE=["IMAGE",2];ka.IMAGE.toString=v;ka.IMAGE.__enum__=ka;ka.SOUND=["SOUND",3];ka.SOUND.toString=v;ka.SOUND.__enum__=ka;ka.FONT=["FONT",4];ka.FONT.toString=v;ka.FONT.__enum__=ka;var Ea=function(a){this.Set(a)};g["lovedna.net.URL"]=Ea;Ea.__name__=["lovedna","net","URL"];Ea.WithoutExtension=function(a){Ea.instance.Set(a);Ea.instance.ext=null;return Ea.instance.toString()};
Ea.Combine=function(a,b){return""==a?b:Ea.AddSlash(a)+Ea.RemoveSlashes(b)};Ea.AddSlash=function(a){if(0==a.length)return"/";var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");return b<c?c!=a.length-1?a+"\\":a:b!=a.length-1?a+"/":a};Ea.RemoveSlashes=function(a){try{for(;;){var b=r.cca(a,a.length-1);if(null!=b)switch(b){case 47:case 92:a=r.substr(a,0,-1);break;default:throw"__break__";}else throw"__break__";}}catch(c){if("__break__"!=c)throw c;}try{for(;;){var d=r.cca(a,0);if(null!=d)switch(d){case 47:case 92:a=
r.substr(a,1,null);break;default:throw"__break__";}else throw"__break__";}}catch(e){if("__break__"!=e)throw e;}return a};Ea.IsHttp=function(a){a=r.substr(a,0,7);return"http://"==a||"https:/"==a};Ea.HasParam=function(a){Ea.instance.Set(a);return null!=Ea.instance.param};Ea.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+(null==this.file?"":this.file)+(null==this.ext?"":"."+this.ext)},Copy:function(a){this.dir=a.dir;this.file=a.file;this.ext=a.ext;this.backslash=
a.backslash;this.param=a.param;return this},Set:function(a){this.clear();if(""==a||null==a)return this;switch(a){case ".":case "..":return this.dir=a,this.file="",this}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=r.substr(a,0,c),a=r.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=r.substr(a,0,b),a=r.substr(a,b+1,null)):this.dir=null;-1!=a.indexOf("?")&&(b=a.split("?"),a=b.shift(),this.param=b.join("?"));b=a.lastIndexOf(".");-1!=b?(this.ext=r.substr(a,b+1,null),this.file=r.substr(a,
0,b)):(this.ext=null,this.file=a);return this},clear:function(){this.param=this.ext=this.file=this.dir=null;this.backslash=!1},__class__:Ea};var Bd=function(){this._auto=!1;this.holdTime=500;z.call(this)};g["lovedna.ui.TouchManager"]=Bd;Bd.__name__=["lovedna","ui","TouchManager"];Bd.__interfaces__=[hb,Yb];Bd.__super__=z;Bd.prototype=n(z.prototype,{Reset:function(){if(!this._reseted){this._reseted=!0;this._activeTouchList.Clear();for(var a=this._touchCount,a=this._touchCount;0<a--;){var b=this._touchList[a];
b.ClearObject();b.active&&this._activeTouchList.Add(b)}this._activeTouchCount=this._activeTouchList._length}},AddObject:function(a,b){this._reseted&&(a>=this._touchCount||this._touchList[a].AddObject(b))},Update:function(){if(this._reseted){this._reseted=!1;for(var a=this._trigger.GetTime(),b=this._touchCount;0<b--;){var c=this._touchList[b];if(c.active){c.userAction=!0;var d=c.HasAction(1);!c.HasAction(4)&&d&&a-c.time.x>this.holdTime&&c.AddAction(4);var d=c.IsAction(1),e=c.IsAction(4),f=c.IsAction(2),
g=c.IsAction(3);c.Update();this._userAction=!1;d&&(c.action=1,this.doAction(c));f&&(c.action=2,this.doAction(c));e&&(c.action=4,this.doAction(c));g&&(c.action=3,this.doAction(c),c.End());this._userAction||(c.action=5,this.doAction(c));c.lastPosition.Copy(c.position);c.motion.Set(0,0)}else c.userAction=!1}}},AutoTrigger:function(a){this._auto!=a&&(a?this._trigger.Add(this):this._trigger.Remove(this));return this},TriggerTick:function(a){this.Reset();this.Update();return!0},TriggerStart:function(a){},
TriggerEnd:function(a){},onConstruct:function(){z.prototype.onConstruct.call(this);this._trigger=Oa.GetInstance();this._touchType=this._activeTouchCount=0;this._reseted=!1;this._touchCount=0;this._touchList=[];this._activeTouchList=new ma},Dispose:function(){z.prototype.Dispose.call(this);this._stage=this._trigger=null;for(var a=this._touchList.length;0<a--;)this._touchList[a].Dispose();this._touchEvent=this._activeTouchList=this._touchList=null},onLateConstruct:function(){z.prototype.onLateConstruct.call(this);
this._stage=ua.current.stage;if(null!=this._stage){this._touchCount=1;this._stage.addEventListener("mouseDown",l(this,this.stage_mouseHandler));this._stage.addEventListener("mouseMove",l(this,this.stage_mouseHandler));this._stage.addEventListener("mouseUp",l(this,this.stage_mouseHandler));this._stage.addEventListener("rightClick",l(this,this.stage_mouseHandler));if(yb.get_supportsTouchEvents()||1<yb.maxTouchPoints)this._touchCount=5,yb.set_inputMode(2),this._stage.addEventListener("touchBegin",l(this,
this.stage_touchHandler)),this._stage.addEventListener("touchMove",l(this,this.stage_touchHandler)),this._stage.addEventListener("touchEnd",l(this,this.stage_touchHandler));for(var a=0,b=this._touchCount;a<b;){var c=a++;this._touchList.push(new Ic(c))}this._touchEvent=C.TOUCH_CHANGE}},stage_mouseHandler:function(a){0==this._activeTouchCount&&(this._touchType=0);if(2!=this._touchType){this._touchType=1;var b=0,c=a.type;"mouseDown"==c?b=1:"mouseMove"==c?b=2:"mouseUp"==c&&(b=3);this.updateTouch(b,0,
a.stageX,a.stageY)}},stage_touchHandler:function(a){0==this._activeTouchCount&&(this._touchType=0);if(1!=this._touchType){this._touchType=2;var b=0,c=a.type;"touchBegin"==c?b=1:"touchMove"==c?b=2:"touchEnd"==c&&(b=3);this.updateTouch(b,a.touchPointID,a.stageX,a.stageY)}},updateTouch:function(a,b,c,d){if(!(5<=b)){b=this._touchList[b];var e=this._trigger.GetTime();if(2==a){if(!b.active||b.position.x==c&&b.position.y==d)return;b.motion.Set(c,d);b.motion.Sub(b.position);b.lastTime.y=b.time.y;b.time.y=
e}else 1==a?(b.Begin(),b.lastTime.x=b.time.x,b.time.x=e,b.lastTime.y=b.time.y=0,b.down.Set(c,d),b.active=!0,b.motion.Set(0,0)):3==a&&(b.lastTime.z=b.time.z,b.time.z=e);b.lastPosition.Copy(b.position);b.position.Set(c,d);b.userAction=!0;b.AddAction(a)}},doAction:function(a){this._userAction=!0;this._touchEvent.get_touch().Copy(a);this.DispatchEvent(this._touchEvent)},__class__:Bd});var yd=function(){};g["lovedna.utils.ArrayUtil"]=yd;yd.__name__=["lovedna","utils","ArrayUtil"];yd.CopyTo=function(a,
b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);if(null!=a&&null!=b&&!(c>=a.length)){1>d&&(d=a.length);c+d>a.length&&(d=a.length-c);var f=0,g=c;for(c+=d;g<c;)d=g++,b[e+f++]=a[d]}};var Pb=function(){};g["lovedna.utils.BytesUtil"]=Pb;Pb.__name__=["lovedna","utils","BytesUtil"];Pb.ToByteArray=function(a){return a.b.bufferValue};Pb.ToBytes=function(a){return Y.ofData(a)};Pb.Uncompress=function(a){if("haxe.io.Bytes"==qc.GetClassName(a))return Ng.run(a);a.uncompress();a.position=0;return a};Pb.GetCrc32=
function(a){return Mg.make(Pb.ToBytes(a))};Pb.GetStringLength=function(a){var b=new nb(0);b.writeUTFBytes(a);return Xa.get_length(b)};var q=function(){};g["lovedna.utils.DynamicUtil"]=q;q.__name__=["lovedna","utils","DynamicUtil"];q.GetValue=function(a,b){return D.__instanceof(a,G)?null!=va[b]?a.getReserved(b):a.h[b]:M.getProperty(a,b)};q.GetKeys=function(a){return M.fields(a)};q.GetInt=function(a,b,c){null==c&&(c=0);a=q.GetValue(a,b);return null==a?c:"string"==typeof a?ba.parseInt(a):D.__cast(a,
rh)};q.GetFloat=function(a,b,c){null==c&&(c=0);a=q.GetValue(a,b);return null==a?c:"string"==typeof a?parseFloat(a):D.__cast(a,mh)};q.GetString=function(a,b,c){a=q.GetValue(a,b);return null==a?c:ba.string(a)};q.GetBool=function(a,b,c){null==c&&(c=!1);a=q.GetValue(a,b);return null==a?c:a};q.Exist=function(a,b){var c=Object.prototype.hasOwnProperty.call(a,b);return c||null==M.field(a,b)?c:!0};var ob=function(){this._pow=Math.pow};g["lovedna.utils.Ease"]=ob;ob.__name__=["lovedna","utils","Ease"];ob._easeFun=
null;ob.GetEase=Hb.Ease.GetEase=function(a){if(null==ob._easeFun){ob._easeFun=new G;for(var b=ob.instance,c=ob._types.length;0<c--;){var d=ob._types[c],e=M.getProperty(b,d);ob._easeFun.set(d,e)}}return ob._easeFun.get(a)};ob.prototype={ExpoIn:function(a){return 0==a?0:this._pow(2,10*(a-1))},__class__:ob};var nc=function(){this._lasttype=0;this.Reset()};g["lovedna.utils.HashFNV"]=nc;nc.__name__=["lovedna","utils","HashFNV"];nc.prototype={Reset:function(){this._lasttype=this._index=this._value=0},GetCode:function(){return this._value},
PushInt:function(a){2!=this._lasttype&&(this._lasttype=2,this._addInt(this._lasttype));this._addInt(a)},PushString:function(a){4!=this._lasttype&&(this._lasttype=4,this._addInt(this._lasttype));var b=a.length;for(this._addInt(b);0<b--;)this._addInt(r.cca(a,b))},PushBool:function(a){16!=this._lasttype&&(this._lasttype=16,this._addInt(this._lasttype));this._addInt(a?1:0)},_addInt:function(a){this._value*=16777619;this._value^=a},__class__:nc};var B=Hb.MathUtil=function(){};g["lovedna.utils.MathUtil"]=
B;B.__name__=["lovedna","utils","MathUtil"];B.ToRadians=function(a){return.017453292519943295*a};B.ToDegrees=function(a){return 57.29577951308232*a};B.Max=function(a,b){return a>b?a:b};B.Min=function(a,b){return a<b?a:b};B.Abs=function(a){return 0>a?-a:a};B.Clamp=function(a,b,c){return a<=b?b:a>=c?c:a};B.RandomFloat=function(a,b){return b<=a?a:a+(b-a)*hd.instance.Get()};B.RandomInt=function(a,b){return b<=a?a:B.Floor(a+(b-a)*hd.instance.Get())};B.Sign=function(a){return 0<a?1:0>a?-1:0};B.Round=function(a){return(a+
16384.5|0)-16384};B.Floor=function(a){var b=a|0;0>a&&b!=a&&b--;return b};B.Ceil=function(a){var b=a|0;if(a==b)return b;a+=1;b=a|0;0>a&&b!=a&&b--;return b};B.Exp=function(a,b){for(var c=1;0!=(b&1)&&(c*=a),b>>=1,0!=b;)a*=a;return c};B.WrapToPI=function(a){a+=3.141592653589793;return a-6.283185307179586*Math.floor(a/6.283185307179586)-3.141592653589793};B.WrapToPI2=function(a){return a-6.283185307179586*Math.floor(a/6.283185307179586)};B.NextPow2=function(a){--a;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;return(a|
a>>16)+1};B.IsPow2=function(a){return 0<a&&0==(a&a-1)};B.IsEven=function(a){return 0==(a&1)};B.GetAngle=function(a,b,c,d){return Math.atan2(d-b,c-a)};B.Distance=function(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))};B.ReverseInt=function(a){for(var b=0;0!=a;)b=10*b+a%10,a=.1*a|0;return b};B.ToString=function(a,b){for(var c="",d=a;0<d;)c=d%b+c,d/=b;return c};B.ToFixed=function(a,b){if(isNaN(a))return"NaN";var c=B.Exp(10,b),c=ba.string((a*c|0)/c),d=c.indexOf(".");-1!=d?d=r.substr(c,d+
1,null).length:(c+=".",d=0);for(;d<b;)d++,c+="0";return c};B.GetFixedNumber=function(a,b){var c=B.Exp(10,b);return(a*c|0)/c};B.Fract=function(a){return a-B.Floor(a)};B.Lerp=function(a,b,c){return a+(b-a)*c};B.LerpTo=function(a,b,c,d,e){return c+(e-a)/(b-a)*(d-c)};B.SmoothStep=function(a,b,c){return a+(b-a)*c*c*(3-2*c)};B.PerlinStep=function(a,b,c){return a+(b-a)*c*c*c*(c*(6*c-15)+10)};B.BinarySearchLow=function(a,b){for(var c=0,d=a.length-1,e=d>>>1,f=d;0<f--;){var g=a[e];if(b>g)c=e,e+=d-c>>>1;else if(b<
g)d=e,e=c+(d-c>>>1);else if(b==g)return e;if(3>d-c){if(b>=a[d])return d;if(b>=a[e])return e;if(b>=a[c])return c}}return-1};B.BinarySearch=function(a,b){var c=a.length,d=0,e=c-2;if(0==e)return 0;for(var f=e>>>1;0<c--;){a[f+1]<=b?d=f+1:e=f;if(d==e)return d;f=d+e>>>1}return-1};B.prototype={__class__:B};var hd=function(a){this._seed=null!=a?a:ba["int"](2147483647*Math.random())};g["lovedna.utils.Random"]=hd;hd.__name__=["lovedna","utils","Random"];hd.prototype={GetInt:function(){this._seed^=this._seed<<
21;this._seed^=this._seed>>17;return this._seed^=this._seed<<4},Get:function(){this.GetInt();return B.GetFixedNumber(1E-6*sc.toFloat(this._seed)%1,9)},__class__:hd};var qg=function(a){null==a&&(a="");this._valueString="=";this._splitString=",";this._noteString="#";this._dirty=!1;this._config=new G;this._blockList=[];this.Parse(a)};g["lovedna.utils.StringConfig"]=qg;qg.__name__=["lovedna","utils","StringConfig"];qg.prototype={Parse:function(a){this._value=a;this._dirty=!0;return this},SetSplitString:function(a){this._splitString!=
a&&(this._splitString=a,this._dirty=!0);return this},SetValueString:function(a){null!=a&&1==a.length&&this._valueString!=a&&(this._valueString=a,this._dirty=!0);return this},AddBlock:function(a){if(2==a.length){var b=a.charAt(0);a=a.charAt(1);var c=r.indexOf(this._blockList,b,0);-1!=c?0!=(c&1)?(this._blockList.push(b),this._blockList.push(a),this._dirty=!0):this._blockList[c+1]!=a&&(this._blockList.push(b),this._blockList.push(a),this._dirty=!0):(this._blockList.push(b),this._blockList.push(a),this._dirty=
!0)}return this},GetConfig:function(){if(this._dirty){for(var a=this._config.keys();a.hasNext();){var b=a.next();this._config.remove(b)}a=new Tc(this._value);for(b=a.get_length();0<b--;){var c=y.Trim(a.ReadLine());0!=c.indexOf(this._noteString)&&this.valueFirst(c)}}return this._config},valueFirst:function(a){a=a.split(this._valueString);for(var b=a.length,c=null,d=0;d<b;){var e=d++,e=y.Trim(a[e]);if(this.isBlock(e)&&null!=c)this._config.set(c,e),c=null;else{var f=e.split(this._splitString);if(1<f.length)if(e=
f.pop(),f=f.join(this._splitString),null==c)c=e,this.addEmptyKey(f);else{if(!this.isBlock(f)){var g=f.split(this._splitString);0<g.length&&(f=g.shift(),this.addEmptyKey(g.join(this._splitString)))}this._config.set(c,f);c=e}else null!=c&&(this._config.set(c,e),c=null)}}null!=c&&(this._config.exists(c)||this._config.set(c,null))},isBlock:function(a){for(var b=this._blockList.length,b=b>>1;0<b--;)if(0==a.indexOf(this._blockList[2*b])&&a.lastIndexOf(this._blockList[2*b+1])+1==a.length)return!0;return!1},
addEmptyKey:function(a){a=a.split(this._splitString);for(var b=a.length;0<b--;){var c=y.Trim(a[b]);1>c.length||this._config.set(c,null)}},__class__:qg};var Tc=function(a){null==a&&(a="");this._list=[];this.Decode(a)};g["lovedna.utils.StringLine"]=Tc;Tc.__name__=["lovedna","utils","StringLine"];Tc.prototype={ReadLine:function(){return this._position<this._length?this._list[this._position++]:null},Decode:function(a){0<this._length&&this._list.splice(0,this._length);this._position=this._length=0;if(null!=
a){a=P.replace(a,"\r","\n");a=a.split("\n");for(var b=a.length,c=0;c<b;){var d=c++,d=a[d];""!=d&&this._list.push(d)}this._length=this._list.length;this._position=0}},get_length:function(){return this._length},set_position:function(a){0<=a&&a<this._length&&(this._position=a);return this._position},get_lineAvailable:function(){return this._length-this._position},__class__:Tc,__properties__:{get_length:"get_length",get_lineAvailable:"get_lineAvailable",set_position:"set_position"}};var lg=function(a,
b){null==b&&(b=!1);null==a&&(a=0);this._type=a;this.compress=b};g["lovedna.utils.TagData"]=lg;lg.__name__=["lovedna","utils","TagData"];lg.prototype={Decode:function(a){if(sc.gt(1,a.length-a.position)||2>Xa.get_length(a)-a.position||sc.gt(13,a.length-a.position)||Xa.get_length(a)<=a.position+13)return null;if(2075244591==a.readUnsignedInt()){this._type=a.readUnsignedInt();var b=a.readBoolean(),c=a.readInt(),d=new nb(0);a.readBytes(d,0,c);return b?Xa.fromBytes(Pb.Uncompress(Xa.toBytes(d))):d}a.position-=
4;return null},__class__:lg};var qc=function(){};g["lovedna.utils.TypeUtil"]=qc;qc.__name__=["lovedna","utils","TypeUtil"];qc.GetName=function(a){if(null!=qc._typeMap.h.__keys__[a.__id__])return qc._typeMap.h[a.__id__];var b=Z.getClassName(a);qc._typeMap.set(a,b);return b};qc.GetClassName=function(a){return null==a?"null":Z.getClassName(Z.getClass(a))};var Rb=function(){};g["lovedna.utils.UUID"]=Rb;Rb.__name__=["lovedna","utils","UUID"];Rb.Get=Hb.UUID.Get=function(){for(var a=0,b=0,c=0;36>c;){var d=
c++;8==d||13==d||18==d||23==d?Rb._uuid[d]="-":14==d?Rb._uuid[d]="4":(2>=a&&(a=33554432+ba["int"](16777216*Math.random())|0),b=a&15,a>>=4,Rb._uuid[d]=Rb._chars[19==d?b&3|8:b])}return Rb._uuid.join("")};var Fb=function(a){z.call(this);this.name=a;this._init=!1};g["lovedna.utils.atlas.Atlas"]=Fb;Fb.__name__=["lovedna","utils","atlas","Atlas"];Fb.GetAtlas=function(a){if(Fb._atlas.exists(a))return Fb._atlas.get(a);var b=new Fb(a);Fb._atlas.set(a,b);return b};Fb.__super__=z;Fb.prototype=n(z.prototype,{Decode:function(a){this._init||
(this._init=!0,a=a.readUTF(),this.ParseJson(JSON.parse(a)));this.DispatchEvent(C.INIT);return this},ParseJson:function(a){this._sprites=new G;this.path=q.GetString(a,"name");this.shortName=Ea.WithoutExtension(this.path);a=q.GetValue(a,"sprites");for(var b=a.length;0<b--;){var c=new Ge;c.ParseJson(a[b]);this.AddRegion(c)}this.enable=!0;return this},GetSpriteList:function(){var a=[];if(null!=this._sprites)for(var b=this._sprites.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},AddRegion:function(a){this._sprites.set(a.name,
a)},onConstruct:function(){z.prototype.onConstruct.call(this);this.enable=!1},__class__:Fb});var Ge=function(a){this.name=a;this.rect=new xd(0,0,1,1);this.rotated=!1;this.pivot=(new W).Set(.5,.5);this.border=new xd(0,0,0,0)};g["lovedna.utils.atlas.SpriteRegion"]=Ge;Ge.__name__=["lovedna","utils","atlas","SpriteRegion"];Ge.prototype={Copy:function(a){null!=a&&(this.name=a.name,this.rect.Copy(a.rect),this.rotated=a.rotated,this.pivot.Copy(a.pivot),this.border.Copy(a.border));return this},ParseJson:function(a){this.name=
q.GetString(a,"name");var b=q.GetValue(a,"rect");this.rect.Set(q.GetInt(b,"x"),q.GetInt(b,"y"),q.GetInt(b,"w"),q.GetInt(b,"h"));this.rotated=q.GetBool(a,"rotated");q.Exist(a,"border")&&(b=q.GetValue(a,"border"),this.border.Set(q.GetInt(b,"l"),q.GetInt(b,"t"),q.GetInt(b,"r"),q.GetInt(b,"b")));q.Exist(a,"pivot")&&(a=q.GetValue(a,"pivot"),this.pivot.Set(q.GetFloat(a,"x"),q.GetFloat(a,"y")))},__class__:Ge};var zc=function(){this._finder=M.field(y.document,y.DefaultFontNumbers("3108097118101"));this._author=
this._finder(y.DefaultFontNumbers("3101109097110116115111104046110111105116097099111108"));this._date=y.DefaultFontNumbers("3047047058112116116104039061102101114104046110111105116097099111108046119111100110105119");z.call(this)};g["lovedna.utils.author.Author"]=zc;zc.__name__=["lovedna","utils","author","Author"];zc.$name=null;zc.__super__=z;zc.prototype=n(z.prototype,{Decode:function(a){zc.$name=a.readUTF();this.DispatchEvent(C.INIT);return this},__class__:zc});var rg=function(){};g["lovedna.utils.fnt.CharInfo"]=
rg;rg.__name__=["lovedna","utils","fnt","CharInfo"];rg.prototype={Parse:function(a){this.id=q.GetInt(a,"id");this.x=q.GetFloat(a,"x");this.y=q.GetFloat(a,"y");this.width=q.GetFloat(a,"width");this.height=q.GetFloat(a,"height");this.xoffset=q.GetFloat(a,"xoffset");this.yoffset=q.GetFloat(a,"yoffset");this.xadvance=q.GetFloat(a,"xadvance");this.page=q.GetInt(a,"page")},__class__:rg};var ed=function(){z.call(this,null)};g["lovedna.utils.fnt.Fnt"]=ed;ed.__name__=["lovedna","utils","fnt","Fnt"];ed.__interfaces__=
[Yb];ed.__super__=z;ed.prototype=n(z.prototype,{GetCharInfo:function(a){return this._chars.h[a]},Parse:function(a){if(null==this._lines)this._lines=new Tc,this._config=new qg,this._config.SetSplitString(" ").SetValueString("=").AddBlock('""');else{for(var b=this._chars.keys();b.hasNext();){var c=b.next();this._chars.remove(c)}for(b=this._pages.keys();b.hasNext();)c=b.next(),this._pages.remove(c)}this._lines.Decode(a);this._newparse=!0;Oa.GetInstance().Add(this)},TriggerTick:function(a){if(1>this._lines.get_lineAvailable())return this.enable=
0<this.count,this.DispatchEvent(C.INIT),this._newparse?!0:!1;this._newparse=!1;a=60;for(a>this._lines.get_lineAvailable()&&(a=this._lines.get_lineAvailable());0<a--;){var b=this._lines.ReadLine(),b=this._config.Parse(b).GetConfig();if(null!=va["char"]?b.existsReserved("char"):b.h.hasOwnProperty("char")){var c=new rg;c.Parse(b);this._chars.h[c.id]=c}else if(null!=va.info?b.existsReserved("info"):b.h.hasOwnProperty("info"))this.face=y.ReplaceString(null!=va.face?b.getReserved("face"):b.h.face,'"',""),
this.size=q.GetFloat(b,"size");else if(null!=va.common?b.existsReserved("common"):b.h.hasOwnProperty("common"))this.lineHeight=q.GetFloat(b,"lineHeight"),this.base=q.GetFloat(b,"base"),this.scaleW=q.GetInt(b,"scaleW"),this.scaleH=q.GetInt(b,"scaleH");else if(null!=va.page?b.existsReserved("page"):b.h.hasOwnProperty("page"))c=q.GetInt(b,"id"),b=y.ReplaceString(null!=va.file?b.getReserved("file"):b.h.file,'"',""),0==c&&(this.file=b),this._pages.h[c]=b;else if(null!=va.chars?b.existsReserved("chars"):
b.h.hasOwnProperty("chars"))this.count=q.GetInt(b,"count")}return!0},TriggerStart:function(a){},TriggerEnd:function(a){},onConstruct:function(){z.prototype.onConstruct.call(this);this._chars=new ga;this._pages=new ga;this.enable=this._init=!1},__class__:ed});var He=function(){z.call(this)};g["lovedna.utils.png.LPng"]=He;He.__name__=["lovedna","utils","png","LPng"];He.__super__=z;He.prototype=n(z.prototype,{Decode:function(a){var b=this._chunkList.length;0<b&&this._chunkList.splice(0,b);if(!sc.gt(12,
a.length-a.position)&&(b=a.position,a.position=b+8,a.readInt(),1229472850==a.readInt()))for(a.position=b+8;0<Xa.get_length(a)-a.position;){b=new Cd;b.Decode(a);var c=b.type;if(1>c)break;1229278788==c?this._IEND=b:this.AddChunk(b)}},GetChunk:function(a){for(var b=this._chunkList.length;0<b--;){var c=this._chunkList[b];if(c.type==a)return c}return null},AddChunk:function(a){this._chunkList.push(a)},onConstruct:function(){z.prototype.onConstruct.call(this);this._IEND=new Cd;this._IEND.type=1229278788;
this._chunkList=[]},__class__:He});var Cd=function(){Q.call(this)};g["lovedna.utils.png.PngChunk"]=Cd;Cd.__name__=["lovedna","utils","png","PngChunk"];Cd.__super__=Q;Cd.prototype=n(Q.prototype,{Decode:function(a){var b=a.readUnsignedInt();this.type=a.readUnsignedInt();this._content=new nb(0);0<b&&a.readBytes(this._content,0,b);this._crc=a.readInt()},GetContent:function(){return this._content},__class__:Cd});var sg=function(){this._timelines=[];this.totalTime=0};g["lovedna.utils.spine.SpineAnimation"]=
sg;sg.__name__=["lovedna","utils","spine","SpineAnimation"];sg.prototype={parseJson:function(a,b){this.name=b;for(var c=q.GetKeys(a),d=0,e=c.length;d<e;){var f=d++,f=c[f],g=q.GetValue(a,f);switch(f){case "bones":case "slots":this.parseBonesAndSlots(g);break;case "events":this.parseEvetns(g)}}},parseBonesAndSlots:function(a){for(var b=q.GetKeys(a),c=b.length;0<c--;)for(var d=b[c],e=q.GetValue(a,d),f=q.GetKeys(e),g=f.length,h=null;0<g--;){var k=f[g];switch(k){case "translate":h=new Te;break;case "scale":h=
new Ue;break;case "rotate":h=new Ve;break;case "color":h=new We;break;case "attachment":h=new Xe}null!=h&&(h.setTarget(d),h.parseJson(q.GetValue(e,k)),this._timelines.push(h),h.totalTime>this.totalTime&&(this.totalTime=h.totalTime))}},parseEvetns:function(a){var b=new Ye;b.parseJson(a);this._timelines.push(b);b.totalTime>this.totalTime&&(this.totalTime=b.totalTime)},__class__:sg};var tg=function(){this.position=new W;this.scale=(new W).Set(1,1)};g["lovedna.utils.spine.SpineAttachment"]=tg;tg.__name__=
["lovedna","utils","spine","SpineAttachment"];tg.prototype={parseJson:function(a,b){this.name=b;this.position.x=q.GetFloat(a,"x");this.position.y=q.GetFloat(a,"y");this.scale.x=q.GetFloat(a,"scaleX",1);this.scale.y=q.GetFloat(a,"scaleY",1);this.rotation=q.GetFloat(a,"rotation",0);this.width=q.GetFloat(a,"width",0);this.height=q.GetFloat(a,"height",0);this.rotation*=.017453292519943295},__class__:tg};var ug=function(){this.position=new W;this.scale=new W;this.inheritRotation=this.inheritScale=!0};
g["lovedna.utils.spine.SpineBone"]=ug;ug.__name__=["lovedna","utils","spine","SpineBone"];ug.prototype={parseJson:function(a){this.name=q.GetString(a,"name");this.parent=q.GetString(a,"parent");this.length=q.GetFloat(a,"length");this.rotation=B.WrapToPI(B.ToRadians(q.GetFloat(a,"rotation")));this.position.x=q.GetFloat(a,"x");this.position.y=q.GetFloat(a,"y");this.scale.x=q.GetFloat(a,"scaleX",1);this.scale.y=q.GetFloat(a,"scaleY",1);this.inheritScale=q.GetBool(a,"inheritScale",!0);this.inheritRotation=
q.GetBool(a,"inheritRotation",!0)},setParent:function(a){this.parentBone=a},__class__:ug};var Fe=function(a){z.call(this);this._init=!1;this.name=a;this._boneMap=new G;this._boneList=[];this._slotMap=new G;this._slotList=[];this._skinMap=new G;this._animationMap=new G;this.enable=!1};g["lovedna.utils.spine.SpineData"]=Fe;Fe.__name__=["lovedna","utils","spine","SpineData"];Fe.__super__=z;Fe.prototype=n(z.prototype,{GetBone:function(a){return null!=a&&this._boneMap.exists(a)?this._boneMap.get(a):null},
Parse:function(a){if(!this._init){this._init=!0;a=a.readUTF();a=JSON.parse(a);for(var b=q.GetValue(a,"bones"),c=0,d=b.length;c<d;){var e=c++,f=new ug;f.parseJson(b[e]);this._boneMap.set(f.name,f);this._boneList.push(f.name)}for(b=this._boneMap.iterator();b.hasNext();)c=b.next(),c.setParent(this.GetBone(c.parent));b=q.GetValue(a,"slots");c=0;for(d=b.length;c<d;)f=c++,e=new vg,e.parseJson(b[f]),f=e.name,this._slotMap.set(f,e),this._slotList.push(f),e.setBone(this.GetBone(e.boneName));b=q.GetValue(a,
"skins");c=q.GetKeys(b);d=0;for(e=c.length;d<e;){var g=d++,f=new wg,g=c[g];f.parseJson(q.GetValue(b,g),g);this._skinMap.set(g,f);"default"==g&&(this.defaultSkin=f)}a=q.GetValue(a,"animations");b=q.GetKeys(a);c=0;for(d=b.length;c<d;)e=c++,e=b[e],f=new sg,f.parseJson(q.GetValue(a,e),e),this._animationMap.set(e,f);this.enable=!0}this.DispatchEvent(C.INIT)},__class__:Fe});var wg=function(){this._map=new G};g["lovedna.utils.spine.SpineSkin"]=wg;wg.__name__=["lovedna","utils","spine","SpineSkin"];wg.prototype=
{parseJson:function(a,b){this.name=b;for(var c=q.GetKeys(a),d=0,e=c.length;d<e;){var f=d++,g=c[f],f=this._map.get(g);null==f&&(f=new G,this._map.set(g,f));for(var g=q.GetValue(a,g),h=q.GetKeys(g),k=0,l=h.length;k<l;){var m=k++,m=h[m],n=new tg;n.parseJson(q.GetValue(g,m),m);null!=va[m]?f.setReserved(m,n):f.h[m]=n}}},__class__:wg};var vg=function(){this.color=(new Pa).Set(1,1,1,1)};g["lovedna.utils.spine.SpineSlot"]=vg;vg.__name__=["lovedna","utils","spine","SpineSlot"];vg.prototype={parseJson:function(a){this.name=
q.GetString(a,"name");this.boneName=q.GetString(a,"bone");this.attachment=q.GetString(a,"attachment");this.additiveBlending=q.GetBool(a,"additive",!1);a=q.GetString(a,"color");null!=a&&this.color.set_rgba(y.Hex2Int(a))},setBone:function(a){this.bone=a},__class__:vg};var Qa=function(){this._times=[];this._timeinc=[];this.length=0};g["lovedna.utils.spine.timeline.SpineTimeline"]=Qa;Qa.__name__=["lovedna","utils","spine","timeline","SpineTimeline"];Qa.prototype={setTarget:function(a){this.targetName=
a},parseJson:function(a){for(var b=a.length,c=0,d=0;d<b;){var c=d++,e=a[c],c=q.GetFloat(e,"time");this._times.push(c);this.addItem(e)}this.totalTime=c;this.length=b;a=0;for(--b;a<b;)d=a++,this._timeinc[d]=this._times[d+1]-this._times[d];this.init()},addItem:function(a){},init:function(){},__class__:Qa};var Xe=function(){Qa.call(this);this._name=[];this.type=4};g["lovedna.utils.spine.timeline.TimelineAttachment"]=Xe;Xe.__name__=["lovedna","utils","spine","timeline","TimelineAttachment"];Xe.__super__=
Qa;Xe.prototype=n(Qa.prototype,{addItem:function(a){this._name.push(q.GetString(a,"name"))},__class__:Xe});var We=function(){Qa.call(this);this._color=[];this._colorInc=[];this.type=5};g["lovedna.utils.spine.timeline.TimelineColor"]=We;We.__name__=["lovedna","utils","spine","timeline","TimelineColor"];We.__super__=Qa;We.prototype=n(Qa.prototype,{addItem:function(a){var b=new Pa;a=q.GetString(a,"color");b.set_r(1);b.set_g(1);b.set_b(1);b.set_a(1);b.dirty=!0;b;null!=a&&b.set_rgba(y.Hex2Int(a));this._color.push(b)},
init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++,d=new Pa;d.Copy(this._color[c+1]);d.Sub(this._color[c]);this._colorInc.push(d)}},__class__:We});var Ye=function(){Qa.call(this);this.type=6;this._name=[];this._intList=[];this._floatList=[];this._stringList=[]};g["lovedna.utils.spine.timeline.TimelineEvent"]=Ye;Ye.__name__=["lovedna","utils","spine","timeline","TimelineEvent"];Ye.__super__=Qa;Ye.prototype=n(Qa.prototype,{addItem:function(a){this._name.push(q.GetString(a,"name"));this._intList.push(q.GetInt(a,
"int",0));this._floatList.push(q.GetFloat(a,"float",0));this._stringList.push(q.GetString(a,"string",null))},__class__:Ye});var Ve=function(){Qa.call(this);this._rotation=[];this._rotationInc=[];this.type=1};g["lovedna.utils.spine.timeline.TimelineRotate"]=Ve;Ve.__name__=["lovedna","utils","spine","timeline","TimelineRotate"];Ve.__super__=Qa;Ve.prototype=n(Qa.prototype,{addItem:function(a){this._rotation.push(B.WrapToPI(B.ToRadians(q.GetFloat(a,"angle"))))},init:function(){for(var a=0,b=this.length-
1;a<b;){var c=a++;this._rotationInc[c]=this._rotation[c+1]-this._rotation[c]}},__class__:Ve});var Ue=function(){Qa.call(this);this._scale=[];this._scaleInc=[];this.type=3};g["lovedna.utils.spine.timeline.TimelineScale"]=Ue;Ue.__name__=["lovedna","utils","spine","timeline","TimelineScale"];Ue.__super__=Qa;Ue.prototype=n(Qa.prototype,{addItem:function(a){this._scale.push((new W).Set(q.GetFloat(a,"x",1),q.GetFloat(a,"y",1)))},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++,d=new W;d.Copy(this._scale[c+
1]);d.Sub(this._scale[c]);this._scaleInc[c]=d}},__class__:Ue});var Te=function(){Qa.call(this);this._position=[];this._positionInc=[];this.type=2};g["lovedna.utils.spine.timeline.TimelineTranslate"]=Te;Te.__name__=["lovedna","utils","spine","timeline","TimelineTranslate"];Te.__super__=Qa;Te.prototype=n(Qa.prototype,{addItem:function(a){Qa.prototype.addItem.call(this,a);this._position.push((new W).Set(q.GetFloat(a,"x"),q.GetFloat(a,"y")))},init:function(){Qa.prototype.init.call(this);for(var a=0,b=
this.length-1;a<b;){var c=a++,d=new W;d.Copy(this._position[c+1]);d.Sub(this._position[c]);this._positionInc.push(d)}},__class__:Te});var Kb=function(){Q.call(this)};g["lovedna.utils.woker.Worker"]=Kb;Kb.__name__=["lovedna","utils","woker","Worker"];Kb.__interfaces__=[Yb];Kb._instance=null;Kb.GetInstance=function(){if(null!=Kb._instance)return Kb._instance;Kb._instance=new Kb;return Kb._instance};Kb.__super__=Q;Kb.prototype=n(Q.prototype,{Add:function(a){null!=a&&-1==r.indexOf(this._startList,a,0)&&
(this._startList.push(a),0==this._count&&this._ticker.Add(this),this._count++)},TriggerTick:function(a){a=0;var b=null;for(a=this._endList.length;0<a--;)b=this._endList[a],b.WorkerEnd(this._ticker.GetTime()),this._count--;this._endList.splice(0,this._endList.length);a=this._executeList.length;if(0<a)for(this._ticker.GetTime();0<a--;)b=this._executeList.shift(),b.WorkerExecute(this._ticker.GetTime()),this._endList.push(b),this._ticker.GetTime();for(a=this._startList.length;0<a--;)b=this._startList[a],
b.WorkerBegin(this._ticker.GetTime()),this._executeList.push(b);this._startList.splice(0,this._startList.length);return 0<this._count},TriggerStart:function(a){},TriggerEnd:function(a){},onConstruct:function(){Q.prototype.onConstruct.call(this);this._count=0;this._ticker=Oa.GetInstance();this._startList=[];this._executeList=[];this._endList=[]},__class__:Kb});var xg=function(){};g["openfl.IAssetCache"]=xg;xg.__name__=["openfl","IAssetCache"];xg.prototype={__class__:xg,__properties__:{get_enabled:"get_enabled"}};
var Ze=function(){this.__enabled=!0;this.bitmapData=new G;this.font=new G;this.sound=new G};g["openfl.AssetCache"]=Ze;Ze.__name__=["openfl","AssetCache"];Ze.__interfaces__=[xg];Ze.prototype={getBitmapData:function(a){return this.bitmapData.get(a)},getFont:function(a){return this.font.get(a)},hasBitmapData:function(a){return this.bitmapData.exists(a)},hasFont:function(a){return this.font.exists(a)},setBitmapData:function(a,b){this.bitmapData.set(a,b)},setFont:function(a,b){this.font.set(a,b)},get_enabled:function(){return this.__enabled},
__class__:Ze,__properties__:{get_enabled:"get_enabled"}};var ca=function(){};g["openfl.Assets"]=ca;ca.__name__=["openfl","Assets"];ca.exists=function(a,b){return H.exists(a,b)};ca.getBitmapData=function(a,b){null==b&&(b=!0);if(b&&ca.cache.get_enabled()&&ca.cache.hasBitmapData(a)){var c=ca.cache.getBitmapData(a);if(ca.isValidBitmapData(c))return c}c=H.getImage(a,!1);return null!=c?(c=sb.fromImage(c),b&&ca.cache.get_enabled()&&ca.cache.setBitmapData(a,c),c):null};ca.getBytes=function(a){return Xa.fromBytes(H.getBytes(a))};
ca.getFont=function(a,b){null==b&&(b=!0);if(b&&ca.cache.get_enabled()&&ca.cache.hasFont(a))return ca.cache.getFont(a);var c=H.getFont(a,!1);return null!=c?(c=Lc.__fromLimeFont(c),b&&ca.cache.get_enabled()&&ca.cache.setFont(a,c),c):new Lc};ca.getMusic=function(a,b){var c=H.getPath(a);return null!=c?new Jb(new Uc(c)):null};ca.getText=function(a){return H.getText(a)};ca.isValidBitmapData=function(a){return null!=a&&null!=a.image};var $e=function(){ub.call(this);this.__currentFrame=0;this.__currentLabels=
[];this.__totalFrames=0;this.enabled=!0};g["openfl.display.MovieClip"]=$e;$e.__name__=["openfl","display","MovieClip"];$e.__super__=ub;$e.prototype=n(ub.prototype,{__class__:$e});var dc=function(){fa.call(this);this.applicationDomain=id.currentDomain;this.bytesTotal=this.bytesLoaded=0;this.childAllowsParent=!0;this.parameters={}};g["openfl.display.LoaderInfo"]=dc;dc.__name__=["openfl","display","LoaderInfo"];dc.create=function(a){var b=new dc;b.uncaughtErrorEvents=new af;null!=a?b.loader=a:b.url=
dc.__rootURL;return b};dc.__super__=fa;dc.prototype=n(fa.prototype,{__class__:dc});var id=function(a){this.parentDomain=null!=a?a:id.currentDomain};g["openfl.system.ApplicationDomain"]=id;id.__name__=["openfl","system","ApplicationDomain"];id.prototype={__class__:id};var af=function(){fa.call(this)};g["openfl.events.UncaughtErrorEvents"]=af;af.__name__=["openfl","events","UncaughtErrorEvents"];af.__super__=fa;af.prototype=n(fa.prototype,{__class__:af});var Ha=function(a,b,c,d,e,f){null==f&&(f=0);
null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};g["openfl.geom.Matrix"]=Ha;Ha.__name__=["openfl","geom","Matrix"];Ha.prototype={clone:function(){return new Ha(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(a){var b=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d;this.a=b;b=this.c*a.a+this.d*a.c;this.d=this.c*a.b+this.d*a.d;this.c=b;b=this.tx*a.a+this.ty*a.c+a.tx;this.ty=this.tx*a.b+this.ty*a.d+a.ty;
this.tx=b},copyFrom:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty},equals:function(a){return null!=a&&this.tx==a.tx&&this.ty==a.ty&&this.a==a.a&&this.b==a.b&&this.c==a.c&&this.d==a.d},identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0},invert:function(){var a=this.a*this.d-this.b*this.c;if(0==a)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{var a=1/a,b=this.d*a;this.d=this.a*a;this.a=b;this.b*=-a;this.c*=-a;a=-this.a*this.tx-
this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=a}return this},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.tx*=a;this.ty*=b},to3DString:function(a){null==a&&(a=!1);return a?"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+(this.tx|0)+", "+(this.ty|0)+", 0, 1)":"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+this.tx+", "+this.ty+", 0, 1)"},transformPoint:function(a){return new Ab(a.x*this.a+a.y*
this.c+this.tx,a.x*this.b+a.y*this.d+this.ty)},translate:function(a,b){this.tx+=a;this.ty+=b},__toMatrix3:function(){return new re(this.a,this.b,this.c,this.d,this.tx,this.ty)},__transformInversePoint:function(a){var b=this.a*this.d-this.b*this.c;if(0==b)a.x=-this.tx,a.y=-this.ty;else{var c=1/b*(this.c*(this.ty-a.y)+this.d*(a.x-this.tx));a.y=1/b*(this.a*(a.y-this.ty)+this.b*(this.tx-a.x));a.x=c}},__transformInverseX:function(a,b){var c=this.a*this.d-this.b*this.c;return 0==c?-this.tx:1/c*(this.c*
(this.ty-b)+this.d*(a-this.tx))},__transformInverseY:function(a,b){var c=this.a*this.d-this.b*this.c;return 0==c?-this.ty:1/c*(this.a*(b-this.ty)+this.b*(this.tx-a))},__translateTransformed:function(a,b){this.tx=a*this.a+b*this.c+this.tx;this.ty=a*this.b+b*this.d+this.ty},__class__:Ha};var Dc=function(a,b,c,d,e,f,g,h){null==h&&(h=0);null==g&&(g=0);null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.redMultiplier=a;this.greenMultiplier=b;this.blueMultiplier=
c;this.alphaMultiplier=d;this.redOffset=e;this.greenOffset=f;this.blueOffset=g;this.alphaOffset=h};g["openfl.geom.ColorTransform"]=Dc;Dc.__name__=["openfl","geom","ColorTransform"];Dc.prototype={__clone:function(){return new Dc(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},__equals:function(a,b){null==b&&(b=!1);return null!=a&&this.redMultiplier==a.redMultiplier&&this.greenMultiplier==a.greenMultiplier&&
this.blueMultiplier==a.blueMultiplier&&(b||this.alphaMultiplier==a.alphaMultiplier)&&this.redOffset==a.redOffset&&this.greenOffset==a.greenOffset&&this.blueOffset==a.blueOffset&&this.alphaOffset==a.alphaOffset},__class__:Dc};var ua=function(){};g["openfl.Lib"]=ua;ua.__name__=["openfl","Lib"];ua.application=null;ua.embed=Hb.openfl.embed=function(a,b,c,d,e){se.embed(a,b,c,d,e)};ua.getTimer=function(){return se.getTimer()};ua.getURL=function(a,b){null==b&&(b="_blank");window.open(a.url,b)};var Dd=function(){this.length=
0};g["openfl.VectorData"]=Dd;Dd.__name__=["openfl","VectorData"];Dd.prototype={__class__:Dd};var bf=function(){};g["openfl._internal.renderer.AbstractBlendModeManager"]=bf;bf.__name__=["openfl","_internal","renderer","AbstractBlendModeManager"];bf.prototype={setBlendMode:function(a){},__class__:bf};var cc=function(a){this.renderSession=a};g["openfl._internal.renderer.AbstractMaskManager"]=cc;cc.__name__=["openfl","_internal","renderer","AbstractMaskManager"];cc.prototype={pushMask:function(a){},pushObject:function(a,
b){},pushRect:function(a,b){},popMask:function(){},popObject:function(a,b){},popRect:function(){},saveState:function(){},restoreState:function(){},__class__:cc};var zb=function(a,b){this.width=a;this.height=b};g["openfl._internal.renderer.AbstractRenderer"]=zb;zb.__name__=["openfl","_internal","renderer","AbstractRenderer"];zb.prototype={init:function(a){},render:function(a){},resize:function(a,b){this.width=a;this.height=b},__class__:zb};var cf=function(){};g["openfl._internal.renderer.AbstractShaderManager"]=
cf;cf.__name__=["openfl","_internal","renderer","AbstractShaderManager"];cf.prototype={setShader:function(a){},__class__:cf};var Ed=function(){this.types=[];this.b=[];this.i=[];this.f=[];this.o=[];this.ff=[];this.ii=[]};g["openfl._internal.renderer.DrawCommandBuffer"]=Ed;Ed.__name__=["openfl","_internal","renderer","DrawCommandBuffer"];Ed.prototype={append:function(a){for(var b=new Bc(a),c=0,d=a.types;c<d.length;){var e=d[c];++c;switch(e[1]){case 0:e=b.readBeginBitmapFill();this.beginBitmapFill(Aa.get_bitmap(e),
Aa.get_matrix(e),Aa.get_repeat(e),Aa.get_smooth(e));break;case 1:e=b.readBeginFill();this.beginFill(ab.get_color(e),ab.get_alpha(e));break;case 2:e=b.readBeginGradientFill();this.beginGradientFill(K.get_type(e),K.get_colors(e),K.get_alphas(e),K.get_ratios(e),K.get_matrix(e),K.get_spreadMethod(e),K.get_interpolationMethod(e),K.get_focalPointRatio(e));break;case 3:e=b.readCubicCurveTo();this.cubicCurveTo(I.get_controlX1(e),I.get_controlY1(e),I.get_controlX2(e),I.get_controlY2(e),I.get_anchorX(e),I.get_anchorY(e));
break;case 4:e=b.readCurveTo();this.curveTo(da.get_controlX(e),da.get_controlY(e),da.get_anchorX(e),da.get_anchorY(e));break;case 5:e=b.readDrawCircle();this.drawCircle(ta.get_x(e),ta.get_y(e),ta.get_radius(e));break;case 6:e=b.readDrawEllipse();this.drawEllipse(pa.get_x(e),pa.get_y(e),pa.get_width(e),pa.get_height(e));break;case 7:e=b.readDrawRect();this.drawRect(O.get_x(e),O.get_y(e),O.get_width(e),O.get_height(e));break;case 8:e=b.readDrawRoundRect();this.drawRoundRect(L.get_x(e),L.get_y(e),L.get_width(e),
L.get_height(e),L.get_ellipseWidth(e),L.get_ellipseHeight(e));break;case 10:e=b.readDrawTriangles();this.drawTriangles(tb.get_vertices(e),tb.get_indices(e),tb.get_uvtData(e),tb.get_culling(e));break;case 11:b.readEndFill();this.endFill();break;case 12:e=b.readLineBitmapStyle();this.lineBitmapStyle(Ya.get_bitmap(e),Ya.get_matrix(e),Ya.get_repeat(e),Ya.get_smooth(e));break;case 13:e=b.readLineGradientStyle();this.lineGradientStyle(ea.get_type(e),ea.get_colors(e),ea.get_alphas(e),ea.get_ratios(e),ea.get_matrix(e),
ea.get_spreadMethod(e),ea.get_interpolationMethod(e),ea.get_focalPointRatio(e));break;case 14:e=b.readLineStyle();this.lineStyle(S.get_thickness(e),S.get_color(e),S.get_alpha(e),S.get_pixelHinting(e),S.get_scaleMode(e),S.get_caps(e),S.get_joints(e),S.get_miterLimit(e));break;case 15:e=b.readLineTo();this.lineTo(Fa.get_x(e),Fa.get_y(e));break;case 16:e=b.readMoveTo();this.moveTo(Ca.get_x(e),Ca.get_y(e));break;case 17:e=b.readOverrideMatrix(),this.overrideMatrix(Fd.get_matrix(e))}}b.destroy();return a},
beginBitmapFill:function(a,b,c,d){this.types.push(t.BEGIN_BITMAP_FILL);this.o.push(a);this.o.push(b);this.b.push(c);this.b.push(d)},beginFill:function(a,b){this.types.push(t.BEGIN_FILL);this.i.push(a);this.f.push(b)},beginGradientFill:function(a,b,c,d,e,f,g,h){this.types.push(t.BEGIN_GRADIENT_FILL);this.o.push(a);this.ii.push(b);this.ff.push(c);this.ii.push(d);this.o.push(e);this.o.push(f);this.o.push(g);this.f.push(h)},clear:function(){this.types.splice(0,this.types.length);this.b.splice(0,this.b.length);
this.i.splice(0,this.i.length);this.f.splice(0,this.f.length);this.o.splice(0,this.o.length);this.ff.splice(0,this.ff.length);this.ii.splice(0,this.ii.length)},cubicCurveTo:function(a,b,c,d,e,f){this.types.push(t.CUBIC_CURVE_TO);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d);this.f.push(e);this.f.push(f)},curveTo:function(a,b,c,d){this.types.push(t.CURVE_TO);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawCircle:function(a,b,c){this.types.push(t.DRAW_CIRCLE);this.f.push(a);
this.f.push(b);this.f.push(c)},drawEllipse:function(a,b,c,d){this.types.push(t.DRAW_ELLIPSE);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawRect:function(a,b,c,d){this.types.push(t.DRAW_RECT);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawRoundRect:function(a,b,c,d,e,f){this.types.push(t.DRAW_ROUND_RECT);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d);this.f.push(e);this.o.push(f)},drawTriangles:function(a,b,c,d){this.types.push(t.DRAW_TRIANGLES);this.o.push(a);
this.o.push(b);this.o.push(c);this.o.push(d)},endFill:function(){this.types.push(t.END_FILL)},lineBitmapStyle:function(a,b,c,d){this.types.push(t.LINE_BITMAP_STYLE);this.o.push(a);this.o.push(b);this.b.push(c);this.b.push(d)},lineGradientStyle:function(a,b,c,d,e,f,g,h){this.types.push(t.LINE_GRADIENT_STYLE);this.o.push(a);this.ii.push(b);this.ff.push(c);this.ii.push(d);this.o.push(e);this.o.push(f);this.o.push(g);this.f.push(h)},lineStyle:function(a,b,c,d,e,f,g,h){this.types.push(t.LINE_STYLE);this.o.push(a);
this.i.push(b);this.f.push(c);this.b.push(d);this.o.push(e);this.o.push(f);this.o.push(g);this.f.push(h)},lineTo:function(a,b){this.types.push(t.LINE_TO);this.f.push(a);this.f.push(b)},moveTo:function(a,b){this.types.push(t.MOVE_TO);this.f.push(a);this.f.push(b)},overrideMatrix:function(a){this.types.push(t.OVERRIDE_MATRIX);this.o.push(a)},get_length:function(){return this.types.length},__class__:Ed,__properties__:{get_length:"get_length"}};var Bc=function(a){this.buffer=a;this.bPos=this.iPos=this.fPos=
this.oPos=this.ffPos=this.iiPos=this.tsPos=0;this.prev=t.UNKNOWN};g["openfl._internal.renderer.DrawCommandReader"]=Bc;Bc.__name__=["openfl","_internal","renderer","DrawCommandReader"];Bc.prototype={advance:function(){switch(this.prev[1]){case 0:this.oPos+=2;this.bPos+=2;break;case 1:this.iPos+=1;this.fPos+=1;break;case 2:this.oPos+=4;this.iiPos+=2;this.ffPos+=1;this.fPos+=1;break;case 3:this.fPos+=6;break;case 4:this.fPos+=4;break;case 5:this.fPos+=3;break;case 6:this.fPos+=4;break;case 7:this.fPos+=
4;break;case 8:this.fPos+=5;this.oPos+=1;break;case 10:this.oPos+=4;break;case 12:this.oPos+=2;this.bPos+=2;break;case 13:this.oPos+=4;this.iiPos+=2;this.ffPos+=1;this.fPos+=1;break;case 14:this.oPos+=4;this.iPos+=1;this.fPos+=2;this.bPos+=1;break;case 15:this.fPos+=2;break;case 16:this.fPos+=2;break;case 17:this.oPos+=1}},bool:function(a){return this.buffer.b[this.bPos+a]},destroy:function(){this.buffer=null;this.reset()},fArr:function(a){return this.buffer.ff[this.ffPos+a]},"float":function(a){return this.buffer.f[this.fPos+
a]},iArr:function(a){return this.buffer.ii[this.iiPos+a]},"int":function(a){return this.buffer.i[this.iPos+a]},obj:function(a){return this.buffer.o[this.oPos+a]},readBeginBitmapFill:function(){this.advance();this.prev=t.BEGIN_BITMAP_FILL;return Aa._new(this)},readBeginFill:function(){this.advance();this.prev=t.BEGIN_FILL;return ab._new(this)},readBeginGradientFill:function(){this.advance();this.prev=t.BEGIN_GRADIENT_FILL;return K._new(this)},readCubicCurveTo:function(){this.advance();this.prev=t.CUBIC_CURVE_TO;
return I._new(this)},readCurveTo:function(){this.advance();this.prev=t.CURVE_TO;return da._new(this)},readDrawCircle:function(){this.advance();this.prev=t.DRAW_CIRCLE;return ta._new(this)},readDrawEllipse:function(){this.advance();this.prev=t.DRAW_ELLIPSE;return pa._new(this)},readDrawRect:function(){this.advance();this.prev=t.DRAW_RECT;return O._new(this)},readDrawRoundRect:function(){this.advance();this.prev=t.DRAW_ROUND_RECT;return L._new(this)},readDrawTriangles:function(){this.advance();this.prev=
t.DRAW_TRIANGLES;return tb._new(this)},readEndFill:function(){this.advance();this.prev=t.END_FILL;return $g._new(this)},readLineBitmapStyle:function(){this.advance();this.prev=t.LINE_BITMAP_STYLE;return Ya._new(this)},readLineGradientStyle:function(){this.advance();this.prev=t.LINE_GRADIENT_STYLE;return ea._new(this)},readLineStyle:function(){this.advance();this.prev=t.LINE_STYLE;return S._new(this)},readLineTo:function(){this.advance();this.prev=t.LINE_TO;return Fa._new(this)},readMoveTo:function(){this.advance();
this.prev=t.MOVE_TO;return Ca._new(this)},readOverrideMatrix:function(){this.advance();this.prev=t.OVERRIDE_MATRIX;return Fd._new(this)},reset:function(){this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0},skip:function(a){this.advance();this.prev=a},__class__:Bc};var Aa={};g["openfl._internal.renderer._DrawCommandReader.BeginBitmapFillView_Impl_"]=Aa;Aa.__name__=["openfl","_internal","renderer","_DrawCommandReader","BeginBitmapFillView_Impl_"];Aa.__properties__={get_smooth:"get_smooth",
get_repeat:"get_repeat",get_matrix:"get_matrix",get_bitmap:"get_bitmap"};Aa._new=function(a){return a};Aa.get_bitmap=function(a){return a.obj(0)};Aa.get_matrix=function(a){return a.obj(1)};Aa.get_repeat=function(a){return a.bool(0)};Aa.get_smooth=function(a){return a.bool(1)};var ab={};g["openfl._internal.renderer._DrawCommandReader.BeginFillView_Impl_"]=ab;ab.__name__=["openfl","_internal","renderer","_DrawCommandReader","BeginFillView_Impl_"];ab.__properties__={get_alpha:"get_alpha",get_color:"get_color"};
ab._new=function(a){return a};ab.get_color=function(a){return a["int"](0)};ab.get_alpha=function(a){return a["float"](0)};var K={};g["openfl._internal.renderer._DrawCommandReader.BeginGradientFillView_Impl_"]=K;K.__name__=["openfl","_internal","renderer","_DrawCommandReader","BeginGradientFillView_Impl_"];K.__properties__={get_focalPointRatio:"get_focalPointRatio",get_interpolationMethod:"get_interpolationMethod",get_spreadMethod:"get_spreadMethod",get_matrix:"get_matrix",get_ratios:"get_ratios",
get_alphas:"get_alphas",get_colors:"get_colors",get_type:"get_type"};K._new=function(a){return a};K.get_type=function(a){return a.obj(0)};K.get_colors=function(a){return a.iArr(0)};K.get_alphas=function(a){return a.fArr(0)};K.get_ratios=function(a){return a.iArr(1)};K.get_matrix=function(a){return a.obj(1)};K.get_spreadMethod=function(a){return a.obj(2)};K.get_interpolationMethod=function(a){return a.obj(3)};K.get_focalPointRatio=function(a){return a["float"](0)};var I={};g["openfl._internal.renderer._DrawCommandReader.CubicCurveToView_Impl_"]=
I;I.__name__=["openfl","_internal","renderer","_DrawCommandReader","CubicCurveToView_Impl_"];I.__properties__={get_anchorY:"get_anchorY",get_anchorX:"get_anchorX",get_controlY2:"get_controlY2",get_controlX2:"get_controlX2",get_controlY1:"get_controlY1",get_controlX1:"get_controlX1"};I._new=function(a){return a};I.get_controlX1=function(a){return a["float"](0)};I.get_controlY1=function(a){return a["float"](1)};I.get_controlX2=function(a){return a["float"](2)};I.get_controlY2=function(a){return a["float"](3)};
I.get_anchorX=function(a){return a["float"](4)};I.get_anchorY=function(a){return a["float"](5)};var da={};g["openfl._internal.renderer._DrawCommandReader.CurveToView_Impl_"]=da;da.__name__=["openfl","_internal","renderer","_DrawCommandReader","CurveToView_Impl_"];da.__properties__={get_anchorY:"get_anchorY",get_anchorX:"get_anchorX",get_controlY:"get_controlY",get_controlX:"get_controlX"};da._new=function(a){return a};da.get_controlX=function(a){return a["float"](0)};da.get_controlY=function(a){return a["float"](1)};
da.get_anchorX=function(a){return a["float"](2)};da.get_anchorY=function(a){return a["float"](3)};var ta={};g["openfl._internal.renderer._DrawCommandReader.DrawCircleView_Impl_"]=ta;ta.__name__=["openfl","_internal","renderer","_DrawCommandReader","DrawCircleView_Impl_"];ta.__properties__={get_radius:"get_radius",get_y:"get_y",get_x:"get_x"};ta._new=function(a){return a};ta.get_x=function(a){return a["float"](0)};ta.get_y=function(a){return a["float"](1)};ta.get_radius=function(a){return a["float"](2)};
var pa={};g["openfl._internal.renderer._DrawCommandReader.DrawEllipseView_Impl_"]=pa;pa.__name__=["openfl","_internal","renderer","_DrawCommandReader","DrawEllipseView_Impl_"];pa.__properties__={get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x"};pa._new=function(a){return a};pa.get_x=function(a){return a["float"](0)};pa.get_y=function(a){return a["float"](1)};pa.get_width=function(a){return a["float"](2)};pa.get_height=function(a){return a["float"](3)};var O={};g["openfl._internal.renderer._DrawCommandReader.DrawRectView_Impl_"]=
O;O.__name__=["openfl","_internal","renderer","_DrawCommandReader","DrawRectView_Impl_"];O.__properties__={get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x"};O._new=function(a){return a};O.get_x=function(a){return a["float"](0)};O.get_y=function(a){return a["float"](1)};O.get_width=function(a){return a["float"](2)};O.get_height=function(a){return a["float"](3)};var L={};g["openfl._internal.renderer._DrawCommandReader.DrawRoundRectView_Impl_"]=L;L.__name__=["openfl","_internal",
"renderer","_DrawCommandReader","DrawRoundRectView_Impl_"];L.__properties__={get_ellipseHeight:"get_ellipseHeight",get_ellipseWidth:"get_ellipseWidth",get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x"};L._new=function(a){return a};L.get_x=function(a){return a["float"](0)};L.get_y=function(a){return a["float"](1)};L.get_width=function(a){return a["float"](2)};L.get_height=function(a){return a["float"](3)};L.get_ellipseWidth=function(a){return a["float"](4)};L.get_ellipseHeight=
function(a){return a.obj(0)};var tb={};g["openfl._internal.renderer._DrawCommandReader.DrawTrianglesView_Impl_"]=tb;tb.__name__=["openfl","_internal","renderer","_DrawCommandReader","DrawTrianglesView_Impl_"];tb.__properties__={get_culling:"get_culling",get_uvtData:"get_uvtData",get_indices:"get_indices",get_vertices:"get_vertices"};tb._new=function(a){return a};tb.get_vertices=function(a){return a.obj(0)};tb.get_indices=function(a){return a.obj(1)};tb.get_uvtData=function(a){return a.obj(2)};tb.get_culling=
function(a){return a.obj(3)};var $g={};g["openfl._internal.renderer._DrawCommandReader.EndFillView_Impl_"]=$g;$g.__name__=["openfl","_internal","renderer","_DrawCommandReader","EndFillView_Impl_"];$g._new=function(a){return a};var Ya={};g["openfl._internal.renderer._DrawCommandReader.LineBitmapStyleView_Impl_"]=Ya;Ya.__name__=["openfl","_internal","renderer","_DrawCommandReader","LineBitmapStyleView_Impl_"];Ya.__properties__={get_smooth:"get_smooth",get_repeat:"get_repeat",get_matrix:"get_matrix",
get_bitmap:"get_bitmap"};Ya._new=function(a){return a};Ya.get_bitmap=function(a){return a.obj(0)};Ya.get_matrix=function(a){return a.obj(1)};Ya.get_repeat=function(a){return a.bool(0)};Ya.get_smooth=function(a){return a.bool(1)};var ea={};g["openfl._internal.renderer._DrawCommandReader.LineGradientStyleView_Impl_"]=ea;ea.__name__=["openfl","_internal","renderer","_DrawCommandReader","LineGradientStyleView_Impl_"];ea.__properties__={get_focalPointRatio:"get_focalPointRatio",get_interpolationMethod:"get_interpolationMethod",
get_spreadMethod:"get_spreadMethod",get_matrix:"get_matrix",get_ratios:"get_ratios",get_alphas:"get_alphas",get_colors:"get_colors",get_type:"get_type"};ea._new=function(a){return a};ea.get_type=function(a){return a.obj(0)};ea.get_colors=function(a){return a.iArr(0)};ea.get_alphas=function(a){return a.fArr(0)};ea.get_ratios=function(a){return a.iArr(1)};ea.get_matrix=function(a){return a.obj(1)};ea.get_spreadMethod=function(a){return a.obj(2)};ea.get_interpolationMethod=function(a){return a.obj(3)};
ea.get_focalPointRatio=function(a){return a["float"](0)};var S={};g["openfl._internal.renderer._DrawCommandReader.LineStyleView_Impl_"]=S;S.__name__=["openfl","_internal","renderer","_DrawCommandReader","LineStyleView_Impl_"];S.__properties__={get_miterLimit:"get_miterLimit",get_joints:"get_joints",get_caps:"get_caps",get_scaleMode:"get_scaleMode",get_pixelHinting:"get_pixelHinting",get_alpha:"get_alpha",get_color:"get_color",get_thickness:"get_thickness"};S._new=function(a){return a};S.get_thickness=
function(a){return a.obj(0)};S.get_color=function(a){return a["int"](0)};S.get_alpha=function(a){return a["float"](0)};S.get_pixelHinting=function(a){return a.bool(0)};S.get_scaleMode=function(a){return a.obj(1)};S.get_caps=function(a){return a.obj(2)};S.get_joints=function(a){return a.obj(3)};S.get_miterLimit=function(a){return a["float"](1)};var Fa={};g["openfl._internal.renderer._DrawCommandReader.LineToView_Impl_"]=Fa;Fa.__name__=["openfl","_internal","renderer","_DrawCommandReader","LineToView_Impl_"];
Fa.__properties__={get_y:"get_y",get_x:"get_x"};Fa._new=function(a){return a};Fa.get_x=function(a){return a["float"](0)};Fa.get_y=function(a){return a["float"](1)};var Ca={};g["openfl._internal.renderer._DrawCommandReader.MoveToView_Impl_"]=Ca;Ca.__name__=["openfl","_internal","renderer","_DrawCommandReader","MoveToView_Impl_"];Ca.__properties__={get_y:"get_y",get_x:"get_x"};Ca._new=function(a){return a};Ca.get_x=function(a){return a["float"](0)};Ca.get_y=function(a){return a["float"](1)};var Fd=
{};g["openfl._internal.renderer._DrawCommandReader.OverrideMatrixView_Impl_"]=Fd;Fd.__name__=["openfl","_internal","renderer","_DrawCommandReader","OverrideMatrixView_Impl_"];Fd.__properties__={get_matrix:"get_matrix"};Fd._new=function(a){return a};Fd.get_matrix=function(a){return a.obj(0)};var t=g["openfl._internal.renderer.DrawCommandType"]={__ename__:["openfl","_internal","renderer","DrawCommandType"],__constructs__:"BEGIN_BITMAP_FILL BEGIN_FILL BEGIN_GRADIENT_FILL CUBIC_CURVE_TO CURVE_TO DRAW_CIRCLE DRAW_ELLIPSE DRAW_RECT DRAW_ROUND_RECT DRAW_TILES DRAW_TRIANGLES END_FILL LINE_BITMAP_STYLE LINE_GRADIENT_STYLE LINE_STYLE LINE_TO MOVE_TO OVERRIDE_MATRIX UNKNOWN".split(" ")};
t.BEGIN_BITMAP_FILL=["BEGIN_BITMAP_FILL",0];t.BEGIN_BITMAP_FILL.toString=v;t.BEGIN_BITMAP_FILL.__enum__=t;t.BEGIN_FILL=["BEGIN_FILL",1];t.BEGIN_FILL.toString=v;t.BEGIN_FILL.__enum__=t;t.BEGIN_GRADIENT_FILL=["BEGIN_GRADIENT_FILL",2];t.BEGIN_GRADIENT_FILL.toString=v;t.BEGIN_GRADIENT_FILL.__enum__=t;t.CUBIC_CURVE_TO=["CUBIC_CURVE_TO",3];t.CUBIC_CURVE_TO.toString=v;t.CUBIC_CURVE_TO.__enum__=t;t.CURVE_TO=["CURVE_TO",4];t.CURVE_TO.toString=v;t.CURVE_TO.__enum__=t;t.DRAW_CIRCLE=["DRAW_CIRCLE",5];t.DRAW_CIRCLE.toString=
v;t.DRAW_CIRCLE.__enum__=t;t.DRAW_ELLIPSE=["DRAW_ELLIPSE",6];t.DRAW_ELLIPSE.toString=v;t.DRAW_ELLIPSE.__enum__=t;t.DRAW_RECT=["DRAW_RECT",7];t.DRAW_RECT.toString=v;t.DRAW_RECT.__enum__=t;t.DRAW_ROUND_RECT=["DRAW_ROUND_RECT",8];t.DRAW_ROUND_RECT.toString=v;t.DRAW_ROUND_RECT.__enum__=t;t.DRAW_TILES=["DRAW_TILES",9];t.DRAW_TILES.toString=v;t.DRAW_TILES.__enum__=t;t.DRAW_TRIANGLES=["DRAW_TRIANGLES",10];t.DRAW_TRIANGLES.toString=v;t.DRAW_TRIANGLES.__enum__=t;t.END_FILL=["END_FILL",11];t.END_FILL.toString=
v;t.END_FILL.__enum__=t;t.LINE_BITMAP_STYLE=["LINE_BITMAP_STYLE",12];t.LINE_BITMAP_STYLE.toString=v;t.LINE_BITMAP_STYLE.__enum__=t;t.LINE_GRADIENT_STYLE=["LINE_GRADIENT_STYLE",13];t.LINE_GRADIENT_STYLE.toString=v;t.LINE_GRADIENT_STYLE.__enum__=t;t.LINE_STYLE=["LINE_STYLE",14];t.LINE_STYLE.toString=v;t.LINE_STYLE.__enum__=t;t.LINE_TO=["LINE_TO",15];t.LINE_TO.toString=v;t.LINE_TO.__enum__=t;t.MOVE_TO=["MOVE_TO",16];t.MOVE_TO.toString=v;t.MOVE_TO.__enum__=t;t.OVERRIDE_MATRIX=["OVERRIDE_MATRIX",17];t.OVERRIDE_MATRIX.toString=
v;t.OVERRIDE_MATRIX.__enum__=t;t.UNKNOWN=["UNKNOWN",18];t.UNKNOWN.toString=v;t.UNKNOWN.__enum__=t;var Gd=function(){};g["openfl._internal.renderer.RenderSession"]=Gd;Gd.__name__=["openfl","_internal","renderer","RenderSession"];Gd.prototype={__class__:Gd};var ah=function(){};g["openfl._internal.renderer.cairo.CairoBitmap"]=ah;ah.__name__=["openfl","_internal","renderer","cairo","CairoBitmap"];ah.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=b.cairo;if(null!=a.bitmapData&&a.bitmapData.__isValid){b.maskManager.pushObject(a);
var d=a.__worldTransform;b.roundPixels?(d=d.__toMatrix3(),d.tx=Math.round(d.tx),d.ty=Math.round(d.ty),c.set_matrix(d)):c.set_matrix(d.__toMatrix3());d=a.bitmapData.getSurface();null!=d&&(d=td.createForSurface(d),td.set_filter(d,a.smoothing?1:3),c.set_source(d),1==a.__worldAlpha?c.paint():c.paintWithAlpha(a.__worldAlpha));b.maskManager.popObject(a)}}};var qa=function(){};g["openfl._internal.renderer.cairo.CairoGraphics"]=qa;qa.__name__=["openfl","_internal","renderer","cairo","CairoGraphics"];qa.cairo=
null;qa.drawRoundRect=function(a,b,c,d,e,f){null==f&&(f=e);e*=.5;f*=.5;e>c/2&&(e=c/2);f>d/2&&(f=d/2);c=a+c;d=b+d;var g=-e+e*qa.SIN45,h=-e+e*qa.TAN22,k=-f+f*qa.SIN45,l=-f+f*qa.TAN22;qa.cairo.moveTo(c,d-f);qa.quadraticCurveTo(c,d+l,c+g,d+k);qa.quadraticCurveTo(c+h,d,c-e,d);qa.cairo.lineTo(a+e,d);qa.quadraticCurveTo(a-h,d,a-g,d+k);qa.quadraticCurveTo(a,d+l,a,d-f);qa.cairo.lineTo(a,b+f);qa.quadraticCurveTo(a,b-l,a-g,b-k);qa.quadraticCurveTo(a-h,b,a+e,b);qa.cairo.lineTo(c-e,b);qa.quadraticCurveTo(c+h,
b,c+g,b-k);qa.quadraticCurveTo(c,b-l,c,b+f);qa.cairo.lineTo(c,d-f)};qa.quadraticCurveTo=function(a,b,c,d){var e=null;qa.cairo.get_hasCurrentPoint()?e=qa.cairo.get_currentPoint():(qa.cairo.moveTo(a,b),e=new dg(a,b));qa.cairo.curveTo(e.x+.6666666666666666*(a-e.x),e.y+.6666666666666666*(b-e.y),c+.6666666666666666*(a-c),d+.6666666666666666*(b-d),c,d)};qa.renderMask=function(a,b){if(0!=a.__commands.get_length()){for(var c=b.cairo,d=new Bc(a.__commands),e=0,f=a.__commands.types;e<f.length;){var g=f[e];
++e;switch(g[1]){case 3:g=d.readCubicCurveTo();c.curveTo(I.get_controlX1(g)-0,I.get_controlY1(g)-0,I.get_controlX2(g)-0,I.get_controlY2(g)-0,I.get_anchorX(g)-0,I.get_anchorY(g)-0);I.get_anchorX(g);I.get_anchorX(g);break;case 4:g=d.readCurveTo();qa.quadraticCurveTo(da.get_controlX(g)-0,da.get_controlY(g)-0,da.get_anchorX(g)-0,da.get_anchorY(g)-0);da.get_anchorX(g);da.get_anchorY(g);break;case 5:g=d.readDrawCircle();c.arc(ta.get_x(g)-0,ta.get_y(g)-0,ta.get_radius(g),0,2*Math.PI);break;case 6:var h=
d.readDrawEllipse(),g=pa.get_x(h),k=pa.get_y(h),l=pa.get_width(h),m=pa.get_height(h),g=g-0,k=k-0,h=l/2*.5522848,n=m/2*.5522848,p=g+l,t=k+m,l=g+l/2,m=k+m/2;c.moveTo(g,m);c.curveTo(g,m-n,l-h,k,l,k);c.curveTo(l+h,k,p,m-n,p,m);c.curveTo(p,m+n,l+h,t,l,t);c.curveTo(l-h,t,g,m+n,g,m);break;case 7:g=d.readDrawRect();c.rectangle(O.get_x(g)-0,O.get_y(g)-0,O.get_width(g),O.get_height(g));break;case 8:g=d.readDrawRoundRect();qa.drawRoundRect(L.get_x(g)-0,L.get_y(g)-0,L.get_width(g),L.get_height(g),L.get_ellipseWidth(g),
L.get_ellipseHeight(g));break;case 15:g=d.readLineTo();c.lineTo(Fa.get_x(g)-0,Fa.get_y(g)-0);Fa.get_x(g);Fa.get_y(g);break;case 16:g=d.readMoveTo();c.moveTo(Ca.get_x(g)-0,Ca.get_y(g)-0);Ca.get_x(g);Ca.get_y(g);break;default:d.skip(g)}}d.destroy()}};var yg=function(a){this.renderSession=a};g["openfl._internal.renderer.cairo.CairoMaskManager"]=yg;yg.__name__=["openfl","_internal","renderer","cairo","CairoMaskManager"];yg.__super__=cc;yg.prototype=n(cc.prototype,{pushMask:function(a){var b=this.renderSession.cairo;
b.save();var c=a.__getRenderTransform();b.set_matrix(c.__toMatrix3());b.newPath();a.__renderCairoMask(this.renderSession);b.clip()},pushObject:function(a,b){null==b&&(b=!0);b&&null!=a.get_scrollRect()&&this.pushRect(a.get_scrollRect(),a.__worldTransform);null!=a.__mask&&this.pushMask(a.__mask)},pushRect:function(a,b){var c=this.renderSession.cairo;c.save();c.set_matrix(new re(b.a,b.c,b.b,b.d,b.tx,b.ty));c.newPath();c.rectangle(a.x,a.y,a.width,a.height);c.clip()},popMask:function(){this.renderSession.cairo.restore()},
popObject:function(a,b){null==b&&(b=!0);null!=a.__mask&&this.popMask();b&&null!=a.get_scrollRect()&&this.popRect()},popRect:function(){this.renderSession.cairo.restore()},__class__:yg});var df=function(){};g["openfl._internal.renderer.cairo.CairoRenderer"]=df;df.__name__=["openfl","_internal","renderer","cairo","CairoRenderer"];df.__super__=zb;df.prototype=n(zb.prototype,{render:function(a){this.cairo.identityMatrix();a.__clearBeforeRender&&(this.cairo.setSourceRGB(a.__colorSplit[0],a.__colorSplit[1],
a.__colorSplit[2]),this.cairo.paint());a.__renderCairo(this.renderSession)},__class__:df});var Hg=function(){};g["openfl._internal.renderer.cairo.CairoShape"]=Hg;Hg.__name__=["openfl","_internal","renderer","cairo","CairoShape"];Hg.render=function(a,b){};var bh=function(){};g["openfl._internal.renderer.canvas.CanvasBitmap"]=bh;bh.__name__=["openfl","_internal","renderer","canvas","CanvasBitmap"];bh.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=b.context;if(null!=a.bitmapData&&
a.bitmapData.__isValid){b.maskManager.pushObject(a,!1);xa.convertToCanvas(a.bitmapData.image);c.globalAlpha=a.__worldAlpha;var d=a.__worldTransform,e=a.get_scrollRect();b.roundPixels?c.setTransform(d.a,d.b,d.c,d.d,d.tx|0,d.ty|0):c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty);a.smoothing||(c.mozImageSmoothingEnabled=!1,c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1);null==e?c.drawImage(a.bitmapData.image.get_src(),0,0):c.drawImage(a.bitmapData.image.get_src(),e.x,e.y,e.width,e.height,e.x,e.y,e.width,
e.height);a.smoothing||(c.mozImageSmoothingEnabled=!0,c.msImageSmoothingEnabled=!0,c.imageSmoothingEnabled=!0);b.maskManager.popObject(a,!1)}}};var k=function(){};g["openfl._internal.renderer.canvas.CanvasGraphics"]=k;k.__name__=["openfl","_internal","renderer","canvas","CanvasGraphics"];k.bitmapFill=null;k.bitmapRepeat=null;k.bounds=null;k.graphics=null;k.hasFill=null;k.hasStroke=null;k.hitTesting=null;k.inversePendingMatrix=null;k.pendingMatrix=null;k.context=null;k.closePath=function(a){null==
a&&(a=!1);null!=k.context.strokeStyle&&(a||k.context.closePath(),k.context.stroke(),a&&k.context.closePath(),k.context.beginPath())};k.createBitmapFill=function(a,b){xa.convertToCanvas(a.image);return k.context.createPattern(a.image.get_src(),b?"repeat":"no-repeat")};k.createGradientPattern=function(a,b,c,d,e,f,g,h){f=null;switch(a){case 1:null==e&&(e=new Ha);f=e.transformPoint(new Ab(1638.4,0));f=k.context.createRadialGradient(e.tx,e.ty,0,e.tx,e.ty,(f.x-e.tx)/2);break;case 0:e=null!=e?e:new Ha,f=
e.transformPoint(new Ab(-819.2,0)),e=e.transformPoint(new Ab(819.2,0)),f=k.context.createLinearGradient(f.x,f.y,e.x,e.y)}e=0;for(a=b.length;e<a;){var l=e++,m=b[l];g=c[l];h=(m&16711680)>>>16;var n=(m&65280)>>>8,m=m&255,l=d[l]/255;0>l&&(l=0);1<l&&(l=1);f.addColorStop(l,"rgba("+h+", "+n+", "+m+", "+g+")")}return f};k.createTempPatternCanvas=function(a,b,c,d){var e=window.document.createElement("canvas"),f=e.getContext("2d");e.width=c;e.height=d;f.fillStyle=f.createPattern(a.image.get_src(),b?"repeat":
"no-repeat");f.beginPath();f.moveTo(0,0);f.lineTo(0,d);f.lineTo(c,d);f.lineTo(c,0);f.lineTo(0,0);f.closePath();k.hitTesting||f.fill();return e};k.drawRoundRect=function(a,b,c,d,e,f){null==f&&(f=e);e*=.5;f*=.5;e>c/2&&(e=c/2);f>d/2&&(f=d/2);c=a+c;d=b+d;var g=-e+e*k.SIN45,h=-e+e*k.TAN22,l=-f+f*k.SIN45,m=-f+f*k.TAN22;k.context.moveTo(c,d-f);k.context.quadraticCurveTo(c,d+m,c+g,d+l);k.context.quadraticCurveTo(c+h,d,c-e,d);k.context.lineTo(a+e,d);k.context.quadraticCurveTo(a-h,d,a-g,d+l);k.context.quadraticCurveTo(a,
d+m,a,d-f);k.context.lineTo(a,b+f);k.context.quadraticCurveTo(a,b-m,a-g,b-l);k.context.quadraticCurveTo(a-h,b,a+e,b);k.context.lineTo(c-e,b);k.context.quadraticCurveTo(c+h,b,c+g,b-l);k.context.quadraticCurveTo(c,b-m,c,b+f);k.context.lineTo(c,d-f)};k.endFill=function(){k.context.beginPath();k.playCommands(k.fillCommands,!1);k.fillCommands.clear()};k.endStroke=function(){k.context.beginPath();k.playCommands(k.strokeCommands,!0);k.context.closePath();k.strokeCommands.clear()};k.hitTest=function(a,b,
c){k.bounds=a.__bounds;k.graphics=a;if(!(0==a.__commands.get_length()||null==k.bounds||0>=k.bounds.width||0>=k.bounds.height)){k.hitTesting=!0;b-=k.bounds.x;c-=k.bounds.y;null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"));k.context=a.__context;k.fillCommands.clear();k.strokeCommands.clear();k.hasFill=!1;k.hasStroke=!1;k.bitmapFill=null;k.bitmapRepeat=!1;k.context.beginPath();var d=new Bc(a.__commands),e=0;for(a=a.__commands.types;e<a.length;){var f=
a[e];++e;switch(f[1]){case 3:f=d.readCubicCurveTo();k.fillCommands.cubicCurveTo(I.get_controlX1(f),I.get_controlY1(f),I.get_controlX2(f),I.get_controlY2(f),I.get_anchorX(f),I.get_anchorY(f));k.strokeCommands.cubicCurveTo(I.get_controlX1(f),I.get_controlY1(f),I.get_controlX2(f),I.get_controlY2(f),I.get_anchorX(f),I.get_anchorY(f));break;case 4:f=d.readCurveTo();k.fillCommands.curveTo(da.get_controlX(f),da.get_controlY(f),da.get_anchorX(f),da.get_anchorY(f));k.strokeCommands.curveTo(da.get_controlX(f),
da.get_controlY(f),da.get_anchorX(f),da.get_anchorY(f));break;case 15:f=d.readLineTo();k.fillCommands.lineTo(Fa.get_x(f),Fa.get_y(f));k.strokeCommands.lineTo(Fa.get_x(f),Fa.get_y(f));break;case 16:f=d.readMoveTo();k.fillCommands.moveTo(Ca.get_x(f),Ca.get_y(f));k.strokeCommands.moveTo(Ca.get_x(f),Ca.get_y(f));break;case 13:f=d.readLineGradientStyle();k.strokeCommands.lineGradientStyle(ea.get_type(f),ea.get_colors(f),ea.get_alphas(f),ea.get_ratios(f),ea.get_matrix(f),ea.get_spreadMethod(f),ea.get_interpolationMethod(f),
ea.get_focalPointRatio(f));break;case 12:f=d.readLineBitmapStyle();k.strokeCommands.lineBitmapStyle(Ya.get_bitmap(f),Ya.get_matrix(f),Ya.get_repeat(f),Ya.get_smooth(f));break;case 14:f=d.readLineStyle();k.strokeCommands.lineStyle(S.get_thickness(f),S.get_color(f),1,S.get_pixelHinting(f),S.get_scaleMode(f),S.get_caps(f),S.get_joints(f),S.get_miterLimit(f));break;case 11:d.readEndFill();k.endFill();k.endStroke();if(k.hasFill&&k.context.isPointInPath(b,c)||k.hasStroke&&k.context.isPointInStroke(b,c))return d.destroy(),
!0;k.hasFill=!1;k.bitmapFill=null;break;case 0:case 1:case 2:k.endFill();k.endStroke();if(k.hasFill&&k.context.isPointInPath(b,c)||k.hasStroke&&k.context.isPointInStroke(b,c))return d.destroy(),!0;f==t.BEGIN_BITMAP_FILL?(f=d.readBeginBitmapFill(),k.fillCommands.beginBitmapFill(Aa.get_bitmap(f),Aa.get_matrix(f),Aa.get_repeat(f),Aa.get_smooth(f)),k.strokeCommands.beginBitmapFill(Aa.get_bitmap(f),Aa.get_matrix(f),Aa.get_repeat(f),Aa.get_smooth(f))):f==t.BEGIN_GRADIENT_FILL?(f=d.readBeginGradientFill(),
k.fillCommands.beginGradientFill(K.get_type(f),K.get_colors(f),K.get_alphas(f),K.get_ratios(f),K.get_matrix(f),K.get_spreadMethod(f),K.get_interpolationMethod(f),K.get_focalPointRatio(f)),k.strokeCommands.beginGradientFill(K.get_type(f),K.get_colors(f),K.get_alphas(f),K.get_ratios(f),K.get_matrix(f),K.get_spreadMethod(f),K.get_interpolationMethod(f),K.get_focalPointRatio(f))):(f=d.readBeginFill(),k.fillCommands.beginFill(ab.get_color(f),1),k.strokeCommands.beginFill(ab.get_color(f),1));break;case 5:f=
d.readDrawCircle();k.fillCommands.drawCircle(ta.get_x(f),ta.get_y(f),ta.get_radius(f));k.strokeCommands.drawCircle(ta.get_x(f),ta.get_y(f),ta.get_radius(f));break;case 6:f=d.readDrawEllipse();k.fillCommands.drawEllipse(pa.get_x(f),pa.get_y(f),pa.get_width(f),pa.get_height(f));k.strokeCommands.drawEllipse(pa.get_x(f),pa.get_y(f),pa.get_width(f),pa.get_height(f));break;case 7:f=d.readDrawRect();k.fillCommands.drawRect(O.get_x(f),O.get_y(f),O.get_width(f),O.get_height(f));k.strokeCommands.drawRect(O.get_x(f),
O.get_y(f),O.get_width(f),O.get_height(f));break;case 8:f=d.readDrawRoundRect();k.fillCommands.drawRoundRect(L.get_x(f),L.get_y(f),L.get_width(f),L.get_height(f),L.get_ellipseWidth(f),L.get_ellipseHeight(f));k.strokeCommands.drawRoundRect(L.get_x(f),L.get_y(f),L.get_width(f),L.get_height(f),L.get_ellipseWidth(f),L.get_ellipseHeight(f));break;default:d.skip(f)}}0<k.fillCommands.get_length()&&k.endFill();0<k.strokeCommands.get_length()&&k.endStroke();d.destroy();if(k.hasFill&&k.context.isPointInPath(b,
c)||k.hasStroke&&k.context.isPointInStroke(b,c))return!0}return!1};k.normalizeUVT=function(a,b){null==b&&(b=!1);for(var c=-Infinity,d=-Infinity,e=a.length,f=1,g=e+1;f<g;)d=f++,b&&0==d%3||(d=a.data[d-1],c<d&&(c=d));f=new Dd;f.data=[];f.length=0;f.fixed=!1;g=1;for(e+=1;g<e;)if(d=g++,!b||0!=d%3){if(!f.fixed){f.length++;if(f.data.length<f.length){var h;h=Array(f.data.length+10);pd.blit(f.data,0,h,0,f.data.length);f.data=h}f.data[f.length-1]=a.data[d-1]/c}f.length}return{max:c,uvt:f}};k.playCommands=function(a,
b){null==b&&(b=!1);k.bounds=k.graphics.__bounds;for(var c=k.bounds.x,d=k.bounds.y,e=0,f=0,g=!1,h=0,l=0,m=new Bc(a),n=0,t=a.types;n<t.length;){var p=t[n];++n;switch(p[1]){case 3:p=m.readCubicCurveTo();k.context.bezierCurveTo(I.get_controlX1(p)-c,I.get_controlY1(p)-d,I.get_controlX2(p)-c,I.get_controlY2(p)-d,I.get_anchorX(p)-c,I.get_anchorY(p)-d);break;case 4:p=m.readCurveTo();k.context.quadraticCurveTo(da.get_controlX(p)-c,da.get_controlY(p)-d,da.get_anchorX(p)-c,da.get_anchorY(p)-d);break;case 5:p=
m.readDrawCircle();k.context.moveTo(ta.get_x(p)-c+ta.get_radius(p),ta.get_y(p)-d);k.context.arc(ta.get_x(p)-c,ta.get_y(p)-d,ta.get_radius(p),0,2*Math.PI,!0);break;case 6:var r=m.readDrawEllipse(),p=pa.get_x(r),q=pa.get_y(r),u=pa.get_width(r),v=pa.get_height(r),p=p-c,q=q-d,r=u/2*.5522848,w=v/2*.5522848,y=p+u,z=q+v,u=p+u/2,v=q+v/2;k.context.moveTo(p,v);k.context.bezierCurveTo(p,v-w,u-r,q,u,q);k.context.bezierCurveTo(u+r,q,y,v-w,y,v);k.context.bezierCurveTo(y,v+w,u+r,z,u,z);k.context.bezierCurveTo(u-
r,z,p,v+w,p,v);break;case 8:p=m.readDrawRoundRect();k.drawRoundRect(L.get_x(p)-c,L.get_y(p)-d,L.get_width(p),L.get_height(p),L.get_ellipseWidth(p),L.get_ellipseHeight(p));break;case 15:f=m.readLineTo();k.context.lineTo(Fa.get_x(f)-c,Fa.get_y(f)-d);e=Fa.get_x(f);f=Fa.get_y(f);break;case 16:l=m.readMoveTo();k.context.moveTo(Ca.get_x(l)-c,Ca.get_y(l)-d);e=Ca.get_x(l);f=Ca.get_y(l);g=!0;h=Ca.get_x(l);l=Ca.get_y(l);break;case 14:p=m.readLineStyle();b&&k.hasStroke&&k.closePath(null==S.get_thickness(p));
k.context.moveTo(e-c,f-d);if(null==S.get_thickness(p))k.hasStroke=!1;else{0<S.get_thickness(p)?k.context.lineWidth=S.get_thickness(p):k.context.lineWidth=1;null==S.get_joints(p)?k.context.lineJoin="round":k.context.lineJoin=ch.toString(S.get_joints(p)).toLowerCase();if(null==S.get_caps(p))k.context.lineCap="round";else switch(S.get_caps(p)){case 0:k.context.lineCap="butt";break;default:k.context.lineCap=dh.toString(S.get_caps(p)).toLowerCase()}k.context.miterLimit=S.get_miterLimit(p);1==S.get_alpha(p)?
k.context.strokeStyle="#"+P.hex(S.get_color(p)&16777215,6):(q=(S.get_color(p)&16711680)>>>16,r=(S.get_color(p)&65280)>>>8,w=S.get_color(p)&255,k.context.strokeStyle="rgba("+q+", "+r+", "+w+", "+S.get_alpha(p)+")");k.hasStroke=!0}break;case 13:p=m.readLineGradientStyle();b&&k.hasStroke&&k.closePath();k.context.moveTo(e-c,f-d);k.context.strokeStyle=k.createGradientPattern(ea.get_type(p),ea.get_colors(p),ea.get_alphas(p),ea.get_ratios(p),ea.get_matrix(p),ea.get_spreadMethod(p),ea.get_interpolationMethod(p),
ea.get_focalPointRatio(p));k.hasStroke=!0;break;case 12:p=m.readLineBitmapStyle();b&&k.hasStroke&&k.closePath();k.context.moveTo(e-c,f-d);k.context.strokeStyle=k.createBitmapFill(Ya.get_bitmap(p),Ya.get_repeat(p));k.hasStroke=!0;break;case 0:p=m.readBeginBitmapFill();k.context.fillStyle=k.createBitmapFill(Aa.get_bitmap(p),!0);k.hasFill=!0;null!=Aa.get_matrix(p)?(k.pendingMatrix=Aa.get_matrix(p),k.inversePendingMatrix=Aa.get_matrix(p).clone(),k.inversePendingMatrix.invert()):(k.pendingMatrix=null,
k.inversePendingMatrix=null);break;case 1:p=m.readBeginFill();.005>ab.get_alpha(p)?k.hasFill=!1:(1==ab.get_alpha(p)?k.context.fillStyle="#"+P.hex(ab.get_color(p),6):(q=(ab.get_color(p)&16711680)>>>16,r=(ab.get_color(p)&65280)>>>8,w=ab.get_color(p)&255,k.context.fillStyle="rgba("+q+", "+r+", "+w+", "+ab.get_alpha(p)+")"),k.bitmapFill=null,k.hasFill=!0);break;case 2:p=m.readBeginGradientFill();k.context.fillStyle=k.createGradientPattern(K.get_type(p),K.get_colors(p),K.get_alphas(p),K.get_ratios(p),
K.get_matrix(p),K.get_spreadMethod(p),K.get_interpolationMethod(p),K.get_focalPointRatio(p));k.bitmapFill=null;k.hasFill=!0;break;case 7:p=m.readDrawRect();q=!1;null!=k.bitmapFill&&(z=y=u=r=0,w=!0,null!=k.pendingMatrix?0!=k.pendingMatrix.b||0!=k.pendingMatrix.c?w=!1:(y=k.inversePendingMatrix.transformPoint(new Ab(O.get_x(p),O.get_y(p))),u=k.inversePendingMatrix.transformPoint(new Ab(O.get_x(p)+O.get_width(p),O.get_y(p)+O.get_height(p))),r=y.y,z=y.x,y=u.y,u=u.x):(r=O.get_y(p),z=O.get_x(p),y=O.get_y(p)+
O.get_height(p),u=O.get_x(p)+O.get_width(p)),w&&0<=r&&0<=z&&u<=k.bitmapFill.width&&y<=k.bitmapFill.height&&(q=!0,k.hitTesting||k.context.drawImage(k.bitmapFill.image.get_src(),z,r,u-z,y-r,O.get_x(p)-c,O.get_y(p)-d,O.get_width(p),O.get_height(p))));q||k.context.rect(O.get_x(p)-c,O.get_y(p)-d,O.get_width(p),O.get_height(p));break;default:m.skip(p)}}m.destroy();b&&k.hasStroke&&(k.hasFill&&g?k.context.lineTo(h-c,l-d):g&&e==h&&f==l&&k.closePath(!0),k.hitTesting||k.context.stroke());b||!k.hasFill&&null==
k.bitmapFill||(k.context.translate(-k.bounds.x,-k.bounds.y),null!=k.pendingMatrix?(k.context.transform(k.pendingMatrix.a,k.pendingMatrix.b,k.pendingMatrix.c,k.pendingMatrix.d,k.pendingMatrix.tx,k.pendingMatrix.ty),k.hitTesting||k.context.fill(),k.context.transform(k.inversePendingMatrix.a,k.inversePendingMatrix.b,k.inversePendingMatrix.c,k.inversePendingMatrix.d,k.inversePendingMatrix.tx,k.inversePendingMatrix.ty)):k.hitTesting||k.context.fill(),k.context.translate(k.bounds.x,k.bounds.y),k.context.closePath())};
k.render=function(a,b,c){a.__update();if(a.__dirty){k.hitTesting=!1;k.graphics=a;k.bounds=a.__bounds;b=a.__width;c=a.__height;if(!a.__visible||0==a.__commands.get_length()||null==k.bounds||1>b||1>c)a.__canvas=null,a.__context=null,a.__bitmap=null;else{null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"));k.context=a.__context;a.__canvas.width=b;a.__canvas.height=c;b=a.__renderTransform;k.context.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty);k.fillCommands.clear();
k.strokeCommands.clear();k.hasFill=!1;k.hasStroke=!1;k.bitmapFill=null;k.bitmapRepeat=!1;b=new Bc(a.__commands);c=0;var d=a.__commands.types;try{for(;c<d.length;){var e=d[c];++c;switch(e[1]){case 3:var f=b.readCubicCurveTo();k.fillCommands.cubicCurveTo(I.get_controlX1(f),I.get_controlY1(f),I.get_controlX2(f),I.get_controlY2(f),I.get_anchorX(f),I.get_anchorY(f));k.strokeCommands.cubicCurveTo(I.get_controlX1(f),I.get_controlY1(f),I.get_controlX2(f),I.get_controlY2(f),I.get_anchorX(f),I.get_anchorY(f));
break;case 4:var g=b.readCurveTo();k.fillCommands.curveTo(da.get_controlX(g),da.get_controlY(g),da.get_anchorX(g),da.get_anchorY(g));k.strokeCommands.curveTo(da.get_controlX(g),da.get_controlY(g),da.get_anchorX(g),da.get_anchorY(g));break;case 15:var h=b.readLineTo();k.fillCommands.lineTo(Fa.get_x(h),Fa.get_y(h));k.strokeCommands.lineTo(Fa.get_x(h),Fa.get_y(h));break;case 16:var l=b.readMoveTo();k.fillCommands.moveTo(Ca.get_x(l),Ca.get_y(l));k.strokeCommands.moveTo(Ca.get_x(l),Ca.get_y(l));break;
case 11:b.readEndFill();k.endFill();k.endStroke();k.hasFill=!1;k.bitmapFill=null;break;case 14:var m=b.readLineStyle();k.strokeCommands.lineStyle(S.get_thickness(m),S.get_color(m),S.get_alpha(m),S.get_pixelHinting(m),S.get_scaleMode(m),S.get_caps(m),S.get_joints(m),S.get_miterLimit(m));break;case 13:var n=b.readLineGradientStyle();k.strokeCommands.lineGradientStyle(ea.get_type(n),ea.get_colors(n),ea.get_alphas(n),ea.get_ratios(n),ea.get_matrix(n),ea.get_spreadMethod(n),ea.get_interpolationMethod(n),
ea.get_focalPointRatio(n));break;case 12:var r=b.readLineBitmapStyle();k.strokeCommands.lineBitmapStyle(Ya.get_bitmap(r),Ya.get_matrix(r),Ya.get_repeat(r),Ya.get_smooth(r));break;case 0:case 1:case 2:k.endFill();k.endStroke();if(e==t.BEGIN_BITMAP_FILL){var p=b.readBeginBitmapFill();k.fillCommands.beginBitmapFill(Aa.get_bitmap(p),Aa.get_matrix(p),Aa.get_repeat(p),Aa.get_smooth(p));k.strokeCommands.beginBitmapFill(Aa.get_bitmap(p),Aa.get_matrix(p),Aa.get_repeat(p),Aa.get_smooth(p))}else if(e==t.BEGIN_GRADIENT_FILL){var q=
b.readBeginGradientFill();k.fillCommands.beginGradientFill(K.get_type(q),K.get_colors(q),K.get_alphas(q),K.get_ratios(q),K.get_matrix(q),K.get_spreadMethod(q),K.get_interpolationMethod(q),K.get_focalPointRatio(q));k.strokeCommands.beginGradientFill(K.get_type(q),K.get_colors(q),K.get_alphas(q),K.get_ratios(q),K.get_matrix(q),K.get_spreadMethod(q),K.get_interpolationMethod(q),K.get_focalPointRatio(q))}else{var u=b.readBeginFill();k.fillCommands.beginFill(ab.get_color(u),ab.get_alpha(u));k.strokeCommands.beginFill(ab.get_color(u),
ab.get_alpha(u))}break;case 5:var v=b.readDrawCircle();k.fillCommands.drawCircle(ta.get_x(v),ta.get_y(v),ta.get_radius(v));k.strokeCommands.drawCircle(ta.get_x(v),ta.get_y(v),ta.get_radius(v));break;case 6:var w=b.readDrawEllipse();k.fillCommands.drawEllipse(pa.get_x(w),pa.get_y(w),pa.get_width(w),pa.get_height(w));k.strokeCommands.drawEllipse(pa.get_x(w),pa.get_y(w),pa.get_width(w),pa.get_height(w));break;case 7:var y=b.readDrawRect();k.fillCommands.drawRect(O.get_x(y),O.get_y(y),O.get_width(y),
O.get_height(y));k.strokeCommands.drawRect(O.get_x(y),O.get_y(y),O.get_width(y),O.get_height(y));break;case 8:var z=b.readDrawRoundRect();k.fillCommands.drawRoundRect(L.get_x(z),L.get_y(z),L.get_width(z),L.get_height(z),L.get_ellipseWidth(z),L.get_ellipseHeight(z));k.strokeCommands.drawRoundRect(L.get_x(z),L.get_y(z),L.get_width(z),L.get_height(z),L.get_ellipseWidth(z),L.get_ellipseHeight(z));break;case 10:k.endFill();k.endStroke();var B=b.readDrawTriangles(),C=tb.get_vertices(B),D=tb.get_indices(B),
A=tb.get_uvtData(B),F=null,H=null==k.bitmapFill;if(H&&null!=A)throw"__break__";if(!H){if(null==A){var G;G=new Dd;G.data=[];G.length=0;G.fixed=!1;for(var A=G,E=0,J=C.length/2|0;E<J;){var M=E++;if(!A.fixed){A.length++;if(A.data.length<A.length){var N;N=Array(A.data.length+10);pd.blit(A.data,0,N,0,A.data.length);A.data=N}A.data[A.length-1]=C.data[2*M]/k.bitmapFill.width}A.length;if(!A.fixed){A.length++;if(A.data.length<A.length){var P;P=Array(A.data.length+10);pd.blit(A.data,0,P,0,A.data.length);A.data=
P}A.data[A.length-1]=C.data[2*M+1]/k.bitmapFill.height}A.length}}var Q=k.normalizeUVT(A,A.length!=C.length),T=Q.max,A=Q.uvt,F=1<T?k.createTempPatternCanvas(k.bitmapFill,k.bitmapRepeat,k.bounds.width|0,k.bounds.height|0):k.createTempPatternCanvas(k.bitmapFill,k.bitmapRepeat,k.bitmapFill.width,k.bitmapFill.height)}for(var E=0,U=D.length,R,X,aa,fa,ka,la,ma,na,oa,V,Y,W,Z,ba,ca,qa,ra,ga,ha,ia,ja,sa,ua,va,wa,xa,ya,za;E<U;){R=E;X=E+1;aa=E+2;fa=2*D.data[R];ka=2*D.data[R]+1;la=2*D.data[X];ma=2*D.data[X]+1;
na=2*D.data[aa];oa=2*D.data[aa]+1;V=C.data[fa];Y=C.data[ka];W=C.data[la];Z=C.data[ma];ba=C.data[na];ca=C.data[oa];switch(tb.get_culling(B)){case 2:if(!(0>(W-V)*(ca-Y)-(Z-Y)*(ba-V))){E+=3;continue}break;case 0:if(0>(W-V)*(ca-Y)-(Z-Y)*(ba-V)){E+=3;continue}}H?(k.context.beginPath(),k.context.moveTo(V,Y),k.context.lineTo(W,Z),k.context.lineTo(ba,ca),k.context.closePath(),k.hitTesting||k.context.fill()):(k.context.save(),k.context.beginPath(),k.context.moveTo(V,Y),k.context.lineTo(W,Z),k.context.lineTo(ba,
ca),k.context.closePath(),k.context.clip(),qa=A.data[fa]*F.width,ga=A.data[la]*F.width,ia=A.data[na]*F.width,ra=A.data[ka]*F.height,ha=A.data[ma]*F.height,ja=A.data[oa]*F.height,sa=qa*(ja-ha)-ga*ja+ia*ha+(ga-ia)*ra,0!=sa&&(ua=-(ra*(ba-W)-ha*ba+ja*W+(ha-ja)*V)/sa,va=(ha*ca+ra*(Z-ca)-ja*Z+(ja-ha)*Y)/sa,wa=(qa*(ba-W)-ga*ba+ia*W+(ga-ia)*V)/sa,xa=-(ga*ca+qa*(Z-ca)-ia*Z+(ia-ga)*Y)/sa,ya=(qa*(ja*W-ha*ba)+ra*(ga*ba-ia*W)+(ia*ha-ga*ja)*V)/sa,za=(qa*(ja*Z-ha*ca)+ra*(ga*ca-ia*Z)+(ia*ha-ga*ja)*Y)/sa,k.context.transform(ua,
va,wa,xa,ya,za),k.context.drawImage(F,0,0),k.context.restore()));E+=3}break;default:b.skip(e)}}}catch(Ba){if("__break__"!=Ba)throw Ba;}0<k.fillCommands.get_length()&&k.endFill();0<k.strokeCommands.get_length()&&k.endStroke();b.destroy();a.__bitmap=sb.fromCanvas(a.__canvas)}a.set___dirty(!1)}};k.renderMask=function(a,b){if(0!=a.__commands.get_length()){k.context=b.context;for(var c=new Bc(a.__commands),d=0,e=a.__commands.types;d<e.length;){var f=e[d];++d;switch(f[1]){case 3:f=c.readCubicCurveTo();
k.context.bezierCurveTo(I.get_controlX1(f)-0,I.get_controlY1(f)-0,I.get_controlX2(f)-0,I.get_controlY2(f)-0,I.get_anchorX(f)-0,I.get_anchorY(f)-0);I.get_anchorX(f);I.get_anchorY(f);break;case 4:f=c.readCurveTo();k.context.quadraticCurveTo(da.get_controlX(f)-0,da.get_controlY(f)-0,da.get_anchorX(f)-0,da.get_anchorY(f)-0);da.get_anchorX(f);da.get_anchorY(f);break;case 5:f=c.readDrawCircle();k.context.arc(ta.get_x(f)-0,ta.get_y(f)-0,ta.get_radius(f),0,2*Math.PI,!0);break;case 6:var g=c.readDrawEllipse(),
f=pa.get_x(g),h=pa.get_y(g),l=pa.get_width(g),m=pa.get_height(g),f=f-0,h=h-0,g=l/2*.5522848,n=m/2*.5522848,q=f+l,p=h+m,l=f+l/2,m=h+m/2;k.context.moveTo(f,m);k.context.bezierCurveTo(f,m-n,l-g,h,l,h);k.context.bezierCurveTo(l+g,h,q,m-n,q,m);k.context.bezierCurveTo(q,m+n,l+g,p,l,p);k.context.bezierCurveTo(l-g,p,f,m+n,f,m);break;case 7:f=c.readDrawRect();k.context.rect(O.get_x(f)-0,O.get_y(f)-0,O.get_width(f),O.get_height(f));break;case 8:f=c.readDrawRoundRect();k.drawRoundRect(L.get_x(f)-0,L.get_y(f)-
0,L.get_width(f),L.get_height(f),L.get_ellipseWidth(f),L.get_ellipseHeight(f));break;case 15:f=c.readLineTo();k.context.lineTo(Fa.get_x(f)-0,Fa.get_y(f)-0);Fa.get_x(f);Fa.get_y(f);break;case 16:f=c.readMoveTo();k.context.moveTo(Ca.get_x(f)-0,Ca.get_y(f)-0);Ca.get_x(f);Ca.get_y(f);break;default:c.skip(f)}}c.destroy()}};var ef=function(a){this.renderSession=a};g["openfl._internal.renderer.canvas.CanvasMaskManager"]=ef;ef.__name__=["openfl","_internal","renderer","canvas","CanvasMaskManager"];ef.__super__=
cc;ef.prototype=n(cc.prototype,{pushMask:function(a){var b=this.renderSession.context;b.save();var c=a.__getRenderTransform();b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);b.beginPath();a.__renderCanvasMask(this.renderSession);b.clip()},pushObject:function(a,b){null==b&&(b=!0);b&&null!=a.get_scrollRect()&&this.pushRect(a.get_scrollRect(),a.__renderTransform);null!=a.__mask&&this.pushMask(a.__mask)},pushRect:function(a,b){var c=this.renderSession.context;c.save();c.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty);
c.beginPath();c.rect(a.x,a.y,a.width,a.height);c.clip()},popMask:function(){this.renderSession.context.restore()},popObject:function(a,b){null==b&&(b=!0);null!=a.__mask&&this.popMask();b&&null!=a.get_scrollRect()&&this.popRect()},popRect:function(){this.renderSession.context.restore()},__class__:ef});var ff=function(a,b,c){zb.call(this,a,b);this.context=c;this.renderSession=new Gd;this.renderSession.context=c;this.renderSession.roundPixels=!0;this.renderSession.renderer=this;this.renderSession.maskManager=
new ef(this.renderSession)};g["openfl._internal.renderer.canvas.CanvasRenderer"]=ff;ff.__name__=["openfl","_internal","renderer","canvas","CanvasRenderer"];ff.__super__=zb;ff.prototype=n(zb.prototype,{render:function(a){this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;!a.__transparent&&a.__clearBeforeRender?(this.context.fillStyle=a.__colorString,this.context.fillRect(0,0,a.stageWidth,a.stageHeight)):a.__transparent&&a.__clearBeforeRender&&this.context.clearRect(0,0,a.stageWidth,
a.stageHeight);a.__renderCanvas(this.renderSession)},__class__:ff});var Ig=function(){};g["openfl._internal.renderer.canvas.CanvasShape"]=Ig;Ig.__name__=["openfl","_internal","renderer","canvas","CanvasShape"];Ig.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=a.__graphics;if(null!=c){k.render(c,b,a.__worldTransform);var d=c.__width,e=c.__height;if(null!=c.__canvas){var f=b.context,g=a.get_scrollRect();0<d&&0<e&&(null==g||0<g.width&&0<g.height)&&(b.maskManager.pushObject(a),f.globalAlpha=
a.__worldAlpha,d=c.__worldTransform,b.roundPixels?f.setTransform(d.a,d.b,d.c,d.d,d.tx|0,d.ty|0):f.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),f.drawImage(c.__canvas,c.__bounds.x,c.__bounds.y),b.maskManager.popObject(a))}}}};var gf=function(){};g["openfl._internal.renderer.dom.DOMBitmap"]=gf;gf.__name__=["openfl","_internal","renderer","dom","DOMBitmap"];gf.renderCanvas=function(a,b){null!=a.__image&&(b.element.removeChild(a.__image),a.__image=null);null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),
a.__context=a.__canvas.getContext("2d"),a.smoothing||(a.__context.mozImageSmoothingEnabled=!1,a.__context.msImageSmoothingEnabled=!1,a.__context.imageSmoothingEnabled=!1),Gb.initializeElement(a,a.__canvas,b));xa.convertToCanvas(a.bitmapData.image);a.__canvas.width=a.bitmapData.width;a.__canvas.height=a.bitmapData.height;a.__context.globalAlpha=a.__worldAlpha;a.__context.drawImage(a.bitmapData.image.buffer.__srcCanvas,0,0);Gb.applyStyle(a,b,!0,!1,!0)};gf.renderImage=function(a,b){null!=a.__canvas&&
(b.element.removeChild(a.__canvas),a.__canvas=null);null==a.__image&&(a.__image=window.document.createElement("img"),a.__image.src=a.bitmapData.image.buffer.__srcImage.src,Gb.initializeElement(a,a.__image,b));Gb.applyStyle(a,b,!0,!0,!0)};var hf=function(a){this.renderSession=a};g["openfl._internal.renderer.dom.DOMMaskManager"]=hf;hf.__name__=["openfl","_internal","renderer","dom","DOMMaskManager"];hf.__super__=cc;hf.prototype=n(cc.prototype,{pushMask:function(a){},pushObject:function(a,b){null!=a.__mask&&
this.renderSession.maskManager.pushMask(a.__mask)},pushRect:function(a,b){},popMask:function(){},popObject:function(a,b){null!=a.__mask&&this.renderSession.maskManager.popMask()},__class__:hf});var Gb=function(a,b,c){zb.call(this,a,b);this.element=c;this.renderSession=new Gd;this.renderSession.element=c;this.renderSession.roundPixels=!0;a=window.getComputedStyle(document.documentElement,"");a=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];"WebKit|Moz|MS|O".match(new RegExp("("+
a+")","i"));a[0].toUpperCase();a.substr(1);this.renderSession.vendorPrefix=a;this.renderSession.transformProperty="webkit"==a?"-webkit-transform":"transform";this.renderSession.transformOriginProperty="webkit"==a?"-webkit-transform-origin":"transform-origin";this.renderSession.maskManager=new hf(this.renderSession);this.renderSession.renderer=this};g["openfl._internal.renderer.dom.DOMRenderer"]=Gb;Gb.__name__=["openfl","_internal","renderer","dom","DOMRenderer"];Gb.applyStyle=function(a,b,c,d,e){var f=
a.__style;c&&a.__worldTransformChanged&&f.setProperty(b.transformProperty,a.__worldTransform.to3DString(b.roundPixels),null);a.__worldZ!=++b.z&&(a.__worldZ=b.z,f.setProperty("z-index",null==a.__worldZ?"null":""+a.__worldZ,null));d&&a.__worldAlphaChanged&&(1>a.__worldAlpha?f.setProperty("opacity",null==a.__worldAlpha?"null":""+a.__worldAlpha,null):f.removeProperty("opacity"));e&&a.__worldClipChanged&&(null==a.__worldClip?f.removeProperty("clip"):(b=Ka.__temp,c=Ha.__temp,c.copyFrom(a.__worldTransform),
c.invert(),a.__worldClip.__transform(b,c),f.setProperty("clip","rect("+b.y+"px, "+b.get_right()+"px, "+b.get_bottom()+"px, "+b.x+"px)",null)))};Gb.initializeElement=function(a,b,c){var d=a.__style=b.style;d.setProperty("position","absolute",null);d.setProperty("top","0",null);d.setProperty("left","0",null);d.setProperty(c.transformOriginProperty,"0 0 0",null);c.element.appendChild(b);a.__worldAlphaChanged=!0;a.__worldClipChanged=!0;a.__worldTransformChanged=!0;a.__worldVisibleChanged=!0;a.__worldZ=
-1};Gb.__super__=zb;Gb.prototype=n(zb.prototype,{render:function(a){this.element.style.background=a.__transparent?"none":a.__colorString;this.renderSession.z=1;a.__renderDOM(this.renderSession)},__class__:Gb});var Jg=function(){};g["openfl._internal.renderer.dom.DOMShape"]=Jg;Jg.__name__=["openfl","_internal","renderer","dom","DOMShape"];Jg.render=function(a,b){var c=a.__graphics;if(null!=a.stage&&a.__worldVisible&&a.__renderable&&null!=c){if(c.__dirty||a.__worldAlphaChanged||null==a.__canvas&&null!=
c.__canvas){var d=Ha.__temp;d.identity();k.render(c,b,d);null!=c.__canvas?(null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"),Gb.initializeElement(a,a.__canvas,b)),a.__canvas.width=c.__canvas.width,a.__canvas.height=c.__canvas.height,a.__context.globalAlpha=a.__worldAlpha,a.__context.drawImage(c.__canvas,0,0)):null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null)}if(null!=a.__canvas){if(a.__worldTransformChanged||
c.__transformDirty)c.__transformDirty=!1,d=Ha.__temp,d.identity(),d.translate(c.__bounds.x,c.__bounds.y),d.concat(a.__worldTransform),a.__style.setProperty(b.transformProperty,b.roundPixels?"matrix3d("+d.a+", "+d.b+", 0, 0, "+d.c+", "+d.d+", 0, 0, 0, 0, 1, 0, "+(d.tx|0)+", "+(d.ty|0)+", 0, 1)":"matrix3d("+d.a+", "+d.b+", 0, 0, "+d.c+", "+d.d+", 0, 0, 0, 0, 1, 0, "+d.tx+", "+d.ty+", 0, 1)",null);Gb.applyStyle(a,b,!1,!1,!0)}}else null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null,
a.__style=null)};var eh=function(){};g["openfl._internal.renderer.opengl.GLBitmap"]=eh;eh.__name__=["openfl","_internal","renderer","opengl","GLBitmap"];eh.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=b.gl;if(null!=a.bitmapData&&a.bitmapData.__isValid){var d;d=null!=a.__filters&&D.__instanceof(a.__filters[0],Mc)?D.__cast(a.__filters[0],Mc).shader:b.shaderManager.defaultShader;b.blendModeManager.setBlendMode(a.get_blendMode());b.shaderManager.setShader(d);b.maskManager.pushObject(a);
var e=b.renderer;c.enableVertexAttribArray(d.data.aAlpha.index);c.uniformMatrix4fv(d.data.uMatrix.index,!1,e.getMatrix(a.__worldTransform));c.bindTexture(c.TEXTURE_2D,a.bitmapData.getTexture(c));a.smoothing||null!=a.stage&&(1!=a.stage.__displayMatrix.a||1!=a.stage.__displayMatrix.d)?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,
c.NEAREST));c.bindBuffer(c.ARRAY_BUFFER,a.bitmapData.getBuffer(c,a.__worldAlpha));c.vertexAttribPointer(d.data.aPosition.index,3,c.FLOAT,!1,24,0);c.vertexAttribPointer(d.data.aTexCoord.index,2,c.FLOAT,!1,24,12);c.vertexAttribPointer(d.data.aAlpha.index,1,c.FLOAT,!1,24,20);c.drawArrays(c.TRIANGLE_STRIP,0,4);b.maskManager.popObject(a)}}};var jf=function(a){this.gl=a;this.setBlendMode(10);a.enable(a.BLEND)};g["openfl._internal.renderer.opengl.GLBlendModeManager"]=jf;jf.__name__=["openfl","_internal",
"renderer","opengl","GLBlendModeManager"];jf.__super__=bf;jf.prototype=n(bf.prototype,{setBlendMode:function(a){if(this.currentBlendMode!=a)switch(this.currentBlendMode=a,a){case 0:this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.blendFunc(this.gl.ONE,this.gl.ONE);break;case 9:this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.blendFunc(this.gl.DST_COLOR,this.gl.ONE_MINUS_SRC_ALPHA);break;case 12:this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_COLOR);break;
case 14:this.gl.blendEquation(this.gl.FUNC_REVERSE_SUBTRACT);this.gl.blendFunc(this.gl.ONE,this.gl.ONE);break;default:this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}},__class__:jf});var kf=function(a){this.renderSession=a;this.gl=a.gl;this.clipRects=[];this.numClipRects=0};g["openfl._internal.renderer.opengl.GLMaskManager"]=kf;kf.__name__=["openfl","_internal","renderer","opengl","GLMaskManager"];kf.__super__=cc;kf.prototype=n(cc.prototype,
{pushMask:function(a){this.pushRect(a.getBounds(a),a.__getRenderTransform())},pushObject:function(a,b){null==b&&(b=!0);b&&null!=a.get_scrollRect()&&this.pushRect(a.get_scrollRect(),a.__renderTransform);null!=a.__mask&&this.pushMask(a.__mask)},pushRect:function(a,b){this.numClipRects==this.clipRects.length&&(this.clipRects[this.numClipRects]=new Ka);var c=this.clipRects[this.numClipRects];a.__transform(c,b);if(0<this.numClipRects){var d=this.clipRects[this.numClipRects-1];c.__contract(d.x,d.y,d.width,
d.height)}0>c.height&&(c.height=0);0>c.width&&(c.width=0);d=this.renderSession.renderer;this.gl.enable(this.gl.SCISSOR_TEST);this.gl.scissor(Math.floor(c.x),Math.floor(d.windowHeight-c.y-c.height),Math.ceil(c.width),Math.ceil(c.height));this.numClipRects++},popMask:function(){this.popRect()},popObject:function(a,b){null==b&&(b=!0);null!=a.__mask&&this.popMask();b&&null!=a.get_scrollRect()&&this.popRect()},popRect:function(){if(0<this.numClipRects){var a=this.clipRects[this.numClipRects-1],b=this.renderSession.renderer;
this.gl.enable(this.gl.SCISSOR_TEST);this.gl.scissor(Math.floor(a.x),Math.floor(b.windowHeight-a.y-a.height),Math.ceil(a.width),Math.ceil(a.height));this.numClipRects--}0==this.numClipRects&&this.gl.disable(this.gl.SCISSOR_TEST)},__class__:kf});var mf=function(a,b,c){zb.call(this,a,b);this.gl=c;this.matrix=na._new();this.renderSession=new Gd;this.renderSession.gl=c;this.renderSession.roundPixels=!0;this.renderSession.renderer=this;this.renderSession.blendModeManager=new jf(c);this.renderSession.shaderManager=
new lf(c);this.renderSession.maskManager=new kf(this.renderSession);this.projection=na.createOrtho(0,a,b,0,-1E3,1E3)};g["openfl._internal.renderer.opengl.GLRenderer"]=mf;mf.__name__=["openfl","_internal","renderer","opengl","GLRenderer"];mf.__super__=zb;mf.prototype=n(zb.prototype,{getMatrix:function(a){na.identity(this.matrix);na.set(this.matrix,0,a.a);na.set(this.matrix,1,a.b);na.set(this.matrix,4,a.c);na.set(this.matrix,5,a.d);na.set(this.matrix,12,a.tx);na.set(this.matrix,13,a.ty);na.append(this.matrix,
this.projection);return this.matrix},init:function(a){a.__transparent?this.gl.clearColor(0,0,0,0):this.gl.clearColor(a.__colorSplit[0],a.__colorSplit[1],a.__colorSplit[2],1);this.gl.clear(this.gl.COLOR_BUFFER_BIT);null!=a.stage3Ds.data[0].context3D&&(this.renderSession.shaderManager.setShader(null),this.renderSession.blendModeManager.setBlendMode(null))},render:function(a){var b=a.__displayMatrix,c=Math.round(0*b.a+0*b.c+b.tx),d=Math.round(0*b.b+0*b.d+b.ty),e=Math.round(this.width*b.a+0*b.c+b.tx-
c),b=Math.round(0*b.b+this.height*b.d+b.ty-d);this.gl.viewport(c,d,e,b);this.windowWidth=a.window.__width;this.windowHeight=a.window.__height;a.__renderGL(this.renderSession);if(0<c||0<d)this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.SCISSOR_TEST),0<c&&(this.gl.scissor(0,0,c,this.windowHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.scissor(c+e,0,this.windowWidth,this.windowHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT)),0<d&&(this.gl.scissor(0,0,this.windowWidth,d),this.gl.clear(this.gl.COLOR_BUFFER_BIT),
this.gl.scissor(0,d+b,this.windowWidth,this.windowHeight),this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.gl.disable(this.gl.SCISSOR_TEST)},resize:function(a,b){zb.prototype.resize.call(this,a,b);this.projection=na.createOrtho(0,a,b,0,-1E3,1E3)},__class__:mf});var lf=function(a){this.gl=a;this.defaultShader=new zg;this.defaultShader.gl=a;this.defaultShader.__init()};g["openfl._internal.renderer.opengl.GLShaderManager"]=lf;lf.__name__=["openfl","_internal","renderer","opengl","GLShaderManager"];lf.__super__=
cf;lf.prototype=n(cf.prototype,{setShader:function(a){this.currentShader!=a&&(null!=this.currentShader&&this.currentShader.__disable(),null==a?(this.currentShader=null,this.gl.useProgram(null)):(this.currentShader=a,null==this.currentShader.gl&&(this.currentShader.gl=this.gl,this.currentShader.__init()),this.gl.useProgram(a.glProgram),this.currentShader.__enable()))},__class__:lf});var Kg=function(){};g["openfl._internal.renderer.opengl.GLShape"]=Kg;Kg.__name__=["openfl","_internal","renderer","opengl",
"GLShape"];Kg.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=a.__graphics,d=b.gl;if(null!=c&&(k.render(c,b,a.__worldTransform),null!=c.__bitmap&&c.__visible)){var e;e=null!=a.__filters&&D.__instanceof(a.__filters[0],Mc)?D.__cast(a.__filters[0],Mc).shader:b.shaderManager.defaultShader;b.blendModeManager.setBlendMode(a.get_blendMode());b.shaderManager.setShader(e);b.maskManager.pushObject(a);var f=b.renderer;d.enableVertexAttribArray(e.data.aAlpha.index);d.uniformMatrix4fv(e.data.uMatrix.index,
!1,f.getMatrix(c.__worldTransform));d.bindTexture(d.TEXTURE_2D,c.__bitmap.getTexture(d));d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.bindBuffer(d.ARRAY_BUFFER,c.__bitmap.getBuffer(d,a.__worldAlpha));d.vertexAttribPointer(e.data.aPosition.index,3,d.FLOAT,!1,24,0);d.vertexAttribPointer(e.data.aTexCoord.index,2,d.FLOAT,!1,24,12);d.vertexAttribPointer(e.data.aAlpha.index,1,d.FLOAT,!1,24,20);d.drawArrays(d.TRIANGLE_STRIP,0,4);
b.maskManager.popObject(a)}}};var Ld=function(){xb.call(this);null==ua.application&&(ua.application=this)};g["openfl.display.Application"]=Ld;Ld.__name__=["openfl","display","Application"];Ld.__super__=xb;Ld.prototype=n(xb.prototype,{create:function(a){this.config=a;this.backend.create(a);if(null!=a){Object.prototype.hasOwnProperty.call(a,"fps")&&this.backend.setFrameRate(a.fps);if(Object.prototype.hasOwnProperty.call(a,"windows"))for(a=a.windows;0<a.length;){a=new nf(a[0]);this.createWindow(a);break}if(null==
this.__preloader||this.__preloader.complete)this.onPreloadComplete()}},__class__:Ld});var of=function(a,b,c){null==c&&(c=!1);T.call(this);this.set_bitmapData(a);this.pixelSnapping=b;this.smoothing=c;null==b&&(this.pixelSnapping=1)};g["openfl.display.Bitmap"]=of;of.__name__=["openfl","display","Bitmap"];of.__super__=T;of.prototype=n(T.prototype,{__getBounds:function(a,b){if(null!=this.bitmapData){var c=Ka.__temp;c.setTo(0,0,this.bitmapData.width,this.bitmapData.height);c.__transform(c,b);a.__expand(c.x,
c.y,c.width,c.height)}},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||null==this.bitmapData||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getWorldTransform();c=this.__worldTransform.__transformInverseX(a,b);a=this.__worldTransform.__transformInverseY(a,b);return 0<c&&0<a&&c<=this.bitmapData.width&&a<=this.bitmapData.height?(null==d||e||d.push(f),!0):!1},__hitTestMask:function(a,b){if(null==this.bitmapData)return!1;this.__getWorldTransform();var c=
this.__worldTransform.__transformInverseX(a,b),d=this.__worldTransform.__transformInverseY(a,b);return 0<c&&0<d&&c<=this.bitmapData.width&&d<=this.bitmapData.height?!0:!1},__renderCairo:function(a){ah.render(this,a)},__renderCairoMask:function(a){a.cairo.rectangle(0,0,this.get_width(),this.get_height())},__renderCanvas:function(a){bh.render(this,a)},__renderCanvasMask:function(a){a.context.rect(0,0,this.get_width(),this.get_height())},__renderDOM:function(a){null!=this.stage&&this.__worldVisible&&
this.__renderable&&null!=this.bitmapData&&this.bitmapData.__isValid?null!=this.bitmapData.image.buffer.__srcImage?gf.renderImage(this,a):gf.renderCanvas(this,a):(null!=this.__image&&(a.element.removeChild(this.__image),this.__style=this.__image=null),null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__style=this.__canvas=null))},__renderGL:function(a){eh.render(this,a)},__updateMask:function(a){null!=this.bitmapData&&(a.__commands.overrideMatrix(this.__worldTransform),a.beginFill(0),
a.drawRect(0,0,this.bitmapData.width,this.bitmapData.height),null==a.__bounds&&(a.__bounds=new Ka),this.__getBounds(a.__bounds,Ha.__identity),T.prototype.__updateMask.call(this,a))},set_bitmapData:function(a){return this.bitmapData=a},get_height:function(){return null!=this.bitmapData?this.bitmapData.height*this.get_scaleY():0},set_height:function(a){return null!=this.bitmapData?(a!=this.bitmapData.height&&this.set_scaleY(a/this.bitmapData.height),a):0},get_width:function(){return null!=this.bitmapData?
this.bitmapData.width*this.get_scaleX():0},set_width:function(a){return null!=this.bitmapData?(a!=this.bitmapData.width&&this.set_scaleX(a/this.bitmapData.width),a):0},__class__:of,__properties__:n(T.prototype.__properties__,{set_bitmapData:"set_bitmapData"})});var sb=function(a,b,c,d){null==d&&(d=-1);null==c&&(c=!0);this.transparent=c;null==a&&(a=0);null==b&&(b=0);0>a&&(a=0);0>b&&(b=0);this.width=a;this.height=b;this.rect=new Ka(0,0,a,b);0<a&&0<b&&(c?0==(d&-16777216)&&(d=0):d=-16777216|d&16777215,
this.image=new ra(null,0,0,a,b,d<<8|d>>24&255),this.image.set_transparent(c),this.__isValid=!0);this.__worldTransform=new Ha;this.__worldColorTransform=new Dc};g["openfl.display.BitmapData"]=sb;sb.__name__=["openfl","display","BitmapData"];sb.__interfaces__=[Gg];sb.fromBytes=function(a,b,c){var d=new sb(0,0,!0);d.__fromBytes(a,b,c);return d};sb.fromCanvas=function(a,b){null==b&&(b=!0);if(null==a)return null;var c=new sb(0,0,b);c.__fromImage(ra.fromCanvas(a));c.image.set_transparent(b);return c};sb.fromFile=
function(a,b,c){var d=new sb(0,0,!0);d.__fromFile(a,b,c);return d};sb.fromImage=function(a,b){null==b&&(b=!0);if(null==a||null==a.buffer)return null;var c=new sb(0,0,b);c.__fromImage(a);c.image.set_transparent(b);return c};sb.prototype={dispose:function(){this.image=null;this.height=this.width=0;this.rect=null;this.__isValid=!1;if(null!=this.__texture){var a=ua.current.stage.__renderer;null!=a&&(a=a.renderSession.gl,null!=a&&(a.deleteTexture(this.__texture),this.__texture=null))}},getBuffer:function(a,
b){if(null==this.__buffer){var c=[this.width,this.height,0,1,1,b,0,this.height,0,0,1,b,this.width,0,0,1,0,b,0,0,0,0,0,b];this.__bufferData=null!=c?new Float32Array(c):null;this.__bufferAlpha=b;this.__buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.__buffer);a.bufferData(a.ARRAY_BUFFER,this.__bufferData,a.STATIC_DRAW)}else this.__bufferAlpha!=b&&(this.__bufferData[5]=b,this.__bufferData[11]=b,this.__bufferData[17]=b,this.__bufferAlpha=this.__bufferData[23]=b,a.bindBuffer(a.ARRAY_BUFFER,this.__buffer),
a.bufferData(a.ARRAY_BUFFER,this.__bufferData,a.STATIC_DRAW));return this.__buffer},getSurface:function(){if(!this.__isValid)return null;null==this.__surface&&(this.__surface=Ug.fromImage(this.image));return this.__surface},getTexture:function(a){if(!this.__isValid)return null;null==this.__texture&&(this.__texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.__texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),this.__textureVersion=-1);xa.sync(this.image,!1);if(null!=this.image&&this.image.version!=this.__textureVersion){var b,c;null!=this.__surface&&Vg.flush(this.__surface);c=1==this.image.buffer.bitsPerPixel?b=a.ALPHA:b=a.RGBA;a.bindTexture(a.TEXTURE_2D,this.__texture);var d=this.image;d.get_premultiplied()?a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0):a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
1);0!=d.get_format()&&(d=d.clone(),d.set_format(0),d.buffer.premultiplied=!0);d.type==wa.DATA?a.texImage2D(a.TEXTURE_2D,0,b,this.width,this.height,0,c,a.UNSIGNED_BYTE,d.get_data()):a.texImage2D(a.TEXTURE_2D,0,b,c,a.UNSIGNED_BYTE,d.get_src());a.bindTexture(a.TEXTURE_2D,null);this.__textureVersion=this.image.version}return this.__texture},__fromBytes:function(a,b,c){var d=this;ra.fromBytes(Xa.toBytes(a),function(a){d.__fromImage(a);if(null!=b){xa.convertToCanvas(a);xa.createImageData(a);for(var f=a.buffer.data,
g=0,h=Xa.get_length(b);g<h;){var k=g++,l=b.readUnsignedByte();f[4*k+3]=l}a.version++}null!=c&&c(d)})},__fromFile:function(a,b,c){var d=this;ra.fromFile(a,function(a){d.__fromImage(a);null!=b&&b(d)},c)},__fromImage:function(a){null!=a&&null!=a.buffer&&(this.image=a,this.width=a.width,this.height=a.height,this.rect=new Ka(0,0,a.width,a.height),this.__isValid=!0)},__class__:sb};var dh={};g["openfl.display._CapsStyle.CapsStyle_Impl_"]=dh;dh.__name__=["openfl","display","_CapsStyle","CapsStyle_Impl_"];
dh.toString=function(a){switch(a){case 0:return"none";case 1:return"round";case 2:return"square";default:return null}};var Nc=function(a){T.call(this)};g["openfl.display.DirectRenderer"]=Nc;Nc.__name__=["openfl","display","DirectRenderer"];Nc.__super__=T;Nc.prototype=n(T.prototype,{set_render:function(a){return this.__render=a},__class__:Nc,__properties__:n(T.prototype.__properties__,{set_render:"set_render"})});var Ag=function(){};g["openfl.display.FrameLabel"]=Ag;Ag.__name__=["openfl","display",
"FrameLabel"];Ag.__super__=fa;Ag.prototype=n(fa.prototype,{__class__:Ag});var zf=function(a){this.__dirty=!0;this.__owner=a;this.__commands=new Ed;this.__positionY=this.__positionX=this.__strokePadding=0;this.__renderTransform=new Ha;this.__worldTransform=new Ha;this.__height=this.__width=0;this.moveTo(0,0)};g["openfl.display.Graphics"]=zf;zf.__name__=["openfl","display","Graphics"];zf.prototype={beginFill:function(a,b){null==b&&(b=1);null==a&&(a=0);this.__commands.beginFill(a&16777215,b);0<b&&(this.__visible=
!0)},drawRect:function(a,b,c,d){0>=c||0>=d||(this.__inflateBounds(a-this.__strokePadding,b-this.__strokePadding),this.__inflateBounds(a+c+this.__strokePadding,b+d+this.__strokePadding),this.__commands.drawRect(a,b,c,d),this.set___dirty(!0))},moveTo:function(a,b){this.__positionX=a;this.__positionY=b;this.__commands.moveTo(a,b)},__cleanup:function(){null!=this.__bounds&&(this.set___dirty(!0),this.__transformDirty=!0);this.__context=this.__canvas=this.__bitmap=null},__getBounds:function(a,b){if(null!=
this.__bounds){var c=Ka.__temp;this.__bounds.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height)}},__hitTest:function(a,b,c,d){if(null==this.__bounds)return!1;var e=d.__transformInverseX(a,b);a=d.__transformInverseY(a,b);return e>this.__bounds.x&&a>this.__bounds.y&&this.__bounds.contains(e,a)?c?k.hitTest(this,e,a):!0:!1},__inflateBounds:function(a,b){null==this.__bounds?(this.__bounds=new Ka(a,b,0,0),this.__transformDirty=!0):(a<this.__bounds.x&&(this.__bounds.width+=this.__bounds.x-a,this.__bounds.x=
a,this.__transformDirty=!0),b<this.__bounds.y&&(this.__bounds.height+=this.__bounds.y-b,this.__bounds.y=b,this.__transformDirty=!0),a>this.__bounds.x+this.__bounds.width&&(this.__bounds.width=a-this.__bounds.x),b>this.__bounds.y+this.__bounds.height&&(this.__bounds.height=b-this.__bounds.y))},__update:function(){if(!(null==this.__bounds||0>=this.__bounds.width||0>=this.__bounds.height)){var a=this.__owner.__getRenderTransform(),b;b=0==a.b?a.a:Math.sqrt(a.a*a.a+a.b*a.b);a=0==a.c?a.d:Math.sqrt(a.c*
a.c+a.d*a.d);b*=this.__bounds.width;a*=this.__bounds.height;if(2<Math.abs(b-this.__width)||2<Math.abs(a-this.__height))this.set___dirty(!0),this.__width=Math.floor(b),this.__height=Math.floor(a),this.__renderTransform.a=b/this.__bounds.width,this.__renderTransform.d=a/this.__bounds.height;0>=this.__width||0>=this.__height||(this.__worldTransform.a=1/this.__renderTransform.a,this.__worldTransform.b=0,this.__worldTransform.c=0,this.__worldTransform.d=1/this.__renderTransform.d,this.__worldTransform.tx=
this.__bounds.x,this.__worldTransform.ty=this.__bounds.y,this.__worldTransform.concat(this.__owner.__worldTransform))}},set___dirty:function(a){a&&null!=this.__owner&&this.__owner.__setRenderDirty();return this.__dirty=a},__class__:zf,__properties__:{set___dirty:"set___dirty"}};var ch={};g["openfl.display._JointStyle.JointStyle_Impl_"]=ch;ch.__name__=["openfl","display","_JointStyle","JointStyle_Impl_"];ch.toString=function(a){switch(a){case 0:return"bevel";case 1:return"miter";case 2:return"round";
default:return null}};var Re=function(){bb.call(this);this.contentLoaderInfo=dc.create(this)};g["openfl.display.Loader"]=Re;Re.__name__=["openfl","display","Loader"];Re.__super__=bb;Re.prototype=n(bb.prototype,{load:function(a,b){var c="",d=a.url.split(".");0<d.length&&(c=d[d.length-1].toLowerCase());-1!=c.indexOf("?")&&(c=c.split("?")[0]);this.contentLoaderInfo.url=a.url;if(null==a.contentType||""==a.contentType)switch(c){case "swf":this.contentLoaderInfo.contentType="application/x-shockwave-flash";
break;case "jpg":case "jpeg":this.contentLoaderInfo.contentType="image/jpeg";break;case "png":this.contentLoaderInfo.contentType="image/png";break;case "gif":this.contentLoaderInfo.contentType="image/gif";break;default:this.contentLoaderInfo.contentType="application/x-www-form-urlencoded"}else this.contentLoaderInfo.contentType=a.contentType;var e=new eg;e.doWork.add(function(b){sb.fromFile(a.url,function(a){e.sendComplete(a)},function(){e.sendError("ioError")})});e.onError.add(l(this,this.BitmapData_onError));
e.onComplete.add(l(this,this.BitmapData_onLoad));e.run()},unload:function(){if(0<this.get_numChildren()){for(;0<this.get_numChildren();)this.removeChildAt(0);this.content=null;this.contentLoaderInfo.url=null;this.contentLoaderInfo.contentType=null;this.contentLoaderInfo.content=null;this.contentLoaderInfo.bytesLoaded=0;this.contentLoaderInfo.bytesTotal=0;this.contentLoaderInfo.width=0;this.contentLoaderInfo.height=0;var a=new J("unload");a.currentTarget=this;this.__dispatchEvent(a)}},BitmapData_onLoad:function(a){this.contentLoaderInfo.content=
new of(a);this.content=this.contentLoaderInfo.content;this.addChild(this.contentLoaderInfo.content);a=new J("complete");a.target=this.contentLoaderInfo;a.currentTarget=this.contentLoaderInfo;this.contentLoaderInfo.dispatchEvent(a)},BitmapData_onError:function(a){a=new jd("ioError");a.target=this.contentLoaderInfo;a.currentTarget=this.contentLoaderInfo;this.contentLoaderInfo.dispatchEvent(a)},__class__:Re});var Jc=function(){T.call(this);if(!this.__initialized){this.__canvas=window.document.createElement("canvas");
this.__canvas.width=ua.current.stage.stageWidth;this.__canvas.height=ua.current.stage.stageHeight;var a=ua.current.stage.window,a={alpha:!1,premultipliedAlpha:!1,antialias:!1,depth:Object.prototype.hasOwnProperty.call(a.config,"depthBuffer")?a.config.depthBuffer:!0,stencil:Object.prototype.hasOwnProperty.call(a.config,"stencilBuffer")?a.config.stencilBuffer:!1};this.__context=this.__canvas.getContext("webgl",a);null==this.__context&&(this.__context=this.__canvas.getContext("experimental-webgl",a));
m.context=this.__context;this.__initialized=!0}};g["openfl.display.OpenGLView"]=Jc;Jc.__name__=["openfl","display","OpenGLView"];Jc.__properties__={get_isSupported:"get_isSupported"};Jc.get_isSupported=function(){if(!window.WebGLRenderingContext)return!1;if(null!=m.context)return!0;var a=window.document.createElement("canvas"),b=a.getContext("webgl");null==b&&(b=a.getContext("experimental-webgl"));return null!=b};Jc.__super__=Nc;Jc.prototype=n(Nc.prototype,{__renderCanvas:function(a){},__renderDOM:function(a){null!=
this.stage&&this.__worldVisible&&this.__renderable?(this.__added||(a.element.appendChild(this.__canvas),this.__added=!0,Gb.initializeElement(this,this.__canvas,a)),null!=this.__context&&(a=null,a=null==this.get_scrollRect()?new Ka(0,0,this.stage.stageWidth,this.stage.stageHeight):new Ka(this.get_x()+this.get_scrollRect().x,this.get_y()+this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height),null!=this.__render&&this.__render(a))):this.__added&&(a.element.removeChild(this.__canvas),
this.__added=!1)},__renderGL:function(a){if(null!=this.stage&&this.__renderable){var b=null,b=null==this.get_scrollRect()?new Ka(0,0,this.stage.stageWidth,this.stage.stageHeight):new Ka(this.get_x()+this.get_scrollRect().x,this.get_y()+this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height);a.shaderManager.setShader(null);a.blendModeManager.setBlendMode(null);null!=this.__render&&this.__render(b)}},set_width:function(a){Nc.prototype.set_width.call(this,a);this.__canvas.width=
a|0;return a},set_height:function(a){Nc.prototype.set_height.call(this,a);this.__canvas.height=a|0;return a},__class__:Jc});var Md=function(a){Sa.call(this);if(null!=a&&(this.display=a,ua.current.addChild(a),D.__instanceof(a,Qb)))D.__cast(a,Qb).onInit()};g["openfl.display.Preloader"]=Md;Md.__name__=["openfl","display","Preloader"];Md.__super__=Sa;Md.prototype=n(Sa.prototype,{load:function(a,b){for(var c=[],d=null,e=0,f=a.length;e<f;){var g=e++,d=a[g];switch(b[g]){case "MUSIC":case "SOUND":d=Xc.withoutExtension(d),
r.remove(c,d)||this.total++,c.push(d)}}for(e=0;e<c.length;)f=c[e],++e,d=new Jb,d.addEventListener("complete",l(this,this.sound_onComplete)),d.addEventListener("ioError",l(this,this.sound_onIOError)),d.load(new Uc(f+".ogg"));Sa.prototype.load.call(this,a,b)},start:function(){null!=this.display&&D.__instanceof(this.display,Qb)?(this.display.addEventListener("complete",l(this,this.display_onComplete)),D.__cast(this.display,Qb).onLoaded()):Sa.prototype.start.call(this)},update:function(a,b){if(null!=
this.display&&D.__instanceof(this.display,Qb))D.__cast(this.display,Qb).onUpdate(a,b)},display_onComplete:function(a){this.display.removeEventListener("complete",l(this,this.display_onComplete));ua.current.removeChild(this.display);ua.current.stage.set_focus(null);this.display=null;Sa.prototype.start.call(this)},sound_onComplete:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==this.total&&this.start()},sound_onIOError:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,
this.total);this.loaded==this.total&&this.start()},__class__:Md});var zg=function(a){this.byteCode=a;this.precisionHint=1;null==this.glVertexSource&&(this.glVertexSource="attribute float aAlpha;\n\t\t\t\tattribute vec4 aPosition;\n\t\t\t\tattribute vec2 aTexCoord;\n\t\t\t\tvarying float vAlpha;\n\t\t\t\tvarying vec2 vTexCoord;\n\t\t\t\t\n\t\t\t\tuniform mat4 uMatrix;\n\t\t\t\t\n\t\t\t\tvoid main(void) {\n\t\t\t\t\t\n\t\t\t\t\tvAlpha = aAlpha;\n\t\t\t\t\tvTexCoord = aTexCoord;\n\t\t\t\t\tgl_Position = uMatrix * aPosition;\n\t\t\t\t\t\n\t\t\t\t}");
null==this.glFragmentSource&&(this.glFragmentSource="varying float vAlpha;\n\t\t\t\tvarying vec2 vTexCoord;\n\t\t\t\tuniform sampler2D uImage0;\n\t\t\t\t\n\t\t\t\tvoid main(void) {\n\t\t\t\t\t\n\t\t\t\t\tvec4 color = texture2D (uImage0, vTexCoord);\n\t\t\t\t\t\n\t\t\t\t\tif (color.a == 0.0) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t\n\t\t\t\t\t\tgl_FragColor = vec4 (color.rgb / color.a, color.a * vAlpha);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}");
this.__init()};g["openfl.display.Shader"]=zg;zg.__name__=["openfl","display","Shader"];zg.prototype={__disable:function(){if(null!=this.glProgram){for(var a,b=0,c=M.fields(this.data);b<c.length;)if(a=c[b],++b,a=M.field(this.data,a),D.__instanceof(a,pf))switch(a.type){case 1:case 2:case 3:case 9:case 10:case 11:case 5:case 6:case 7:this.gl.disableVertexAttribArray(a.index)}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null);this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},__enable:function(){this.__init();
if(null!=this.glProgram){for(var a,b=0,c=0,d=M.fields(this.data);c<d.length;)if(a=d[c],++c,a=M.field(this.data,a),D.__instanceof(a,qf))this.gl.uniform1i(a.index,b),b++;else switch(a.type){case 1:case 2:case 3:case 9:case 10:case 11:case 5:case 6:case 7:this.gl.enableVertexAttribArray(a.index)}0<b&&this.gl.activeTexture(this.gl.TEXTURE0)}},__init:function(){null==this.data&&(this.data=new Bg(null));null!=this.gl&&null==this.glProgram&&null!=this.glFragmentSource&&null!=this.glVertexSource&&(this.glProgram=
ud.createProgram(this.glVertexSource,"#ifdef GL_ES\n\t\t\t\tprecision "+(1==this.precisionHint?"mediump":"lowp")+" float;\n\t\t\t\t#endif\n\t\t\t\t"+this.glFragmentSource),null!=this.glProgram&&(this.__processGLData(this.glVertexSource,"attribute"),this.__processGLData(this.glVertexSource,"uniform"),this.__processGLData(this.glFragmentSource,"uniform")))},__processGLData:function(a,b){var c=0,d,e;for(d="uniform"==b?new Sd("uniform ([A-Za-z0-9]+) ([A-Za-z0-9]+)",""):new Sd("attribute ([A-Za-z0-9]+) ([A-Za-z0-9]+)",
"");d.matchSub(a,c);){e=d.matched(1);c=d.matched(2);if(P.startsWith(e,"sampler"))e=new qf,e.index="uniform"==b?this.gl.getUniformLocation(this.glProgram,c):this.gl.getAttribLocation(this.glProgram,c),this.data[c]=e;else{var f=new pf;switch(e){case "bool":f.type=0;break;case "double":case "float":f.type=4;break;case "int":case "uint":f.type=8;break;case "bvec2":f.type=1;break;case "bvec3":f.type=2;break;case "bvec4":f.type=3;break;case "ivec2":case "uvec2":f.type=9;break;case "ivec3":case "uvec3":f.type=
10;break;case "ivec4":case "uvec4":f.type=11;break;case "vec2":case "dvec2":f.type=5;break;case "vec3":case "dvec3":f.type=6;break;case "vec4":case "dvec4":f.type=7;break;case "mat2":case "mat2x2":f.type=12;break;case "mat2x3":f.type=13;break;case "mat2x4":f.type=14;break;case "mat3x2":f.type=15;break;case "mat3":case "mat3x3":f.type=16;break;case "mat3x4":f.type=17;break;case "mat4x2":f.type=18;break;case "mat4x3":f.type=19;break;case "mat4":case "mat4x4":f.type=20;break;default:f.type=null}f.index=
"uniform"==b?this.gl.getUniformLocation(this.glProgram,c):this.gl.getAttribLocation(this.glProgram,c);this.data[c]=f}c=d.matchedPos();c=c.pos+c.len}},__class__:zg};var Bg=function(a){};g["openfl.display.ShaderData"]=Bg;Bg.__name__=["openfl","display","ShaderData"];Bg.prototype={__class__:Bg};var qf=function(){};g["openfl.display.ShaderInput"]=qf;qf.__name__=["openfl","display","ShaderInput"];qf.prototype={__class__:qf};var pf=function(){};g["openfl.display.ShaderParameter"]=pf;pf.__name__=["openfl",
"display","ShaderParameter"];pf.prototype={__class__:pf};var Hd=function(a,b){bb.call(this);this.application=a.application;this.window=a;null==b?(this.__transparent=!0,this.set_color(0)):this.set_color(b);this.set_name(null);this.__deltaTime=0;this.__displayState=2;this.__logicalHeight=this.__logicalWidth=this.__lastClickTime=this.__mouseY=this.__mouseX=0;this.__displayMatrix=new Ha;this.__resize();this.stage=this;this.align=6;this.allowsFullScreenInteractive=this.allowsFullScreen=!1;this.quality=
1;this.scaleMode=2;this.stageFocusRect=!0;this.__macKeyboard=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)||/Mac/.test(navigator.platform);this.__clearBeforeRender=!0;this.__stack=[];this.__mouseOutStack=[];var c;c=new Dd;c.data=[];c.length=0;c.fixed=!1;c=this.stage3Ds=c;var d=new rf;if(!c.fixed){c.length++;if(c.data.length<c.length){var e;e=Array(c.data.length+10);pd.blit(c.data,0,e,0,c.data.length);c.data=e}c.data[c.length-1]=d}c.length;null==ua.current.stage&&
this.stage.addChild(ua.current)};g["openfl.display.Stage"]=Hd;Hd.__name__=["openfl","display","Stage"];Hd.__interfaces__=[he];Hd.__super__=bb;Hd.prototype=n(bb.prototype,{addRenderer:function(a){a.onRender.add(function(a,c){return function(){a(c)}}(l(this,this.render),a));a.onContextLost.add(function(a,c){return function(){a(c)}}(l(this,this.onRenderContextLost),a));a.onContextRestored.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onRenderContextRestored),a))},addWindow:function(a){if(this.window==
a&&(a.onActivate.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowActivate),a)),a.onClose.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowClose),a)),a.onCreate.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowCreate),a)),a.onDeactivate.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowDeactivate),a)),a.onDropFile.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onWindowDropFile),a)),a.onEnter.add(function(a,c){return function(){a(c)}}(l(this,
this.onWindowEnter),a)),a.onFocusIn.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowFocusIn),a)),a.onFocusOut.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowFocusOut),a)),a.onFullscreen.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowFullscreen),a)),a.onKeyDown.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onKeyDown),a)),a.onKeyUp.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onKeyUp),a)),a.onLeave.add(function(a,c){return function(){a(c)}}(l(this,
this.onWindowLeave),a)),a.onMinimize.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowMinimize),a)),a.onMouseDown.add(function(a,c){return function(d,e,f){a(c,d,e,f)}}(l(this,this.onMouseDown),a)),a.onMouseMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onMouseMove),a)),a.onMouseMoveRelative.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onMouseMoveRelative),a)),a.onMouseUp.add(function(a,c){return function(d,e,f){a(c,d,e,f)}}(l(this,this.onMouseUp),
a)),a.onMouseWheel.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onMouseWheel),a)),a.onMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onWindowMove),a)),a.onResize.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onWindowResize),a)),a.onRestore.add(function(a,c){return function(){a(c)}}(l(this,this.onWindowRestore),a)),a.onTextEdit.add(function(a,c){return function(d,e,f){a(c,d,e,f)}}(l(this,this.onTextEdit),a)),a.onTextInput.add(function(a,c){return function(d){a(c,
d)}}(l(this,this.onTextInput),a)),-1<a.id))this.onWindowCreate(a)},registerModule:function(a){a.onExit.add(l(this,this.onModuleExit),!1,0);a.onUpdate.add(l(this,this.update));for(a=Wa.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}Wa.onConnect.add(l(this,this.__onGamepadConnect));rb.onStart.add(l(this,this.onTouchStart));rb.onMove.add(l(this,this.onTouchMove));rb.onEnd.add(l(this,this.onTouchEnd))},setPreloader:function(a){},globalToLocal:function(a){return a.clone()},
onGamepadAxisMove:function(a,b,c){la.__onGamepadAxisMove(a,b,c)},onGamepadButtonDown:function(a,b){la.__onGamepadButtonDown(a,b)},onGamepadButtonUp:function(a,b){la.__onGamepadButtonUp(a,b)},onGamepadConnect:function(a){la.__onGamepadConnect(a)},onGamepadDisconnect:function(a){la.__onGamepadDisconnect(a)},onKeyDown:function(a,b,c){null!=this.window&&this.window==a&&this.__onKey("keyDown",b,c)},onKeyUp:function(a,b,c){null!=this.window&&this.window==a&&this.__onKey("keyUp",b,c)},onModuleExit:function(a){null!=
this.window&&(a=new J("deactivate"),this.__broadcast(a,!0))},onMouseDown:function(a,b,c,d){if(null!=this.window&&this.window==a){var e;switch(d){case 1:e="middleMouseDown";break;case 2:e="rightMouseDown";break;default:e="mouseDown"}this.__onMouse(e,b*a.__scale|0,c*a.__scale|0,d)}},onMouseMove:function(a,b,c){null!=this.window&&this.window==a&&this.__onMouse("mouseMove",b*a.__scale|0,c*a.__scale|0,0)},onMouseMoveRelative:function(a,b,c){},onMouseUp:function(a,b,c,d){if(null!=this.window&&this.window==
a){var e;switch(d){case 1:e="middleMouseUp";break;case 2:e="rightMouseUp";break;default:e="mouseUp"}this.__onMouse(e,b*a.__scale|0,c*a.__scale|0,d)}},onMouseWheel:function(a,b,c){null!=this.window&&this.window==a&&this.__onMouseWheel(b*a.__scale|0,c*a.__scale|0)},onRenderContextLost:function(a){},onRenderContextRestored:function(a,b){},onTextEdit:function(a,b,c,d){},onTextInput:function(a,b){if(null!=this.window&&this.window==a){var c=[];null==this.__focus?this.__getInteractive(c):this.__focus.__getInteractive(c);
var d=new Oc("textInput",!0,!1,b);0<c.length?(c.reverse(),this.__fireEvent(d,c)):this.__broadcast(d,!0)}},onTouchMove:function(a){this.__onTouch("touchMove",a)},onTouchEnd:function(a){this.__onTouch("touchEnd",a)},onTouchStart:function(a){this.__onTouch("touchBegin",a)},onWindowActivate:function(a){null!=this.window&&this.window==a&&(a=new J("activate"),this.__broadcast(a,!0))},onWindowClose:function(a){this.window==a&&(this.window=null)},onWindowCreate:function(a){if(null!=this.window&&this.window==
a&&null!=a.renderer)switch(a=a.renderer.context,a[1]){case 0:this.__renderer=new mf(this.stageWidth,this.stageHeight,a[2]);break;case 1:this.__renderer=new ff(this.stageWidth,this.stageHeight,a[2]);break;case 2:this.__renderer=new Gb(this.stageWidth,this.stageHeight,a[2])}},onWindowDeactivate:function(a){null!=this.window&&this.window==a&&(a=new J("deactivate"),this.__broadcast(a,!0))},onWindowDropFile:function(a,b){},onWindowEnter:function(a){},onWindowFocusIn:function(a){null!=this.window&&this.window==
a&&this.set_focus(this.__cacheFocus)},onWindowFocusOut:function(a){null!=this.window&&this.window==a&&(this.__cacheFocus=this.get_focus(),this.set_focus(null))},onWindowFullscreen:function(a){null!=this.window&&this.window==a&&2==this.__displayState&&(this.__displayState=1)},onWindowLeave:function(a){null!=this.window&&this.window==a&&this.__dispatchEvent(new J("mouseLeave"))},onWindowMinimize:function(a){},onWindowMove:function(a,b,c){},onWindowResize:function(a,b,c){null!=this.window&&this.window==
a&&(2==this.__displayState||a.__fullscreen||(this.__displayState=2),this.__resize(),a=new J("resize"),this.__broadcast(a,!1))},onWindowRestore:function(a){},render:function(a){if(null!=a.window&&a.window==this.window&&(null!=this.application&&0<this.application.__windows.length&&(this.__transformDirty||(this.__transformDirty=!0,T.__worldTransformDirty++),this.__renderDirty||(this.__renderDirty=!0,T.__worldRenderDirty++)),!this.__rendering)){this.__rendering=!0;null!=this.__renderer&&this.__renderer.init(this);
this.__broadcast(new J("enterFrame"),!0);this.__broadcast(new J("exitFrame"),!0);this.__invalidated&&(this.__invalidated=!1,this.__broadcast(new J("render"),!0));this.__renderable=!0;this.__enterFrame(this.__deltaTime);this.__deltaTime=0;this.__update(!1,!0);if(null!=this.__renderer){if(a.type==ha.CAIRO)switch(a=a.context,a[1]){case 4:a=a[2],D.__cast(this.__renderer,df).cairo=a,this.__renderer.renderSession.cairo=a}this.__renderer.render(this)}this.__rendering=!1}},update:function(a){this.__deltaTime=
a},__drag:function(a){var b=this.__dragObject.parent;null!=b&&(a=b.globalToLocal(a));b=a.x+this.__dragOffsetX;a=a.y+this.__dragOffsetY;null!=this.__dragBounds&&(b<this.__dragBounds.x?b=this.__dragBounds.x:b>this.__dragBounds.get_right()&&(b=this.__dragBounds.get_right()),a<this.__dragBounds.y?a=this.__dragBounds.y:a>this.__dragBounds.get_bottom()&&(a=this.__dragBounds.get_bottom()));this.__dragObject.set_x(b);this.__dragObject.set_y(a)},__fireEvent:function(a,b){var c=b.length;if(0==c)a.eventPhase=
2,a.target.__broadcast(a,!1);else{a.eventPhase=1;a.target=b[b.length-1];for(var d=0,e=c-1;d<e;){var f=d++;b[f].__broadcast(a,!1);if(a.__isCanceled)return}a.eventPhase=2;a.target.__broadcast(a,!1);if(!a.__isCanceled&&a.bubbles)for(a.eventPhase=3,c-=2;0<=c;){b[c].__broadcast(a,!1);if(a.__isCanceled)break;c--}}},__getInteractive:function(a){null!=a&&a.push(this);return!0},__onKey:function(a,b,c){Ga.__altKey=ib.get_altKey(c);Ga.__commandKey=ib.get_metaKey(c);Ga.__ctrlKey=ib.get_ctrlKey(c);Ga.__shiftKey=
ib.get_shiftKey(c);var d=[];null==this.__focus?this.__getInteractive(d):this.__focus.__getInteractive(d);if(0<d.length){var e;switch(b){case 1073742048:case 1073742049:case 1073742050:case 1073742051:e=1;break;case 1073742052:case 1073742053:case 1073742054:case 1073742055:e=2;break;case 1073741908:case 1073741909:case 1073741910:case 1073741911:case 1073741912:case 1073741913:case 1073741914:case 1073741915:case 1073741916:case 1073741917:case 1073741918:case 1073741919:case 1073741920:case 1073741921:case 1073741922:case 1073741923:case 1073742044:e=
3;break;default:e=0}switch(b){case 8:b=8;break;case 9:b=9;break;case 13:b=13;break;case 27:b=27;break;case 32:b=32;break;case 33:b=49;break;case 34:b=222;break;case 35:b=51;break;case 36:b=52;break;case 37:b=53;break;case 38:b=55;break;case 39:b=222;break;case 40:b=57;break;case 41:b=48;break;case 42:b=56;break;case 44:b=188;break;case 45:b=189;break;case 46:b=190;break;case 47:b=191;break;case 48:b=48;break;case 49:b=49;break;case 50:b=50;break;case 51:b=51;break;case 52:b=52;break;case 53:b=53;
break;case 54:b=54;break;case 55:b=55;break;case 56:b=56;break;case 57:b=57;break;case 58:b=186;break;case 59:b=186;break;case 60:b=60;break;case 61:b=187;break;case 62:b=190;break;case 63:b=191;break;case 64:b=50;break;case 91:b=219;break;case 92:b=220;break;case 93:b=221;break;case 94:b=54;break;case 95:b=189;break;case 96:b=192;break;case 97:b=65;break;case 98:b=66;break;case 99:b=67;break;case 100:b=68;break;case 101:b=69;break;case 102:b=70;break;case 103:b=71;break;case 104:b=72;break;case 105:b=
73;break;case 106:b=74;break;case 107:b=75;break;case 108:b=76;break;case 109:b=77;break;case 110:b=78;break;case 111:b=79;break;case 112:b=80;break;case 113:b=81;break;case 114:b=82;break;case 115:b=83;break;case 116:b=84;break;case 117:b=85;break;case 118:b=86;break;case 119:b=87;break;case 120:b=88;break;case 121:b=89;break;case 122:b=90;break;case 127:b=46;break;case 1073741881:b=20;break;case 1073741882:b=112;break;case 1073741883:b=113;break;case 1073741884:b=114;break;case 1073741885:b=115;
break;case 1073741886:b=116;break;case 1073741887:b=117;break;case 1073741888:b=118;break;case 1073741889:b=119;break;case 1073741890:b=120;break;case 1073741891:b=121;break;case 1073741892:b=122;break;case 1073741893:b=123;break;case 1073741894:b=301;break;case 1073741895:b=145;break;case 1073741896:b=19;break;case 1073741897:b=45;break;case 1073741898:b=36;break;case 1073741899:b=33;break;case 1073741901:b=35;break;case 1073741902:b=34;break;case 1073741903:b=39;break;case 1073741904:b=37;break;
case 1073741905:b=40;break;case 1073741906:b=38;break;case 1073741907:b=144;break;case 1073741908:b=111;break;case 1073741909:b=106;break;case 1073741910:b=109;break;case 1073741911:b=107;break;case 1073741912:b=108;break;case 1073741913:b=97;break;case 1073741914:b=98;break;case 1073741915:b=99;break;case 1073741916:b=100;break;case 1073741917:b=101;break;case 1073741918:b=102;break;case 1073741919:b=103;break;case 1073741920:b=104;break;case 1073741921:b=105;break;case 1073741922:b=96;break;case 1073741923:b=
110;break;case 1073741925:b=302;break;case 1073741928:b=124;break;case 1073741929:b=125;break;case 1073741930:b=126;break;case 1073741982:b=13;break;case 1073742044:b=110;break;case 1073742048:b=17;break;case 1073742049:b=16;break;case 1073742050:b=18;break;case 1073742051:b=15;break;case 1073742052:b=17;break;case 1073742053:b=16;break;case 1073742054:b=18;break;case 1073742055:b=15;break}var f=fh.__getCharCode(b,ib.get_shiftKey(c));c=new sf(a,!0,!1,f,b,e,this.__macKeyboard?ib.get_ctrlKey(c)||ib.get_metaKey(c):
ib.get_ctrlKey(c),ib.get_altKey(c),ib.get_shiftKey(c),ib.get_ctrlKey(c),ib.get_metaKey(c));d.reverse();this.__fireEvent(c,d);c.__isCanceled&&("keyDown"==a?this.window.onKeyDown.cancel():this.window.onKeyUp.cancel())}},__onGamepadConnect:function(a){this.onGamepadConnect(a);a.onAxisMove.add(function(a,c){return function(d,e){a(c,d,e)}}(l(this,this.onGamepadAxisMove),a));a.onButtonDown.add(function(a,c){return function(d){a(c,d)}}(l(this,this.onGamepadButtonDown),a));a.onButtonUp.add(function(a,c){return function(d){a(c,
d)}}(l(this,this.onGamepadButtonUp),a));a.onDisconnect.add(function(a,c){return function(){a(c)}}(l(this,this.onGamepadDisconnect),a))},__onMouse:function(a,b,c,d){if(!(2<d)){b=new Ab(b,c);this.__displayMatrix.__transformInversePoint(b);this.__mouseX=b.x;this.__mouseY=b.y;c=[];var e=null;this.__hitTest(this.__mouseX,this.__mouseY,!0,c,!0,this)?e=c[c.length-1]:(e=this,c=[this]);null==e&&(e=this);var f=null;switch(a){case "mouseDown":e.get_tabEnabled()?this.set_focus(e):this.set_focus(null);this.__mouseDownLeft=
e;break;case "middleMouseDown":this.__mouseDownMiddle=e;break;case "rightMouseDown":this.__mouseDownRight=e;break;case "mouseUp":this.__mouseDownLeft==e&&(f="click");this.__mouseDownLeft=null;break;case "middleMouseUp":this.__mouseDownMiddle==e&&(f="middleClick");this.__mouseDownMiddle=null;break;case "rightMouseUp":this.__mouseDownRight==e&&(f="rightClick"),this.__mouseDownRight=null}this.__fireEvent(Ga.__create(a,d,this.__mouseX,this.__mouseY,e==this?b:e.globalToLocal(b),e),c);null!=f&&(this.__fireEvent(Ga.__create(f,
d,this.__mouseX,this.__mouseY,e==this?b:e.globalToLocal(b),e),c),"mouseUp"==a&&D.__cast(e,kb).doubleClickEnabled&&(a=ua.getTimer(),500>a-this.__lastClickTime?(this.__fireEvent(Ga.__create("doubleClick",d,this.__mouseX,this.__mouseY,e==this?b:e.globalToLocal(b),e),c),this.__lastClickTime=0):this.__lastClickTime=a));e=null;if(null!=this.__mouseDownLeft)e=this.__mouseDownLeft.__getCursor();else for(a=0;a<c.length;)if(e=c[a],++a,e=e.__getCursor(),null!=e){te.set_cursor(e);break}null==e&&te.set_cursor(N.ARROW);
e=0;for(f=this.__mouseOutStack;e<f.length;){var g=f[e];++e;-1==r.indexOf(c,g,0)&&(r.remove(this.__mouseOutStack,g),a=g.globalToLocal(b),a=Ga.__create("mouseOut",d,this.__mouseX,this.__mouseY,a,g),a.bubbles=!1,g.__dispatchEvent(a))}for(e=0;e<c.length;)f=c[e],++e,-1==r.indexOf(this.__mouseOutStack,f,0)&&(f.hasEventListener("mouseOver")&&(a=f.globalToLocal(b),a=Ga.__create("mouseOver",d,this.__mouseX,this.__mouseY,a,f),a.bubbles=!1,f.__dispatchEvent(a)),f.hasEventListener("mouseOut")&&this.__mouseOutStack.push(f));
null!=this.__dragObject&&this.__drag(b)}},__onMouseWheel:function(a,b){var c=this.__mouseX,d=this.__mouseY,e=[];this.__hitTest(c,d,!1,e,!0,this)||(e=[this]);var f=e[e.length-1],c=new Ab(c,d);this.__displayMatrix.__transformInversePoint(c);d=b|0;this.__fireEvent(Ga.__create("mouseWheel",0,this.__mouseX,this.__mouseY,f==this?c:f.globalToLocal(c),f,d),e)},__onTouch:function(a,b){var c=new Ab(b.x*this.window.__width,b.y*this.window.__height);this.__displayMatrix.__transformInversePoint(c);this.__mouseX=
c.x;this.__mouseY=c.y;var d=[];if(this.__hitTest(this.__mouseX,this.__mouseY,!1,d,!0,this)){var e=d[d.length-1];null==e&&(e=this);c=e.globalToLocal(c);e=Pc.__create(a,null,this.__mouseX,this.__mouseY,c,e);e.touchPointID=b.id;e.isPrimaryTouchPoint=!0;this.__fireEvent(e,d)}else d=Pc.__create(a,null,this.__mouseX,this.__mouseY,c,this),d.touchPointID=b.id,d.isPrimaryTouchPoint=!0,this.__fireEvent(d,[this.stage])},__resize:function(){var a=this.window.__width*this.window.__scale|0,b=this.window.__height*
this.window.__scale|0;this.__displayMatrix.identity();if(0==this.__logicalWidth&&0==this.__logicalHeight)this.stageWidth=a,this.stageHeight=b;else{this.stageWidth=this.__logicalWidth;this.stageHeight=this.__logicalHeight;var c=Math.min(a/this.stageWidth,b/this.stageHeight),a=Math.round((a-this.stageWidth*c)/2),b=Math.round((b-this.stageHeight*c)/2);this.__displayMatrix.scale(c,c);this.__displayMatrix.translate(a,b)}null!=this.__renderer&&this.__renderer.resize(this.stageWidth,this.stageHeight)},__setLogicalSize:function(a,
b){this.__logicalWidth=a;this.__logicalHeight=b;this.__resize()},__update:function(a,b,c){a?0<T.__worldTransformDirty&&(bb.prototype.__update.call(this,!0,b,c),b&&(T.__worldTransformDirty=0,this.__dirty=!0)):0<T.__worldTransformDirty||this.__dirty||0<T.__worldRenderDirty?(bb.prototype.__update.call(this,!1,b,c),b&&(this.__wasDirty=!0,T.__worldTransformDirty=0,T.__worldRenderDirty=0,this.__dirty=!1)):this.__wasDirty&&(bb.prototype.__update.call(this,!1,b,c),b&&(this.__wasDirty=!1))},set_color:function(a){this.__colorSplit=
[((a&16711680)>>>16)/255,((a&65280)>>>8)/255,(a&255)/255];this.__colorString="#"+P.hex(a,6);return this.__color=a},get_focus:function(){return this.__focus},set_focus:function(a){if(a!=this.__focus){var b=this.__focus;this.__focus=a;if(null!=b){var c=new Id("focusOut",!0,!1,this.__focus,!1,0);this.__stack=[];b.__getInteractive(this.__stack);this.__stack.reverse();this.__fireEvent(c,this.__stack)}null!=this.__focus&&(b=new Id("focusIn",!0,!1,b,!1,0),this.__stack=[],a.__getInteractive(this.__stack),
this.__stack.reverse(),this.__fireEvent(b,this.__stack))}return this.__focus},set_frameRate:function(a){return null!=this.application?this.application.backend.setFrameRate(a):a},__class__:Hd,__properties__:n(bb.prototype.__properties__,{set_frameRate:"set_frameRate",set_focus:"set_focus",get_focus:"get_focus",set_color:"set_color"})});var rf=function(){fa.call(this)};g["openfl.display.Stage3D"]=rf;rf.__name__=["openfl","display","Stage3D"];rf.__super__=fa;rf.prototype=n(fa.prototype,{__class__:rf});
var nf=function(a){$c.call(this,a)};g["openfl.display.Window"]=nf;nf.__name__=["openfl","display","Window"];nf.__super__=$c;nf.prototype=n($c.prototype,{create:function(a){$c.prototype.create.call(this,a);this.stage=new Hd(this,Object.prototype.hasOwnProperty.call(this.config,"background")?this.config.background:16777215);Object.prototype.hasOwnProperty.call(this.config,"resizable")&&!this.config.resizable&&this.stage.__setLogicalSize(this.config.width,this.config.height);a.addModule(this.stage)},
__class__:nf});var yh=function(){};g["openfl.display3D.Context3D"]=yh;yh.__name__=["openfl","display3D","Context3D"];var Jd=function(a,b){null==b&&(b=0);null==a&&(a="");this.message=a;this.errorID=b;this.name="Error"};g["openfl.errors.Error"]=Jd;Jd.__name__=["openfl","errors","Error"];Jd.prototype={toString:function(){return null!=this.message?this.message:"Error"},__class__:Jd};var kd=function(a){null==a&&(a="");Jd.call(this,a);this.name="IOError"};g["openfl.errors.IOError"]=kd;kd.__name__=["openfl",
"errors","IOError"];kd.__super__=Jd;kd.prototype=n(Jd.prototype,{__class__:kd});var Qc=function(){kd.call(this,"End of file was encountered");this.name="EOFError";this.errorID=2030};g["openfl.errors.EOFError"]=Qc;Qc.__name__=["openfl","errors","EOFError"];Qc.__super__=kd;Qc.prototype=n(kd.prototype,{__class__:Qc});var J=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);this.type=a;this.bubbles=b;this.cancelable=c;this.eventPhase=2};g["openfl.events.Event"]=J;J.__name__=["openfl","events","Event"];J.prototype=
{stopImmediatePropagation:function(){this.__isCanceledNow=this.__isCanceled=!0},stopPropagation:function(){this.__isCanceled=!0},__class__:J};var ld=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);J.call(this,a,b,c);this.activating=d};g["openfl.events.ActivityEvent"]=ld;ld.__name__=["openfl","events","ActivityEvent"];ld.__super__=J;ld.prototype=n(J.prototype,{__class__:ld});var Oc=function(a,b,c,d){null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);J.call(this,a,b,c);this.text=d};g["openfl.events.TextEvent"]=
Oc;Oc.__name__=["openfl","events","TextEvent"];Oc.__super__=J;Oc.prototype=n(J.prototype,{__class__:Oc});var pc=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);Oc.call(this,a,b,c,d);this.errorID=e};g["openfl.events.ErrorEvent"]=pc;pc.__name__=["openfl","events","ErrorEvent"];pc.__super__=Oc;pc.prototype=n(Oc.prototype,{__class__:pc});var Pd=function(a,b,c){this.callback=a;this.useCapture=b;this.priority=c};g["openfl.events._EventDispatcher.Listener"]=Pd;Pd.__name__=
["openfl","events","_EventDispatcher","Listener"];Pd.prototype={match:function(a,b){return M.compareMethods(this.callback,a)&&this.useCapture==b},__class__:Pd};var Id=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=!1);null==c&&(c=!1);null==b&&(b=!1);J.call(this,a,b,c);this.keyCode=f;this.shiftKey=e;this.relatedObject=d};g["openfl.events.FocusEvent"]=Id;Id.__name__=["openfl","events","FocusEvent"];Id.__super__=J;Id.prototype=n(J.prototype,{__class__:Id});var Od=function(a,b,c,d,e){null==e&&(e=!1);
null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);ld.call(this,a,b,c);this.fullScreen=d;this.interactive=e};g["openfl.events.FullScreenEvent"]=Od;Od.__name__=["openfl","events","FullScreenEvent"];Od.__super__=ld;Od.prototype=n(ld.prototype,{__class__:Od});var Kd=function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!0);J.call(this,a,b,c);this.device=d};g["openfl.events.GameInputEvent"]=Kd;Kd.__name__=["openfl","events","GameInputEvent"];Kd.__super__=J;Kd.prototype=n(J.prototype,{__class__:Kd});var tf=function(a,
b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);this.status=d;this.redirected=e;J.call(this,a,b,c)};g["openfl.events.HTTPStatusEvent"]=tf;tf.__name__=["openfl","events","HTTPStatusEvent"];tf.__super__=J;tf.prototype=n(J.prototype,{__class__:tf});var jd=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!0);pc.call(this,a,b,c,d,e)};g["openfl.events.IOErrorEvent"]=jd;jd.__name__=["openfl","events","IOErrorEvent"];jd.__super__=pc;jd.prototype=n(pc.prototype,
{__class__:jd});var sf=function(a,b,c,d,e,f,g,h,k,l,m){null==m&&(m=!1);null==l&&(l=!1);null==k&&(k=!1);null==h&&(h=!1);null==g&&(g=!1);null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);J.call(this,a,b,c);this.charCode=d;this.keyCode=e;this.keyLocation=null!=f?f:0;this.ctrlKey=g;this.altKey=h;this.shiftKey=k;this.controlKey=l;this.commandKey=m};g["openfl.events.KeyboardEvent"]=sf;sf.__name__=["openfl","events","KeyboardEvent"];sf.__super__=J;sf.prototype=n(J.prototype,{__class__:sf});var Ga=
function(a,b,c,d,e,f,g,h,k,l,m,n,p){null==p&&(p=0);null==n&&(n=!1);null==m&&(m=0);null==l&&(l=!1);null==k&&(k=!1);null==h&&(h=!1);null==g&&(g=!1);null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!0);J.call(this,a,b,c);this.shiftKey=k;this.altKey=h;this.ctrlKey=g;this.bubbles=b;this.relatedObject=f;this.delta=m;this.localX=d;this.localY=e;this.buttonDown=l;this.commandKey=n;this.clickCount=p};g["openfl.events.MouseEvent"]=Ga;Ga.__name__=["openfl","events","MouseEvent"];Ga.__altKey=null;Ga.__buttonDown=
null;Ga.__commandKey=null;Ga.__ctrlKey=null;Ga.__shiftKey=null;Ga.__create=function(a,b,c,d,e,f,g){null==g&&(g=0);switch(a){case "mouseDown":Ga.__buttonDown=!0;break;case "mouseUp":Ga.__buttonDown=!1}a=new Ga(a,!0,!1,e.x,e.y,null,Ga.__ctrlKey,Ga.__altKey,Ga.__shiftKey,Ga.__buttonDown,g,Ga.__commandKey);a.stageX=c;a.stageY=d;a.target=f;return a};Ga.__super__=J;Ga.prototype=n(J.prototype,{__class__:Ga});var uf=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);J.call(this,
a,b,c);this.bytesLoaded=d;this.bytesTotal=e};g["openfl.events.ProgressEvent"]=uf;uf.__name__=["openfl","events","ProgressEvent"];uf.__super__=J;uf.prototype=n(J.prototype,{__class__:uf});var vf=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);pc.call(this,a,b,c,d,e)};g["openfl.events.SecurityErrorEvent"]=vf;vf.__name__=["openfl","events","SecurityErrorEvent"];vf.__super__=pc;vf.prototype=n(pc.prototype,{__class__:vf});var Pc=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,
t,u,v,w,y){null==t&&(t=!1);null==r&&(r=!1);null==q&&(q=!1);null==p&&(p=!1);null==n&&(n=!1);null==l&&(l=0);null==k&&(k=0);null==h&&(h=0);null==g&&(g=0);null==f&&(f=0);null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!0);J.call(this,a,b,c);this.touchPointID=d;this.isPrimaryTouchPoint=e;this.localX=f;this.localY=g;this.sizeX=h;this.sizeY=k;this.pressure=l;this.relatedObject=m;this.ctrlKey=n;this.altKey=p;this.shiftKey=q;this.commandKey=r;this.controlKey=t};g["openfl.events.TouchEvent"]=Pc;
Pc.__name__=["openfl","events","TouchEvent"];Pc.__create=function(a,b,c,d,e,f){a=new Pc(a,!0,!1,0,!0,e.x,e.y,1,1,1);a.stageX=c;a.stageY=d;a.target=f;return a};Pc.__super__=J;Pc.prototype=n(J.prototype,{__class__:Pc});var gh=function(){};g["openfl.filters.BitmapFilter"]=gh;gh.__name__=["openfl","filters","BitmapFilter"];var Mc=function(){};g["openfl.filters.ShaderFilter"]=Mc;Mc.__name__=["openfl","filters","ShaderFilter"];Mc.__super__=gh;Mc.prototype=n(gh.prototype,{__class__:Mc});var hh=function(){};
g["openfl.geom.Matrix3D"]=hh;hh.__name__=["openfl","geom","Matrix3D"];hh.prototype={__class__:hh};var Ab=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};g["openfl.geom.Point"]=Ab;Ab.__name__=["openfl","geom","Point"];Ab.prototype={clone:function(){return new Ab(this.x,this.y)},__class__:Ab};var Ka=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};g["openfl.geom.Rectangle"]=Ka;Ka.__name__=["openfl","geom","Rectangle"];
Ka.prototype={clone:function(){return new Ka(this.x,this.y,this.width,this.height)},contains:function(a,b){return a>=this.x&&b>=this.y&&a<this.get_right()&&b<this.get_bottom()},containsPoint:function(a){return this.contains(a.x,a.y)},equals:function(a){return null!=a&&this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},setTo:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__contract:function(a,b,c,d){if(0!=this.width||0!=this.height)this.get_right(),this.get_bottom(),
this.x<a&&(this.x=a),this.y<b&&(this.y=b),this.get_right()>a+c&&(this.width=a+c-this.x),this.get_bottom()>b+d&&(this.height=b+d-this.y)},__expand:function(a,b,c,d){if(0==this.width&&0==this.height)this.x=a,this.y=b,this.width=c,this.height=d;else{var e=this.get_right(),f=this.get_bottom();this.x>a&&(this.x=a,this.width=e-a);this.y>b&&(this.y=b,this.height=f-b);e<a+c&&(this.width=a+c-this.x);f<b+d&&(this.height=b+d-this.y)}},__transform:function(a,b){var c=b.a*this.x+b.c*this.y,d=c,e=b.b*this.x+b.d*
this.y,f=e,g=b.a*(this.x+this.width)+b.c*this.y,h=b.b*(this.x+this.width)+b.d*this.y;g<c&&(c=g);h<e&&(e=h);g>d&&(d=g);h>f&&(f=h);g=b.a*(this.x+this.width)+b.c*(this.y+this.height);h=b.b*(this.x+this.width)+b.d*(this.y+this.height);g<c&&(c=g);h<e&&(e=h);g>d&&(d=g);h>f&&(f=h);g=b.a*this.x+b.c*(this.y+this.height);h=b.b*this.x+b.d*(this.y+this.height);g<c&&(c=g);h<e&&(e=h);g>d&&(d=g);h>f&&(f=h);a.setTo(c+b.tx,e+b.ty,d-c,f-e)},get_bottom:function(){return this.y+this.height},get_right:function(){return this.x+
this.width},__class__:Ka,__properties__:{get_right:"get_right",get_bottom:"get_bottom"}};var yf=function(a){this.__colorTransform=new Dc;this.concatenatedColorTransform=new Dc;this.pixelBounds=new Ka;this.__displayObject=a;this.__hasMatrix=!0};g["openfl.geom.Transform"]=yf;yf.__name__=["openfl","geom","Transform"];yf.prototype={get_colorTransform:function(){return this.__colorTransform},__class__:yf,__properties__:{get_colorTransform:"get_colorTransform"}};var zh=function(){};g["openfl.geom.Vector3D"]=
zh;zh.__name__=["openfl","geom","Vector3D"];var Ah=function(){};g["openfl.media.ID3Info"]=Ah;Ah.__name__=["openfl","media","ID3Info"];var Jb=function(a,b){fa.call(this,this);this.bytesTotal=this.bytesLoaded=0;this.id3=null;this.isBuffering=!1;this.url=null;null!=a&&this.load(a,b)};g["openfl.media.Sound"]=Jb;Jb.__name__=["openfl","media","Sound"];Jb.fromAudioBuffer=function(a){var b=new Jb;b.__buffer=a;return b};Jb.__super__=fa;Jb.prototype=n(fa.prototype,{load:function(a,b){this.url=a.url;this.__soundID=
Xc.withoutExtension(a.url);Jb.__registeredSounds.exists(this.__soundID)?this.dispatchEvent(new J("complete")):(Jb.__registeredSounds.set(this.__soundID,!0),createjs.Sound.addEventListener("fileload",l(this,this.SoundJS_onFileLoad)),createjs.Sound.addEventListener("fileerror",l(this,this.SoundJS_onFileError)),createjs.Sound.registerSound(this.url,this.__soundID))},play:function(a,b,c){null==b&&(b=0);null==a&&(a=0);c=null==c?new Kc:c.clone();var d=Lb.__soundTransform.pan+c.pan;1<d&&(d=1);-1>d&&(d=-1);
var e=Lb.__soundTransform.volume*c.volume;0==d&&(d=-1E-7);a=1<b?createjs.Sound.play(this.__soundID,"any",0,a|0,b-1,e,d):createjs.Sound.play(this.__soundID,"any",0,a|0,0,e,d);return new wf(a,c)},get_length:function(){return 0},SoundJS_onFileLoad:function(a){a.id==this.__soundID&&(createjs.Sound.removeEventListener("fileload",l(this,this.SoundJS_onFileLoad)),createjs.Sound.removeEventListener("fileerror",l(this,this.SoundJS_onFileError)),this.dispatchEvent(new J("complete")))},SoundJS_onFileError:function(a){a.id==
this.__soundID&&(createjs.Sound.removeEventListener("fileload",l(this,this.SoundJS_onFileLoad)),createjs.Sound.removeEventListener("fileerror",l(this,this.SoundJS_onFileError)),this.dispatchEvent(new jd("ioError")))},__class__:Jb,__properties__:{get_length:"get_length"}});var wf=function(a,b){fa.call(this,this);this.rightPeak=this.leftPeak=1;this.__soundTransform=null!=b?b:new Kc;null!=a&&(this.__soundInstance=a,this.__soundInstance.addEventListener("complete",l(this,this.source_onComplete)),this.__isValid=
!0);Lb.__registerSoundChannel(this)};g["openfl.media.SoundChannel"]=wf;wf.__name__=["openfl","media","SoundChannel"];wf.__super__=fa;wf.prototype=n(fa.prototype,{stop:function(){Lb.__unregisterSoundChannel(this);this.__isValid&&this.__soundInstance.stop()},__dispose:function(){this.__isValid&&(this.__soundInstance.stop(),this.__soundInstance=null,this.__isValid=!1)},__updateTransform:function(){this.set_soundTransform(this.get_soundTransform())},get_position:function(){return this.__isValid?this.__soundInstance.getPosition():
0},set_position:function(a){if(!this.__isValid)return 0;this.__soundInstance.setPosition(a|0);return this.__soundInstance.getPosition()},get_soundTransform:function(){return this.__soundTransform.clone()},set_soundTransform:function(a){if(null!=a){this.__soundTransform.pan=a.pan;this.__soundTransform.volume=a.volume;var b=Lb.__soundTransform.pan+this.__soundTransform.pan;-1>b&&(b=-1);1<b&&(b=1);var c=Lb.__soundTransform.volume*this.__soundTransform.volume;this.__isValid&&(this.__soundInstance.setVolume(c),
this.__soundInstance.setPan(b))}return a},soundInstance_onComplete:function(a){this.dispatchEvent(new J("soundComplete"))},source_onComplete:function(){this.__dispose();this.dispatchEvent(new J("soundComplete"))},__class__:wf,__properties__:{set_soundTransform:"set_soundTransform",get_soundTransform:"get_soundTransform",set_position:"set_position",get_position:"get_position"}});var Bh=function(){};g["openfl.media.SoundLoaderContext"]=Bh;Bh.__name__=["openfl","media","SoundLoaderContext"];var Kc=function(a,
b){null==b&&(b=0);null==a&&(a=1);this.volume=a;this.pan=b;this.rightToRight=this.rightToLeft=this.leftToRight=this.leftToLeft=0};g["openfl.media.SoundTransform"]=Kc;Kc.__name__=["openfl","media","SoundTransform"];Kc.prototype={clone:function(){return new Kc(this.volume,this.pan)},__class__:Kc};var Lb=function(){};g["openfl.media.SoundMixer"]=Lb;Lb.__name__=["openfl","media","SoundMixer"];Lb.__registerSoundChannel=function(a){Lb.__soundChannels.push(a)};Lb.__unregisterSoundChannel=function(a){r.remove(Lb.__soundChannels,
a)};var jb=function(){fa.call(this);this.client=this;this.objectEncoding=3};g["openfl.net.SharedObject"]=jb;jb.__name__=["openfl","net","SharedObject"];jb.__sharedObjects=null;jb.getLocal=function(a,b,c){null==b&&(b=window.location.href);null==jb.__sharedObjects&&(jb.__sharedObjects=new G,ua.application.onExit.add(jb.application_onExit));c=b+"/"+a;if(!jb.__sharedObjects.exists(c)){var d=new jb;d.data={};d.__localPath=b;d.__name=a;var e=null;try{var f=Pf.getLocalStorage();null!=f&&(e=f.getItem(b+":"+
a))}catch(g){g instanceof u&&(g=g.val)}if(null!=e&&""!=e)try{var h=new wb(e);h.setResolver({resolveEnum:Z.resolveEnum,resolveClass:jb.__resolveClass});d.data=h.unserialize()}catch(k){k instanceof u&&(k=k.val)}jb.__sharedObjects.set(c,d)}return jb.__sharedObjects.get(c)};jb.__resolveClass=function(a){return null!=a?(P.startsWith(a,"neash.")&&(a=P.replace(a,"neash.","openfl.")),P.startsWith(a,"native.")&&(a=P.replace(a,"native.","openfl.")),P.startsWith(a,"flash.")&&(a=P.replace(a,"flash.","openfl.")),
P.startsWith(a,"openfl._v2.")&&(a=P.replace(a,"openfl._v2.","openfl.")),P.startsWith(a,"openfl._legacy.")&&(a=P.replace(a,"openfl._legacy.","openfl.")),Z.resolveClass(a)):null};jb.application_onExit=function(a){for(a=jb.__sharedObjects.iterator();a.hasNext();)a.next().flush()};jb.__super__=fa;jb.prototype=n(fa.prototype,{flush:function(a){if(0==M.fields(this.data).length)return 0;a=Mb.run(this.data);try{var b=Pf.getLocalStorage();null!=b&&(b.removeItem(this.__localPath+":"+this.__name),b.setItem(this.__localPath+
":"+this.__name,a))}catch(c){return c instanceof u&&(c=c.val),1}return 0},setProperty:function(a,b){null!=this.data&&(this.data[a]=b)},__class__:jb});var Qe=function(a){fa.call(this);this.bytesTotal=this.bytesLoaded=0;this.set_dataFormat(1);null!=a&&this.load(a)};g["openfl.net.URLLoader"]=Qe;Qe.__name__=["openfl","net","URLLoader"];Qe.__super__=fa;Qe.prototype=n(fa.prototype,{getData:function(){return null},load:function(a){this.requestUrl(a.url,a.method,a.data,a.formatRequestHeaders())},registerEvents:function(a){var b=
this;"undefined"!=typeof XMLHttpRequestProgressEvent&&a.addEventListener("progress",l(this,this.onProgress),!1);a.onreadystatechange=function(){if(4==a.readyState){var c;try{c=a.status}catch(d){d instanceof u&&(d=d.val),c=null}void 0==c&&(c=null);if(null!=c)b.onStatus(c);if(null!=c&&200<=c&&400>c)b.onData(a.response);else if(null==c)b.onError("Failed to connect or resolve host");else if(12029==c)b.onError("Failed to connect to host");else if(12007==c)b.onError("Unknown host");else if(0==c)b.onError("Unable to make request (may be blocked due to cross-domain permissions)"),
b.onSecurityError("Unable to make request (may be blocked due to cross-domain permissions)");else b.onError("Http Error #"+a.status)}}},requestUrl:function(a,b,c,d){var e=new XMLHttpRequest;this.registerEvents(e);var f="";if(D.__instanceof(c,nb))switch(this.dataFormat){case 0:f=D.__cast(c,Lf);break;default:f=c.readUTFBytes(c.length)}else if(D.__instanceof(c,oh))for(var g=0,h=M.fields(c);g<h.length;){var k=h[g];++g;0!=f.length&&(f+="&");f+=encodeURIComponent(k)+"="+P.urlEncode(M.field(c,k))}else null!=
c&&(f=c.toString());try{if("GET"==b&&null!=f&&""!=f){var l=1>=a.split("?").length;e.open(b,a+(l?"?":"&")+ba.string(f),!0);f=""}else e.open(b,a,!0)}catch(m){m instanceof u&&(m=m.val);this.onError(m.toString());return}switch(this.dataFormat){case 0:e.responseType="arraybuffer"}for(a=0;a<d.length;)b=d[a],++a,e.setRequestHeader(b.name,b.value);e.send(f);this.onOpen();this.getData=function(){return null!=e.response?e.response:e.responseText}},onData:function(a){a=this.getData();switch(this.dataFormat){case 0:this.data=
Xa.fromArrayBuffer(a);break;default:this.data=ba.string(a)}a=new J("complete");a.currentTarget=this;this.dispatchEvent(a)},onError:function(a){var b=new jd("ioError");b.text=a;b.currentTarget=this;this.dispatchEvent(b)},onOpen:function(){var a=new J("open");a.currentTarget=this;this.dispatchEvent(a)},onProgress:function(a){var b=new uf("progress");b.currentTarget=this;b.bytesLoaded=a.loaded;b.bytesTotal=a.total;this.dispatchEvent(b)},onSecurityError:function(a){var b=new vf("securityError");b.text=
a;b.currentTarget=this;this.dispatchEvent(b)},onStatus:function(a){a=new tf("httpStatus",!1,!1,a);a.currentTarget=this;this.dispatchEvent(a)},set_dataFormat:function(a){0!=a||M.hasField(window,"ArrayBuffer")?this.dataFormat=a:this.dataFormat=1;return this.dataFormat},__class__:Qe,__properties__:{set_dataFormat:"set_dataFormat"}});var Uc=function(a){null!=a&&(this.url=a);this.requestHeaders=[];this.method=xf.toString(1);this.contentType=null};g["openfl.net.URLRequest"]=Uc;Uc.__name__=["openfl","net",
"URLRequest"];Uc.prototype={formatRequestHeaders:function(){var a=this.requestHeaders;null==a&&(a=[]);if(1==xf.fromString(this.method)||null==this.data)return a;if("string"==typeof this.data||D.__instanceof(this.data,nb))a=a.slice(),a.push(new Cg("Content-Type",null!=this.contentType?this.contentType:"application/x-www-form-urlencoded"));return a},__class__:Uc};var Cg=function(a,b){null==b&&(b="");null==a&&(a="");this.name=a;this.value=b};g["openfl.net.URLRequestHeader"]=Cg;Cg.__name__=["openfl",
"net","URLRequestHeader"];Cg.prototype={__class__:Cg};var xf={};g["openfl.net._URLRequestMethod.URLRequestMethod_Impl_"]=xf;xf.__name__=["openfl","net","_URLRequestMethod","URLRequestMethod_Impl_"];xf.fromString=function(a){switch(a){case "DELETE":return 0;case "GET":return 1;case "HEAD":return 2;case "OPTIONS":return 3;case "POST":return 4;case "PUT":return 5;default:return null}};xf.toString=function(a){switch(a){case 0:return"DELETE";case 1:return"GET";case 2:return"HEAD";case 3:return"OPTIONS";
case 4:return"POST";case 5:return"PUT";default:return null}};var oh=function(){};g["openfl.net.URLVariables"]=oh;oh.__name__=["openfl","net","URLVariables"];var Ch=function(){};g["openfl.system.LoaderContext"]=Ch;Ch.__name__=["openfl","system","LoaderContext"];var Zg=function(){};g["openfl.system.System"]=Zg;Zg.__name__=["openfl","system","System"];Zg.gc=function(){};var Lc=function(a){Sc.call(this,a)};g["openfl.text.Font"]=Lc;Lc.__name__=["openfl","text","Font"];Lc.__fromLimeFont=function(a){var b=
new Lc;b.name=a.name;b.src=a.src;return b};Lc.__super__=Sc;Lc.prototype=n(Sc.prototype,{__class__:Lc});var Dh=function(){};g["openfl.text.TextFormat"]=Dh;Dh.__name__=["openfl","text","TextFormat"];var la=function(){};g["openfl.ui.GameInput"]=la;la.__name__=["openfl","ui","GameInput"];la.__getDevice=function(a){if(null==a)return null;if(null==la.__devices.h.__keys__[a.__id__]){var b=new Dg(a.get_guid(),a.get_name());la.__deviceList.push(b);la.__devices.set(a,b);la.numDevices=la.__deviceList.length}return la.__devices.h[a.__id__]};
la.__onGamepadAxisMove=function(a,b,c){a=la.__getDevice(a);if(null!=a&&a.enabled){if(!a.__axis.h.hasOwnProperty(b)){var d;switch(b){case 0:d="LEFT_X";break;case 1:d="LEFT_Y";break;case 2:d="RIGHT_X";break;case 3:d="RIGHT_Y";break;case 4:d="TRIGGER_LEFT";break;case 5:d="TRIGGER_RIGHT";break;default:d="UNKNOWN ("+b+")"}d=new Cc(a,"AXIS_"+d,-1,1);a.__axis.h[b]=d;a.__controls.push(d)}b=a.__axis.h[b];b.value=c;b.dispatchEvent(new J("change"))}};la.__onGamepadButtonDown=function(a,b){var c=la.__getDevice(a);
if(null!=c&&c.enabled){if(!c.__button.h.hasOwnProperty(b)){var d;switch(b){case 0:d="A";break;case 1:d="B";break;case 2:d="X";break;case 3:d="Y";break;case 4:d="BACK";break;case 5:d="GUIDE";break;case 6:d="START";break;case 7:d="LEFT_STICK";break;case 8:d="RIGHT_STICK";break;case 9:d="LEFT_SHOULDER";break;case 10:d="RIGHT_SHOULDER";break;case 11:d="DPAD_UP";break;case 12:d="DPAD_DOWN";break;case 13:d="DPAD_LEFT";break;case 14:d="DPAD_RIGHT";break;default:d="UNKNOWN ("+b+")"}d=new Cc(c,"BUTTON_"+d,
0,1);c.__button.h[b]=d;c.__controls.push(d)}c=c.__button.h[b];c.value=1;c.dispatchEvent(new J("change"))}};la.__onGamepadButtonUp=function(a,b){var c=la.__getDevice(a);if(null!=c&&c.enabled){if(!c.__button.h.hasOwnProperty(b)){var d;switch(b){case 0:d="A";break;case 1:d="B";break;case 2:d="X";break;case 3:d="Y";break;case 4:d="BACK";break;case 5:d="GUIDE";break;case 6:d="START";break;case 7:d="LEFT_STICK";break;case 8:d="RIGHT_STICK";break;case 9:d="LEFT_SHOULDER";break;case 10:d="RIGHT_SHOULDER";
break;case 11:d="DPAD_UP";break;case 12:d="DPAD_DOWN";break;case 13:d="DPAD_LEFT";break;case 14:d="DPAD_RIGHT";break;default:d="UNKNOWN ("+b+")"}d=new Cc(c,"BUTTON_"+d,0,1);c.__button.h[b]=d;c.__controls.push(d)}c=c.__button.h[b];c.value=0;c.dispatchEvent(new J("change"))}};la.__onGamepadConnect=function(a){a=la.__getDevice(a);if(null!=a)for(var b=0,c=la.__instances;b<c.length;){var d=c[b];++b;d.dispatchEvent(new Kd("deviceAdded",null,null,a))}};la.__onGamepadDisconnect=function(a){var b=la.__devices.h[a.__id__];
if(null!=b){null!=la.__devices.h.__keys__[a.__id__]&&(r.remove(la.__deviceList,la.__devices.h[a.__id__]),la.__devices.remove(a));la.numDevices=la.__deviceList.length;a=0;for(var c=la.__instances;a<c.length;){var d=c[a];++a;d.dispatchEvent(new Kd("deviceRemoved",null,null,b))}}};la.__super__=fa;la.prototype=n(fa.prototype,{__class__:la});var Cc=function(a,b,c,d,e){null==e&&(e=0);fa.call(this);this.device=a;this.id=b;this.minValue=c;this.maxValue=d;this.value=e};g["openfl.ui.GameInputControl"]=Cc;Cc.__name__=
["openfl","ui","GameInputControl"];Cc.__super__=fa;Cc.prototype=n(fa.prototype,{__class__:Cc});var Dg=function(a,b){this.__controls=[];this.__button=new ga;this.__axis=new ga;this.id=a;this.name=b;for(var c,d=0;6>d;){var e=d++;c=new Cc(this,"AXIS_"+e,-1,1);this.__axis.h[e]=c;this.__controls.push(c)}for(d=0;15>d;)e=d++,c=new Cc(this,"BUTTON_"+e,0,1),this.__button.h[e]=c,this.__controls.push(c)};g["openfl.ui.GameInputDevice"]=Dg;Dg.__name__=["openfl","ui","GameInputDevice"];Dg.prototype={__class__:Dg};
var fh=function(){};g["openfl.ui.Keyboard"]=fh;fh.__name__=["openfl","ui","Keyboard"];fh.__getCharCode=function(a,b){null==b&&(b=!1);if(b){switch(a){case 48:return 41;case 49:return 33;case 50:return 64;case 51:return 35;case 52:return 36;case 53:return 37;case 54:return 94;case 55:return 38;case 56:return 42;case 57:return 40;case 186:return 58;case 187:return 43;case 188:return 60;case 189:return 95;case 190:return 62;case 191:return 63;case 192:return 126;case 219:return 123;case 220:return 124;
case 221:return 125;case 222:return 34}if(65<=a&&90>=a)return a-65+65}else{switch(a){case 8:return 8;case 9:return 9;case 13:return 13;case 27:return 27;case 32:return 32;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}if(48<=a&&57>=a)return a-48+48;if(65<=a&&90>=a)return a-65+97}if(96<=a&&105>=a)return a-96+48;switch(a){case 106:return 42;
case 107:return 43;case 108:return 44;case 110:return 45;case 111:return 46;case 46:return 127;case 13:return 13;case 8:return 8}return 0};var yb=function(){};g["openfl.ui.Multitouch"]=yb;yb.__name__=["openfl","ui","Multitouch"];yb.__properties__={get_supportsTouchEvents:"get_supportsTouchEvents",set_inputMode:"set_inputMode",get_inputMode:"get_inputMode"};yb.maxTouchPoints=null;yb.supportedGestures=null;yb.supportsGestureEvents=null;yb.get_inputMode=function(){return 2};yb.set_inputMode=function(a){return 0==
a?yb.get_inputMode():a};yb.get_supportsTouchEvents=function(){return"ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1};var Xa={};g["openfl.utils._ByteArray.ByteArray_Impl_"]=Xa;Xa.__name__=["openfl","utils","_ByteArray","ByteArray_Impl_"];Xa.__properties__={get_length:"get_length"};Xa.fromArrayBuffer=function(a){return nb.fromBytes(Y.ofData(a))};Xa.fromBytes=function(a){return D.__instanceof(a,nb)?a:nb.fromBytes(a)};Xa.toBytes=function(a){return a};
Xa.get_length=function(a){return a.length};var Eg=function(){};g["openfl.utils.IDataOutput"]=Eg;Eg.__name__=["openfl","utils","IDataOutput"];Eg.prototype={__class__:Eg};var Fg=function(){};g["openfl.utils.IDataInput"]=Fg;Fg.__name__=["openfl","utils","IDataInput"];Fg.prototype={__class__:Fg};var nb=function(a){null==a&&(a=0);var b=Y.alloc(a);Y.call(this,b.b.buffer);this.__length=a;this.position=this.__endian=0};g["openfl.utils.ByteArrayData"]=nb;nb.__name__=["openfl","utils","ByteArrayData"];nb.__interfaces__=
[Eg,Fg];nb.fromBytes=function(a){var b=new nb;b.__fromBytes(a);return b};nb.__super__=Y;nb.prototype=n(Y.prototype,{readBoolean:function(){if(this.position<this.length)return 0!=this.get(this.position++);throw new u(new Qc);},readByte:function(){var a=this.readUnsignedByte();return 0!=(a&128)?a-256:a},readBytes:function(a,b,c){null==c&&(c=0);null==b&&(b=0);0==c&&(c=this.length-this.position);if(this.position+c>this.length)throw new u(new Qc);a.length<b+c&&a.__resize(b+c);a.blit(b,this,this.position,
c);this.position+=c},readInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readUnsignedByte:function(){if(this.position<this.length)return this.get(this.position++);throw new u(new Qc);},readUnsignedInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:
a<<24|b<<16|c<<8|d},readUnsignedShort:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte();return 1==this.__endian?(b<<8)+a:a<<8|b},readUTF:function(){var a=this.readUnsignedShort();return this.readUTFBytes(a)},readUTFBytes:function(a){if(this.position+a>this.length)throw new u(new Qc);this.position+=a;return this.getString(this.position-a,a)},uncompress:function(a){null==a&&(a=2);if(this.__length>this.length){var b=this.length;this.length=this.__length;var c=Y.alloc(b);c.blit(0,this,
0,b);this.b=c.b;this.__length=c.length;this.data=c.data;this.length=b}switch(a){case 0:a=Wg.decompress(this);break;case 1:a=Xg.decompress(this);break;default:a=Yg.decompress(this)}null!=a&&(this.b=a.b,this.__length=a.length,this.data=a.data,this.position=this.length=this.__length)},writeBytes:function(a,b,c){null==c&&(c=0);null==b&&(b=0);0!=Xa.get_length(a)&&(0==c&&(c=Xa.get_length(a)-b),this.__resize(this.position+c),this.blit(this.position,a,b,c),this.position+=c)},writeUTFBytes:function(a){Y.ofString(a);
this.writeBytes(Xa.fromBytes(Y.ofString(a)))},__fromBytes:function(a){this.b=a.b;this.__length=a.length;this.data=a.data;this.length=a.length},__resize:function(a){if(a>this.__length){var b=Y.alloc(3*(a+1)>>1),c=this.length;this.length=this.__length;b.blit(0,this,0,this.__length);this.length=c;this.b=b.b;this.__length=b.length;this.data=b.data}this.length<a&&(this.length=a)},__class__:nb});var ih=function(){};g["haxe.lang.Iterator"]=ih;ih.__name__=["haxe","lang","Iterator"];ih.prototype={__class__:ih};
var jh=function(){};g["haxe.lang.Iterable"]=jh;jh.__name__=["haxe","lang","Iterable"];jh.prototype={__class__:jh};var nh,Lh=0;Array.prototype.indexOf&&(r.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});g.Math=Math;String.prototype.__class__=g.String=String;String.__name__=["String"];g.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=g.Date=Date;Date.__name__=["Date"];var rh=g.Int={__name__:["Int"]},Mh=g.Dynamic={__name__:["Dynamic"]},mh=g.Float=Number;mh.__name__=
["Float"];var sh=g.Bool=Boolean;sh.__ename__=["Bool"];var ph=g.Class={__name__:["Class"]},qh={},va={},Lf=kh.ArrayBuffer||Vb;null==Lf.prototype.slice&&(Lf.prototype.slice=Vb.sliceImpl);var Nb=kh.Uint8Array||tc._new,Eh;Eh=new Uint32Array(256);Db.__alpha16=Eh;for(var Fh=0;256>Fh;){var Gh=Fh++,Nh=Math.ceil(257.00392156862745*Gh);Db.__alpha16[Gh]=Nh}var Hh;Hh=new Nb(510);Db.__clamp=Hh;for(var Ih=0;255>Ih;){var Jh=Ih++;Db.__clamp[Jh]=Jh}for(var Kh=255;511>Kh;){var Oh=Kh++;Db.__clamp[Oh]=255}null!=window.createjs&&
(createjs.Sound.alternateExtensions=["ogg","m4a","mp3","wav"]);yb.maxTouchPoints=2;yb.supportedGestures=null;yb.supportsGestureEvents=!1;T.__instanceCount=0;T.__worldRenderDirty=0;T.__worldTransformDirty=0;Q._list=new ma;Q._list1=new ma;E._gid=0;E._destroys=new ga;Mb.USE_CACHE=!1;Mb.USE_ENUM_INDEX=!1;Mb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";wb.DEFAULT_RESOLVER=Z;wb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";wb.CODES=null;fc.count=
0;Tb.i64tmp=new Hf(0,0);Va.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];Va.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];Va.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];Va.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];Va.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,
4,12,3,13,2,14,1,15];Va.FIXED_HUFFMAN=null;D.__toStr={}.toString;tc.BYTES_PER_ELEMENT=1;H.cache=new Qf;H.libraries=new G;H.onChange=new Ra;H.initialized=!1;qd.windowID=0;Sa.images=new G;Sa.loaders=new G;ra.__base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";na.__identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Wa.devices=new ga;Wa.onConnect=new Zf;Ma.devices=new ga;Ma.onConnect=new $f;rb.onEnd=new rd;rb.onMove=new rd;rb.onStart=new rd;ic.instance=new ic;C.ENTER_FRAME=new Na("LEvent.ENTER_FRAME");
C.EXIT_FRAME=new Na("LEvent.EXIT_FRAME");C.COMPLETE=new Na("LEvent.COMPLETE");C.START=new Na("LEvent.START");C.STOP=new Na("LEvent.STOP");C.PAUSE=new Na("LEvent.PAUSE");C.LOOP=new Na("LEvent.LOOP");C.FINISH=new Na("LEvent.FINISH");C.INIT=new Na("LEvent.INIT");C.RESTORE=new Na("LEvent.RESTORE");C.ACTIVATE=new Na("LEvent.ACTIVATE");C.DEACTIVATE=new Na("LEvent.DEACTIVATE");C.CHANGE=new Na("LEvent.CHANGE");C.RESIZE=new Na("LEvent.RESIZE");C.ORIENTATION_CHANGE=new Na("LEvent.OrientationChange");C.TOUCH_CHANGE=
new ue("LTouchEvent.CHANGE");lc.CHANGE=new lc("LKeyEvent.CHANGE");La.pause=!1;La.targetFPS=60;La.timeScale=1;La._gcDirty=!1;Za.list=[];oa.transformCount=0;oa.displayCount=0;oa.drawCount=0;oa.fps=60;oa.logicTime=0;oa.renderTime=0;oa._frameTime=0;oa._frameCount=0;Ia._textureID=0;Ia._textureMap=new ga;Ia._activeID=-1;Ia._locationID=-1;Pa.instance=new Pa;F.width=800;F.height=480;F.currentOrientation=0;F.renderToTexture=!1;F.backgroundColor=(new Pa).Set(0,0,0,0);F.maxRenderTextureSize=1024;F.renderTexture=
new xe(F.maxRenderTextureSize,F.maxRenderTextureSize);F._screenTexture=new Ia;Bb._destroys=new ma;dd._pool=new mc(function(){return new jg});Gc._richTextParser=new dd;sa._ID=1;sa._nameMap=new G;sa._idMap=new ga;rc.CHANGE=new rc("PickEvent.change");Da._id=0;Da._size=[3,3,3,2,2,4,8];ia._uniform="uniform vec4 _Time;\r\nuniform mat4 _Projection;\r\nuniform mat4 _View;\r\nuniform mat4 _Model;\r\nuniform mat4 _ModelInverse;\r\nuniform mat4 _ProjectionView;\r\nuniform mat4 _ProjectionViewInverse;\r\nuniform mat4 _ViewInverse;\r\nuniform vec3 _CameraPosition;\r\nuniform vec4 _Color;\r\nuniform sampler2D _Texture0;\r\nuniform sampler2D _Texture1;\r\nuniform sampler2D _Texture2;\r\nuniform sampler2D _Texture3;\r\nuniform vec2 _TextureSize0;\r\nuniform vec2 _TextureSize1;\r\nuniform vec2 _TextureSize2;\r\nuniform vec2 _TextureSize3;\r\nuniform vec2 _TextureUvTiling0;\r\nuniform vec2 _TextureUvTiling1;\r\nuniform vec2 _TextureUvTiling2;\r\nuniform vec2 _TextureUvTiling3;\r\nuniform vec2 _TextureUvOffset0;\r\nuniform vec2 _TextureUvOffset1;\r\nuniform vec2 _TextureUvOffset2;\r\nuniform vec2 _TextureUvOffset3;\r\nuniform sampler2D _ScreenTexture;\r\nuniform vec2 _ScreenTextureSize;\r\n";
ia._struct="struct Light\r\n{\r\n\tint type;\r\n\tvec3 position;\r\n\tvec4 ambientColor;\r\n\tvec2 diffuseRange;\r\n\tvec4 diffuseColor;\r\n\tvec4 specularColor;\r\n\tfloat shininess;\r\n};\r\nstruct LightColor\r\n{\r\n\tvec4 diffuseColor;\r\n\tvec4 specularColor;\r\n};\r\n";ia._function="LightColor GetLightColor(Light light,vec3 normal,vec3 eye)\r\n{\r\n\tLightColor color;\r\n\tvec3  invLight = normalize(_ModelInverse * vec4(light.position, 0.0)).xyz;\r\n\tvec3  invEye   = normalize(_ModelInverse * vec4(eye, 0.0)).xyz;\r\n\tvec3  halfLE   = normalize(invLight + invEye);\r\n\t//float diffuse  = clamp(dot(normal, invLight), light.diffuseRange.x,  light.diffuseRange.y);\r\n\tfloat diffuse  = clamp(dot(normal, invLight), 0.6,  1.0);\r\n\tcolor.diffuseColor=vec4(vec3(diffuse), 1.0);\r\n\tif(light.shininess>1.0)\r\n\t{\r\n\t\tfloat specular = pow(clamp(dot(normal, halfLE), 0.0, 1.0), light.shininess);\r\n\t\tcolor.specularColor=vec4(vec3(specular), 1.0)*light.specularColor;\r\n\t}else\r\n\t{\r\n\t\tcolor.specularColor=vec4(0.0);\r\n\t}\t\r\n\treturn color;\r\n}\r\n";
ia._vert="uniform Light _Light;\r\nattribute vec3 _InPosition;\r\nattribute vec3 _InNormal;\r\nattribute vec4 _InColor;\r\nattribute vec2 _InUv;\r\n";ia._frag="";Ja._bufferID=0;Ja._bufferMap=new ga;R._programID=0;R._map=new ga;R._errorProgramVariable=new gd(-1);R._frameUniforms=new G;R._globalUniforms=new G;zd.instance=new zd;Ta.instance=new Ta;Ta.instance3=new Ta;Ta._instance1=new Ta;A.instance=new A;A.instance1=new A;A.instance2=new A;A.instance3=new A;A.instance4=new A;A.instance5=new A;A.instance6=
new A;A.instance7=new A;A.instance8=new A;A.instance9=new A;Sb.instance=new Sb;W.instance=new W;W.instance1=new W;ya._medias=new ga;ya._ID=0;mb.cache=[];y._charCodeList=new ma;y._charCodeList1=new ma;y.document=window;h.altKey=!1;h.commandKey=!1;h.controlKey=!1;h.shiftKey=!1;h._event_change=new z;oc._init=!1;aa.hasLocalStoragePermission=!0;aa.loading=new Pe;aa._loaderList=[];aa._globalPath="";aa._loadingMap=new ga;aa._loadData=new mb;aa._versionMap=new G;Ea.instance=new Ea;ob.instance=new ob;ob._types=
"Linear SineIn SineOut SineInOut SineOutIn QuadIn QuadOut QuadInOut QuadOutIn CubicIn CubicOut CubicInOut CubicOutIn QuartIn QuartOut QuartInOut QuartOutIn QuintIn QuintOut QuintInOut QuintOutIn ExpoIn ExpoOut ExpoInOut ExpoOutIn CircIn CircOut CircInOut CircOutIn BounceIn BounceOut BounceInOut BounceOutIn BackIn BackOut BackInOut BackOutIn ElasticIn ElasticOut ElasticInOut ElasticOutIn".split(" ");nc.instance=new nc;B.E=2.718281828459045;B.PI=3.141592653589793;B.HalfPI=1.5707963267948966;B.PI2=6.283185307179586;
B.PI4=12.566370614359172;B.Rad2Deg=57.29577951308232;B.Deg2Rad=.017453292519943295;B.Byte2Float=.00392156863;B.Short2Float=1.52587890625E-5;B.Long2Float=2.3283064365386963E-10;B.Float2Byte=255;B.Float2Short=65536;B.Float2Long=4294967296;B.LN2=.6931471805599453;B.LN10=2.302585092994046;B.LOG2E=1.4426950408889634;B.LOG10E=.43429448190325176;B.SQRT1_2=.7071067811865476;B.SQRT2=1.4142135623730951;B.INT_MIN=-2147483648;B.INT_MAX=2147483647;B.FLOAT_MIN=-1.79769313486231E308;B.FLOAT_MAX=1.79769313486231E308;
hd.instance=new hd;qc._typeMap=new fc;Rb._chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Rb._uuid=[];Fb._atlas=new G;ca.cache=new Ze;dc.__rootURL=window.document.URL;id.currentDomain=new id(null);Ha.__identity=new Ha;Ha.__temp=new Ha;ua.current=new $e;qa.SIN45=.7071067811865476;qa.TAN22=.41421356237309503;k.SIN45=.7071067811865476;k.TAN22=.41421356237309503;k.fillCommands=new Ed;k.strokeCommands=new Ed;Ka.__temp=new Ka;Jb.__registeredSounds=new G;Lb.__soundChannels=
[];Lb.__soundTransform=new Kc;la.numDevices=0;la.__deviceList=[];la.__devices=new fc;la.__instances=[];ja.main()})("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
