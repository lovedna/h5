var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(y,qa,n){y!=Array.prototype&&y!=Object.prototype&&(y[qa]=n.value)};$jscomp.getGlobal=function(y){return"undefined"!=typeof window&&window===y?y:"undefined"!=typeof global&&null!=global?global:y};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var y=0;return function(qa){return $jscomp.SYMBOL_PREFIX+(qa||"")+y++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var y=$jscomp.global.Symbol.iterator;y||(y=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[y]&&$jscomp.defineProperty(Array.prototype,y,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(y){var qa=0;return $jscomp.iteratorPrototype(function(){return qa<y.length?{done:!1,value:y[qa++]}:{done:!0}})};$jscomp.iteratorPrototype=function(y){$jscomp.initSymbolIterator();y={next:y};y[$jscomp.global.Symbol.iterator]=function(){return this};return y};
$jscomp.iteratorFromArray=function(y,qa){$jscomp.initSymbolIterator();y instanceof String&&(y+="");var n=0,h={next:function(){if(n<y.length){var f=n++;return{value:qa(f,y[f]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(y,qa,n,h){if(qa){n=$jscomp.global;y=y.split(".");for(h=0;h<y.length-1;h++){var f=y[h];f in n||(n[f]={});n=n[f]}y=y[y.length-1];h=n[y];qa=qa(h);qa!=h&&null!=qa&&$jscomp.defineProperty(n,y,{configurable:!0,writable:!0,value:qa})}};$jscomp.polyfill("Array.prototype.keys",function(y){return y?y:function(){return $jscomp.iteratorFromArray(this,function(y){return y})}},"es6","es3");
$jscomp.checkStringArgs=function(y,qa,n){if(null==y)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(qa instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return y+""};
$jscomp.polyfill("String.prototype.startsWith",function(y){return y?y:function(y,n){var h=$jscomp.checkStringArgs(this,y,"startsWith");y+="";var f=h.length,z=y.length;n=Math.max(0,Math.min(n|0,h.length));for(var qa=0;qa<z&&n<f;)if(h[n++]!=y[qa++])return!1;return qa>=z}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(y){return y?y:function(y,n){var h=$jscomp.checkStringArgs(this,y,"endsWith");y+="";void 0===n&&(n=h.length);n=Math.max(0,Math.min(n|0,h.length));for(var f=y.length;0<f&&0<n;)if(h[--n]!=y[--f])return!1;return 0>=f}},"es6","es3");
(function(y,qa){function n(a,b){function c(){}c.prototype=a;a=new c;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function h(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=kg++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}y.Ease=y.Ease||{};y.lime=y.lime||{};var f={},z=function(){return B.__string_rec(this,
"")},le=function(){};f["lime.app.IModule"]=le;le.__name__=["lime","app","IModule"];le.prototype={__class__:le};var Fb=function(){this.onExit=new cc;this.__renderers=[];this.__windows=[]};f["lime.app.Module"]=Fb;Fb.__name__=["lime","app","Module"];Fb.__interfaces__=[le];Fb.prototype={addRenderer:function(a){var b=h(this,this.render);a.onRender.add(function(){b(a)});var c=h(this,this.onRenderContextLost);a.onContextLost.add(function(){c(a)});var d=h(this,this.onRenderContextRestored);a.onContextRestored.add(function(b){d(a,
b)});this.__renderers.push(a)},addWindow:function(a){var b=h(this,this.onWindowActivate);a.onActivate.add(function(){b(a)});var c=h(this,this.__onWindowClose);a.onClose.add(function(){c(a)},!1,-1E4);var d=h(this,this.onWindowCreate);a.onCreate.add(function(){d(a)});var e=h(this,this.onWindowDeactivate);a.onDeactivate.add(function(){e(a)});var g=h(this,this.onWindowDropFile);a.onDropFile.add(function(b){g(a,b)});var I=h(this,this.onWindowEnter);a.onEnter.add(function(){I(a)});var f=h(this,this.onWindowFocusIn);
a.onFocusIn.add(function(){f(a)});var k=h(this,this.onWindowFocusOut);a.onFocusOut.add(function(){k(a)});var l=h(this,this.onWindowFullscreen);a.onFullscreen.add(function(){l(a)});var m=h(this,this.onKeyDown);a.onKeyDown.add(function(b,c){m(a,b,c)});var n=h(this,this.onKeyUp);a.onKeyUp.add(function(b,c){n(a,b,c)});var t=h(this,this.onWindowLeave);a.onLeave.add(function(){t(a)});var p=h(this,this.onWindowMinimize);a.onMinimize.add(function(){p(a)});var q=h(this,this.onMouseDown);a.onMouseDown.add(function(b,
c,d){q(a,b,c,d)});var r=h(this,this.onMouseMove);a.onMouseMove.add(function(b,c){r(a,b,c)});var u=h(this,this.onMouseMoveRelative);a.onMouseMoveRelative.add(function(b,c){u(a,b,c)});var v=h(this,this.onMouseUp);a.onMouseUp.add(function(b,c,d){v(a,b,c,d)});var w=h(this,this.onMouseWheel);a.onMouseWheel.add(function(b,c){w(a,b,c)});var x=h(this,this.onWindowMove);a.onMove.add(function(b,c){x(a,b,c)});var y=h(this,this.onWindowResize);a.onResize.add(function(b,c){y(a,b,c)});var z=h(this,this.onWindowRestore);
a.onRestore.add(function(){z(a)});var A=h(this,this.onTextEdit);a.onTextEdit.add(function(b,c,d){A(a,b,c,d)});var B=h(this,this.onTextInput);a.onTextInput.add(function(b){B(a,b)});if(-1<a.id)this.onWindowCreate(a);this.__windows.push(a)},registerModule:function(a){this.__application=a;a.onExit.add(h(this,this.onModuleExit),!1,0);a.onUpdate.add(h(this,this.update));for(a=Ga.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}Ga.onConnect.add(h(this,this.__onGamepadConnect));
for(a=za.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);za.onConnect.add(h(this,this.__onJoystickConnect));Ha.onCancel.add(h(this,this.onTouchCancel));Ha.onStart.add(h(this,this.onTouchStart));Ha.onMove.add(h(this,this.onTouchMove));Ha.onEnd.add(h(this,this.onTouchEnd))},removeRenderer:function(a){null!=a&&-1<this.__renderers.indexOf(a)&&w.remove(this.__renderers,a)},setPreloader:function(a){null!=this.__preloader&&(this.__preloader.onProgress.remove(h(this,this.onPreloadProgress)),
this.__preloader.onComplete.remove(h(this,this.onPreloadComplete)));this.__preloader=a;if(null==a||a.complete)this.onPreloadComplete();else a.onProgress.add(h(this,this.onPreloadProgress)),a.onComplete.add(h(this,this.onPreloadComplete))},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,b){},onGamepadButtonUp:function(a,b){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,b,c){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,
b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c,d){},onKeyDown:function(a,b,c){},onKeyUp:function(a,b,c){},onModuleExit:function(a){},onMouseDown:function(a,b,c,d){},onMouseMove:function(a,b,c){},onMouseMoveRelative:function(a,b,c){},onMouseUp:function(a,b,c,d){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,b){},onRenderContextLost:function(a){},onRenderContextRestored:function(a,
b){},onTextEdit:function(a,b,c,d){},onTextInput:function(a,b){},onTouchCancel:function(a){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(a){},onWindowClose:function(a){},onWindowCreate:function(a){},onWindowDeactivate:function(a){},onWindowDropFile:function(a,b){},onWindowEnter:function(a){},onWindowFocusIn:function(a){},onWindowFocusOut:function(a){},onWindowFullscreen:function(a){},onWindowLeave:function(a){},onWindowMove:function(a,b,c){},
onWindowMinimize:function(a){},onWindowResize:function(a,b,c){},onWindowRestore:function(a){},render:function(a){},update:function(a){},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=h(this,this.onGamepadAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=h(this,this.onGamepadButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=h(this,this.onGamepadButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=h(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){e(a)})},
__onJoystickConnect:function(a){this.onJoystickConnect(a);var b=h(this,this.onJoystickAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=h(this,this.onJoystickButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=h(this,this.onJoystickButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=h(this,this.onJoystickDisconnect);a.onDisconnect.add(function(){e(a)});var g=h(this,this.onJoystickHatMove);a.onHatMove.add(function(b,c){g(a,b,c)});var I=h(this,this.onJoystickTrackballMove);a.onTrackballMove.add(function(b,
c,d){I(a,b,c,d)})},__onWindowClose:function(a){this.onWindowClose(a);w.remove(this.__windows,a)},__class__:Fb};var me=function(a){this.gameDeviceCache=new ba;this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;dc.init()};f["lime._backend.html5.HTML5Application"]=me;me.__name__=["lime","_backend","html5","HTML5Application"];me.prototype={convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;
case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 45:return 1073741897;case 46:return 127;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;
case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;
case 125:return 1073741929;case 126:return 1073741930;case 144:return 1073741907;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}return a},create:function(a){},exec:function(){window.addEventListener("keydown",h(this,this.handleKeyEvent),!1);window.addEventListener("keyup",h(this,this.handleKeyEvent),!1);window.addEventListener("focus",h(this,
this.handleWindowEvent),!1);window.addEventListener("blur",h(this,this.handleWindowEvent),!1);window.addEventListener("resize",h(this,this.handleWindowEvent),!1);window.addEventListener("beforeunload",h(this,this.handleWindowEvent),!1);CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(a,b,c){return!1});CanvasRenderingContext2D.prototype.isPointInPath||(CanvasRenderingContext2D.prototype.isPointInPath=function(a,b,c){return!1});0=="performance"in
window&&(window.performance={});if(0=="now"in window.performance){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart);window.performance.now=function(){return Date.now()-a}}for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||
(window.requestAnimationFrame=function(a,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b));c=window.setTimeout(function(){a(d+e)},e);b=d+e;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){null!=this.parent.__windows[0]&&this.parent.__windows[0].backend.updateSize();
this.updateGameDevices();this.currentUpdate=(new Date).getTime();this.currentUpdate>=this.nextUpdate&&(this.deltaTime=this.currentUpdate-this.lastUpdate,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=this.parent.__renderers[0]&&null!=this.parent.__renderers[0].context&&(this.parent.__renderers[0].render(),this.parent.__renderers[0].onRender.dispatch(),this.parent.__renderers[0].onRender.canceled||this.parent.__renderers[0].flip()),this.nextUpdate=0>this.framePeriod?this.currentUpdate:this.currentUpdate+
this.framePeriod,this.lastUpdate=this.currentUpdate);window.requestAnimationFrame(h(this,this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.__windows[0]){var b=this.convertKeyCode(null!=a.keyCode?a.keyCode:a.which),c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.__windows[0].onKeyDown.dispatch(b,c),this.parent.__windows[0].onKeyDown.canceled&&a.preventDefault()):(this.parent.__windows[0].onKeyUp.dispatch(b,c),this.parent.__windows[0].onKeyUp.canceled&&
a.preventDefault())}},handleWindowEvent:function(a){if(null!=this.parent.__windows[0])switch(a.type){case "beforeunload":a.defaultPrevented||(this.parent.__windows[0].onClose.dispatch(),null!=this.parent.__windows[0]&&this.parent.__windows[0].onClose.canceled&&a.preventDefault());break;case "blur":this.parent.__windows[0].onFocusOut.dispatch();this.parent.__windows[0].onDeactivate.dispatch();break;case "focus":this.parent.__windows[0].onFocusIn.dispatch();this.parent.__windows[0].onActivate.dispatch();
break;case "resize":this.parent.__windows[0].backend.handleResizeEvent(a)}},setFrameRate:function(a){this.framePeriod=60<=a?-1:0<a?1E3/a:1E3;return a},updateGameDevices:function(){var a=za.__getDeviceData();if(null!=a)for(var b,c,d,e,g,I=0,f=a.length;I<f;)if(b=I++,e=a[b],null!=e){if(!this.gameDeviceCache.h.hasOwnProperty(b)){g=new ne;g.id=b;g.connected=e.connected;c=0;for(d=e.buttons.length;c<d;){var k=c++;g.buttons.push(e.buttons[k].value)}c=0;for(d=e.axes.length;c<d;)k=c++,g.axes.push(e.axes[k]);
"standard"==e.mapping&&(g.isGamepad=!0);this.gameDeviceCache.h[b]=g;e.connected&&(za.__connect(b),g.isGamepad&&Ga.__connect(b))}g=this.gameDeviceCache.h[b];d=za.devices.h[b];c=Ga.devices.h[b];if(e.connected){for(var h=0,l=e.buttons.length;h<l;){var m=h++;k=e.buttons[m].value;if(k!=g.buttons[m]){if(6==m)d.onAxisMove.dispatch(e.axes.length,k),null!=c&&c.onAxisMove.dispatch(4,k);else if(7==m)d.onAxisMove.dispatch(e.axes.length+1,k),null!=c&&c.onAxisMove.dispatch(5,k);else if(0<k?d.onButtonDown.dispatch(m):
d.onButtonUp.dispatch(m),null!=c){switch(m){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<k?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}g.buttons[m]=k}}b=0;for(k=e.axes.length;b<k;)h=b++,e.axes[h]!=g.axes[h]&&(d.onAxisMove.dispatch(h,e.axes[h]),null!=c&&
c.onAxisMove.dispatch(h,e.axes[h]),g.axes[h]=e.axes[h])}else g.connected&&(g.connected=!1,za.__disconnect(b),Ga.__disconnect(b))}},__class__:me};var Za=function(){this.onUpdate=new cc;Fb.call(this);null==Za.current&&(Za.current=this);this.modules=[];this.windowByID=new ba;this.backend=new me(this);this.registerModule(this)};f["lime.app.Application"]=Za;Za.__name__=["lime","app","Application"];Za.__super__=Fb;Za.prototype=n(Fb.prototype,{addRenderer:function(a){Fb.prototype.addRenderer.call(this,a);
for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addRenderer(a)}},create:function(a){this.config=a;this.backend.create(a);if(null!=a){Object.prototype.hasOwnProperty.call(a,"fps")&&this.backend.setFrameRate(a.fps);if(Object.prototype.hasOwnProperty.call(a,"windows"))for(a=a.windows;0<a.length;){a=new oe(a[0]);this.createWindow(a);break}if(null==this.__preloader||this.__preloader.complete){this.setPreloader(this.__preloader);a=0;for(var b=this.modules;a<b.length;)++a,this.setPreloader(this.__preloader)}}},
createWindow:function(a){Fb.prototype.addWindow.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addWindow(a)}null==a.renderer&&(b=new pe(a),this.addRenderer(b));a.create(this);this.windowByID.h[a.id]=a;a.onCreate.dispatch()},exec:function(){Za.current=this;return this.backend.exec()},onModuleExit:function(a){this.backend.exit()},onWindowClose:function(a){this.removeWindow(a)},removeWindow:function(a){null!=a&&this.windowByID.h.hasOwnProperty(a.id)&&(w.remove(this.__windows,a),
this.windowByID.remove(a.id),a.close(),null!=a.renderer&&this.removeRenderer(a.renderer),this.__windows[0]==a&&(this.window=null),0==this.__windows.length&&ma.exit(0))},setPreloader:function(a){Fb.prototype.setPreloader.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.setPreloader(a)}},__class__:Za});var ec=function(){};f.ApplicationMain=ec;ec.__name__=["ApplicationMain"];ec.main=function(){ma.__registerEntryPoint("knifeHit",ec.create,{build:"1164",company:"liwei",file:"knifeHit",
fps:60,name:"knifeHit",orientation:"",packageName:"knifeHit",version:"1.0.0",windows:[{allowHighDPI:!1,alwaysOnTop:!1,antialiasing:0,background:16777215,borderless:!1,colorDepth:16,depthBuffer:!0,display:0,fullscreen:!1,hardware:!0,height:0,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,stencilBuffer:!0,title:"knifeHit",vsync:!1,width:0,x:null,y:null}]})};ec.create=function(a){Mb.init(a);var b=new qe,c=new Nc;c.setPreloader(b);c.create(a);b.create(a);a=0;for(var d=Mb.preloadLibraries;a<
d.length;){var e=d[a];++a;b.addLibrary(e)}a=0;for(d=Mb.preloadLibraryNames;a<d.length;)e=d[a],++a,b.addLibraryName(e);b.load();ec.start(c)};ec.start=function(a){a.exec()};var Oc=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};f.EReg=Oc;Oc.__name__=["EReg"];Oc.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new q("EReg::matched");
},__class__:Oc};var w=function(){};f.HxOverrides=w;w.__name__=["HxOverrides"];w.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new q("Invalid date format : "+a);}};w.cca=function(a,b){a=a.charCodeAt(b);if(a==
a)return a};w.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};w.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};w.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var sc=function(){this.length=0};f.List=sc;sc.__name__=["List"];sc.prototype={add:function(a){a=new re(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;
this.length++},pop:function(){if(null==this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a},iterator:function(){return new se(this.h)},__class__:sc};var re=function(a,b){this.item=a;this.next=b};f["_List.ListNode"]=re;re.__name__=["_List","ListNode"];re.prototype={__class__:re};var se=function(a){this.head=a};f["_List.ListIterator"]=se;se.__name__=["_List","ListIterator"];se.prototype={hasNext:function(){return null!=this.head},next:function(){var a=
this.head.item;this.head=this.head.next;return a},__class__:se};var Nc=function(){Za.call(this)};f.Main=Nc;Nc.__name__=["Main"];Nc.__super__=Za;Nc.prototype=n(Za.prototype,{create:function(a){ia.set_enabled(!0);Za.prototype.create.call(this,a);P.SetPath("http://127.0.0.1/knife/");T.trace("-----------",{fileName:"Main.hx",lineNumber:30,className:"Main",methodName:"create"});this._d=new Pc(this.__windows[0]);a=new fc;a.AddChildAt(new Qc,-1,!1);this._d.AddWorld(a)},render:function(a){Za.prototype.render.call(this,
a);this._d.Render()},__class__:Nc});var Mb=function(){};f.ManifestResources=Mb;Mb.__name__=["ManifestResources"];Mb.init=function(a){Mb.preloadLibraries=[];Mb.preloadLibraryNames=[];var b=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"rootPath")&&(b=D.field(a,"rootPath"));null==b&&(b="");v.defaultRootPath=b;a=$a.parse('{"name":null,"assets":"ah","version":2,"libraryArgs":[],"libraryType":null}',b);a=gc.fromManifest(a);v.registerLibrary("default",a);a=v.getLibrary("default");null!=a?Mb.preloadLibraries.push(a):
Mb.preloadLibraryNames.push("default")};Math.__name__=["Math"];var D=function(){};f.Reflect=D;D.__name__=["Reflect"];D.field=function(a,b){try{return a[b]}catch(c){return null}};D.getProperty=function(a,b){var c;if(null==a)return null;var d=a.__properties__?c=a.__properties__["get_"+b]:!1;return d?a[c]():a[b]};D.setProperty=function(a,b,c){var d;var e=a.__properties__?d=a.__properties__["set_"+b]:!1;if(e)a[d](c);else a[b]=c};D.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,
d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};D.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};D.compareMethods=function(a,b){return a==b?!0:D.isFunction(a)&&D.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};D.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var V=function(){};f.Std=V;V.__name__=["Std"];V.string=function(a){return B.__string_rec(a,"")};
V.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=w.cca(a,1)&&88!=w.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var W=function(){};f.StringTools=W;W.__name__=["StringTools"];W.startsWith=function(a,b){return a.length>=b.length?w.substr(a,0,b.length)==b:!1};W.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?w.substr(a,d-c,c)==b:!1};W.isSpace=function(a,b){a=w.cca(a,b);return 8<a&&14>a?!0:32==a};W.ltrim=function(a){for(var b=a.length,c=0;c<b&&W.isSpace(a,c);)++c;return 0<c?w.substr(a,
c,b-c):a};W.rtrim=function(a){for(var b=a.length,c=0;c<b&&W.isSpace(a,b-c-1);)++c;return 0<c?w.substr(a,0,b-c):a};W.trim=function(a){return W.ltrim(W.rtrim(a))};W.replace=function(a,b,c){return a.split(b).join(c)};W.hex=function(a,b){for(var c="";c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4,0<a;);if(null!=b)for(;c.length<b;)c="0"+c;return c};var aa=function(){};f.Type=aa;aa.__name__=["Type"];aa.getSuperClass=function(a){return a.__super__};aa.getClassName=function(a){a=a.__name__;return null==a?null:
a.join(".")};aa.resolveClass=function(a){a=f[a];return null!=a&&a.__name__?a:null};aa.resolveEnum=function(a){a=f[a];return null!=a&&a.__ename__?a:null};aa.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],
b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],
b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13]);default:throw new q("Too many arguments");}};aa.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};aa.createEnum=function(a,b,c){var d=D.field(a,b);if(null==d)throw new q("No such constructor "+b);if(D.isFunction(d)){if(null==c)throw new q("Constructor "+b+" need parameters");return d.apply(a,c)}if(null!=c&&0!=c.length)throw new q("Constructor "+b+" does not need parameters");return d};var tc={};f["_UInt.UInt_Impl_"]=
tc;tc.__name__=["_UInt","UInt_Impl_"];tc.gt=function(a,b){var c=0>a;return c!=0>b?c:a>b};var F=function(){};f["game.knifeHit.Config"]=F;F.__name__=["game","knifeHit","Config"];F.Fall=function(){F.partFallCount--;1>F.partFallCount&&(F.target.Start(),F.target.ShowTop())};var ra=function(){this._constructed=!1;this.Construct()};f["lovedna.Object"]=ra;ra.__name__=["lovedna","Object"];ra.prototype={Construct:function(){this._constructed||(this._constructed=!0,this.onConstruct())},onConstruct:function(){},
__class__:ra};var E=function(){this.offset=this._length=0};f["lovedna.ds.SmartArray"]=E;E.__name__=["lovedna","ds","SmartArray"];E.prototype={Add:function(a){null==this._buffer&&(this._buffer=[],this._length=0);this._buffer[this.offset+this._length++]=a},AddList:function(a,b){null==b&&(b=0);if(null!=a){null==this._buffer&&(this._buffer=[],this._length=0);var c=a.length;0<b&&c>=b&&(c=b);for(b=0;b<c;){var d=b++;d=a[d];this._buffer[this.offset+this._length++]=d}}},Pop:function(){if(null==this._buffer||
1>this._length)return null;this._length--;return this._buffer[this.offset+this._length]},Shift:function(){if(null==this._buffer||1>this._length)return null;64<this.offset&&this.offset>this._length&&this.Trim();this._length--;return this._buffer[this.offset++]},Get:function(a,b){null==b&&(b=!1);if(null==this._buffer||1>this._length)return null;b&&(a<this._length&&(a+=this._length),a%=this._length);return a>=this._length?null:this._buffer[a+this.offset]},Set:function(a,b){null==this._buffer&&(this._buffer=
[],this._length=0);this._buffer[a+this.offset]=b;this._length<a+1&&(this._length=a+1)},Clear:function(){this.offset=this._length=0;if(null!=this._buffer)for(var a=this._buffer.length;0<a--;)this._buffer[a]=null},Trim:function(){if(null!=this._buffer)if(0<this._length){if(0!=this.offset||this._length!=this._buffer.length){var a=[];for(this._i=this._length;0<this._i--;)a[this._i]=this._buffer[this._i+this.offset];this._buffer=a;this.offset=0}}else 0<this._buffer.length&&(this._buffer=[])},From:function(a){null==
this._buffer&&(this._buffer=[],this.offset=this._length=0);for(this._i=a.length;0<this._i--;)this._buffer[this._i]=a[this._i];this._length=a.length;this.offset>this._length-1&&(this.offset=this._length-1);return this},Dispose:function(){this._buffer=null},Remove:function(a){if(null==this._buffer)return!1;a=this.IndexOf(a);return-1<a?(this.RemoveAt(a),!0):!1},RemoveAt:function(a,b){null==b&&(b=1);if(!(null==this._buffer||0>a||a>=this._length||1>b||(a+b>=this._length&&(b=this._length-a),1>b))){for(this._i=
a;this._i<this._length-1;)this._buffer[this.offset+this._i]=this._buffer[this.offset+this._i+b],this._i++;this._length-=b}},Insert:function(a,b){if(!(0>a))if(null==this._buffer&&(this._buffer=[],this.offset=this._length=0),a>=this._length)this._buffer[a+this.offset]=b,this._length=a+1;else{for(this._i=this._length;this._i>a;)this._buffer[this._i+this.offset]=this._buffer[this._i-1+this.offset],this._i--;this._buffer[a+this.offset]=b;this._length++}},IndexOf:function(a){if(null==this._buffer)return-1;
for(this._i=this._length;0<this._i--;)if(a==this._buffer[this._i+-this.offset])return this._i;return-1},Sort:function(a){null==this._buffer||1>this._length||(this.Trim(),this._buffer.sort(a))},set_length:function(a){if(null==this._buffer)return 0;0<=a&&(this._length=a);return this._length},__class__:E,__properties__:{set_length:"set_length"}};var eb=function(a,b,c){null==c&&(c=!0);this._list=[];this._index=0;this._create=a;this._reset=b;this.count=0;c&&eb._pools.push(this)};f["lovedna.util.FramePool"]=
eb;eb.__name__=["lovedna","util","FramePool"];eb.Reset=function(){for(var a=eb._pools.length;0<a--;)eb._pools[a].Clear()};eb.prototype={Get:function(){if(this._index<this._list.length)var a=this._list[this._index++];else a=this._create(),this._list[this._index++]=a;null!=this._reset&&this._reset(a);this.count=this._list.length;return a},Clear:function(){this._index=0},__class__:eb};var S=function(){ra.call(this)};f["lovedna.event.EventDispatcher"]=S;S.__name__=["lovedna","event","EventDispatcher"];
S.__super__=ra;S.prototype=n(ra.prototype,{AddEventListener:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=0);if(null==a||null==b)return!1;null==this._eventMap&&(this._eventMap=new r,this._eventSortMap=new r);null==c&&(c=0);null==d&&(d=!1);null==e&&(e=0);var g=this._eventMap;if(null!=k[a]?g.existsReserved(a):g.h.hasOwnProperty(a)){g=this._eventMap;g=null!=k[a]?g.getReserved(a):g.h[a];for(var I=g.length;0<I--;)if(g[I].Match(b))return!1}else g=[],I=this._eventMap,null!=k[a]?I.setReserved(a,
g):I.h[a]=g;g.push(new te(this,b,c,d,e));b=!0;0!=c&&(c=this._eventSortMap,null!=k[a]?c.setReserved(a,!0):c.h[a]=!0);return b},DispatchEvent:function(a){if(null==this._eventMap)return!1;var b=a._type;if(null==b)return!1;var c=this._eventMap;c=null!=k[b]?c.getReserved(b):c.h[b];if(null==c)return!1;null==this._eventList&&(this._eventList=[]);if(-1!=this._eventList.indexOf(a))return!1;this._eventList.push(a);var d=this._eventSortMap;if(null!=k[b]?d.getReserved(b):d.h[b])d=this._eventSortMap,null!=k[b]?
d.setReserved(b,!1):d.h[b]=!1,c.sort(h(this,this.sortByPriority));b=S.pool.Get();b.Clear();d=0;for(var e=c.length;d<e;){var g=d++;b.Add(c[g])}for(c=b._length;0<c--;)b.Get(c).Dispatch(a);a.SetCurrentTarget(null);a.SetCustomData(null);this._eventList.splice(0,this._eventList.length);return!0},HasEventListener:function(a){if(null==this._eventMap)return!1;var b=this._eventMap;return null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},GetListener:function(a,b){if(null==this._eventMap)return null;var c=
this._eventMap;a=null!=k[a]?c.getReserved(a):c.h[a];if(null==a)return null;for(c=a.length;0<c--;){var d=a[c];if(d.Match(b))return d}return null},RemoveEventListener:function(a,b){if(null!=this._eventMap){var c=this._eventMap;c=null!=k[a]?c.getReserved(a):c.h[a];if(null!=c){if(null==b)c.splice(0,c.length);else for(var d=c.length;0<d--;){var e=c[d];e.Match(b)&&(e.Destroy(),w.remove(c,e))}0==c.length&&this._eventMap.remove(a);a=this._eventMap;(new ub(a,a.arrayKeys())).hasNext()||(this._eventSortMap=
this._eventMap=null)}}},sortByPriority:function(a,b){a=a.priority;b=b.priority;return a>b?1:a<b?-1:0},__class__:S});var Vb=function(){};f["lovedna.math.IToArray"]=Vb;Vb.__name__=["lovedna","math","IToArray"];Vb.prototype={__class__:Vb};var na=function(){this._sin=Math.sin;this._cos=Math.cos;this.Identity()};f["lovedna.math.Matrix44"]=na;na.__name__=["lovedna","math","Matrix44"];na.__interfaces__=[Vb];na.__properties__={get_temp:"get_temp"};na.get_temp=function(){return na._pool.Get()};na.prototype=
{ToArray:function(a,b){null==b&&(b=0);null==a&&(a=[]);a[b]=this.M00;a[b+1]=this.M10;a[b+2]=this.M20;a[b+3]=this.M30;a[b+4]=this.M01;a[b+5]=this.M11;a[b+6]=this.M21;a[b+7]=this.M31;a[b+8]=this.M02;a[b+9]=this.M12;a[b+10]=this.M22;a[b+11]=this.M32;a[b+12]=this.M03;a[b+13]=this.M13;a[b+14]=this.M23;a[b+15]=this.M33;return a},ToFloat32Array:function(a,b){null==b&&(b=0);a[b]=this.M00;a[b+1]=this.M10;a[b+2]=this.M20;a[b+3]=this.M30;a[b+4]=this.M01;a[b+5]=this.M11;a[b+6]=this.M21;a[b+7]=this.M31;a[b+8]=
this.M02;a[b+9]=this.M12;a[b+10]=this.M22;a[b+11]=this.M32;a[b+12]=this.M03;a[b+13]=this.M13;a[b+14]=this.M23;a[b+15]=this.M33},Copy:function(a){return null==a?this:this.Set(a.M00,a.M10,a.M20,a.M30,a.M01,a.M11,a.M21,a.M31,a.M02,a.M12,a.M22,a.M32,a.M03,a.M13,a.M23,a.M33)},Set:function(a,b,c,d,e,g,I,f,k,h,l,m,n,t,p,q){this.M00=a;this.M10=b;this.M20=c;this.M30=d;this.M01=e;this.M11=g;this.M21=I;this.M31=f;this.M02=k;this.M12=h;this.M22=l;this.M32=m;this.M03=n;this.M13=t;this.M23=p;this.M33=q;this._dirty=
!0;return this},Identity:function(){return this.Set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},Append:function(a,b){null==b&&(b=!1);if(null==a)return this;var c=this,d=a;b&&(c=a,d=this);return this.Set(c.M00*d.M00+c.M01*d.M10+c.M02*d.M20+c.M03*d.M30,c.M10*d.M00+c.M11*d.M10+c.M12*d.M20+c.M13*d.M30,c.M20*d.M00+c.M21*d.M10+c.M22*d.M20+c.M23*d.M30,c.M30*d.M00+c.M31*d.M10+c.M32*d.M20+c.M33*d.M30,c.M00*d.M01+c.M01*d.M11+c.M02*d.M21+c.M03*d.M31,c.M10*d.M01+c.M11*d.M11+c.M12*d.M21+c.M13*d.M31,c.M20*d.M01+c.M21*d.M11+
c.M22*d.M21+c.M23*d.M31,c.M30*d.M01+c.M31*d.M11+c.M32*d.M21+c.M33*d.M31,c.M00*d.M02+c.M01*d.M12+c.M02*d.M22+c.M03*d.M32,c.M10*d.M02+c.M11*d.M12+c.M12*d.M22+c.M13*d.M32,c.M20*d.M02+c.M21*d.M12+c.M22*d.M22+c.M23*d.M32,c.M30*d.M02+c.M31*d.M12+c.M32*d.M22+c.M33*d.M32,c.M00*d.M03+c.M01*d.M13+c.M02*d.M23+c.M03*d.M33,c.M10*d.M03+c.M11*d.M13+c.M12*d.M23+c.M13*d.M33,c.M20*d.M03+c.M21*d.M13+c.M22*d.M23+c.M23*d.M33,c.M30*d.M03+c.M31*d.M13+c.M32*d.M23+c.M33*d.M33)},SetProjection:function(a,b,c,d){null==d&&(d=
1.78);null==c&&(c=60);null==b&&(b=1E3);null==a&&(a=.1);c=1/Math.tan(.008726646259971648*c);this.M00=c/d;this.M01=this.M30=this.M20=this.M10=0;this.M11=c;this.M12=this.M02=this.M31=this.M21=0;this.M22=(b+a)/(a-b);this.M32=-1;this.M13=this.M03=0;this.M23=2*b*a/(a-b);this.M33=0;this._dirty=!0;return this},SetOrtho:function(a,b,c,d,e,g){this.M00=2/(b-a);this.M01=this.M30=this.M20=this.M10=0;this.M11=2/(d-c);this.M12=this.M02=this.M31=this.M21=0;this.M22=-2/(g-e);this.M32=0;this.M03=-(b+a)/(b-a);this.M13=
-(d+c)/(d-c);this.M23=-(g+e)/(g-e);this.M33=1;this._dirty=!0;return this},GetDeterminant:function(){return this.M30*this.M21*this.M12*this.M03-this.M20*this.M31*this.M12*this.M03-this.M30*this.M11*this.M22*this.M03+this.M10*this.M31*this.M22*this.M03+this.M20*this.M11*this.M32*this.M03-this.M10*this.M21*this.M32*this.M03-this.M30*this.M21*this.M02*this.M13+this.M20*this.M31*this.M02*this.M13+this.M30*this.M01*this.M22*this.M13-this.M00*this.M31*this.M22*this.M13-this.M20*this.M01*this.M32*this.M13+
this.M00*this.M21*this.M32*this.M13+this.M30*this.M11*this.M02*this.M23-this.M10*this.M31*this.M02*this.M23-this.M30*this.M01*this.M12*this.M23+this.M00*this.M31*this.M12*this.M23+this.M10*this.M01*this.M32*this.M23-this.M00*this.M11*this.M32*this.M23-this.M20*this.M11*this.M02*this.M33+this.M10*this.M21*this.M02*this.M33+this.M20*this.M01*this.M12*this.M33-this.M00*this.M21*this.M12*this.M33-this.M10*this.M01*this.M22*this.M33+this.M00*this.M11*this.M22*this.M33},Inverse:function(){var a=this.GetDeterminant();
if(0==a)throw new q("non-invertible matrix");a=1/a;var b=this.M03*this.M22*this.M31-this.M02*this.M23*this.M31-this.M03*this.M21*this.M32+this.M01*this.M23*this.M32+this.M02*this.M21*this.M33-this.M01*this.M22*this.M33,c=this.M02*this.M13*this.M31-this.M03*this.M12*this.M31+this.M03*this.M11*this.M32-this.M01*this.M13*this.M32-this.M02*this.M11*this.M33+this.M01*this.M12*this.M33,d=this.M03*this.M12*this.M21-this.M02*this.M13*this.M21-this.M03*this.M11*this.M22+this.M01*this.M13*this.M22+this.M02*
this.M11*this.M23-this.M01*this.M12*this.M23,e=this.M13*this.M22*this.M30-this.M12*this.M23*this.M30-this.M13*this.M20*this.M32+this.M10*this.M23*this.M32+this.M12*this.M20*this.M33-this.M10*this.M22*this.M33,g=this.M02*this.M23*this.M30-this.M03*this.M22*this.M30+this.M03*this.M20*this.M32-this.M00*this.M23*this.M32-this.M02*this.M20*this.M33+this.M00*this.M22*this.M33,I=this.M03*this.M12*this.M30-this.M02*this.M13*this.M30-this.M03*this.M10*this.M32+this.M00*this.M13*this.M32+this.M02*this.M10*
this.M33-this.M00*this.M12*this.M33,f=this.M02*this.M13*this.M20-this.M03*this.M12*this.M20+this.M03*this.M10*this.M22-this.M00*this.M13*this.M22-this.M02*this.M10*this.M23+this.M00*this.M12*this.M23,k=this.M11*this.M23*this.M30-this.M13*this.M21*this.M30+this.M13*this.M20*this.M31-this.M10*this.M23*this.M31-this.M11*this.M20*this.M33+this.M10*this.M21*this.M33,h=this.M03*this.M21*this.M30-this.M01*this.M23*this.M30-this.M03*this.M20*this.M31+this.M00*this.M23*this.M31+this.M01*this.M20*this.M33-
this.M00*this.M21*this.M33,l=this.M01*this.M13*this.M30-this.M03*this.M11*this.M30+this.M03*this.M10*this.M31-this.M00*this.M13*this.M31-this.M01*this.M10*this.M33+this.M00*this.M11*this.M33,m=this.M03*this.M11*this.M20-this.M01*this.M13*this.M20-this.M03*this.M10*this.M21+this.M00*this.M13*this.M21+this.M01*this.M10*this.M23-this.M00*this.M11*this.M23,n=this.M12*this.M21*this.M30-this.M11*this.M22*this.M30-this.M12*this.M20*this.M31+this.M10*this.M22*this.M31+this.M11*this.M20*this.M32-this.M10*
this.M21*this.M32,t=this.M01*this.M22*this.M30-this.M02*this.M21*this.M30+this.M02*this.M20*this.M31-this.M00*this.M22*this.M31-this.M01*this.M20*this.M32+this.M00*this.M21*this.M32,p=this.M02*this.M11*this.M30-this.M01*this.M12*this.M30-this.M02*this.M10*this.M31+this.M00*this.M12*this.M31+this.M01*this.M10*this.M32-this.M00*this.M11*this.M32,r=this.M01*this.M12*this.M20-this.M02*this.M11*this.M20+this.M02*this.M10*this.M21-this.M00*this.M12*this.M21-this.M01*this.M10*this.M22+this.M00*this.M11*
this.M22;this.M00=(this.M12*this.M23*this.M31-this.M13*this.M22*this.M31+this.M13*this.M21*this.M32-this.M11*this.M23*this.M32-this.M12*this.M21*this.M33+this.M11*this.M22*this.M33)*a;this.M01=b*a;this.M02=c*a;this.M03=d*a;this.M10=e*a;this.M11=g*a;this.M12=I*a;this.M13=f*a;this.M20=k*a;this.M21=h*a;this.M22=l*a;this.M23=m*a;this.M30=n*a;this.M31=t*a;this.M32=p*a;this.M33=r*a;this._dirty=!0;return this},LookAt:function(a,b,c){null==b&&(b=t.get_temp(),b.x=0,b.y=0,b.z=0);null==c&&(c=t.get_temp(),c.x=
0,c.y=1,c.z=0);var d=t.get_temp(),e=t.get_temp(),g=t.get_temp(),I=t.get_temp();null!=b&&b!=d&&(d.x=b.x,d.y=b.y,d.z=b.z);d.x-=a.x;d.y-=a.y;d.z-=a.z;null!=d&&d!=I&&(I.x=d.x,I.y=d.y,I.z=d.z);I.Normalize();null!=d&&d!=e&&(e.x=d.x,e.y=d.y,e.z=d.z);e.Normalize();e.Cross(c).Normalize();null!=e&&e!=g&&(g.x=e.x,g.y=e.y,g.z=e.z);g.Cross(I).Normalize();this.Identity();this.M00=e.x;this.M01=e.y;this.M02=e.z;this.M10=g.x;this.M11=g.y;this.M12=g.z;this.M20=-I.x;this.M21=-I.y;this.M22=-I.z;null!=a&&a!=d&&(d.x=a.x,
d.y=a.y,d.z=a.z);d.x*=-1;d.y*=-1;d.z*=-1;this.AppendTranslation(d);return this},AppendTranslation:function(a){var b=a.x,c=a.y;a=a.z;var d=na.get_temp();d.Set(1,0,0,0,0,1,0,0,0,0,1,0,b,c,a,1);return this.Append(d)},AppendScale:function(a){var b=a.x,c=a.y;a=a.z;var d=na.get_temp();d.Set(b,0,0,0,0,c,0,0,0,0,a,0,0,0,0,1);return this.Append(d)},AppendRotation:function(a){return this.Append(a.ToMatrix44())},AppendTRS:function(a,b,c){null!=a&&this.AppendTranslation(a);null!=b&&this.AppendRotation(b);null!=
c&&this.AppendScale(c);return this},GetTranslation:function(a){null==a&&(a=t.get_temp());a.x=this.M03;a.y=this.M13;a.z=this.M23;return a},GetRotation:function(a){null==a&&(a=sa.get_temp());return a.SetFromMatrix44(this)},GetScale:function(a){null==a&&(a=t.get_temp());var b=this.GetScaleX(),c=this.GetScaleY(),d=this.GetScaleZ();a.x=b;a.y=c;a.z=d;return a},GetScaleXSquared:function(){return this.M00*this.M00+this.M01*this.M01+this.M02*this.M02},GetScaleYSquared:function(){return this.M10*this.M10+this.M11*
this.M11+this.M12*this.M12},GetScaleZSquared:function(){return this.M20*this.M20+this.M21*this.M21+this.M22*this.M22},GetScaleX:function(){return ca.IsZero(this.M01)&&ca.IsZero(this.M02)?ca.FloatToAbs(this.M00):Math.sqrt(this.GetScaleXSquared())},GetScaleY:function(){return ca.IsZero(this.M10)&&ca.IsZero(this.M12)?ca.FloatToAbs(this.M11):Math.sqrt(this.GetScaleYSquared())},GetScaleZ:function(){return ca.IsZero(this.M20)&&ca.IsZero(this.M21)?ca.FloatToAbs(this.M22):Math.sqrt(this.GetScaleZSquared())},
MultiplyPoint:function(a,b){null==b&&(b=!1);var c=a.x,d=a.y,e=a.z,g=1;b&&(g=1/(c*this.M30+d*this.M31+e*this.M32+this.M33));b=(c*this.M10+d*this.M11+e*this.M12+this.M13)*g;var I=(c*this.M20+d*this.M21+e*this.M22+this.M23)*g;a.x=(c*this.M00+d*this.M01+e*this.M02+this.M03)*g;a.y=b;a.z=I;return a},MultiplyFrustum:function(a){if(null==a)return null;var b=this.M00,c=this.M10,d=this.M20,e=this.M30,g=this.M01,I=this.M11,f=this.M21,k=this.M31,h=this.M02,l=this.M12,m=this.M22,n=this.M32,t=this.M03,p=this.M13,
q=this.M23,r=this.M33;a.planes[0].Set(e+d,k+f,n+m,r+q);a.planes[1].Set(e-d,k-f,n-m,r-q);a.planes[2].Set(e+b,k+g,n+h,r+t);a.planes[3].Set(e-b,k-g,n-h,r-t);a.planes[4].Set(e-c,k-I,n-l,r-p);a.planes[5].Set(e+c,k+I,n+l,r+p);return a},__class__:na};var ja=function(){ra.call(this);this.id=ja._id++;this.visible=!1;this.layer=0;this.timeScale=1;this.childCount=0;this.world=this.parent=null;this.position=new t(0,0,0);this.rotation=new sa;this.scale=new t(1,1,1);this._p=new t(0,0,0);this._r=new sa;this._s=
new t(1,1,1);this.updateTime=0;this._updateTime=-1;this._needUpdate=!1;this.localToWorld=new na;this._componentDirty=!1;this._enabled=!0;this.deltaTime=0;this.worldToLocalHandler=h(this,this.get_worldToLocal)};f["lovedna.play.Actor"]=ja;ja.__name__=["lovedna","play","Actor"];ja.__super__=S;ja.prototype=n(S.prototype,{TransformTo:function(a){if(null!=a){ja._transformMat.Copy(a.get_worldToLocal());ja._transformMat.Append(this.localToWorld);a=this.position;var b=ja._transformMat.GetTranslation();null!=
b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);this.rotation.Copy(ja._transformMat.GetRotation());a=this.scale;b=ja._transformMat.GetScale();null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z)}},AddChildAt:function(a,b,c){null==c&&(c=!1);null==a||a.HasChild(this)||(null!=a.parent&&a.parent!=this&&a.parent.RemoveChild(a),c&&a.TransformTo(this),null==this._childs&&(this._childs=new E),a.parent==this&&this._childs.Remove(a),0>b||b>=this.childCount?this._childs.Add(a):this._childs.Insert(b,a),a.parent=this,this.childCount=
this._childs._length,null!=this.world&&(this.world.data._rebuildActorList=!0))},RemoveSelf:function(){null!=this.parent&&this.parent.RemoveChild(this)},RemoveChild:function(a){null!=a&&a!=this&&a.parent==this&&this._childs.Remove(a)&&(this.childCount=this._childs._length,null!=this.world&&(this.world.data._rebuildActorList=!0))},HasChild:function(a){if(null==a||a==this||null==a.parent)return!1;a=a.parent;for(var b=200;null!=a;){if(a==this)return!0;var c=a.parent;if(c==a)break;a=c;--b;if(1>b)break}return!1},
AddComponent:function(a){if(null!=this._components)for(var b=this._components._length;0<b--;){var c=this._components.Get(b);if(B.__instanceof(c,a)&&null==qb.Get(a).GetClassMeta("AllowMulti",!0))return T.trace("warn",{fileName:"Actor.hx",lineNumber:229,className:"lovedna.play.Actor",methodName:"AddComponent",customParams:["can not add same  type component"]}),c}null==this._components&&(this._components=new E);a=rb.CreateInstance(a);if(null==a)return null;if(null!=a.actor)throw new q("has init");a.actor=
this;a.__inited=!1;a.onAwake();this._components.Add(a);this._componentDirty=!0;return a},GetComponent:function(a){if(null==this._components)return null;for(var b=this._components._length;0<b--;){var c=this._components.Get(b);if(B.__instanceof(c,a))return c}return null},_visit:function(a){a.Add(this);if(!(1>this.childCount))for(var b=0,c=this.childCount;b<c;){var d=b++;d=0>d?null:this._childs.Get(d);null!=d&&d._enabled&&d._visit(a)}},_onUpdate:function(){if(this._enabled){if(this._componentDirty){this._componentDirty=
!1;for(var a=this._components._length;0<a--;){var b=this._components.Get(a);if(b.__destroyed){if(b.actor==this){b.onDisable();b.onDestroy();if(null!=b.actor)for(var c=b.__calbacks.keys();c.hasNext();){var d=c.next(),e=b.__calbacks;b.actor.RemoveEventListener(d,null!=k[d]?e.getReserved(d):e.h[d]);b.__calbacks.remove(d)}b.actor=null}this._components.RemoveAt(a)}else b.__inited||(null==b._builtinCallback&&(b._builtinCallback=new r,c=b._builtinCallback,d=u.onEnable._type,e=h(b,b.onEnable),null!=k[d]?
c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onDisable._type,e=h(b,b.onDisable),null!=k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onFixedInput._type,e=h(b,b.onFixedInput),null!=k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onInput._type,e=h(b,b.onInput),null!=k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onInputFinish._type,e=h(b,b.onInputFinish),null!=k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onTransform._type,e=h(b,b.onTransform),null!=
k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onOutput._type,e=h(b,b.onOutput),null!=k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onCollect._type,e=h(b,b.onCollect),null!=k[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=u.onRender._type,e=h(b,b.onRender),null!=k[d]?c.setReserved(d,e):c.h[d]=e),b.__inited=!0,b.onEnable(),b.onStart())}}this.updateTime!=this._updateTime?a=!0:this.parent._needUpdate?a=!0:(a=this._p,b=this.position,a.x!=b.x||a.y!=b.y||a.z!=b.z?a=!0:(a=this._r,
b=this.rotation,a.x!=b.x||a.y!=b.y||a.z!=b.z||a.w!=b.w?a=!0:(a=this._s,b=this.scale,a=a.x!=b.x||a.y!=b.y||a.z!=b.z?!0:!1)));if(this._needUpdate=a)this.DispatchEvent(u.onPreTransform),this.localToWorld.Copy(this.parent.localToWorld),this.localToWorld.AppendTRS(this.position,this.rotation,this.scale),a=this._p,b=this.position,null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z),this._r.Copy(this.rotation),a=this._s,b=this.scale,null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z),this._up=this._right=this._forward=this._worldScale=
this._worldRotation=this._worldPosition=this._worldToLocalMatrix=null,this.DispatchEvent(u.onTransform),this._updateTime=this.updateTime+=1E-5;this.DispatchEvent(u.onCollect)}},get_worldToLocal:function(){null==this.__worldToLocalMatrix&&(this.__worldToLocalMatrix=new na);null==this._worldToLocalMatrix&&(this._worldToLocalMatrix=this.__worldToLocalMatrix,this._worldToLocalMatrix.Copy(this.localToWorld),this._worldToLocalMatrix.Inverse());return this._worldToLocalMatrix},get_worldPosition:function(){null==
this.__worldPosition&&(this.__worldPosition=new t);null==this._worldPosition&&(this._worldPosition=this.__worldPosition,this.localToWorld.GetTranslation(this._worldPosition));return this._worldPosition},get_worldRotation:function(){null==this.__worldRotation&&(this.__worldRotation=new sa);null==this._worldRotation&&(this._worldRotation=this.__worldRotation,this.localToWorld.GetRotation(this._worldRotation));return this._worldRotation},__class__:ja,__properties__:{get_worldRotation:"get_worldRotation",
get_worldPosition:"get_worldPosition",get_worldToLocal:"get_worldToLocal"}});var hc=function(){ja.call(this);this.type=-1};f["game.knifeHit.FlyObj"]=hc;hc.__name__=["game","knifeHit","FlyObj"];hc.__super__=ja;hc.prototype=n(ja.prototype,{Fall:function(){},__class__:hc});var Na=function(){hc.call(this);this.type=1;this.name="test";var a=this.AddComponent(Wb);this.material=a.material;a.material.state.cullMode=-1;a.material.shader.Define(l.ALPHA_TEST.name);a.material.renderQueue=30005;var b=new Rc;b.height=
.5;b.width=.15625;var c=new na;c.AppendRotation((new sa).SetEulerAngles(-90));b.transform=c;a.set_mesh((new Gb).FromGeom(b.Build()));this._fly=this.AddComponent(Sc);this._fall=this.AddComponent(Tc);this._fall.set_disabled(!0);this._fly.set_disabled(!0)};f["game.knifeHit.Knife"]=Na;Na.__name__=["game","knifeHit","Knife"];Na.Pop=function(){0<Na._cache._length&&Na._cache.Pop();var a=new Na;a.material.SetTexture(P.texture.Get(F.target.config.image_knife).texture);return a};Na.Push=function(a){Na._cache.Remove(a);
Na._cache.Add(a);a.RemoveSelf()};Na.__super__=hc;Na.prototype=n(hc.prototype,{Start:function(){var a=this.position;a.x=0;a.y=0;a.z=2;this.rotation.SetEulerAngles(0,0,0);this._fly.Start();this._fall.set_disabled(!0)},Fall:function(){this._fall.Start();this._fly.set_disabled(!0)},__class__:Na});var Q=function(){};f["lovedna.play.components.Component"]=Q;Q.__name__=["lovedna","play","components","Component"];Q.__super__=S;Q.prototype=n(S.prototype,{onConstruct:function(){S.prototype.onConstruct.call(this);
this.__inited=this.__destroyed=!1;this.id=Q._id++;this.__disabled=!1},onAwake:function(){},onEnable:function(){},onStart:function(){},onDestroy:function(){},onDisable:function(){},onFixedInput:function(){},onInput:function(){},onInputFinish:function(){},onOutput:function(){},onTransform:function(){},onCollect:function(){},onRender:function(){},addEvent:function(a,b){if(null!=this.actor){null==this.__calbacks&&(this.__calbacks=new r);var c=a._type,d=this.__calbacks;if(null!=k[c]?d.existsReserved(c):
d.h.hasOwnProperty(c))d=this.__calbacks,this.actor.RemoveEventListener(c,null!=k[c]?d.getReserved(c):d.h[c]),this.__calbacks.remove(c);if(null==this._builtinCallback&&null==this._builtinCallback){d=this._builtinCallback=new r;var e=u.onEnable._type,g=h(this,this.onEnable);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onDisable._type;g=h(this,this.onDisable);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onFixedInput._type;g=h(this,this.onFixedInput);null!=
k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onInput._type;g=h(this,this.onInput);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onInputFinish._type;g=h(this,this.onInputFinish);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onTransform._type;g=h(this,this.onTransform);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onOutput._type;g=h(this,this.onOutput);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onCollect._type;
g=h(this,this.onCollect);null!=k[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=u.onRender._type;g=h(this,this.onRender);null!=k[e]?d.setReserved(e,g):d.h[e]=g}null==b&&(b=this._builtinCallback,b=null!=k[c]?b.getReserved(c):b.h[c]);null!=b&&(d=this.__calbacks,a=a._type,null!=k[a]?d.setReserved(a,b):d.h[a]=b,this.actor.AddEventListener(c,b),this.actor.GetListener(c,b).enabled=!this.__disabled)}},removeEvent:function(a,b){if(null!=this.actor&&null!=this.__calbacks)if(a=a._type,null==b)for(b=
this.__calbacks.keys();b.hasNext();){var c=b.next();if(a==c){var d=this.__calbacks;this.actor.RemoveEventListener(c,null!=k[c]?d.getReserved(c):d.h[c]);this.__calbacks.remove(c)}}else this.actor.RemoveEventListener(a,b)},refreshEvent:function(){if(null!=this.__calbacks)for(var a=this.__calbacks.keys();a.hasNext();){var b=a.next(),c=this.__calbacks;b=this.actor.GetListener(b,null!=k[b]?c.getReserved(b):c.h[b]);null!=b&&(b.enabled=!this.__disabled)}},set_disabled:function(a){this.__disabled!=a&&(this.__disabled=
a,this.refreshEvent());return this.__disabled},__class__:Q,__properties__:{set_disabled:"set_disabled"}});var Tc=function(){};f["game.knifeHit.KnifeFall"]=Tc;Tc.__name__=["game","knifeHit","KnifeFall"];Tc.__super__=Q;Tc.prototype=n(Q.prototype,{Start:function(){this.set_disabled(!1);F.start.AddChildAt(this.actor,-1,!0);this._v0=5*Math.random()+1;this._y=this._t=0;var a=this._dir,b=this.actor;null==b._forward&&(b._forward=new t(0,0,1),b.get_worldRotation().MultiplyVector(b._forward,!0));var c=t.get_temp();
b=b._forward;null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z);this.addEvent(u.onInput);a=this._radd;c=360*Math.random();a.x=0;a.y=c;a.z=0;a=this._r;c=360*Math.random();b=360*Math.random();a.x=360*Math.random();a.y=c;a.z=b;F.partFallCount++},onStart:function(){Q.prototype.onStart.call(this);this._dir=new t;this._move=new t;this._r=new t;this._radd=new t},onInput:function(){Q.prototype.onInput.call(this);this._y=this._v0*this._t-9.8*this._t*this._t*.5;var a=this._move,
b=this._dir;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.actor.deltaTime;a.x*=b;a.y*=b;a.z*=b;a=this._r;b=this._radd;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.actor.deltaTime;a.x*=b;a.y*=b;a.z*=b;a=this.actor.rotation.get_eulerAngles();b=this._r;a.x+=b.x;a.y+=b.y;a.z+=b.z;this.actor.rotation.set_eulerAngles(a);a=this.actor.position;b=this._move;a.x+=b.x;a.y+=b.y;a.z+=b.z;this.actor.position.y=this._y;this._t+=this.actor.deltaTime;-2>this._y&&(F.Fall(),this.removeEvent(u.onInput),Na.Push(this.actor))},
__class__:Tc});var Sc=function(){};f["game.knifeHit.KnifeFly"]=Sc;Sc.__name__=["game","knifeHit","KnifeFly"];Sc.__super__=Q;Sc.prototype=n(Q.prototype,{Start:function(){this.set_disabled(!1);this.targetR=F.target.config.radius;this.outR=this.targetR+.5;this.checkOut=!1;this.addEvent(u.onInput)},onInput:function(){Q.prototype.onInput.call(this);var a=t.get_temp(),b=this.actor;null==b._forward&&(b._forward=new t(0,0,1),b.get_worldRotation().MultiplyVector(b._forward,!0));var c=t.get_temp();b=b._forward;
null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z);c=-20*this.actor.deltaTime;a.x*=c;a.y*=c;a.z*=c;c=this.actor.position;c.x+=a.x;c.y+=a.y;c.z+=a.z;c=this.actor.position.Distance(F.target.position);a=F.target.rotationComponent.angle;!this.checkOut&&c<this.outR&&(this.checkOut=!0,b=F.target.config.Check(a),null!=b&&(T.trace("hit  "+(.001*(new Date).getTime()+U._timeOffset),{fileName:"KnifeFly.hx",lineNumber:60,className:"game.knifeHit.KnifeFly",methodName:"onInput"}),
1==b.type&&(F.target.config.Fail(a),this.set_disabled(!0),this.removeEvent(u.onInput),this.actor.Fall())));c<this.targetR&&(this.set_disabled(!0),this.removeEvent(u.onInput),c=F.target.config.Check(a),null!=c&&1==c.type?(F.target.config.Fail(a),this.actor.Fall()):F.target.config.Add(a,this.actor))},__class__:Sc});var Uc=function(){};f["game.knifeHit.Rotation"]=Uc;Uc.__name__=["game","knifeHit","Rotation"];Uc.__super__=Q;Uc.prototype=n(Q.prototype,{Start:function(){this.angle=0;this._maxTime=F.target.config.loopTime;
this._easeList=F.target.config.easeList;this.value=0;this.set_disabled(!1);this._easeId=0;this._ease=this._easeList[this._easeId];null==this._ease&&(this._ease=(vb=C.instance,h(vb,vb.Linear)));this._rev=.5<Math.random();this.addEvent(u.onInput)},onAwake:function(){Q.prototype.onAwake.call(this);this.angle=0;var a=new C;this._easeList=[];this._easeList.push(h(a,a.Linear));this._easeList.push(h(a,a.QuadIn));this._easeList.push(h(a,a.BackIn));this._easeList.push(h(a,a.BounceIn))},onStart:function(){Q.prototype.onStart.call(this);
this.angle=0},onInput:function(){Q.prototype.onInput.call(this);this.value+=this.actor.deltaTime;this.value>=this._maxTime&&(this._rev=.5<Math.random(),this.value=0,this._easeId++,this._easeId>this._easeList.length&&(this._easeId=0),this._ease=this._easeList[this._easeId],null==this._ease&&(this._ease=(vb=C.instance,h(vb,vb.Linear))));var a=this._ease(this.value/this._maxTime);this._rev&&(a=1-a);this.angle=360*a;this.actor.rotation.SetEulerAngles(0,this.angle,0);a=this.actor;a.updateTime+=a.deltaTime},
__class__:Uc});var Qc=function(){ja.call(this);F.start=this;F.ext=new Ext;F.ext.start();var a=new ja;F.camera=a;this.AddChildAt(a,-1,!1);var b=a.position;b.x=0;b.y=3;b.z=0;a.rotation.SetEulerAngles(90,180,0);a.updateTime++;a.AddComponent(fb);a=new Vc;F.target=a;F.target.config.RandomSuccess();this.AddChildAt(a,-1,!1);a.Start();this.AddEventListener(u.onInputFinish._type,h(this,this.onInputFinish))};f["game.knifeHit.Start"]=Qc;Qc.__name__=["game","knifeHit","Start"];Qc.__super__=ja;Qc.prototype=n(ja.prototype,
{onInputFinish:function(){if(5==F.currentState)x.KeyDown(27)?(F.target.Start(),F.target.ShowTop()):(x.TouchDown()||x.KeyDown(32))&&1>F.partFallCount&&(F.target.Start(),F.target.ShowTop());else if(2==F.currentState&&(x.TouchDown()||x.KeyDown(32))){var a=Na.Pop();this.AddChildAt(a,-1,!1);a.Start()}},__class__:Qc});var Vc=function(){ja.call(this);this._moveTo=new t(0,0,3);this._rotationTo=(new sa).SetEulerAngles(0,180,0);this.config=new Ba;this._idleTime=0;this._position=new t(0,0,0);this.AddEventListener(u.onInput._type,
h(this,this.onInput));this.rotationComponent=this.AddComponent(Uc);this.fall=this.AddComponent(Wc);this.fall.set_disabled(!0);this.rotationComponent.set_disabled(!0);this._renderer=this.AddComponent(Wb);var a=new na;a.AppendRotation((new sa).SetEulerAngles(0,-90,0));this._geom=new uc;this._geom.transform=a;this._geom.height=.1;this._geom.radialSegments=30;this._renderer.set_mesh((new Gb).FromGeom(this._geom));this._geom.radiusTop=this._geom.radiusBottom=1;a=new Nb;this._renderer.materials.Add(a);
a=new Nb;this._renderer.materials.Add(a);a=this._renderer.materials.Get(0);a.subMesh=0;a.state.cullMode=-1;a=this._renderer.materials.Get(1);a.distanceOffset=new t(0,0,1);a.renderQueue=30010;a.shader.Define(l.ALPHA_TEST.name);a.subMesh=1;a.state.cullMode=-1;a=this._renderer.materials.Get(2);a.distanceOffset=new t(0,0,-1);a.renderQueue=3E4;a.shader.Define(l.ALPHA_TEST.name);a.subMesh=2;a.state.cullMode=-1};f["game.knifeHit.Target"]=Vc;Vc.__name__=["game","knifeHit","Target"];Vc.__super__=ja;Vc.prototype=
n(ja.prototype,{Start:function(){F.partFallCount=0;this._renderer.set_disabled(!1);this._moveTime=0;this.config.easeList=[];for(var a=C.GetAllEaseName(),b=a.length,c=0;5>c;){c++;var d=this.config.easeList,e=Math.random()*b,g=e|0;0>e&&g!=e&&--g;d.push(C.GetEase(a[g]))}this.config.Start();this.rotationComponent.Start();this._geom.radiusBottom=this.config.showRadius;this._geom.radiusTop=this._geom.radiusBottom;this._geom.Build();this._renderer.materials.Get(0).SetTexture(P.texture.Get(this.config.image_edge).texture);
this._renderer.materials.Get(1).SetTexture(P.texture.Get(this.config.image_top).texture);this._renderer.materials.Get(2).SetTexture(P.texture.Get(this.config.image_bottom).texture);this.fall.set_disabled(!0)},AddForce:function(a){a=new t(0,0,-.05);var b=this.position;b.x+=a.x;b.y+=a.y;b.z+=a.z;this._idleTime=.5},Fail:function(a){F.ext.vibrate(300);this.rotationComponent.set_disabled(!0);this.config.RandomFail()},Complete:function(a){this.rotationComponent.set_disabled(!0);this._renderer.set_disabled(!0);
this.ShowForwad();a=0;var b=5;F.partFallCount+=b;for(var c=360/b;0<b--;){var d=new ja,e=new Xc,g=Math.random()*c*.5+.5*c;0==b&&(g=360-a);e.Start(a,g);a+=g;d.AddChildAt(e,-1,!1);var I=e.GetComponent(Wb).mesh.buffer.get_bounds();I.Apply(this.localToWorld);d.AddComponent(Yc).Start(I.sphere.center);g=t.get_temp();I=I.sphere.center;null!=I&&I!=g&&(g.x=I.x,g.y=I.y,g.z=I.z);I=d.position;I.x+=g.x;I.y+=g.y;I.z+=g.z;e=e.position;g.x*=-1;g.y*=-1;g.z*=-1;e.x+=g.x;e.y+=g.y;e.z+=g.z;F.start.AddChildAt(d,-1,!1)}this.config.RandomSuccess()},
ShowForwad:function(){this._moveTime=this._totalTime=2;var a=this._moveTo;a.x=0;a.y=0;a.z=3;this._rotationTo.SetEulerAngles(0,180,0)},ShowTop:function(){this._moveTime=this._totalTime=1;var a=this._moveTo;a.x=0;a.y=3;a.z=0;this._rotationTo.SetEulerAngles(89.5,180,0)},onInput:function(){if(0<this._idleTime){this._idleTime-=this.deltaTime;if(0>=this._idleTime){var a=this.position,b=this._position;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);return}this.position.LerpTo(this._position,.8)}0<this._moveTime&&
(this._moveTime-=this.deltaTime,0>this._moveTime&&(this._moveTime=0),a=1-this._moveTime/this._totalTime,F.camera.position.LerpTo(this._moveTo,a),F.camera.rotation.SlerpTo(this._rotationTo,a))},__class__:Vc});var Ra=function(a,b){this.top=b;this.bottom=a};f["game.knifeHit.TableData"]=Ra;Ra.__name__=["game","knifeHit","TableData"];Ra.prototype={__class__:Ra};var Ba=function(){this.loopTime=3;this.radius=.5;this.showRadius=.6;this._list=new E;this.image_edge="edge1";this.image_knife="knifes/knife_90";
this.count_complete=12;Ba.table_list.push(new Ra("trunk_brake71","trunk_brake14"));Ba.table_list.push(new Ra("trunk_brake71","trunk_brake15"));Ba.table_list.push(new Ra("trunk_brake23","trunk_brake72"));Ba.table_list.push(new Ra("trunk_brake21","trunk_brake21"));Ba.table_list.push(new Ra("trunk_brake44","trunk_brake44"));Ba.table_list.push(new Ra("trunk_brake24","trunk_brake24"));Ba.table_list.push(new Ra("trunk_brake27","trunk_brake27"));Ba.table_list.push(new Ra("trunk_brake17","trunk_brake17"));
Ba.table_list.push(new Ra("trunk_brake36","trunk_brake36"));Ba.table_list.push(new Ra("trunk_brake53","trunk_brake53"));Ba.table_list.push(new Ra("trunk_brake48","trunk_brake48"));Ba.table_list.push(new Ra("trunk_brake52","trunk_brake52"));Ba.table_list.push(new Ra("trunk_brake32","trunk_brake43"));Ba.table_list.push(new Ra("trunk_brake41","trunk_brake41"))};f["game.knifeHit.TargetConfig"]=Ba;Ba.__name__=["game","knifeHit","TargetConfig"];Ba.prototype={RandomFail:function(){var a=8+8*wb.instance.GetFloat(),
b=a|0;0>a&&b!=a&&--b;this.count_complete=b},RandomSuccess:function(){var a=10+10*wb.instance.GetFloat(),b=a|0;0>a&&b!=a&&--b;this.count_complete=b;a=119*wb.instance.GetFloat();b=a|0;0>a&&b!=a&&--b;this.image_knife="knifes/knife_"+b;a=Ba.table_list.length;0>=a?a=0:(a*=wb.instance.GetFloat(),b=a|0,0>a&&b!=a&&--b,a=b);this.setTable(Ba.table_list[a])},Start:function(){this.count=0;var a=6.283185307179586*this.radius/.125,b=a|0;0>a&&b!=a&&--b;a=b;this.count_complete>a&&(this.count_complete=a);this.preCellAngle=
360/a;for(a=this._list._length;0<a--;)b=this._list.Get(a),null!=b&&(B.__instanceof(b,Na)&&Na.Push(b),b.RemoveSelf());this._list.Clear();F.currentState=2},Check:function(a){a=this._list.Get(this.getId(a));return null==a?null:a},Add:function(a,b){F.target.AddForce(a);var c=this.getId(a);this._list.Set(c,b);F.target.AddChildAt(b,-1,!1);b.rotation.SetEulerAngles(0,-a,0);a=b.rotation;c=t.get_temp();c.x=0;c.y=0;c.z=1;a=a.MultiplyVector(c);c=F.target.config.showRadius;a.x*=c;a.y*=c;a.z*=c;b=b.position;null!=
a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);this.count++;this.count>=this.count_complete&&this.Complete(0)},Fail:function(a){F.currentState=5;F.target.Fail(a)},Complete:function(a){F.currentState=5;F.target.Complete(a);for(a=this._list._length;0<a--;){var b=this._list.Get(a);null!=b&&b.Fall()}},getId:function(a){a+=.5*this.preCellAngle;a%=360;0>a&&(a+=360);a/=this.preCellAngle;var b=a|0;0>a&&b!=a&&--b;return b},setTable:function(a){this.image_bottom=this.image_top=null;null!=a.top&&(this.image_top="targets/"+
a.top);null!=a.bottom&&(this.image_bottom="targets/"+a.bottom)},__class__:Ba};var Wc=function(){};f["game.knifeHit.TargetFall"]=Wc;Wc.__name__=["game","knifeHit","TargetFall"];Wc.__super__=Q;Wc.prototype=n(Q.prototype,{onStart:function(){Q.prototype.onStart.call(this);this.addEvent(u.onInput);this._r=new t},onInput:function(){Q.prototype.onInput.call(this);this._r.x-=300*this.actor.deltaTime;this.actor.rotation.SetEulerAngles(this._r.x,this._r.y,this._r.z)},__class__:Wc});var Xc=function(){ja.call(this);
this._renderer=this.AddComponent(Wb);var a=new na;a.AppendRotation((new sa).SetEulerAngles(0,-90,0));this._geom=new uc;this._geom.transform=a;this._geom.height=.1;this._geom.radialSegments=15;this._renderer.set_mesh((new Gb).FromGeom(this._geom));this._geom.radiusTop=this._geom.radiusBottom=1;a=new Nb;this._renderer.materials.Add(a);a=new Nb;this._renderer.materials.Add(a);a=this._renderer.materials.Get(0);a.subMesh=0;a.state.cullMode=-1;a=this._renderer.materials.Get(1);a.distanceOffset=new t(0,
0,1);a.renderQueue=30010;a.shader.Define(l.ALPHA_TEST.name);a.subMesh=1;a.state.cullMode=-1;a=this._renderer.materials.Get(2);a.distanceOffset=new t(0,0,-1);a.renderQueue=3E4;a.shader.Define(l.ALPHA_TEST.name);a.subMesh=2;a.state.cullMode=-1};f["game.knifeHit.TargetPart"]=Xc;Xc.__name__=["game","knifeHit","TargetPart"];Xc.__super__=ja;Xc.prototype=n(ja.prototype,{Start:function(a,b){this._geom.radiusBottom=F.target.config.showRadius;this._geom.radiusTop=this._geom.radiusBottom;this._geom.thetaStart=
a;this._geom.thetaLength=b;this._geom.Build();this._renderer.materials.Get(0).SetTexture(P.texture.Get(F.target.config.image_edge).texture);this._renderer.materials.Get(1).SetTexture(P.texture.Get(F.target.config.image_top).texture);this._renderer.materials.Get(2).SetTexture(P.texture.Get(F.target.config.image_bottom).texture);a=this.position;b=F.target.position;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);this.rotation.Copy(F.target.rotation)},__class__:Xc});var Yc=function(){};f["game.knifeHit.TargetPartFall"]=
Yc;Yc.__name__=["game","knifeHit","TargetPartFall"];Yc.__super__=Q;Yc.prototype=n(Q.prototype,{Start:function(a){this.set_disabled(!1);this._v0=3*Math.random()+2;this._y=this._t=0;var b=this._dir,c=this.actor;null==c._forward&&(c._forward=new t(0,0,1),c.get_worldRotation().MultiplyVector(c._forward,!0));var d=t.get_temp();c=c._forward;null!=c&&c!=d&&(d.x=c.x,d.y=c.y,d.z=c.z);null!=d&&d!=b&&(b.x=d.x,b.y=d.y,b.z=d.z);this.addEvent(u.onInput);b=this._radd;d=360*Math.random();c=360*Math.random();b.x=
360*Math.random();b.y=d;b.z=c;this._radd.y=0;this._radd.z=0;b=this._r;d=this.actor.rotation.get_eulerAngles();null!=d&&d!=b&&(b.x=d.x,b.y=d.y,b.z=d.z);b=new sa;b.SetLookRotation(a);a=this._dir;d=t.get_temp();d.x=0;d.y=0;d.z=1;b=b.MultiplyVector(d,!0);null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z)},onAwake:function(){Q.prototype.onAwake.call(this);this._dir=new t;this._move=new t;this._r=new t;this._radd=new t},onStart:function(){Q.prototype.onStart.call(this)},onInput:function(){this._y=this._v0*this._t-
9.8*this._t*this._t*.5;this._t+=this.actor.deltaTime;var a=this._move,b=this._dir;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.actor.deltaTime;a.x*=b;a.y*=b;a.z*=b;a=this._r;b=t.get_temp();var c=this._radd;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);c=2*this.actor.deltaTime;b.x*=c;b.y*=c;b.z*=c;a.x+=b.x;a.y+=b.y;a.z+=b.z;this.actor.rotation.SetEulerAngles(this._r.x,this._r.y,this._r.z);a=this.actor.position;b=this._move;a.x+=b.x;a.y+=b.y;a.z+=b.z;this.actor.position.y=this._y;-2>this._y&&(F.Fall(),
this.removeEvent(u.onInput),this.actor.RemoveSelf())},__class__:Yc});var Sa=f["haxe.StackItem"]={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]};Sa.CFunction=["CFunction",0];Sa.CFunction.toString=z;Sa.CFunction.__enum__=Sa;Sa.Module=function(a){a=["Module",1,a];a.__enum__=Sa;a.toString=z;return a};Sa.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=Sa;a.toString=z;return a};Sa.Method=function(a,b){a=["Method",3,a,b];a.__enum__=Sa;a.toString=z;return a};
Sa.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=Sa;a.toString=z;return a};var Ob=function(){};f["haxe.CallStack"]=Ob;Ob.__name__=["haxe","CallStack"];Ob.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){a=[];for(var c=0;c<b.length;){var d=b[c];++c;null!=Ob.wrapCallSite&&(d=Ob.wrapCallSite(d));var I=null,f=d.getFunctionName();if(null!=f){var k=f.lastIndexOf(".");0<=k&&(I=w.substr(f,0,k),f=w.substr(f,k+1,null),I=Sa.Method(I,
f))}a.push(Sa.FilePos(I,d.getFileName(),d.getLineNumber()))}return a};a=Ob.makeStack(a.stack);Error.prepareStackTrace=b;return a};Ob.callStack=function(){try{throw Error();}catch(b){b instanceof q&&(b=b.val);var a=Ob.getStack(b);a.shift();return a}};Ob.makeStack=function(a){if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new Oc("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){e=c.matched(1).split(".");
var g=e.pop(),I=c.matched(2),f=V.parseInt(c.matched(3));b.push(Sa.FilePos("Anonymous function"==g?Sa.LocalFunction():"Global code"==g?null:Sa.Method(e.join("."),g),I,f))}else b.push(Sa.Module(W.trim(e)))}return b}return a};var vc=function(){};f["haxe.IMap"]=vc;vc.__name__=["haxe","IMap"];vc.prototype={__class__:vc};var ue=function(a,b){this.high=a;this.low=b};f["haxe._Int64.___Int64"]=ue;ue.__name__=["haxe","_Int64","___Int64"];ue.prototype={__class__:ue};var T=function(){};f["haxe.Log"]=T;T.__name__=
["haxe","Log"];T.trace=function(a,b){B.__trace(a,b)};var Zc=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};f["haxe.Timer"]=Zc;Zc.__name__=["haxe","Timer"];Zc.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Zc};var $c=function(){};f["haxe._Unserializer.DefaultResolver"]=$c;$c.__name__=["haxe","_Unserializer","DefaultResolver"];$c.prototype={resolveClass:function(a){return aa.resolveClass(a)},resolveEnum:function(a){return aa.resolveEnum(a)},
__class__:$c};var Xa=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=Xa.DEFAULT_RESOLVER;null==a&&(a=new $c,Xa.DEFAULT_RESOLVER=a);this.resolver=a};f["haxe.Unserializer"]=Xa;Xa.__name__=["haxe","Unserializer"];Xa.initCodes=function(){for(var a=[],b=0,c=Xa.BASE64.length;b<c;){var d=b++;a[Xa.BASE64.charCodeAt(d)]=d}return a};Xa.run=function(a){return(new Xa(a)).unserialize()};Xa.prototype={readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);
if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(w.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new q("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw new q("Invalid object key");
var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw new q("Invalid enum format");var c=this.readDigits();if(0==c)return aa.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return aa.createEnum(a,b,d)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw new q("Class not found "+a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);
if(null==b)throw new q("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new q("Class not found "+a);a=aa.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw new q("Invalid custom data");return a;case 77:a=new jb;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new q("Invalid string reference");
return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new r;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);){b=this.unserialize();var c=this.unserialize();null!=k[b]?a.setReserved(b,c):a.h[b]=c}this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new q("Class not found "+
a);a=aa.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new q("Enum not found "+a);this.pos++;c=this.readDigits();var d=b.__constructs__.slice()[c];if(null==d)throw new q("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new sc;for(this.cache.push(a);104!=
this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new ba;this.cache.push(a);for(b=this.buf.charCodeAt(this.pos++);58==b;)b=this.readDigits(),c=this.unserialize(),a.h[b]=c,b=this.buf.charCodeAt(this.pos++);if(104!=b)throw new q("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new q("Invalid reference");
return this.cache[a];case 115:a=this.readDigits();d=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new q("Invalid bytes length");var e=Xa.CODES;null==e&&(e=Xa.initCodes(),Xa.CODES=e);var g=this.pos,f=a&3,h=g+(a-f);b=new X(new gb(3*(a>>2)+(2<=f?f-1:0)));for(c=0;g<h;){var l=e[d.charCodeAt(g++)],m=e[d.charCodeAt(g++)];b.b[c++]=(l<<2|m>>4)&255;l=e[d.charCodeAt(g++)];b.b[c++]=(m<<4|l>>2)&255;m=e[d.charCodeAt(g++)];b.b[c++]=(l<<6|m)&255}2<=f&&(m=e[d.charCodeAt(g++)],h=e[d.charCodeAt(g++)],
b.b[c++]=(m<<2|h>>4)&255,3==f&&(d=e[d.charCodeAt(g++)],b.b[c++]=(h<<4|d>>2)&255));this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=w.strDate(w.substr(this.buf,
this.pos,19)),this.pos+=19):(a=this.readFloat(),a=new Date(a)),this.cache.push(a),a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new q("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw q.wrap(this.unserialize());case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new q("Invalid string length");b=w.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));
this.scache.push(b);return b;case 122:return 0}this.pos--;throw new q("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:Xa};var ic=function(){this.a1=1;this.a2=0};f["haxe.crypto.Adler32"]=ic;ic.__name__=["haxe","crypto","Adler32"];ic.read=function(a){var b=new ic,c=a.readByte(),d=a.readByte(),e=a.readByte();a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};ic.prototype={update:function(a,b,c){var d=this.a1,e=this.a2,g=b;for(b+=c;g<b;)c=g++,d=(d+a.b[c])%65521,e=(e+d)%65521;
this.a1=d;this.a2=e},equals:function(a){return a.a1==this.a1?a.a2==this.a2:!1},__class__:ic};var X=function(a){this.length=a.byteLength;this.b=new kb(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};f["haxe.io.Bytes"]=X;X.__name__=["haxe","io","Bytes"];X.alloc=function(a){return new X(new gb(a))};X.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=a.charCodeAt(c++);55296<=d&&56319>=d&&(d=d-55232<<10|a.charCodeAt(c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|
d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new X((new kb(b)).buffer)};X.ofData=function(a){var b=a.hxBytes;return null!=b?b:new X(a)};X.fastGet=function(a,b){return a.bytes[b]};X.prototype={blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+d>b.length)throw new q(Ca.OutsideBounds);0==c&&d==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+d),a)},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw new q(Ca.OutsideBounds);
var c="",d=this.b,e=String.fromCharCode,g=a;for(a+=b;g<a;)if(b=d[g++],128>b){if(0==b)break;c+=e(b)}else if(224>b)c+=e((b&63)<<6|d[g++]&127);else if(240>b){var f=d[g++];c+=e((b&31)<<12|(f&127)<<6|d[g++]&127)}else{f=d[g++];var k=d[g++];b=(b&15)<<18|(f&127)<<12|(k&127)<<6|d[g++]&127;c+=e((b>>10)+55232);c+=e(b&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:X};var Hb=function(){};f["haxe.crypto.Base64"]=Hb;Hb.__name__=["haxe","crypto","Base64"];Hb.encode=function(a,
b){null==b&&(b=!0);var c=(new wc(Hb.BYTES)).encodeBytes(a).toString();if(b)switch(a.length%3){case 1:c+="==";break;case 2:c+="="}return c};Hb.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==w.cca(a,a.length-1);)a=w.substr(a,0,-1);return(new wc(Hb.BYTES)).decodeBytes(X.ofString(a))};var wc=function(a){for(var b=a.length,c=1;b>1<<c;)++c;if(8<c||b!=1<<c)throw new q("BaseCode : base length must be a power of two.");this.base=a;this.nbits=c};f["haxe.crypto.BaseCode"]=wc;wc.__name__=["haxe","crypto",
"BaseCode"];wc.prototype={encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=8*a.length/b|0,e=new X(new gb(d+(0==8*a.length%b?0:1))),g=0,f=0,k=(1<<b)-1,h=0,l=0;l<d;){for(;f<b;)f+=8,g<<=8,g|=a.b[h++];f-=b;e.b[l++]=c.b[g>>f&k]&255}0<f&&(e.b[l++]=c.b[g<<b-f&k]&255);return e},initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.b[d]]=d}this.tbl=a},decodeBytes:function(a){var b=this.nbits;null==this.tbl&&this.initTable();for(var c=
this.tbl,d=a.length*b>>3,e=new X(new gb(d)),g=0,f=0,k=0,h=0;h<d;){for(;8>f;){f+=b;g<<=b;var l=c[a.b[k++]];if(-1==l)throw new q("BaseCode : invalid encoded char");g|=l}f-=8;e.b[h++]=g>>f&255}return e},__class__:wc};var ba=function(){this.h={}};f["haxe.ds.IntMap"]=ba;ba.__name__=["haxe","ds","IntMap"];ba.__interfaces__=[vc];ba.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return w.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:ba};var jb=function(){this.h={__keys__:{}}};f["haxe.ds.ObjectMap"]=jb;jb.__name__=["haxe","ds","ObjectMap"];jb.__interfaces__=[vc];jb.assignId=function(a){return a.__id__=++jb.count};jb.getId=function(a){return a.__id__};
jb.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++jb.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},__class__:jb};var ub=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};f["haxe.ds._StringMap.StringMapIterator"]=ub;ub.__name__=["haxe","ds","_StringMap","StringMapIterator"];
ub.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=k[b]?a.getReserved(b):a.h[b]},__class__:ub};var r=function(){this.h={}};f["haxe.ds.StringMap"]=r;r.__name__=["haxe","ds","StringMap"];r.__interfaces__=[vc];r.prototype={set:function(a,b){null!=k[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=k[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=k[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},
setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=k[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){return w.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&
a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},__class__:r};var ve=function(){this.b=[]};f["haxe.io.BytesBuffer"]=ve;ve.__name__=["haxe","io","BytesBuffer"];ve.prototype={getBytes:function(){var a=new X((new kb(this.b)).buffer);this.b=null;return a},__class__:ve};var ad=function(){};f["haxe.io.Input"]=ad;ad.__name__=["haxe","io","Input"];ad.prototype={readByte:function(){throw new q("Not implemented");},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||
0>c||b+c>a.length)throw new q(Ca.OutsideBounds);try{for(;0<d;)e[b]=this.readByte(),++b,--d}catch(g){if(g instanceof q&&(g=g.val),!B.__instanceof(g,xc))throw g;}return c-d},read:function(a){for(var b=new X(new gb(a)),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw new q(Ca.Blocked);c+=d;a-=d}return b},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},__class__:ad};var bd=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw new q(Ca.OutsideBounds);
this.b=a.b;this.pos=b;this.totlen=this.len=c};f["haxe.io.BytesInput"]=bd;bd.__name__=["haxe","io","BytesInput"];bd.__super__=ad;bd.prototype=n(ad.prototype,{readByte:function(){if(0==this.len)throw new q(new xc);this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new q(Ca.OutsideBounds);if(0==this.len&&0<c)throw new q(new xc);this.len<c&&(c=this.len);var d=this.b;a=a.b;for(var e=0,g=c;e<g;){var f=e++;a[b+f]=d[this.pos+f]}this.pos+=c;this.len-=c;return c},
__class__:bd});var xc=function(){};f["haxe.io.Eof"]=xc;xc.__name__=["haxe","io","Eof"];xc.prototype={toString:function(){return"Eof"},__class__:xc};var Ca=f["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};Ca.Blocked=["Blocked",0];Ca.Blocked.toString=z;Ca.Blocked.__enum__=Ca;Ca.Overflow=["Overflow",1];Ca.Overflow.toString=z;Ca.Overflow.__enum__=Ca;Ca.OutsideBounds=["OutsideBounds",2];Ca.OutsideBounds.toString=z;Ca.OutsideBounds.__enum__=Ca;Ca.Custom=function(a){a=
["Custom",3,a];a.__enum__=Ca;a.toString=z;return a};var hb=function(){};f["haxe.io.FPHelper"]=hb;hb.__name__=["haxe","io","FPHelper"];hb.i32ToFloat=function(a){var b=a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,b-127)};hb.floatToI32=function(a){if(0==a)return 0;var b=0>a?-a:a,c=Math.floor(Math.log(b)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);b=Math.round(8388608*(b/Math.pow(2,c)-1));8388608==b&&128>c&&(b=0,++c);return(0>a?-2147483648:0)|c+127<<
23|b};hb.i64ToDouble=function(a,b){var c=(b>>20&2047)-1023;a=4294967296*(b&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==a&&-1023==c?0:(1-(b>>>31<<1))*(1+Math.pow(2,-52)*a)*Math.pow(2,c)};hb.doubleToI64=function(a){var b=hb.i64tmp;if(0==a)b.low=0,b.high=0;else if(isFinite(a)){var c=0>a?-a:a,d=Math.floor(Math.log(c)/.6931471805599453);c=Math.round(4503599627370496*(c/Math.pow(2,d)-1));b.low=c|0;b.high=(0>a?-2147483648:0)|d+1023<<20|c/4294967296|0}else 0<a?(b.low=0,b.high=2146435072):(b.low=
0,b.high=-1048576);return b};var yc=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=w.substr(a,0,c),a=w.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=w.substr(a,0,b),a=w.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=w.substr(a,b+1,null),this.file=w.substr(a,0,b)):(this.ext=null,this.file=a)};f["haxe.io.Path"]=yc;yc.__name__=["haxe","io","Path"];yc.directory=function(a){a=new yc(a);return null==
a.dir?"":a.dir};yc.prototype={__class__:yc};var xb=function(){};f["haxe.rtti.Meta"]=xb;xb.__name__=["haxe","rtti","Meta"];xb.getType=function(a){a=xb.getMeta(a);return null==a||null==a.obj?{}:a.obj};xb.getMeta=function(a){return a.__meta__};xb.getStatics=function(a){a=xb.getMeta(a);return null==a||null==a.statics?{}:a.statics};xb.getFields=function(a){a=xb.getMeta(a);return null==a||null==a.fields?{}:a.fields};var yb=f["haxe.zip.Huffman"]={__ename__:!0,__constructs__:["Found","NeedBit","NeedBits"]};
yb.Found=function(a){a=["Found",0,a];a.__enum__=yb;a.toString=z;return a};yb.NeedBit=function(a,b){a=["NeedBit",1,a,b];a.__enum__=yb;a.toString=z;return a};yb.NeedBits=function(a,b){a=["NeedBits",2,a,b];a.__enum__=yb;a.toString=z;return a};var we=function(){};f["haxe.zip.HuffTools"]=we;we.__name__=["haxe","zip","HuffTools"];we.prototype={treeDepth:function(a){switch(a[1]){case 0:return 0;case 1:var b=a[3];a=this.treeDepth(a[2]);b=this.treeDepth(b);return 1+(a<b?a:b);case 2:throw new q("assert");}},
treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){if(1==a[1])return b=a[3],yb.NeedBit(this.treeCompress(a[2]),this.treeCompress(b));throw new q("assert");}for(var c=[],d=0,e=1<<b;d<e;)d++,c.push(yb.Found(-1));this.treeWalk(c,0,0,b,a);return yb.NeedBits(b,c)},treeWalk:function(a,b,c,d,e){if(1==e[1]){var g=e[3],f=e[2];0<d?(this.treeWalk(a,b,c+1,d-1,f),this.treeWalk(a,b|1<<c,c+1,d-1,g)):a[b]=this.treeCompress(e)}else a[b]=this.treeCompress(e)},treeMake:function(a,b,c,d){if(d>
b)throw new q("Invalid huffman");var e=c<<5|d;if(a.h.hasOwnProperty(e))return yb.Found(a.h[e]);c<<=1;++d;return yb.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},make:function(a,b,c,d){var e=[],g=[];if(32<d)throw new q("Invalid huffman");for(var f=0;f<d;)f++,e.push(0),g.push(0);for(f=0;f<c;){var k=f++;k=a[k+b];if(k>=d)throw new q("Invalid huffman");e[k]++}f=0;k=1;for(var h=d-1;k<h;){var l=k++;f=f+e[l]<<1;g[l]=f}e=new ba;for(f=0;f<c;)k=f++,h=a[k+b],0!=h&&(l=g[h-1],g[h-1]=l+1,e.h[l<<5|h]=
k);return this.treeCompress(yb.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},__class__:we};var xe=function(a){this.buffer=new X(new gb(65536));this.pos=0;a&&(this.crc=new ic)};f["haxe.zip._InflateImpl.Window"]=xe;xe.__name__=["haxe","zip","_InflateImpl","Window"];xe.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=new X(new gb(65536));this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=a},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();
this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:xe};var O=f["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:"Head Block CData Flat Crc Dist DistOne Done".split(" ")};O.Head=["Head",0];O.Head.toString=z;
O.Head.__enum__=O;O.Block=["Block",1];O.Block.toString=z;O.Block.__enum__=O;O.CData=["CData",2];O.CData.toString=z;O.CData.__enum__=O;O.Flat=["Flat",3];O.Flat.toString=z;O.Flat.__enum__=O;O.Crc=["Crc",4];O.Crc.toString=z;O.Crc.__enum__=O;O.Dist=["Dist",5];O.Dist.toString=z;O.Dist.__enum__=O;O.DistOne=["DistOne",6];O.DistOne.toString=z;O.DistOne.__enum__=O;O.Done=["Done",7];O.Done.toString=z;O.Done.__enum__=O;var Da=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this["final"]=!1;this.htools=new we;
this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?O.Head:O.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];for(a=0;19>a;)a++,this.lengths.push(-1);this.window=new xe(c)};f["haxe.zip.InflateImpl"]=Da;Da.__name__=["haxe","zip","InflateImpl"];Da.run=function(a,b){null==b&&(b=65536);var c=new X(new gb(b)),d=new ve;for(a=new Da(a);;){var e=a.readBytes(c,0,b);if(0>e||e>c.length)throw new q(Ca.OutsideBounds);for(var g=
c.b,f=0,k=e;f<k;){var h=f++;d.b.push(g[h])}if(e<b)break}return d.getBytes()};Da.prototype={buildFixedHuffman:function(){if(null!=Da.FIXED_HUFFMAN)return Da.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}Da.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return Da.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<
this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);
this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a[1]){case 0:return a[2];case 1:var b=a[3];a=a[2];return this.applyHuffman(this.getBit()?b:a);case 2:return this.applyHuffman(a[3][this.getBits(a[2])])}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);
switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=e;a[c]=e;++c;break;case 16:e=c+3+this.getBits(2);if(e>b)throw new q("Invalid data");for(;c<e;)a[c]=d,++c;break;case 17:c+=3+this.getBits(3);if(c>b)throw new q("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw new q("Invalid data");break;default:throw new q("Invalid data");}}},inflateLoop:function(){switch(this.state[1]){case 0:var a=this.input.readByte();
if(8!=(a&15))throw new q("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw new q("Invalid data");if(c)throw new q("Unsupported dictionary");this.state=O.Block;return!0;case 1:switch(this["final"]=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw new q("Invalid data");this.state=O.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=
null,this.state=O.CData,!0;case 2:a=this.getBits(5)+257;b=this.getBits(5)+1;c=this.getBits(4)+4;for(var d=0;d<c;){var e=d++;this.lengths[Da.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(;19>c;)d=c++,this.lengths[Da.CODE_LENGTHS_POS[d]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];d=0;for(e=a+b;d<e;)d++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=O.CData;return!0;default:throw new q("Invalid data");}case 2:b=
this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this["final"]?O.Crc:O.Block;else{b-=257;a=Da.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw new q("Invalid data");this.len=Da.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=Da.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw new q("Invalid data");this.dist=Da.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw new q("Invalid data");
this.state=1==this.dist?O.DistOne:O.Dist}return!0;case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this["final"]?O.Crc:O.Block),0<this.needed;case 4:a=this.window.checksum();if(null==a)return this.state=O.Done,!0;b=ic.read(this.input);if(!a.equals(b))throw new q("Invalid CRC");this.state=O.Done;return!0;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,
this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=O.CData);return 0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=O.CData),0<this.needed;case 7:return!1}},__class__:Da};var Mf=function(){};f["haxe.zip.Uncompress"]=Mf;Mf.__name__=["haxe","zip","Uncompress"];Mf.run=function(a,b){return Da.run(new bd(a),b)};var q=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,
q)};f["js._Boot.HaxeError"]=q;q.__name__=["js","_Boot","HaxeError"];q.wrap=function(a){return a instanceof Error?a:new q(a)};q.__super__=Error;q.prototype=n(Error.prototype,{__class__:q});var B=function(){};f["js.Boot"]=B;B.__name__=["js","Boot"];B.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};B.__trace=function(a,b){var c=null!=b?b.fileName+":"+b.lineNumber+": ":"";c+=B.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(a=0,b=b.customParams;a<
b.length;){var d=b[a];++a;c+=","+B.__string_rec(d,"")}if("undefined"!=typeof document){var e=document.getElementById("haxe:trace");a=null!=e}else a=!1;a?e.innerHTML+=B.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};B.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=B.__nativeClassName(a);return null!=a?B.__resolveNativeClass(a):null};B.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";
var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;){var g=d++;c=2!=g?c+(","+B.__string_rec(a[g],b)):c+B.__string_rec(a[g],b)}return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)g=e++,d+=(0<g?",":"")+B.__string_rec(a[g],b);return d+"]"}try{d=a.toString}catch(I){return"???"}if(null!=d&&d!=Object.toString&&"function"==
typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+B.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};B.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<
e;){var g=d++;g=c[g];if(g==b||B.__interfLoop(g,b))return!0}return B.__interfLoop(a.__super__,b)};B.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case Zf:return"boolean"==typeof a;case lg:return!0;case Nf:return"number"==typeof a;case Yf:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||B.__interfLoop(B.getClass(a),b))return!0}else{if("object"==
typeof b&&B.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==mg&&null!=a.__name__||b==ng&&null!=a.__ename__?!0:a.__enum__==b}};B.__cast=function(a,b){if(B.__instanceof(a,b))return a;throw new q("Cannot cast "+V.string(a)+" to "+V.string(b));};B.__nativeClassName=function(a){a=B.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};B.__isNativeObj=function(a){return null!=B.__nativeClassName(a)};B.__resolveNativeClass=function(a){return qa[a]};
var ab=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;){var c=b++;this.a[c]=0}this.byteLength=a}};f["js.html.compat.ArrayBuffer"]=ab;ab.__name__=["js","html","compat","ArrayBuffer"];ab.sliceImpl=function(a,b){a=new kb(this,a,null==b?null:b-a);b=new gb(a.byteLength);(new kb(b)).set(a);return b};ab.prototype={slice:function(a,b){return new ab(this.a.slice(a,b))},__class__:ab};var Of=function(a,b,c){this.buf=a;this.offset=null==b?
0:b;this.length=null==c?a.byteLength-this.offset:c;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new q(Ca.OutsideBounds);this.byteLength=this.length;this.byteOffset=this.offset;this.buffer=this.buf};f["js.html.compat.DataView"]=Of;Of.__name__=["js","html","compat","DataView"];Of.prototype={getInt8:function(a){a=this.buf.a[this.offset+a];return 128<=a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,b){a=this.getUint16(a,b);return 32768<=
a?a-65536:a},getUint16:function(a,b){return b?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,b){var c=this.offset+a;a=this.buf.a[c++];var d=this.buf.a[c++],e=this.buf.a[c++];c=this.buf.a[c++];return b?a|d<<8|e<<16|c<<24:c|e<<8|d<<16|a<<24},getUint32:function(a,b){a=this.getInt32(a,b);return 0>a?a+4294967296:a},getFloat32:function(a,b){return hb.i32ToFloat(this.getInt32(a,b))},getFloat64:function(a,b){var c=this.getInt32(a,
b);a=this.getInt32(a+4,b);return hb.i64ToDouble(b?c:a,b?a:c)},setInt8:function(a,b){this.buf.a[a+this.offset]=0>b?b+128&255:b&255},setUint8:function(a,b){this.buf.a[a+this.offset]=b&255},setInt16:function(a,b,c){this.setUint16(a,0>b?b+65536:b,c)},setUint16:function(a,b,c){a+=this.offset;c?(this.buf.a[a]=b&255,this.buf.a[a++]=b>>8&255):(this.buf.a[a++]=b>>8&255,this.buf.a[a]=b&255)},setInt32:function(a,b,c){this.setUint32(a,b,c)},setUint32:function(a,b,c){a+=this.offset;c?(this.buf.a[a++]=b&255,this.buf.a[a++]=
b>>8&255,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>>24):(this.buf.a[a++]=b>>>24,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b&255)},setFloat32:function(a,b,c){this.setUint32(a,hb.floatToI32(b),c)},setFloat64:function(a,b,c){b=hb.doubleToI64(b);c?(this.setUint32(a,b.low),this.setUint32(a,b.high)):(this.setUint32(a,b.high),this.setUint32(a,b.low))},__class__:Of};var Pb=function(){};f["js.html.compat.Float32Array"]=Pb;Pb.__name__=["js","html","compat","Float32Array"];Pb._new=
function(a,b,c){if("number"==typeof a){var d=[];for(b=0;b<a;){var e=b++;d[e]=0}d.byteLength=d.length<<2;d.byteOffset=0;a=[];b=0;for(e=d.length<<2;b<e;)b++,a.push(0);d.buffer=new ab(a)}else if(B.__instanceof(a,ab)){null==b&&(b=0);null==c&&(c=a.byteLength-b>>2);d=[];for(e=0;e<c;){e++;var g=a.a[b++]|a.a[b++]<<8|a.a[b++]<<16|a.a[b++]<<24;d.push(hb.i32ToFloat(g))}d.byteLength=d.length<<2;d.byteOffset=b;d.buffer=a}else if(a instanceof Array&&null==a.__enum__){d=a.slice();a=[];for(b=0;b<d.length;)e=d[b],
++b,e=hb.floatToI32(e),a.push(e&255),a.push(e>>8&255),a.push(e>>16&255),a.push(e>>>24);d.byteLength=d.length<<2;d.byteOffset=0;d.buffer=new ab(a)}else throw new q("TODO "+V.string(a));d.subarray=Pb._subarray;d.set=Pb._set;return d};Pb._set=function(a,b){if(B.__instanceof(a.buffer,ab)){if(a.byteLength+b>this.byteLength)throw new q("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new q("set() outside of range");
c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new q("TODO");};Pb._subarray=function(a,b){b=Pb._new(this.slice(a,b));b.byteOffset=4*a;return b};var Qb=function(){};f["js.html.compat.Uint8Array"]=Qb;Qb.__name__=["js","html","compat","Uint8Array"];Qb._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new ab(c)}else if(B.__instanceof(a,ab))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=
c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new ab(c);else throw new q("TODO "+V.string(a));c.subarray=Qb._subarray;c.set=Qb._set;return c};Qb._set=function(a,b){if(B.__instanceof(a.buffer,ab)){if(a.byteLength+b>this.byteLength)throw new q("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new q("set() outside of range");
c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new q("TODO");};Qb._subarray=function(a,b){b=Qb._new(this.slice(a,b));b.byteOffset=a;return b};var ne=function(){this.connected=!0;this.buttons=[];this.axes=[]};f["lime._backend.html5.GameDeviceData"]=ne;ne.__name__=["lime","_backend","html5","GameDeviceData"];ne.prototype={__class__:ne};var ze=function(a){this.parent=a;this.id=-1;this.gain=1;this.position=new ye};f["lime._backend.html5.HTML5AudioSource"]=ze;ze.__name__=["lime","_backend","html5",
"HTML5AudioSource"];ze.prototype={init:function(){},getLength:function(){return 0!=this.length?this.length:null!=this.parent.buffer?1E3*this.parent.buffer.__srcHowl.duration()|0:0},setLength:function(a){return this.length=a},setLoops:function(a){return this.loops=a},__class__:ze};var Ae=function(a){this.__context=a;this.version=1;this.type=sb.WEBGL;if(null!=a){var b=a;Object.prototype.hasOwnProperty.call(b,"rawgl")&&(b=D.field(a,"rawgl"));Object.prototype.hasOwnProperty.call(window,"WebGL2RenderingContext")&&
B.__instanceof(b,WebGL2RenderingContext)&&(this.version=2)}};f["lime._backend.html5.HTML5GLRenderContext"]=Ae;Ae.__name__=["lime","_backend","html5","HTML5GLRenderContext"];Ae.prototype={getString:function(a){return 7939==a?this.__context.getSupportedExtensions().join(" "):this.__context.getParameter(a)},__class__:Ae};var A=function(){this.validStatus0=(new Oc("Tizen","gi")).match(window.navigator.userAgent)};f["lime._backend.html5.HTML5HTTPRequest"]=A;A.__name__=["lime","_backend","html5","HTML5HTTPRequest"];
A.loadImage=function(a){var b=new bb;A.activeRequests<A.requestLimit?(A.activeRequests++,A.__loadImage(a,b)):A.requestQueue.add({instance:null,uri:a,promise:b,type:"IMAGE"});return b.future};A.processQueue=function(){if(A.activeRequests<A.requestLimit&&0<A.requestQueue.length){A.activeRequests++;var a=A.requestQueue.pop();switch(a.type){case "BINARY":a.instance.__loadData(a.uri,a.promise);break;case "IMAGE":A.__loadImage(a.uri,a.promise);break;case "TEXT":a.instance.__loadText(a.uri,a.promise);break;
default:A.activeRequests--}}};A.__fixHostname=function(a){return null==a?"":a};A.__fixPort=function(a,b){if(null==a||""==a)switch(b){case "ftp:":return"21";case "gopher:":return"70";case "http:":return"80";case "https:":return"443";case "ws:":return"80";case "wss:":return"443";default:return""}return a};A.__fixProtocol=function(a){return null==a||""==a?"http:":a};A.__isSameOrigin=function(a){null==A.originElement&&(A.originElement=window.document.createElement("a"),A.originHostname=A.__fixHostname(window.location.hostname),
A.originProtocol=A.__fixProtocol(window.location.protocol),A.originPort=A.__fixPort(window.location.port,A.originProtocol));var b=A.originElement;b.href=a;""==b.hostname&&(b.href=b.href);var c=A.__fixHostname(b.hostname);a=A.__fixProtocol(b.protocol);b=A.__fixPort(b.port,a);c=""==c||c==A.originHostname;b=""==b||b==A.originPort;return"file:"!=a&&c?b:!1};A.__loadImage=function(a,b){var c=new Image;A.__isSameOrigin(a)||(c.crossOrigin="Anonymous");null==A.supportsImageProgress&&(A.supportsImageProgress=
"onprogress"in c);if(A.supportsImageProgress||W.startsWith(a,"data:"))c.addEventListener("load",function(a){a=new Ib(null,c.width,c.height);a.__srcImage=c;A.activeRequests--;A.processQueue();b.complete(new R(a))},!1),c.addEventListener("progress",function(a){b.progress(a.loaded,a.total)},!1),c.addEventListener("error",function(a){A.activeRequests--;A.processQueue();b.error(a.detail)},!1),c.src=a;else{var d=new XMLHttpRequest;d.onload=function(a){A.activeRequests--;A.processQueue();(new R).__fromBytes(X.ofData(d.response),
function(a){b.complete(a)})};d.onerror=function(a){b.error(a.message)};d.onprogress=function(a){a.lengthComputable&&b.progress(a.loaded,a.total)};d.open("GET",a,!0);d.responseType="arraybuffer";d.overrideMimeType("text/plain; charset=x-user-defined");d.send(null)}};A.prototype={init:function(a){this.parent=a},load:function(a,b,c){this.request=new XMLHttpRequest;"POST"==this.parent.method?this.request.upload.addEventListener("progress",b,!1):this.request.addEventListener("progress",b,!1);this.request.onreadystatechange=
c;b="";if(null==this.parent.data){for(c=this.parent.formData.keys();c.hasNext();){var d=c.next();0<b.length&&(b+="&");var e=encodeURIComponent(d)+"=",g=this.parent.formData;d=V.string(null!=k[d]?g.getReserved(d):g.h[d]);b+=e+encodeURIComponent(d)}"GET"==this.parent.method&&""!=b&&(a=-1<a.indexOf("?")?a+("&"+b):a+("?"+b),b="")}this.request.open(V.string(this.parent.method),a,!0);0<this.parent.timeout&&(this.request.timeout=this.parent.timeout);this.binary&&(this.request.responseType="arraybuffer");
a=null;c=0;for(e=this.parent.headers;c<e.length;)d=e[c],++c,"Content-Type"==d.name?a=d.value:this.request.setRequestHeader(d.name,d.value);null!=this.parent.contentType&&(a=this.parent.contentType);null==a&&(null!=this.parent.data?a="application/octet-stream":""!=b&&(a="application/x-www-form-urlencoded"));null!=a&&this.request.setRequestHeader("Content-Type",a);this.parent.withCredentials&&(this.request.withCredentials=!0);null!=this.parent.data?this.request.send(this.parent.data.b.bufferValue):
this.request.send(b)},loadData:function(a){var b=new bb;A.activeRequests<A.requestLimit?(A.activeRequests++,this.__loadData(a,b)):A.requestQueue.add({instance:this,uri:a,promise:b,type:"BINARY"});return b.future},loadText:function(a){var b=new bb;A.activeRequests<A.requestLimit?(A.activeRequests++,this.__loadText(a,b)):A.requestQueue.add({instance:this,uri:a,promise:b,type:"TEXT"});return b.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=[];for(var a,
b,c=0,d=this.request.getAllResponseHeaders().split("\n");c<d.length;)b=d[c],++c,a=W.trim(w.substr(b,0,b.indexOf(":"))),b=W.trim(w.substr(b,b.indexOf(":")+1,null)),""!=a&&this.parent.responseHeaders.push(new cd(a,b))}this.parent.responseStatus=this.request.status},__loadData:function(a,b){var c=this;this.binary=!0;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>c.request.status||c.validStatus0&&0==c.request.status)?
(a=null,""==c.request.responseType?null!=c.request.responseText&&(a=X.ofString(c.request.responseText)):null!=c.request.response&&(a=X.ofData(c.request.response)),c.processResponse(),b.complete(a)):(c.processResponse(),b.error(c.request.status)),c.request=null,A.activeRequests--,A.processQueue())})},__loadText:function(a,b){var c=this;this.binary=!1;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>=c.request.status||
c.validStatus0&&0==c.request.status)?(c.processResponse(),b.complete(c.request.responseText)):(c.processResponse(),b.error(c.request.status)),c.request=null,A.activeRequests--,A.processQueue())})},__class__:A};var Be=function(a){this.parent=a};f["lime._backend.html5.HTML5Renderer"]=Be;Be.__name__=["lime","_backend","html5","HTML5Renderer"];Be.prototype={create:function(){this.createContext();0==this.parent.context[1]&&(this.parent.window.backend.canvas.addEventListener("webglcontextlost",h(this,this.handleEvent),
!1),this.parent.window.backend.canvas.addEventListener("webglcontextrestored",h(this,this.handleEvent),!1))},createContext:function(){if(null!=this.parent.window.backend.div)this.parent.context=Ia.DOM(this.parent.window.backend.div),this.parent.type=ha.DOM;else if(null!=this.parent.window.backend.canvas){var a=null,b=this.parent.window.backend.renderType,c="webgl1"!=b;if("opengl"==b||"webgl"==b||"webgl1"==b||"webgl2"==b||"canvas"!=b&&(!Object.prototype.hasOwnProperty.call(this.parent.window.config,
"hardware")||this.parent.window.config.hardware)){b=Object.prototype.hasOwnProperty.call(this.parent.window.config,"background")&&null==this.parent.window.config.background;var d=Object.prototype.hasOwnProperty.call(this.parent.window.config,"colorDepth")?this.parent.window.config.colorDepth:16,e=Object.prototype.hasOwnProperty.call(this.parent.window.config,"antialiasing")&&0<this.parent.window.config.antialiasing;b={alpha:b||16<d,antialias:e,depth:Object.prototype.hasOwnProperty.call(this.parent.window.config,
"depthBuffer")?this.parent.window.config.depthBuffer:!0,premultipliedAlpha:!0,stencil:Object.prototype.hasOwnProperty.call(this.parent.window.config,"stencilBuffer")&&this.parent.window.config.stencilBuffer,preserveDrawingBuffer:!1};d=["webgl","experimental-webgl"];c&&d.unshift("webgl2");for(c=0;c<d.length&&(a=d[c],++c,a=this.parent.window.backend.canvas.getContext(a,b),null==a););}null==a?(this.parent.context=Ia.CANVAS(this.parent.window.backend.canvas.getContext("2d")),this.parent.type=ha.CANVAS):
(m.context=new Ae(a),this.parent.context=Ia.OPENGL(m.context),this.parent.type=ha.OPENGL)}},flip:function(){},handleEvent:function(a){switch(a.type){case "webglcontextlost":a.preventDefault();null!=m.context&&(m.context.__contextLost=!0);this.parent.context=null;this.parent.onContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onContextRestored.dispatch(this.parent.context)}},render:function(){},__class__:Be};var zc=function(a){this.unusedTouchesPool=new sc;this.scale=
1;this.currentTouches=new ba;this.parent=a;null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"element")&&(this.element=a.config.element);null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"renderer")&&(this.renderType=a.config.renderer);null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"allowHighDPI")&&a.config.allowHighDPI&&"dom"!=this.renderType&&(this.scale=window.devicePixelRatio);a.__scale=this.scale;this.cacheMouseY=this.cacheMouseX=0};f["lime._backend.html5.HTML5Window"]=
zc;zc.__name__=["lime","_backend","html5","HTML5Window"];zc.prototype={close:function(){this.parent.application.removeWindow(this.parent)},create:function(a){this.setWidth=this.parent.__width;this.setHeight=this.parent.__height;this.parent.id=zc.windowID++;B.__instanceof(this.element,HTMLCanvasElement)?this.canvas=this.element:"dom"==this.renderType?this.div=window.document.createElement("div"):this.canvas=window.document.createElement("canvas");null!=this.canvas?(a=this.canvas.style,a.setProperty("-webkit-transform",
"translateZ(0)",null),a.setProperty("transform","translateZ(0)",null)):null!=this.div&&(a=this.div.style,a.setProperty("-webkit-transform","translate3D(0,0,0)",null),a.setProperty("transform","translate3D(0,0,0)",null),a.position="relative",a.overflow="hidden",a.setProperty("-webkit-user-select","none",null),a.setProperty("-moz-user-select","none",null),a.setProperty("-ms-user-select","none",null),a.setProperty("-o-user-select","none",null));0==this.parent.__width&&0==this.parent.__height&&(null!=
this.element?(this.parent.set_width(this.element.clientWidth),this.parent.set_height(this.element.clientHeight)):(this.parent.set_width(window.innerWidth),this.parent.set_height(window.innerHeight)),this.cacheElementWidth=this.parent.__width,this.cacheElementHeight=this.parent.__height,this.resizeElement=!0);null!=this.canvas?(this.canvas.width=Math.round(this.parent.__width*this.scale),this.canvas.height=Math.round(this.parent.__height*this.scale),this.canvas.style.width=this.parent.__width+"px",
this.canvas.style.height=this.parent.__height+"px"):(this.div.style.width=this.parent.__width+"px",this.div.style.height=this.parent.__height+"px");this.updateSize();if(null!=this.element){null!=this.canvas?this.element!=this.canvas&&this.element.appendChild(this.canvas):this.element.appendChild(this.div);a="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(var b=0;b<a.length;){var c=a[b];++b;this.element.addEventListener(c,h(this,this.handleMouseEvent),!0)}window.document.addEventListener("dragstart",
function(a){return"img"==a.target.nodeName.toLowerCase()?(a.preventDefault(),!1):!0},!1);this.element.addEventListener("contextmenu",h(this,this.handleContextMenuEvent),!0);this.element.addEventListener("touchstart",h(this,this.handleTouchEvent),!0);this.element.addEventListener("touchmove",h(this,this.handleTouchEvent),!0);this.element.addEventListener("touchend",h(this,this.handleTouchEvent),!0);this.element.addEventListener("touchcancel",h(this,this.handleTouchEvent),!0);this.element.addEventListener("gamepadconnected",
h(this,this.handleGamepadEvent),!0);this.element.addEventListener("gamepaddisconnected",h(this,this.handleGamepadEvent),!0)}},handleContextMenuEvent:function(a){this.parent.onMouseUp.canceled&&a.preventDefault()},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":za.__connect(a.gamepad.index);"standard"==a.gamepad.mapping&&Ga.__connect(a.gamepad.index);break;case "gamepaddisconnected":za.__disconnect(a.gamepad.index),Ga.__disconnect(a.gamepad.index)}},handleMouseEvent:function(a){if("wheel"!=
a.type){if(null!=this.element)if(null!=this.canvas){var b=this.canvas.getBoundingClientRect();var c=this.parent.__width/b.width*(a.clientX-b.left);b=this.parent.__height/b.height*(a.clientY-b.top)}else null!=this.div?(b=this.div.getBoundingClientRect(),c=a.clientX-b.left,b=a.clientY-b.top):(b=this.element.getBoundingClientRect(),c=this.parent.__width/b.width*(a.clientX-b.left),b=this.parent.__height/b.height*(a.clientY-b.top));else c=a.clientX,b=a.clientY;switch(a.type){case "mousedown":this.parent.onMouseDown.dispatch(c,
b,a.button);this.parent.onMouseDown.canceled&&a.preventDefault();break;case "mouseenter":a.target==this.element&&(this.parent.onEnter.dispatch(),this.parent.onEnter.canceled&&a.preventDefault());break;case "mouseleave":a.target==this.element&&(this.parent.onLeave.dispatch(),this.parent.onLeave.canceled&&a.preventDefault());break;case "mousemove":if(c!=this.cacheMouseX||b!=this.cacheMouseY)this.parent.onMouseMove.dispatch(c,b),this.parent.onMouseMoveRelative.dispatch(c-this.cacheMouseX,b-this.cacheMouseY),
(this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&a.preventDefault();break;case "mouseup":this.parent.onMouseUp.dispatch(c,b,a.button),this.parent.onMouseUp.canceled&&a.preventDefault()}this.cacheMouseX=c;this.cacheMouseY=b}else this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY),this.parent.onMouseWheel.canceled&&a.preventDefault()},handleResizeEvent:function(a){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(a){a.preventDefault();var b=null;null!=
this.element&&(b=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.element.getBoundingClientRect());var c=this.setWidth,d=this.setHeight;if(0==c||0==d)null!=b?(c=b.width,d=b.height):d=c=1;for(var e,g,f,k,h,l=0,m=a.changedTouches;l<m.length;){var n=m[l];++l;null!=b?(g=c/b.width*(n.clientX-b.left),f=d/b.height*(n.clientY-b.top)):(g=n.clientX,f=n.clientY);if("touchstart"==a.type)e=this.unusedTouchesPool.pop(),null==e?e=new Ha(g/c,f/d,n.identifier,
0,0,n.force,this.parent.id):(e.x=g/c,e.y=f/d,e.id=n.identifier,e.dx=0,e.dy=0,e.pressure=n.force,e.device=this.parent.id),this.currentTouches.h[n.identifier]=e,Ha.onStart.dispatch(e),null==this.primaryTouch&&(this.primaryTouch=e),e==this.primaryTouch&&this.parent.onMouseDown.dispatch(g,f,0);else if(e=this.currentTouches.h[n.identifier],null!=e)switch(k=e.x,h=e.y,e.x=g/c,e.y=f/d,e.dx=e.x-k,e.dy=e.y-h,e.pressure=n.force,a.type){case "touchcancel":Ha.onCancel.dispatch(e);this.currentTouches.remove(n.identifier);
this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.primaryTouch=null);break;case "touchend":Ha.onEnd.dispatch(e);this.currentTouches.remove(n.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.parent.onMouseUp.dispatch(g,f,0),this.primaryTouch=null);break;case "touchmove":Ha.onMove.dispatch(e),e==this.primaryTouch&&this.parent.onMouseMove.dispatch(g,f)}}},resize:function(a,b){},updateSize:function(){if(this.parent.__resizable){if(null!=this.element){var a=this.element.clientWidth;
var b=this.element.clientHeight}else a=window.innerWidth,b=window.innerHeight;if(a!=this.cacheElementWidth||b!=this.cacheElementHeight){this.cacheElementWidth=a;this.cacheElementHeight=b;var c=this.resizeElement||0==this.setWidth&&0==this.setHeight;if(null!=this.element&&(null==this.div||null!=this.div&&c))if(c){if(this.parent.__width!=a||this.parent.__height!=b)this.parent.set_width(a),this.parent.set_height(b),null!=this.canvas?this.element!=this.canvas&&(this.canvas.width=Math.round(a*this.scale),
this.canvas.height=Math.round(b*this.scale),this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"):(this.div.style.width=a+"px",this.div.style.height=b+"px"),this.parent.onResize.dispatch(a,b)}else{c=0!=this.setWidth?a/this.setWidth:1;var d=0!=this.setHeight?b/this.setHeight:1,e=a,g=b,f=0,k=0;c<d?(g=Math.floor(this.setHeight*c),k=Math.floor((b-g)/2)):(e=Math.floor(this.setWidth*d),f=Math.floor((a-e)/2));null!=this.canvas?this.element!=this.canvas&&(this.canvas.style.width=e+"px",this.canvas.style.height=
g+"px",this.canvas.style.marginLeft=f+"px",this.canvas.style.marginTop=k+"px"):(this.div.style.width=e+"px",this.div.style.height=g+"px",this.div.style.marginLeft=f+"px",this.div.style.marginTop=k+"px")}}}},__class__:zc};var wa=function(a,b){null==b&&(b=!1);if(null!=a)if(b)b=new bb,b.future=this,Ta.queue({promise:b,work:a});else try{this.value=a(),this.isComplete=!0}catch(c){c instanceof q&&(c=c.val),this.error=c,this.isError=!0}};f["lime.app.Future"]=wa;wa.__name__=["lime","app","Future"];wa.withValue=
function(a){var b=new wa;b.isComplete=!0;b.value=a;return b};wa.prototype={onComplete:function(a){null!=a&&(this.isComplete?a(this.value):this.isError||(null==this.__completeListeners&&(this.__completeListeners=[]),this.__completeListeners.push(a)));return this},onError:function(a){null!=a&&(this.isError?a(this.error):this.isComplete||(null==this.__errorListeners&&(this.__errorListeners=[]),this.__errorListeners.push(a)));return this},onProgress:function(a){null!=a&&(null==this.__progressListeners&&
(this.__progressListeners=[]),this.__progressListeners.push(a));return this},then:function(a){if(this.isComplete)return a(this.value);if(this.isError){var b=new wa;b.onError(this.error);return b}var c=new bb;this.onError(h(c,c.error));this.onProgress(h(c,c.progress));this.onComplete(function(b){b=a(b);b.onError(h(c,c.error));b.onComplete(h(c,c.complete))});return c.future},__class__:wa};var Ta=function(){};f["lime.app._Future.FutureWork"]=Ta;Ta.__name__=["lime","app","_Future","FutureWork"];Ta.queue=
function(a){null==Ta.threadPool&&(Ta.threadPool=new Ce,Ta.threadPool.doWork.add(Ta.threadPool_doWork),Ta.threadPool.onComplete.add(Ta.threadPool_onComplete),Ta.threadPool.onError.add(Ta.threadPool_onError));Ta.threadPool.queue(a)};Ta.threadPool_doWork=function(a){try{var b=a.work();Ta.threadPool.sendComplete({promise:a.promise,result:b})}catch(c){c instanceof q&&(c=c.val),Ta.threadPool.sendError({promise:a.promise,error:c})}};Ta.threadPool_onComplete=function(a){a.promise.complete(a.result)};Ta.threadPool_onError=
function(a){a.promise.error(a.error)};var qe=function(){this.bytesTotalCache=new r;this.bytesLoadedCache2=new r;this.bytesLoadedCache=new jb;this.onProgress=new dd;this.onComplete=new Ea;this.bytesTotal=this.bytesLoaded=0;this.libraries=[];this.libraryNames=[];this.onProgress.add(h(this,this.update))};f["lime.app.Preloader"]=qe;qe.__name__=["lime","app","Preloader"];qe.prototype={addLibrary:function(a){this.libraries.push(a)},addLibraryName:function(a){-1==this.libraryNames.indexOf(a)&&this.libraryNames.push(a)},
create:function(a){},load:function(){for(var a=this,b=0,c=this.libraries;b<c.length;){var d=c[b];++b;this.bytesTotal+=d.bytesTotal}this.loadedLibraries=-1;this.preloadStarted=!1;b=0;for(c=this.libraries;b<c.length;)d=[c[b]],++b,oa.verbose("Preloading asset library",{fileName:"Preloader.hx",lineNumber:153,className:"lime.app.Preloader",methodName:"load"}),d[0].load().onProgress(function(b){return function(c,d){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+c:a.bytesLoaded+
(c-a.bytesLoadedCache.h[b[0].__id__]);a.bytesLoadedCache.set(b[0],c);a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}(d)).onComplete(function(b){return function(c){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+b[0].bytesTotal:a.bytesLoaded+(b[0].bytesTotal-a.bytesLoadedCache.h[b[0].__id__]);a.loadedAssetLibrary()}}(d)).onError(function(){return function(a){oa.error(a,{fileName:"Preloader.hx",lineNumber:191,className:"lime.app.Preloader",methodName:"load"})}}());
b=0;for(c=this.libraryNames;b<c.length;)++b,this.bytesTotal+=200;this.loadedLibraries++;this.preloadStarted=!0;this.updateProgress()},loadedAssetLibrary:function(a){this.loadedLibraries++;var b=this.loadedLibraries;this.preloadStarted||++b;var c=this.libraries.length+this.libraryNames.length;null!=a?oa.verbose("Loaded asset library: "+a+" ["+b+"/"+c+"]",{fileName:"Preloader.hx",lineNumber:223,className:"lime.app.Preloader",methodName:"loadedAssetLibrary"}):oa.verbose("Loaded asset library ["+b+"/"+
c+"]",{fileName:"Preloader.hx",lineNumber:227,className:"lime.app.Preloader",methodName:"loadedAssetLibrary"});this.updateProgress()},start:function(){this.complete||(this.complete=!0,this.onComplete.dispatch())},update:function(a,b){},updateProgress:function(){var a=this;this.simulateProgress||this.onProgress.dispatch(this.bytesLoaded,this.bytesTotal);if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=!0;for(var b=0,c=this.libraryNames;b<c.length;){var d=
[c[b]];++b;oa.verbose("Preloading asset library: "+d[0],{fileName:"Preloader.hx",lineNumber:276,className:"lime.app.Preloader",methodName:"updateProgress"});v.loadLibrary(d[0]).onProgress(function(b){return function(c,d){if(0<d){var e=a.bytesTotalCache;(null!=k[b[0]]?e.existsReserved(b[0]):e.h.hasOwnProperty(b[0]))||(e=a.bytesTotalCache,null!=k[b[0]]?e.setReserved(b[0],d):e.h[b[0]]=d,a.bytesTotal+=d-200);c>d&&(c=d);d=a.bytesLoadedCache2;(null!=k[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))?
(d=a.bytesLoadedCache2,a.bytesLoaded+=c-(null!=k[b[0]]?d.getReserved(b[0]):d.h[b[0]])):a.bytesLoaded+=c;d=a.bytesLoadedCache2;null!=k[b[0]]?d.setReserved(b[0],c):d.h[b[0]]=c;a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}}(d)).onComplete(function(b){return function(c){c=200;var d=a.bytesTotalCache;if(null!=k[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))c=a.bytesTotalCache,c=null!=k[b[0]]?c.getReserved(b[0]):c.h[b[0]];d=a.bytesLoadedCache2;(null!=k[b[0]]?d.existsReserved(b[0]):
d.h.hasOwnProperty(b[0]))?(d=a.bytesLoadedCache2,a.bytesLoaded+=c-(null!=k[b[0]]?d.getReserved(b[0]):d.h[b[0]])):a.bytesLoaded+=c;a.loadedAssetLibrary(b[0])}}(d)).onError(function(){return function(a){oa.error(a,{fileName:"Preloader.hx",lineNumber:335,className:"lime.app.Preloader",methodName:"updateProgress"})}}())}}this.simulateProgress||this.loadedLibraries!=this.libraries.length+this.libraryNames.length||(this.preloadComplete||(this.preloadComplete=!0,oa.verbose("Preload complete",{fileName:"Preloader.hx",
lineNumber:349,className:"lime.app.Preloader",methodName:"updateProgress"})),this.start())},__class__:qe};var bb=function(){this.future=new wa};f["lime.app.Promise"]=bb;bb.__name__=["lime","app","Promise"];bb.prototype={complete:function(a){if(!this.future.isError&&(this.future.isComplete=!0,this.future.value=a,null!=this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__completeListeners=null}return this},completeWith:function(a){a.onComplete(h(this,
this.complete));a.onError(h(this,this.error));a.onProgress(h(this,this.progress));return this},error:function(a){if(!this.future.isComplete&&(this.future.isError=!0,this.future.error=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__errorListeners=null}return this},progress:function(a,b){if(!this.future.isError&&!this.future.isComplete&&null!=this.future.__progressListeners)for(var c=0,d=this.future.__progressListeners;c<
d.length;){var e=d[c];++c;e(a,b)}return this},__class__:bb};var ed=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Float_Float_Int_Void"]=ed;ed.__name__=["lime","app","_Event_Float_Float_Int_Void"];ed.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,g=0;g<d.length&&(d[g](a,b,c),e[g]?++g:this.remove(d[g]),!this.canceled););},__class__:ed};var jc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=
[]};f["lime.app._Event_Float_Float_Void"]=jc;jc.__name__=["lime","app","_Event_Float_Float_Void"];jc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:jc};var De=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Float_Float_Void"]=De;De.__name__=["lime","app","_Event_Int_Float_Float_Void"];De.prototype={add:function(a,b,c){null==c&&
(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:De};var Ee=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Float_Void"]=Ee;Ee.__name__=["lime","app","_Event_Int_Float_Void"];Ee.prototype={add:function(a,
b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,
b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Ee};var dd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Int_Void"]=dd;dd.__name__=["lime","app","_Event_Int_Int_Void"];dd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:dd};
var cc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Void"]=cc;cc.__name__=["lime","app","_Event_Int_Void"];cc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:cc};var Fe=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=Fe;Fe.__name__=["lime",
"app","_Event_Int_lime_ui_JoystickHatPosition_Void"];Fe.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:Fe};var Ge=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_String_Int_Int_Void"]=
Ge;Ge.__name__=["lime","app","_Event_String_Int_Int_Void"];Ge.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:Ge};var fd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_String_Void"]=
fd;fd.__name__=["lime","app","_Event_String_Void"];fd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:fd};var Ea=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Void_Void"]=
Ea;Ea.__name__=["lime","app","_Event_Void_Void"];Ea.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),
this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?++c:this.remove(a[c]),!this.canceled););},__class__:Ea};var kc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_haxe_Function_Void"]=kc;kc.__name__=["lime","app","_Event_haxe_Function_Void"];kc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<
e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&
(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:kc};var He=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_graphics_RenderContext_Void"]=He;He.__name__=["lime","app","_Event_lime_graphics_RenderContext_Void"];He.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,
0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:He};var Ie=function(){this.canceled=!1;this.__listeners=[];
this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=Ie;Ie.__name__=["lime","app","_Event_lime_ui_GamepadAxis_Float_Void"];Ie.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Ie};var gd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_GamepadButton_Void"]=gd;gd.__name__=["lime","app",
"_Event_lime_ui_GamepadButton_Void"];gd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,
1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:gd};var Je=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_Gamepad_Void"]=Je;Je.__name__=["lime","app","_Event_lime_ui_Gamepad_Void"];Je.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=
d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),
c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Je};var Ke=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_Joystick_Void"]=Ke;Ke.__name__=["lime","app","_Event_lime_ui_Joystick_Void"];Ke.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Ke};var hd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};
f["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=hd;hd.__name__=["lime","app","_Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"];hd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=
--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:hd};var lc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_Touch_Void"]=lc;lc.__name__=["lime","app","_Event_lime_ui_Touch_Void"];lc.prototype=
{add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)D.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=
!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:lc};var R=function(a,b,c,d,e,g,f){null==e&&(e=-1);null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=d;this.height=e;this.version=0;null==f&&(f=xa.CANVAS);this.type=f;if(null==a){if(0<d&&0<e)switch(this.type[1]){case 0:this.buffer=new Ib(null,d,e);Ua.createCanvas(this,d,e);null!=g&&0!=g&&this.fillRect(new Ac(0,0,d,e),g);break;case 1:a=
d*e*4,a=null!=a?new kb(a):null,this.buffer=new Ib(a,d,e),null!=g&&0!=g&&this.fillRect(new Ac(0,0,d,e),g)}}else this.__fromImageBuffer(a)};f["lime.graphics.Image"]=R;R.__name__=["lime","graphics","Image"];R.fromBase64=function(a,b){if(null==a)return null;var c=new R;c.__fromBase64(a,b);return c};R.fromBitmapData=function(a){return null==a?null:a.image};R.fromBytes=function(a){if(null==a)return null;var b=new R;b.__fromBytes(a);return b};R.fromCanvas=function(a){if(null==a)return null;var b=new Ib(null,
a.width,a.height);b.set_src(a);a=new R(b);a.type=xa.CANVAS;return a};R.fromFile=function(a){if(null==a)return null;var b=new R;b.__fromFile(a);return b};R.fromImageElement=function(a){if(null==a)return null;var b=new Ib(null,a.width,a.height);b.set_src(a);a=new R(b);a.type=xa.CANVAS;return a};R.loadFromBase64=function(a,b){return null==a||null==b?wa.withValue(null):A.loadImage("data:"+b+";base64,"+a)};R.loadFromBytes=function(a){if(null==a)return wa.withValue(null);if(R.__isPNG(a))var b="image/png";
else if(R.__isJPG(a))b="image/jpeg";else if(R.__isGIF(a))b="image/gif";else if(R.__isWebP(a))b="image/webp";else return wa.withValue(null);return R.loadFromBase64(R.__base64Encode(a),b)};R.loadFromFile=function(a){return null==a?wa.withValue(null):A.loadImage(a)};R.__base64Encode=function(a){switch(a.length%3){case 1:var b="==";break;case 2:b="=";break;default:b=""}null==R.__base64Encoder&&(R.__base64Encoder=new wc(X.ofString(R.__base64Chars)));return R.__base64Encoder.encodeBytes(a).toString()+b};
R.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,6);return"GIF87a"!=a?"GIF89a"==a:!0};R.__isJPG=function(a){return null==a||4>a.length?!1:255==a.b[0]&&216==a.b[1]&&255==a.b[a.length-2]?217==a.b[a.length-1]:!1};R.__isPNG=function(a){return null==a||8>a.length?!1:137==a.b[0]&&80==a.b[1]&&78==a.b[2]&&71==a.b[3]&&13==a.b[4]&&10==a.b[5]&&26==a.b[6]?10==a.b[7]:!1};R.__isWebP=function(a){return null==a||16>a.length?!1:"RIFF"==a.getString(0,4)?"WEBP"==a.getString(8,4):!1};R.prototype=
{fillRect:function(a,b,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type[1]){case 0:Ua.fillRect(this,a,b,c);break;case 1:Ua.convertToData(this);if(0==this.buffer.data.length)break;Pf.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null==c)b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255;else switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>>8&255)<<16|(b>>>16&255)<<8|b>>>24&255;break;default:b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&
255}this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),b)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,b,c){var d=this,e=new Image;e.addEventListener("load",function(a){d.buffer=new Ib(null,e.width,e.height);d.buffer.__srcImage=
e;d.offsetX=0;d.offsetY=0;d.width=d.buffer.width;d.height=d.buffer.height;null!=c&&c(d)},!1);e.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){if(R.__isPNG(a))var c="image/png";else if(R.__isJPG(a))c="image/jpeg";else if(R.__isGIF(a))c="image/gif";else return;this.__fromBase64(R.__base64Encode(a),c,b)},__fromFile:function(a,b,c){var d=this,e=new Image;A.__isSameOrigin(a)||(e.crossOrigin="Anonymous");e.onload=function(a){d.buffer=new Ib(null,e.width,e.height);d.buffer.__srcImage=e;d.width=e.width;
d.height=e.height;null!=b&&b(d)};e.onerror=function(a){null!=c&&c()};e.src=a},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&Ua.convertToData(this);return this.buffer.data},get_rect:function(){return new Ac(0,0,this.width,this.height)},get_transparent:function(){return null==this.buffer?!1:this.buffer.transparent},set_transparent:function(a){return null==
this.buffer?!1:this.buffer.transparent=a},__class__:R,__properties__:{get_rect:"get_rect",set_transparent:"set_transparent",get_transparent:"get_transparent",get_data:"get_data"}};var Ib=function(a,b,c,d,e){null==d&&(d=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=d;this.format=null==e?0:e;this.premultiplied=!1;this.transparent=!0};f["lime.graphics.ImageBuffer"]=Ib;Ib.__name__=["lime","graphics","ImageBuffer"];Ib.prototype={set_src:function(a){B.__instanceof(a,
Image)?this.__srcImage=a:B.__instanceof(a,HTMLCanvasElement)&&(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a},get_stride:function(){return 4*this.width},__class__:Ib,__properties__:{get_stride:"get_stride",set_src:"set_src"}};var xa=f["lime.graphics.ImageType"]={__ename__:!0,__constructs__:["CANVAS","DATA","FLASH","CUSTOM"]};xa.CANVAS=["CANVAS",0];xa.CANVAS.toString=z;xa.CANVAS.__enum__=xa;xa.DATA=["DATA",1];xa.DATA.toString=z;xa.DATA.__enum__=xa;xa.FLASH=["FLASH",
2];xa.FLASH.toString=z;xa.FLASH.__enum__=xa;xa.CUSTOM=["CUSTOM",3];xa.CUSTOM.toString=z;xa.CUSTOM.__enum__=xa;var Ia=f["lime.graphics.RenderContext"]={__ename__:!0,__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM NONE".split(" ")};Ia.OPENGL=function(a){a=["OPENGL",0,a];a.__enum__=Ia;a.toString=z;return a};Ia.CANVAS=function(a){a=["CANVAS",1,a];a.__enum__=Ia;a.toString=z;return a};Ia.DOM=function(a){a=["DOM",2,a];a.__enum__=Ia;a.toString=z;return a};Ia.FLASH=function(a){a=["FLASH",3,a];
a.__enum__=Ia;a.toString=z;return a};Ia.CAIRO=function(a){a=["CAIRO",4,a];a.__enum__=Ia;a.toString=z;return a};Ia.CONSOLE=function(a){a=["CONSOLE",5,a];a.__enum__=Ia;a.toString=z;return a};Ia.CUSTOM=function(a){a=["CUSTOM",6,a];a.__enum__=Ia;a.toString=z;return a};Ia.NONE=["NONE",7];Ia.NONE.toString=z;Ia.NONE.__enum__=Ia;var pe=function(a){this.onRender=new Ea;this.onContextRestored=new He;this.onContextLost=new Ea;this.window=a;this.backend=new Be(this);this.window.renderer=this};f["lime.graphics.Renderer"]=
pe;pe.__name__=["lime","graphics","Renderer"];pe.prototype={create:function(){this.backend.create()},flip:function(){this.backend.flip()},render:function(){this.backend.render()},__class__:pe};var ha=f["lime.graphics.RendererType"]={__ename__:!0,__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM".split(" ")};ha.OPENGL=["OPENGL",0];ha.OPENGL.toString=z;ha.OPENGL.__enum__=ha;ha.CANVAS=["CANVAS",1];ha.CANVAS.toString=z;ha.CANVAS.__enum__=ha;ha.DOM=["DOM",2];ha.DOM.toString=z;ha.DOM.__enum__=
ha;ha.FLASH=["FLASH",3];ha.FLASH.toString=z;ha.FLASH.__enum__=ha;ha.CAIRO=["CAIRO",4];ha.CAIRO.toString=z;ha.CAIRO.__enum__=ha;ha.CONSOLE=["CONSOLE",5];ha.CONSOLE.toString=z;ha.CONSOLE.__enum__=ha;ha.CUSTOM=["CUSTOM",6];ha.CUSTOM.toString=z;ha.CUSTOM.__enum__=ha;var m=function(){};f["lime.graphics.opengl.GL"]=m;m.__name__=["lime","graphics","opengl","GL"];var sb=f["lime.graphics.opengl.GLContextType"]={__ename__:!0,__constructs__:["OPENGL","GLES","WEBGL"]};sb.OPENGL=["OPENGL",0];sb.OPENGL.toString=
z;sb.OPENGL.__enum__=sb;sb.GLES=["GLES",1];sb.GLES.toString=z;sb.GLES.__enum__=sb;sb.WEBGL=["WEBGL",2];sb.WEBGL.toString=z;sb.WEBGL.__enum__=sb;var Ua=function(){};f["lime.graphics.utils.ImageCanvasUtil"]=Ua;Ua.__name__=["lime","graphics","utils","ImageCanvasUtil"];Ua.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(Ua.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,0,0)),c.__srcImage=null):null==c.__srcCanvas&&
null!=c.data?(a.set_transparent(!0),Ua.createCanvas(a,c.width,c.height),Ua.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==xa.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=xa.CANVAS};Ua.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&Ua.convertToCanvas(a);if(null!=c.__srcCanvas&&
null==c.data)Ua.createImageData(a),a.type==xa.CANVAS&&(a.dirty=!1);else if(a.type==xa.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)Ua.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,c.height);var d=c.__srcImageData.data.buffer;d=null!=d?new kb(d):null;c.data=d}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=xa.DATA};Ua.createCanvas=function(a,b,c){var d=a.buffer;null==d.__srcCanvas&&(d.__srcCanvas=window.document.createElement("canvas"),
d.__srcCanvas.width=b,d.__srcCanvas.height=c,a.get_transparent()?d.__srcContext=d.__srcCanvas.getContext("2d"):(a.get_transparent()||d.__srcCanvas.setAttribute("moz-opaque","true"),d.__srcContext=d.__srcCanvas.getContext("2d",{alpha:!1})),d.__srcContext.mozImageSmoothingEnabled=!1,d.__srcContext.msImageSmoothingEnabled=!1,d.__srcContext.imageSmoothingEnabled=!1)};Ua.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,
a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));var b=a.__srcImageData.data.buffer;b=null!=b?new kb(b):null;a.data=b}};Ua.fillRect=function(a,b,c,d){Ua.convertToCanvas(a);if(1==d){d=c>>16&255;var e=c>>8&255;var g=c&255;c=a.get_transparent()?c>>24&255:255}else d=c>>24&255,e=c>>16&255,g=c>>8&255,c=a.get_transparent()?c&255:255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:
(255>c&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY),0<c&&(a.buffer.__srcContext.fillStyle="rgba("+d+", "+e+", "+g+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY)),a.dirty=!0,a.version++)};var Pf=function(){};f["lime.graphics.utils.ImageDataUtil"]=Pf;Pf.__name__=["lime","graphics","utils","ImageDataUtil"];Pf.fillRect=function(a,b,c,d){switch(d){case 1:c=(c>>>16&255)<<24|(c>>>8&255)<<
16|(c&255)<<8|c>>>24&255;break;case 2:c=(c>>>8&255)<<24|(c>>>16&255)<<16|(c>>>24&255)<<8|c&255}a.get_transparent()||(c=(c>>>24&255)<<24|(c>>>16&255)<<16|(c>>>8&255)<<8|255);d=a.buffer.data;if(null!=d){var e=a.buffer.format;a.buffer.premultiplied&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(zb.a16=zb.__alpha16[c&255],c=((c>>>24&255)*zb.a16>>16&255)<<24|((c>>>16&255)*zb.a16>>16&255)<<16|((c>>>8&255)*zb.a16>>16&255)<<8|c&255));b=new Le(a,b);for(var g,f=0,k=b.height;f<k;){g=f++;g=b.byteOffset+b.stride*g;for(var h=
0,l=b.width;h<l;){var m=h++;m=g+4*m;switch(e){case 0:d[m]=c>>>24&255;d[m+1]=c>>>16&255;d[m+2]=c>>>8&255;d[m+3]=c&255;break;case 1:d[m]=c&255;d[m+1]=c>>>24&255;d[m+2]=c>>>16&255;d[m+3]=c>>>8&255;break;case 2:d[m]=c>>>8&255,d[m+1]=c>>>16&255,d[m+2]=c>>>24&255,d[m+3]=c&255}}}a.dirty=!0;a.version++}};var Le=function(a,b){this.image=a;null==b?this.rect=a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=
0),0>b.height&&(b.height=0),this.rect=b);this.stride=a.buffer.get_stride();this.__update()};f["lime.graphics.utils._ImageDataUtil.ImageDataView"]=Le;Le.__name__=["lime","graphics","utils","_ImageDataUtil","ImageDataView"];Le.prototype={__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+4*(this.x+this.image.offsetX)},__class__:Le};var Ac=
function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};f["lime.math.Rectangle"]=Ac;Ac.__name__=["lime","math","Rectangle"];Ac.prototype={offset:function(a,b){this.x+=a;this.y+=b},__toFlashRectangle:function(){return null},__class__:Ac};var $f=function(){};f["lime.math.Vector2"]=$f;$f.__name__=["lime","math","Vector2"];var ye=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.w=d;this.x=a;this.y=b;
this.z=c};f["lime.math.Vector4"]=ye;ye.__name__=["lime","math","Vector4"];ye.prototype={__class__:ye};var zb={};f["lime.math.color._RGBA.RGBA_Impl_"]=zb;zb.__name__=["lime","math","color","_RGBA","RGBA_Impl_"];var ag=function(){};f["lime.media.ALAudioContext"]=ag;ag.__name__=["lime","media","ALAudioContext"];var bg=function(){};f["lime.media.ALCAudioContext"]=bg;bg.__name__=["lime","media","ALCAudioContext"];var ta=function(){};f["lime.media.AudioBuffer"]=ta;ta.__name__=["lime","media","AudioBuffer"];
ta.fromBase64=function(a){if(null==a)return null;-1==a.indexOf(",")&&(a="data:"+ta.__getCodec(Hb.decode(a))+";base64,"+a);var b=new ta;b.set_src(new Howl({src:[a],html5:!0,preload:!1}));return b};ta.fromBytes=function(a){if(null==a)return null;var b=new ta;b.set_src(new Howl({src:["data:"+ta.__getCodec(a)+";base64,"+Hb.encode(a)],html5:!0,preload:!1}));return b};ta.fromFile=function(a){if(null==a)return null;var b=new ta;b.__srcHowl=new Howl({src:[a],preload:!1});return b};ta.fromFiles=function(a){var b=
new ta;b.__srcHowl=new Howl({src:a,preload:!1});return b};ta.fromVorbisFile=function(a){return null};ta.loadFromFile=function(a){var b=new bb,c=ta.fromFile(a);null!=c?null!=c&&(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(a,c){b.error(c)}),c.__srcHowl.load()):b.error(null);return b.future};ta.loadFromFiles=function(a){var b=new bb,c=ta.fromFiles(a);null!=c?(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(){b.error(null)}),
c.__srcHowl.load()):b.error(null);return b.future};ta.__getCodec=function(a){switch(a.getString(0,4)){case "OggS":return"audio/ogg";case "RIFF":if("WAVE"==a.getString(8,4))return"audio/wav";var b=a.b[2],c=a.b[1];switch(a.b[0]){case 73:if(68==c&&51==b)return"audio/mp3";break;case 255:switch(c){case 250:case 251:return"audio/mp3"}}break;case "fLaC":return"audio/flac";default:switch(b=a.b[2],c=a.b[1],a.b[0]){case 73:if(68==c&&51==b)return"audio/mp3";break;case 255:switch(c){case 250:case 251:return"audio/mp3"}}}oa.error("Unsupported sound format",
{fileName:"AudioBuffer.hx",lineNumber:493,className:"lime.media.AudioBuffer",methodName:"__getCodec"});return null};ta.prototype={set_src:function(a){return this.__srcHowl=a},__class__:ta,__properties__:{set_src:"set_src"}};var Ab=f["lime.media.AudioContext"]={__ename__:!0,__constructs__:["OPENAL","HTML5","WEB","FLASH","CUSTOM"]};Ab.OPENAL=function(a,b){a=["OPENAL",0,a,b];a.__enum__=Ab;a.toString=z;return a};Ab.HTML5=function(a){a=["HTML5",1,a];a.__enum__=Ab;a.toString=z;return a};Ab.WEB=function(a){a=
["WEB",2,a];a.__enum__=Ab;a.toString=z;return a};Ab.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Ab;a.toString=z;return a};Ab.CUSTOM=function(a){a=["CUSTOM",4,a];a.__enum__=Ab;a.toString=z;return a};var dc=function(){};f["lime.media.AudioManager"]=dc;dc.__name__=["lime","media","AudioManager"];dc.init=function(a){if(null==dc.context)if(null==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,dc.context=Ab.WEB(new AudioContext)}catch(b){dc.context=Ab.HTML5(new Me)}else dc.context=
a};var Bc=function(a,b,c,d){null==d&&(d=0);null==b&&(b=0);this.buffer=a;this.offset=b;this.backend=new ze(this);null!=c&&0!=c&&this.set_length(c);this.set_loops(d);null!=a&&this.init()};f["lime.media.AudioSource"]=Bc;Bc.__name__=["lime","media","AudioSource"];Bc.prototype={init:function(){this.backend.init()},get_length:function(){return this.backend.getLength()},set_length:function(a){return this.backend.setLength(a)},set_loops:function(a){return this.backend.setLoops(a)},__class__:Bc,__properties__:{set_loops:"set_loops",
set_length:"set_length",get_length:"get_length"}};var cg=function(){};f["lime.media.FlashAudioContext"]=cg;cg.__name__=["lime","media","FlashAudioContext"];var Me=function(){};f["lime.media.HTML5AudioContext"]=Me;Me.__name__=["lime","media","HTML5AudioContext"];Me.prototype={__class__:Me};var Ne=function(){};f["lime.net._IHTTPRequest"]=Ne;Ne.__name__=["lime","net","_IHTTPRequest"];Ne.prototype={__class__:Ne};var Bb=function(a){this.uri=a;this.contentType="application/x-www-form-urlencoded";this.followRedirects=
!0;this.enableResponseHeaders=!1;this.formData=new r;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1;this.backend=new A;this.backend.init(this)};f["lime.net._HTTPRequest.AbstractHTTPRequest"]=Bb;Bb.__name__=["lime","net","_HTTPRequest","AbstractHTTPRequest"];Bb.__interfaces__=[Ne];Bb.prototype={__class__:Bb};var Xb=function(a){Bb.call(this,a)};f["lime.net._HTTPRequest_Bytes"]=Xb;Xb.__name__=["lime","net","_HTTPRequest_Bytes"];Xb.__super__=Bb;Xb.prototype=n(Bb.prototype,
{fromBytes:function(a){return a},load:function(a){var b=this;null!=a&&(this.uri=a);var c=new bb;a=this.backend.loadData(this.uri);a.onProgress(h(c,c.progress));a.onError(h(c,c.error));a.onComplete(function(a){b.responseData=b.fromBytes(a);c.complete(b.responseData)});return c.future},__class__:Xb});var id=function(a){Bb.call(this,a)};f["lime.net._HTTPRequest_String"]=id;id.__name__=["lime","net","_HTTPRequest_String"];id.__super__=Bb;id.prototype=n(Bb.prototype,{load:function(a){var b=this;null!=
a&&(this.uri=a);var c=new bb;a=this.backend.loadText(this.uri);a.onProgress(h(c,c.progress));a.onError(h(c,c.error));a.onComplete(function(a){b.responseData=a;c.complete(b.responseData)});return c.future},__class__:id});var cd=function(a,b){null==b&&(b="");this.name=a;this.value=b};f["lime.net.HTTPRequestHeader"]=cd;cd.__name__=["lime","net","HTTPRequestHeader"];cd.prototype={__class__:cd};var jd=function(a){Bb.call(this,a)};f["lime.net._HTTPRequest_lime_utils_Bytes"]=jd;jd.__name__=["lime","net",
"_HTTPRequest_lime_utils_Bytes"];jd.__super__=Xb;jd.prototype=n(Xb.prototype,{fromBytes:function(a){return lb.fromBytes(a)},__class__:jd});var dg=function(){};f["lime.system.DisplayMode"]=dg;dg.__name__=["lime","system","DisplayMode"];var Jb=f["lime.system.Endian"]={__ename__:!0,__constructs__:["LITTLE_ENDIAN","BIG_ENDIAN"]};Jb.LITTLE_ENDIAN=["LITTLE_ENDIAN",0];Jb.LITTLE_ENDIAN.toString=z;Jb.LITTLE_ENDIAN.__enum__=Jb;Jb.BIG_ENDIAN=["BIG_ENDIAN",1];Jb.BIG_ENDIAN.toString=z;Jb.BIG_ENDIAN.__enum__=Jb;
var ma=function(){};f["lime.system.System"]=ma;ma.__name__=["lime","system","System"];ma.__properties__={get_endianness:"get_endianness"};ma.embed=y.lime.embed=function(a,b,c,d,e){if(null!=ma.__applicationEntryPoint&&null!=ma.__applicationConfig){var g=ma.__applicationEntryPoint;if(null!=k[a]?g.existsReserved(a):g.h.hasOwnProperty(a))if(g="string"==typeof b?window.document.getElementById(b):null==b?window.document.createElement("div"):b,null==g)window.console.log("[lime.embed] ERROR: Cannot find target element: "+
V.string(b));else{null==c&&(c=0);null==d&&(d=0);b=ma.__applicationConfig;var f=null!=k[a]?b.getReserved(a):b.h[a];b={};ma.__copyMissingFields(b,f);if(null!=e){b.windows=[];e instanceof Array&&null==e.__enum__?b.windows=e:b.windows[0]=e;for(var h=0,l=b.windows.length;h<l;){var m=h++;m<f.windows.length&&ma.__copyMissingFields(b.windows[m],f.windows[m]);ma.__copyMissingFields(b.windows[m].parameters,f.windows[m].parameters);"string"==typeof e.background&&(m=W.replace(V.string(e.background),"#",""),-1<
m.indexOf("0x")?e.background=V.parseInt(m):e.background=V.parseInt("0x"+m))}}D.field(b.windows[0],"rootPath")&&(b.rootPath=D.field(b.windows[0],"rootPath"),D.deleteField(b.windows[0],"rootPath"));b.windows[0].element=g;b.windows[0].width=c;b.windows[0].height=d;c=ma.__applicationEntryPoint;(null!=k[a]?c.getReserved(a):c.h[a])(b)}}};ma.exit=function(a){};ma.__copyMissingFields=function(a,b){if(null!=b&&null!=a)for(var c=0,d=D.fields(b);c<d.length;){var e=d[c];++c;Object.prototype.hasOwnProperty.call(a,
e)||(a[e]=D.field(b,e))}};ma.__registerEntryPoint=function(a,b,c){null==ma.__applicationConfig&&(ma.__applicationConfig=new r);null==ma.__applicationEntryPoint&&(ma.__applicationEntryPoint=new r);var d=ma.__applicationEntryPoint;null!=k[a]?d.setReserved(a,b):d.h[a]=b;b=ma.__applicationConfig;null!=k[a]?b.setReserved(a,c):b.h[a]=c};ma.get_endianness=function(){if(null==ma.__endianness){var a=new gb(2),b=null!=a?new kb(a,0):null;a=null!=a?new Uint16Array(a,0):null;b[0]=170;b[1]=187;ma.__endianness=
43707==a[0]?Jb.BIG_ENDIAN:Jb.LITTLE_ENDIAN}return ma.__endianness};var Ce=function(a,b){null==b&&(b=1);null==a&&(a=0);this.onRun=new kc;this.onError=new kc;this.onComplete=new kc;this.doWork=new kc;this.minThreads=a;this.maxThreads=b;this.currentThreads=0};f["lime.system.ThreadPool"]=Ce;Ce.__name__=["lime","system","ThreadPool"];Ce.prototype={queue:function(a){this.runWork(a)},sendComplete:function(a){this.onComplete.dispatch(a)},sendError:function(a){this.onError.dispatch(a)},runWork:function(a){this.onRun.dispatch(a);
this.doWork.dispatch(a)},__class__:Ce};var mb=function(a){null!=a&&(this.name=a);null!=this.__fontID?v.isLocal(this.__fontID)&&this.__fromBytes(v.getBytes(this.__fontID)):null!=this.__fontPath&&this.__fromFile(this.__fontPath)};f["lime.text.Font"]=mb;mb.__name__=["lime","text","Font"];mb.fromFile=function(a){if(null==a)return null;var b=new mb;b.__fromFile(a);return b};mb.loadFromName=function(a){return(new mb).__loadFromName(a)};mb.__measureFontNode=function(a){var b=window.document.createElement("span");
b.setAttribute("aria-hidden","true");var c=window.document.createTextNode("BESbswy");b.appendChild(c);c=b.style;c.display="block";c.position="absolute";c.top="-9999px";c.left="-9999px";c.fontSize="300px";c.width="auto";c.height="auto";c.lineHeight="normal";c.margin="0";c.padding="0";c.fontVariant="normal";c.whiteSpace="nowrap";c.fontFamily=a;window.document.body.appendChild(b);return b};mb.prototype={__fromBytes:function(a){this.__fontPath=null},__fromFile:function(a){this.__fontPath=a},__loadFromName:function(a){var b=
this,c=new bb;this.name=a;var d=window.navigator.userAgent.toLowerCase();if(0<=d.indexOf(" safari/")&&0>d.indexOf(" chrome/")||!window.document.fonts||(vb=window.document.fonts,!h(vb,vb.load))){var e=mb.__measureFontNode("'"+a+"', sans-serif"),g=mb.__measureFontNode("'"+a+"', serif"),f=e.offsetWidth,k=g.offsetWidth,l=-1,m=0,n,t;l=window.setInterval(function(){m+=1;n=e.offsetWidth==f?g.offsetWidth!=k:!0;t=3E3<=50*m;if(n||t)window.clearInterval(l),e.parentNode.removeChild(e),g.parentNode.removeChild(g),
g=e=null,t&&oa.warn('Could not load web font "'+a+'"',{fileName:"Font.hx",lineNumber:552,className:"lime.text.Font",methodName:"__loadFromName"}),c.complete(b)},50)}else window.document.fonts.load("1em '"+a+"'").then(function(a){c.complete(b)},function(d){oa.warn('Could not load web font "'+a+'"',{fileName:"Font.hx",lineNumber:516,className:"lime.text.Font",methodName:"__loadFromName"});c.complete(b)});return c.future},__class__:mb};var Ga=function(a){this.onDisconnect=new Ea;this.onButtonUp=new gd;
this.onButtonDown=new gd;this.onAxisMove=new Ie;this.id=a;this.connected=!0};f["lime.ui.Gamepad"]=Ga;Ga.__name__=["lime","ui","Gamepad"];Ga.__connect=function(a){if(!Ga.devices.h.hasOwnProperty(a)){var b=new Ga(a);Ga.devices.h[a]=b;Ga.onConnect.dispatch(b)}};Ga.__disconnect=function(a){var b=Ga.devices.h[a];null!=b&&(b.connected=!1);Ga.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};Ga.prototype={__class__:Ga};var za=function(a){this.onTrackballMove=new De;this.onHatMove=new Fe;this.onDisconnect=
new Ea;this.onButtonUp=new cc;this.onButtonDown=new cc;this.onAxisMove=new Ee;this.id=a;this.connected=!0};f["lime.ui.Joystick"]=za;za.__name__=["lime","ui","Joystick"];za.__connect=function(a){if(!za.devices.h.hasOwnProperty(a)){var b=new za(a);za.devices.h[a]=b;za.onConnect.dispatch(b)}};za.__disconnect=function(a){var b=za.devices.h[a];null!=b&&(b.connected=!1);za.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};za.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():
navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};za.prototype={__class__:za};var Ha=function(a,b,c,d,e,g,f){this.x=a;this.y=b;this.id=c;this.dx=d;this.dy=e;this.pressure=g;this.device=f};f["lime.ui.Touch"]=Ha;Ha.__name__=["lime","ui","Touch"];Ha.prototype={__class__:Ha};var oe=function(a){this.onTextInput=new fd;this.onTextEdit=new Ge;this.onRestore=new Ea;this.onResize=new dd;this.onMove=new jc;this.onMouseWheel=new jc;this.onMouseUp=new ed;this.onMouseMoveRelative=new jc;this.onMouseMove=
new jc;this.onMouseDown=new ed;this.onMinimize=new Ea;this.onLeave=new Ea;this.onKeyUp=new hd;this.onKeyDown=new hd;this.onFullscreen=new Ea;this.onFocusOut=new Ea;this.onFocusIn=new Ea;this.onEnter=new Ea;this.onDropFile=new fd;this.onDeactivate=new Ea;this.onCreate=new Ea;this.onClose=new Ea;this.onActivate=new Ea;this.config=a;this.__height=this.__width=0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;null!=a&&(Object.prototype.hasOwnProperty.call(a,"width")&&
(this.__width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(this.__height=a.height),Object.prototype.hasOwnProperty.call(a,"x")&&(this.__x=a.x),Object.prototype.hasOwnProperty.call(a,"y")&&(this.__y=a.y),Object.prototype.hasOwnProperty.call(a,"borderless")&&(this.__borderless=a.borderless),Object.prototype.hasOwnProperty.call(a,"resizable")&&(this.__resizable=a.resizable),Object.prototype.hasOwnProperty.call(a,"title")&&(this.__title=a.title));this.backend=new zc(this)};f["lime.ui.Window"]=
oe;oe.__name__=["lime","ui","Window"];oe.prototype={close:function(){this.backend.close()},create:function(a){this.application=a;null==this.config&&(this.config={});this.backend.create(a);null!=this.renderer&&this.renderer.create()},resize:function(a,b){this.backend.resize(a,b);this.__width=a;this.__height=b},set_height:function(a){this.resize(this.__width,a);return this.__height},set_width:function(a){this.resize(a,this.__height);return this.__width},__class__:oe,__properties__:{set_width:"set_width",
set_height:"set_height"}};var Oe=function(){this.enabled=!0;this.audio=new r;this.font=new r;this.image=new r;this.version=758564};f["lime.utils.AssetCache"]=Oe;Oe.__name__=["lime","utils","AssetCache"];Oe.prototype={exists:function(a,b){if("IMAGE"==b||null==b){var c=this.image;if(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0}if("FONT"==b||null==b)if(c=this.font,null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0;if("SOUND"==b||"MUSIC"==b||null==b)if(b=this.audio,null!=k[a]?
b.existsReserved(a):b.h.hasOwnProperty(a))return!0;return!1},set:function(a,b,c){switch(b){case "FONT":this.font.set(a,c);break;case "IMAGE":if(!B.__instanceof(c,R))throw new q("Cannot cache non-Image asset: "+V.string(c)+" as Image");this.image.set(a,c);break;case "MUSIC":case "SOUND":if(!B.__instanceof(c,ta))throw new q("Cannot cache non-AudioBuffer asset: "+V.string(c)+" as AudioBuffer");this.audio.set(a,c);break;default:throw new q(b+" assets are not cachable");}},clear:function(a){if(null==a)this.audio=
new r,this.font=new r,this.image=new r;else{for(var b=this.audio.keys();b.hasNext();){var c=b.next();W.startsWith(c,a)&&this.audio.remove(c)}for(b=this.font.keys();b.hasNext();)c=b.next(),W.startsWith(c,a)&&this.font.remove(c);for(b=this.image.keys();b.hasNext();)c=b.next(),W.startsWith(c,a)&&this.image.remove(c)}},__class__:Oe};var gc=function(){this.types=new r;this.sizes=new r;this.preload=new r;this.paths=new r;this.pathGroups=new r;this.classTypes=new r;this.cachedText=new r;this.cachedImages=
new r;this.cachedFonts=new r;this.cachedBytes=new r;this.cachedAudioBuffers=new r;this.onChange=new Ea;this.bytesTotal=this.bytesLoaded=0};f["lime.utils.AssetLibrary"]=gc;gc.__name__=["lime","utils","AssetLibrary"];gc.fromManifest=function(a){if(null==a)return null;if(null==a.libraryType)var b=new gc;else if(b=aa.resolveClass(a.libraryType),null!=b)b=aa.createInstance(b,a.libraryArgs);else return oa.warn("Could not find library type: "+a.libraryType,{fileName:"AssetLibrary.hx",lineNumber:140,className:"lime.utils.AssetLibrary",
methodName:"fromManifest"}),null;b.__fromManifest(a);return b};gc.prototype={exists:function(a,b){b=null!=b?B.__cast(b,String):null;var c=this.types;a=null!=k[a]?c.getReserved(a):c.h[a];return null==a||a!=b&&("SOUND"!=b&&"MUSIC"!=b||"MUSIC"!=a&&"SOUND"!=a)&&"BINARY"!=b&&null!=b&&("BINARY"!=a||"TEXT"!=b)?!1:!0},getAsset:function(a,b){switch(b){case "BINARY":return this.getBytes(a);case "FONT":return this.getFont(a);case "IMAGE":return this.getImage(a);case "MUSIC":case "SOUND":return this.getAudioBuffer(a);
case "TEMPLATE":throw new q("Not sure how to get template: "+a);case "TEXT":return this.getText(a);default:throw new q("Unknown asset type: "+b);}},getAudioBuffer:function(a){var b=this.cachedAudioBuffers;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedAudioBuffers,null!=k[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,ta.fromBytes(B.__cast(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],
[]),X));b=this.paths;return ta.fromFile(null!=k[a]?b.getReserved(a):b.h[a])},getBytes:function(a){var b=this.cachedBytes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedBytes,null!=k[a]?b.getReserved(a):b.h[a];b=this.cachedText;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a)){b=this.cachedText;b=lb.ofString(null!=k[a]?b.getReserved(a):b.h[a]);var c=this.cachedBytes;null!=k[a]?c.setReserved(a,b):c.h[a]=b;return b}b=this.classTypes;if(null!=k[a]?b.existsReserved(a):
b.h.hasOwnProperty(a))return b=this.classTypes,B.__cast(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],[]),X);b=this.paths;return lb.fromFile(null!=k[a]?b.getReserved(a):b.h[a])},getFont:function(a){var b=this.cachedFonts;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedFonts,null!=k[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,B.__cast(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],
[]),mb);b=this.paths;return mb.fromFile(null!=k[a]?b.getReserved(a):b.h[a])},getImage:function(a){var b=this.cachedImages;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedImages,null!=k[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,B.__cast(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],[]),R);b=this.paths;return R.fromFile(null!=k[a]?b.getReserved(a):b.h[a])},getText:function(a){var b=
this.cachedText;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedText,null!=k[a]?b.getReserved(a):b.h[a];a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){var c=this.classTypes;if(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0;switch(null!=b?B.__cast(b,String):null){case "FONT":return this.cachedFonts.exists(a);case "IMAGE":return this.cachedImages.exists(a);case "MUSIC":case "SOUND":return this.cachedAudioBuffers.exists(a);
default:return this.cachedBytes.exists(a)?!0:this.cachedText.exists(a)}},load:function(){if(this.loaded)return wa.withValue(this);if(null==this.promise){this.promise=new bb;this.bytesLoadedCache=new r;this.assetsLoaded=0;this.assetsTotal=1;for(var a=this.preload.keys();a.hasNext();){var b=a.next(),c=this.preload;if(null!=k[b]?c.getReserved(b):c.h[b])if(c=this.types,oa.verbose("Preloading asset: "+b+" ["+(null!=k[b]?c.getReserved(b):c.h[b])+"]",{fileName:"AssetLibrary.hx",lineNumber:440,className:"lime.utils.AssetLibrary",
methodName:"load"}),c=this.types.get(b),null!=c)switch(c){case "BINARY":this.assetsTotal++;c=this.loadBytes(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[h(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.loadBytes_onComplete)]));break;case "FONT":this.assetsTotal++;c=this.loadFont(b);c.onProgress(function(a,b){return function(c,
d){b[0](a[0],c,d)}}([b],[h(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.loadFont_onComplete)]));break;case "IMAGE":this.assetsTotal++;c=this.loadImage(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[h(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.load_onError)]));
c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.loadImage_onComplete)]));break;case "MUSIC":case "SOUND":this.assetsTotal++;c=this.loadAudioBuffer(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[h(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.loadAudioBuffer_onComplete)]));break;case "TEXT":this.assetsTotal++,
c=this.loadText(b),c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[h(this,this.load_onProgress)])),c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.load_onError)])),c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[h(this,this.loadText_onComplete)]))}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(a){var b=this.cachedAudioBuffers;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedAudioBuffers,
wa.withValue(null!=k[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,wa.withValue(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],[]));b=this.pathGroups;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.pathGroups,ta.loadFromFiles(null!=k[a]?b.getReserved(a):b.h[a]);b=this.paths;return ta.loadFromFile(null!=k[a]?b.getReserved(a):b.h[a])},loadBytes:function(a){var b=this.cachedBytes;if(null!=k[a]?
b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedBytes,wa.withValue(null!=k[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,wa.withValue(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],[]));b=this.paths;return lb.loadFromFile(null!=k[a]?b.getReserved(a):b.h[a])},loadFont:function(a){var b=this.cachedFonts;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedFonts,wa.withValue(null!=
k[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,a=aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],[]),a.__loadFromName(a.name);b=this.paths;return mb.loadFromName(null!=k[a]?b.getReserved(a):b.h[a])},loadImage:function(a){var b=this.cachedImages;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedImages,wa.withValue(null!=k[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=k[a]?b.existsReserved(a):
b.h.hasOwnProperty(a))return b=this.classTypes,wa.withValue(aa.createInstance(null!=k[a]?b.getReserved(a):b.h[a],[]));b=this.paths;return R.loadFromFile(null!=k[a]?b.getReserved(a):b.h[a])},loadText:function(a){var b=this.cachedText;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedText,wa.withValue(null!=k[a]?b.getReserved(a):b.h[a]);b=this.cachedBytes;(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?b=!0:(b=this.classTypes,b=null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a));
if(b){b=this.getBytes(a);if(null==b)return wa.withValue(null);b=b.getString(0,b.length);var c=this.cachedText;null!=k[a]?c.setReserved(a,b):c.h[a]=b;return wa.withValue(b)}b=new id;c=this.paths;return b.load(null!=k[a]?c.getReserved(a):c.h[a])},unload:function(){},__assetLoaded:function(a){this.assetsLoaded++;if(null!=a){var b=this.types;oa.verbose("Loaded asset: "+a+" ["+(null!=k[a]?b.getReserved(a):b.h[a])+"] ("+(this.assetsLoaded-1)+"/"+(this.assetsTotal-1)+")",{fileName:"AssetLibrary.hx",lineNumber:686,
className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"})}if(null!=a){b=this.sizes;b=null!=k[a]?b.getReserved(a):b.h[a];var c=this.bytesLoadedCache;(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this.bytesLoadedCache,c=null!=k[a]?c.getReserved(a):c.h[a],c<b&&(this.bytesLoaded+=b-c)):this.bytesLoaded+=b;c=this.bytesLoadedCache;null!=k[a]?c.setReserved(a,b):c.h[a]=b}this.assetsLoaded<this.assetsTotal?this.promise.progress(this.bytesLoaded,this.bytesTotal):(this.loaded=!0,this.promise.progress(this.bytesTotal,
this.bytesTotal),this.promise.complete(this))},__cacheBreak:function(a){return a=-1<a.indexOf("?")?a+("&"+v.cache.version):a+("?"+v.cache.version)},__fromManifest:function(a){var b=2<=a.version,c=a.rootPath;null==c&&(c="");""!=c&&(c+="/");for(var d=0,e=a.assets;d<e.length;){var g=e[d];++d;var f=b?g.size:100;var h=g.id;if(Object.prototype.hasOwnProperty.call(g,"path")){var l=this.paths;var m=this.__cacheBreak(c+V.string(D.field(g,"path")));null!=k[h]?l.setReserved(h,m):l.h[h]=m}if(Object.prototype.hasOwnProperty.call(g,
"pathGroup")){m=D.field(g,"pathGroup");l=0;for(var n=m.length;l<n;){var t=l++;m[t]=this.__cacheBreak(c+m[t])}l=this.pathGroups;null!=k[h]?l.setReserved(h,m):l.h[h]=m}m=this.sizes;null!=k[h]?m.setReserved(h,f):m.h[h]=f;f=g.type;m=this.types;null!=k[h]?m.setReserved(h,f):m.h[h]=f;Object.prototype.hasOwnProperty.call(g,"preload")&&(m=this.preload,f=D.field(g,"preload"),null!=k[h]?m.setReserved(h,f):m.h[h]=f);Object.prototype.hasOwnProperty.call(g,"className")&&(g=aa.resolveClass(D.field(g,"className")),
f=this.classTypes,null!=k[h]?f.setReserved(h,g):f.h[h]=g)}b=this.bytesTotal=0;for(a=a.assets;b<a.length;)h=a[b],++b,h=h.id,c=this.preload,(null!=k[h]?c.existsReserved(h):c.h.hasOwnProperty(h))?(c=this.preload,c=null!=k[h]?c.getReserved(h):c.h[h]):c=!1,c&&(c=this.sizes,this.bytesTotal+=null!=k[h]?c.getReserved(h):c.h[h])},loadAudioBuffer_onComplete:function(a,b){var c=this.cachedAudioBuffers;null!=k[a]?c.setReserved(a,b):c.h[a]=b;c=this.pathGroups;if(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a)){c=
this.pathGroups;c=null!=k[a]?c.getReserved(a):c.h[a];for(var d=this.pathGroups.keys();d.hasNext();){var e=d.next();if(e!=a)for(var g=0;g<c.length;){var f=c[g];++g;var h=this.pathGroups;if(-1<(null!=k[e]?h.getReserved(e):h.h[e]).indexOf(f)){g=this.cachedAudioBuffers;null!=k[e]?g.setReserved(e,b):g.h[e]=b;break}}}}this.__assetLoaded(a)},loadBytes_onComplete:function(a,b){var c=this.cachedBytes;null!=k[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadFont_onComplete:function(a,b){var c=this.cachedFonts;
null!=k[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadImage_onComplete:function(a,b){var c=this.cachedImages;null!=k[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadText_onComplete:function(a,b){var c=this.cachedText;null!=k[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},load_onError:function(a,b){null!=b&&""!=b?this.promise.error('Error loading asset "'+a+'": '+V.string(b)):this.promise.error('Error loading asset "'+a+'"')},load_onProgress:function(a,b,c){if(0<b){var d=
this.sizes;d=null!=k[a]?d.getReserved(a):d.h[a];0<c?(b/=c,1<b&&(b=1),b=Math.floor(b*d)):b>d&&(b=d);c=this.bytesLoadedCache;(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this.bytesLoadedCache,c=null!=k[a]?c.getReserved(a):c.h[a],b!=c&&(this.bytesLoaded+=b-c)):this.bytesLoaded+=b;c=this.bytesLoadedCache;null!=k[a]?c.setReserved(a,b):c.h[a]=b;this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:gc};var $a=function(){this.assets=[];this.libraryArgs=[];this.version=2};f["lime.utils.AssetManifest"]=
$a;$a.__name__=["lime","utils","AssetManifest"];$a.fromBytes=function(a,b){return null!=a?$a.parse(a.getString(0,a.length),b):null};$a.loadFromFile=function(a,b){a=$a.__resolvePath(a);b=$a.__resolveRootPath(b,a);return null==a?null:lb.loadFromFile(a).then(function(a){return wa.withValue($a.fromBytes(a,b))})};$a.parse=function(a,b){if(null==a||""==a)return null;a=JSON.parse(a);var c=new $a;c.name=a.name;c.libraryType=a.libraryType;c.libraryArgs=a.libraryArgs;c.assets=Xa.run(a.assets);null!=b&&(c.rootPath=
b);return c};$a.__resolvePath=function(a){if(null==a)return null;var b=a.indexOf("?");var c=-1<b?w.substr(a,0,b):a;for(W.replace(c,"\\","/");W.endsWith(c,"/");)c=w.substr(c,0,c.length-1);return W.endsWith(c,".bundle")?-1<b?c+"/library.json"+w.substr(a,b,null):c+"/library.json":a};$a.__resolveRootPath=function(a,b){if(null!=a)return a;a=b.indexOf("?");a=-1<a?w.substr(b,0,a):b;for(W.replace(a,"\\","/");W.endsWith(a,"/");){if("/"==a)return a;a=w.substr(a,0,a.length-1)}return W.endsWith(a,".bundle")?
a:yc.directory(a)};$a.prototype={__class__:$a};var v=function(){};f["lime.utils.Assets"]=v;v.__name__=["lime","utils","Assets"];v.exists=function(a,b){null==b&&(b="BINARY");var c=a.indexOf(":");var d=a.substring(0,c);a=a.substring(c+1);d=v.getLibrary(d);return null!=d?d.exists(a,b):!1};v.getAsset=function(a,b,c){if(c&&v.cache.enabled)switch(b){case "BINARY":case "TEXT":c=!1;break;case "FONT":var d=v.cache.font.get(a);if(null!=d)return d;break;case "IMAGE":d=v.cache.image.get(a);if(v.isValidImage(d))return d;
break;case "MUSIC":case "SOUND":d=v.cache.audio.get(a);if(v.isValidAudio(d))return d;break;case "TEMPLATE":throw new q("Not sure how to get template: "+a);default:return null}var e=a.indexOf(":");d=a.substring(0,e);e=a.substring(e+1);var g=v.getLibrary(d);if(null!=g)if(g.exists(e,b)){if(g.isLocal(e,b))return d=g.getAsset(e,b),c&&v.cache.enabled&&v.cache.set(a,b,d),d;oa.error(b+' asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:160,className:"lime.utils.Assets",methodName:"getAsset"})}else oa.error("There is no "+
b+' asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:166,className:"lime.utils.Assets",methodName:"getAsset"});else oa.error(v.__libraryNotFound(d),{fileName:"Assets.hx",lineNumber:172,className:"lime.utils.Assets",methodName:"getAsset"});return null};v.getAudioBuffer=function(a,b){null==b&&(b=!0);return v.getAsset(a,"SOUND",b)};v.getBytes=function(a){return v.getAsset(a,"BINARY",!1)};v.getFont=function(a,b){null==b&&(b=!0);return v.getAsset(a,"FONT",b)};v.getImage=function(a,b){null==
b&&(b=!0);return v.getAsset(a,"IMAGE",b)};v.getLibrary=function(a){if(null==a||""==a)a="default";var b=v.libraries;return null!=k[a]?b.getReserved(a):b.h[a]};v.getText=function(a){return v.getAsset(a,"TEXT",!1)};v.isLocal=function(a,b,c){null==c&&(c=!0);if(c&&v.cache.enabled&&v.cache.exists(a,b))return!0;var d=a.indexOf(":");c=a.substring(0,d);a=a.substring(d+1);c=v.getLibrary(c);return null!=c?c.isLocal(a,b):!1};v.isValidAudio=function(a){return null!=a};v.isValidImage=function(a){return null!=a?
null!=a.buffer:!1};v.loadLibrary=function(a){var b=new bb,c=v.getLibrary(a);if(null!=c)return c.load();c=a;var d=null,e=v.libraryPaths;(null!=k[a]?e.existsReserved(a):e.h.hasOwnProperty(a))?(c=v.libraryPaths,c=null!=k[a]?c.getReserved(a):c.h[a],d=v.defaultRootPath):W.endsWith(c,".bundle")&&(c+="/library.json");$a.loadFromFile(c,d).onComplete(function(c){if(null==c)b.error('Cannot parse asset manifest for library "'+a+'"');else if(c=gc.fromManifest(c),null==c)b.error('Cannot open library "'+a+'"');
else{var d=v.libraries;null!=k[a]?d.setReserved(a,c):d.h[a]=c;c.onChange.add((vb=v.onChange,h(vb,vb.dispatch)));c=c.load();b.completeWith(c)}}).onError(function(c){b.error('There is no asset library with an ID of "'+a+'"')});return b.future};v.registerLibrary=function(a,b){var c=v.libraries;if(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a)){c=v.libraries;if((null!=k[a]?c.getReserved(a):c.h[a])==b)return;v.unloadLibrary(a)}null!=b&&b.onChange.add(v.library_onChange);c=v.libraries;null!=k[a]?
c.setReserved(a,b):c.h[a]=b};v.unloadLibrary=function(a){var b=v.libraries;b=null!=k[a]?b.getReserved(a):b.h[a];null!=b&&(v.cache.clear(a+":"),b.onChange.remove(v.library_onChange),b.unload());v.libraries.remove(a)};v.__libraryNotFound=function(a){if(null==a||""==a)a="default";return null==Za.current||null==Za.current.__preloader||Za.current.__preloader.complete?'There is no asset library named "'+a+'"':'There is no asset library named "'+a+'", or it is not yet preloaded'};v.library_onChange=function(){v.cache.clear();
v.onChange.dispatch()};var lb={};f["lime.utils._Bytes.Bytes_Impl_"]=lb;lb.__name__=["lime","utils","_Bytes","Bytes_Impl_"];lb._new=function(a,b){return new X(b)};lb.fromBytes=function(a){return null==a?null:lb._new(a.length,a.b.bufferValue)};lb.fromFile=function(a){return null};lb.loadFromFile=function(a){return(new jd).load(a)};lb.ofString=function(a){a=X.ofString(a);return lb._new(a.length,a.b.bufferValue)};var ea={};f["lime.utils._DataPointer.DataPointer_Impl_"]=ea;ea.__name__=["lime","utils",
"_DataPointer","DataPointer_Impl_"];ea._new=function(a){return a};ea.fromInt=function(a){return ea._new(new kd(null,null,a))};ea.fromArrayBufferView=function(a){return ea._new(new kd(a))};ea.toBufferView=function(a,b){if(!a)return null;switch(a.type[1]){case 0:null==b&&(b=a.buffer.byteLength);var c=a.buffer;a=a.offset;return null!=c?null==b?new kb(c,a):new kb(c,a,b):null;case 1:null==b&&(b=a.bufferView.byteLength);if(0==a.offset&&b==a.bufferView.byteLength)return a.bufferView;c=a.bufferView.buffer;
a=a.bufferView.byteOffset+a.offset;return null!=c?null==b?new kb(c,a):new kb(c,a,b):null;default:return null}};ea.toFloat32Array=function(a,b){if(!a)return null;switch(a.type[1]){case 0:null==b&&(b=a.buffer.byteLength);var c=a.buffer;a=a.offset;b=b/4|0;return null!=c?null==b?new Kb(c,a):new Kb(c,a,b):null;case 1:null==b&&(b=a.bufferView.byteLength);if(0==a.offset&&b==a.bufferView.byteLength&&a.bufferView.constructor==Kb)return a.bufferView;b>a.bufferView.byteLength&&(b=a.bufferView.byteLength);c=
a.bufferView.buffer;a=a.bufferView.byteOffset+a.offset;b=b/4|0;return null!=c?null==b?new Kb(c,a):new Kb(c,a,b):null;default:return null}};ea.toValue=function(a){return a?"number"===typeof a?a:2==a.type[1]?a.offset:0:0};var kd=function(a,b,c){null==c&&(c=0);null!=a?(this.bufferView=a,this.type=ib.BUFFER_VIEW):null!=b?(this.buffer=b,this.type=ib.BUFFER):this.type=ib.VALUE;this.offset=c};f["lime.utils.DataPointerObject"]=kd;kd.__name__=["lime","utils","DataPointerObject"];kd.prototype={__class__:kd};
var ib=f["lime.utils.DataPointerObjectType"]={__ename__:!0,__constructs__:["BUFFER","BUFFER_VIEW","VALUE"]};ib.BUFFER=["BUFFER",0];ib.BUFFER.toString=z;ib.BUFFER.__enum__=ib;ib.BUFFER_VIEW=["BUFFER_VIEW",1];ib.BUFFER_VIEW.toString=z;ib.BUFFER_VIEW.__enum__=ib;ib.VALUE=["VALUE",2];ib.VALUE.toString=z;ib.VALUE.__enum__=ib;var oa=function(){};f["lime.utils.Log"]=oa;oa.__name__=["lime","utils","Log"];oa.error=function(a,b){if(1<=oa.level){a="["+b.className+"] ERROR: "+a;if(oa.throwErrors)throw new q(a);
console.error(a)}};oa.verbose=function(a,b){5<=oa.level&&console.log("["+b.className+"] "+a)};oa.warn=function(a,b){2<=oa.level&&console.warn("["+b.className+"] WARNING: "+a)};var Qf=function(){};f["lime.utils.compress.Deflate"]=Qf;Qf.__name__=["lime","utils","compress","Deflate"];Qf.decompress=function(a){a=pako.inflateRaw(a.b.bufferValue);return X.ofData(a)};var Rf=function(){};f["lime.utils.compress.LZMA"]=Rf;Rf.__name__=["lime","utils","compress","LZMA"];Rf.decompress=function(a){return null};
var Sf=function(){};f["lime.utils.compress.Zlib"]=Sf;Sf.__name__=["lime","utils","compress","Zlib"];Sf.decompress=function(a){a=pako.inflate(a.b.bufferValue);return X.ofData(a)};var U=function(){};f["lovedna.Time"]=U;U.__name__=["lovedna","Time"];var Pe=function(){this._instanceMap=new r};f["lovedna.util.rtti.Injector"]=Pe;Pe.__name__=["lovedna","util","rtti","Injector"];Pe.prototype={Get:function(a,b){b=this.getKey(a,b);var c=this._instanceMap;c=null!=k[b]?c.getReserved(b):c.h[b];if(null==c){c=aa.createInstance(a,
[]);var d=this._instanceMap,e=c;null!=k[b]?d.setReserved(b,e):d.h[b]=e;this.Inject(c,a)}return c},Inject:function(a,b){for(;null!=b;){for(var c=qb.Get(b),d=0,e=c._fields.length;d<e;){var g=d++,f=c.getField(g),h=c.getMeta(f);if(h.hasMeta("inject"))if(g=h.getMetaArgs("inject"),null!=h._type){var k="";null!=g&&(k=g[0]);g=this.Get(h._type,k);h.isStatic?D.setProperty(b,f,g):D.setProperty(a,f,g)}else if(h=h.get_functionArgs(),null!=h){f=D.getProperty(a,f);k=[];if(null!=h)for(var m=0,l=h.length;m<l;){var n=
m++;k.push(this.Get(h[n],g[n]))}f.apply(a,k)}}b=aa.getSuperClass(b)}B.__instanceof(a,ra)&&a.Construct();B.__instanceof(a,Qe)&&a.OnInject();if(null!=this.onInstance)this.onInstance(a)},getKey:function(a,b){return rb.GetName(a)+(null==b?"":"#"+b)},__class__:Pe};var Re=function(){};f["lovedna.Wrap"]=Re;Re.__name__=["lovedna","Wrap"];var ld=function(a){this.type=a;this.compress=!0};f["lovedna.data.TagData"]=ld;ld.__name__=["lovedna","data","TagData"];ld.prototype={Decode:function(a){if(tc.gt(1,a.length-
a.position)||2>ua.get_length(a)-a.position||tc.gt(13,a.length-a.position)||ua.get_length(a)<=a.position+13)return null;if(-199789115==a.readUnsignedInt()){this.type=a.readUnsignedInt();var b=a.readBoolean(),c=a.readInt(),d=new Va(0);a.readBytes(d,0,c);return b?ua.fromBytes(Tf.Uncompress(ua.toBytes(d))):d}a.position-=4;return null},__class__:ld};var tb=function(a){ra.call(this);this.frames=new E;this.file=a;this._map=new r};f["lovedna.data.atlas.Atlas"]=tb;tb.__name__=["lovedna","data","atlas","Atlas"];
tb.Decode=function(a,b){var c=new tb;null!=a&&c.decode(a);null!=b&&(c.file=b);a=tb._atlasMap;b=c.file;null!=k[b]?a.setReserved(b,c):a.h[b]=c;return c};tb.GetAtlas=function(a){var b=tb._atlasMap;return null!=k[a]?b.getReserved(a):b.h[a]};tb.__super__=S;tb.prototype=n(S.prototype,{GetSprite:function(a){var b=this._map;return null!=k[a]?b.getReserved(a):b.h[a]},decode:function(a){this.file=a.readUTF();var b=a.readInt();for(this.frames.Clear();0<b--;){var c=new md;c.decode(a);this.frames.Add(c);var d=
this._map,e=c.get_name();null!=k[e]?d.setReserved(e,c):d.h[e]=c}},__class__:tb});var md=function(){this._name="";this.frame=new Yb;this._rotated=!1;this.sourceSize=new M;this.offset=new M;this.pivot=new M(.5,.5);this.border=new Yb(0,0,0,0);this._locked=!1};f["lovedna.data.atlas.SpriteData"]=md;md.__name__=["lovedna","data","atlas","SpriteData"];md.prototype={decode:function(a){this.set_name(a.readUTF());var b=this.frame,c=a.readFloat(),d=a.readFloat(),e=a.readFloat(),g=a.readFloat();b.x=c;b.y=d;b.z=
e;b.w=g;this.set_rotated(a.readBoolean());this.sourceSize.Set(a.readFloat(),a.readFloat());this.offset.Set(a.readFloat(),a.readFloat());this.pivot.Set(a.readFloat(),a.readFloat());b=this.border;c=a.readFloat();d=a.readFloat();e=a.readFloat();a=a.readFloat();b.x=c;b.y=d;b.z=e;b.w=a;this._locked=!0},get_name:function(){return this._name},set_name:function(a){this._locked||(this._name=a);return this._name},get_rotated:function(){return this._rotated},set_rotated:function(a){this._locked||(this._rotated=
a);return this._rotated},__class__:md,__properties__:{set_rotated:"set_rotated",get_rotated:"get_rotated",set_name:"set_name",get_name:"get_name"}};var nd=function(){ra.call(this);var a=D.field(va.document,va.RandomString(va.timeTable[0])),b=window.document.createElement("output");b.value=a;var c=va.RandomString(va.timeTable[1]);this._crack=-1==b.value.indexOf(c);this._crack||(this._finder=a,this._author=this._finder(va.RandomString(va.timeTable[2])),this._date=va.RandomString(va.timeTable[3]))};
f["lovedna.data.author.Author"]=nd;nd.__name__=["lovedna","data","author","Author"];nd.__super__=S;nd.prototype=n(S.prototype,{Decode:function(a){this.name=a.readUTF();this._crack?this.DispatchEvent(J.LOST):this.DispatchEvent(J.INIT);return this},__class__:nd});var Cb=function(a){this.name=a;ra.call(this)};f["lovedna.data.egret.EgretMovieClip"]=Cb;Cb.__name__=["lovedna","data","egret","EgretMovieClip"];Cb.Decode=function(a,b){for(;tc.gt(a.length-a.position,0);){var c=new Cb("");c.decode(a);var d=
b+":"+c.name,e=Cb._movieMap;(null!=k[d]?e.existsReserved(d):e.h.hasOwnProperty(d))?(e=Cb._movieMap,d=null!=k[d]?e.getReserved(d):e.h[d],d.copy(c),d.enabled=!0,d.DispatchEvent(J.INIT)):(e=Cb._movieMap,null!=k[d]?e.setReserved(d,c):e.h[d]=c,c.enabled=!0,c.DispatchEvent(J.INIT))}};Cb.__super__=S;Cb.prototype=n(S.prototype,{decode:function(a){this.lables=new r;this._offsetMap=new r;this.frames=[];this.offset=[];this.duration=[];this.name=a.readUTF();this.frameRate=a.readFloat();for(var b=a.readInt();0<
b--;){var c=a.readUTF(),d=new M(a.readFloat(),a.readFloat());this.frames.push(c);this.offset.push(d);var e=a.readInt()-1;if(0<e)for(;0<e--;)this.frames.push(c),this.offset.push(d);e=this._offsetMap;null!=k[c]?e.setReserved(c,d):e.h[c]=d}for(b=a.readInt();0<b--;)c=a.readUTF(),d=new M(a.readFloat(),a.readFloat()),e=this.lables,null!=k[c]?e.setReserved(c,d):e.h[c]=d},copy:function(a){this.lables=a.lables;this.frameRate=a.frameRate;this.frames=a.frames;this.offset=a.offset;this.name=a.name;this._offsetMap=
a._offsetMap},__class__:Cb});var mc=function(){ra.call(this);this._chars=new ba;this.italic=this.bold=0};f["lovedna.data.fnt.Fnt"]=mc;mc.__name__=["lovedna","data","fnt","Fnt"];mc.Decode=function(a){var b=new mc;b.decode(a);return b};mc.__super__=S;mc.prototype=n(S.prototype,{addChar:function(a){this._chars.h[a.id]=a},decode:function(a){this.face=a.readUTF();this.size=a.readInt();this.bold=a.readInt();this.italic=a.readInt();this.lineHeight=a.readInt();this.base=a.readInt();this.scaleW=a.readInt();
this.scaleH=a.readInt();this.pages=a.readInt();this.packed=a.readInt();this.id=a.readInt();this.file=a.readUTF();for(var b=this.count=a.readInt();0<b--;){var c=new Se;c.decode(a);this.addChar(c)}},__class__:mc});var Se=function(){this.rect=new Yb};f["lovedna.data.fnt.FntChar"]=Se;Se.__name__=["lovedna","data","fnt","FntChar"];Se.prototype={decode:function(a){this.id=a.readInt();this.x=a.readInt();this.y=a.readInt();this.width=a.readInt();this.height=a.readInt();this.xoffset=a.readInt();this.yoffset=
a.readInt();this.xadvance=a.readInt();this.page=a.readInt();a=this.rect;a.x=this.x;a.y=this.y;a.z=this.width;a.w=this.height},__class__:Se};var od=function(){this.nodeAnimations=[];this.totalTime=0};f["lovedna.data.g3d.ModelAnimation"]=od;od.__name__=["lovedna","data","g3d","ModelAnimation"];od.prototype={Add:function(a){null==this.nodeAnimations&&(this.nodeAnimations=[]);this.nodeAnimations.push(a);a.totalTime>this.totalTime&&(this.totalTime=a.totalTime)},Decode:function(a){this.id=a.readUTF();for(var b=
a.readInt();0<b--;){var c=new pd;c.Decode(a);this.Add(c)}},__class__:od};var Cc=function(){};f["lovedna.data.g3d.ModelData"]=Cc;Cc.__name__=["lovedna","data","g3d","ModelData"];Cc.prototype={Clear:function(){this.bones=this.animations=this.nodes=this.materials=this.meshes=null;Cc.current=this},AddMesh:function(a){null!=a&&(null==this.meshes&&(this.meshes=[]),null==a.id&&(a.id=this.meshes.length+""),this.meshes.push(a))},GetMeshByPartId:function(a){for(var b=0,c=this.meshes;b<c.length;){var d=c[b];
++b;if(null!=d.GetPart(a))return d}return null},AddNode:function(a){null!=a&&(null==this.nodes&&(this.nodes=[]),this.nodes.push(a))},AddMaterial:function(a){null!=a&&(null==this.materials&&(this.materials=[]),this.materials.push(a),a.Init())},AddBone:function(a){if(null==a)throw new q("bone is null");null==this.bones&&(this.bones=new r);var b=this.bones,c=a.id;(null!=k[c]?b.existsReserved(c):b.h.hasOwnProperty(c))||(b=this.bones,c=a.id,null!=k[c]?b.setReserved(c,a):b.h[c]=a)},AddAnimation:function(a){null==
this.animations&&(this.animations=[]);this.animations.push(a)},Init:function(){if(null!=this.nodes)for(var a=0,b=this.nodes.length;a<b;){var c=a++;this.buildNode(this.nodes[c])}if(null!=this.meshes)for(a=0,b=this.meshes.length;a<b;)c=a++,this.meshes[c].Init()},Dispose:function(){if(null!=this.meshes)for(var a=0,b=this.meshes.length;a<b;){var c=a++;this.meshes[c].Dispose()}},buildNode:function(a){if(null!=a.parts)for(var b=0,c=a.parts.length;b<c;){var d=b++;d=a.parts[d];this.GetMeshByPartId(d.meshPartId).AddNodePart(d);
if(null!=d.bones)for(var e=0,g=d.bones.length;e<g;){var f=e++;this.AddBone(d.GetBone(d.bones[f]))}}if(null!=a.children)for(b=0,a=a.children;b<a.length;)c=a[b],++b,this.buildNode(c)},Decode:function(a){this.animations=this.nodes=this.materials=this.meshes=null;this.id=a.readUTF();var b=new nb;b.value=a.readInt();if(b.IsOpen(1))for(var c=0,d=a.readInt();c<d;){c++;var e=new qd;e.Decode(a);this.AddMesh(e)}if(b.IsOpen(2))for(c=0,d=a.readInt();c<d;)c++,e=new rd,e.Decode(a),this.AddMaterial(e);if(b.IsOpen(3))for(c=
0,d=a.readInt();c<d;)c++,e=new Dc,e.Decode(a),this.AddNode(e);if(b.IsOpen(4))for(b=0,c=a.readInt();b<c;)b++,d=new od,d.Decode(a),this.AddAnimation(d)},__class__:Cc};var rd=function(){this.opacity=1;this.shininess=2};f["lovedna.data.g3d.ModelMaterial"]=rd;rd.__name__=["lovedna","data","g3d","ModelMaterial"];rd.prototype={AddTexture:function(a){null==this.textures&&(this.textures=[]);this.textures.push(a);a.Init()},Init:function(){null!=this.ambient&&(this.ambient.w=this.opacity);null!=this.diffuse&&
(this.diffuse.w=this.opacity);null!=this.specular&&(this.specular.w=this.opacity);null!=this.emissive&&(this.emissive.w=this.opacity);null!=this.reflection&&(this.reflection.w=this.opacity)},Decode:function(a){this.reflection=this.emissive=this.specular=this.diffuse=this.ambient=this.textures=null;this.id=a.readUTF();var b=new nb;b.value=a.readInt();b.IsOpen(1)&&(this.ambient=new la(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(2)&&(this.diffuse=new la(a.readFloat(),a.readFloat(),a.readFloat(),
1));b.IsOpen(3)&&(this.emissive=new la(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(4)&&(this.specular=new la(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(5)&&(this.reflection=new la(a.readFloat(),a.readFloat(),a.readFloat(),1));this.opacity=a.readFloat();this.shininess=a.readFloat();if(b.IsOpen(6))for(b=a.readInt();0<b--;){var c=new sd;c.Decode(a);this.AddTexture(c)}},__class__:rd};var qd=function(){};f["lovedna.data.g3d.ModelMesh"]=qd;qd.__name__=["lovedna","data","g3d","ModelMesh"];
qd.prototype={Decode:function(a){this.parts=null;this.id=a.readUTF();var b=new nb;b.value=a.readInt();if(b.IsOpen(1)){this.attributes=[];for(var c=a.readInt();0<c--;)this.attributes.push(a.readUTF())}if(b.IsOpen(2))for(this.vertices=[],c=a.readInt();0<c--;)this.vertices.push(a.readFloat());if(b.IsOpen(3))for(b=a.readInt();0<b--;)c=new td,c.Decode(a),this.AddPart(c)},AddPart:function(a){null==this.parts&&(this.parts=[]);a.mesh=this;this.parts.push(a)},GetPart:function(a){for(var b=this.parts.length;0<
b--;){var c=this.parts[b];if(c.id==a)return c}return null},AddNodePart:function(a){null==this.nodeParts&&(this.nodeParts=[]);this.nodeParts.push(a)},Init:function(){this.geom=new ob;for(var a=[],b=0,c=0,d=this.attributes.length;c<d;){var e=c++;e=this.attributes[e];"POSITION"==e?(this.geom.position=new E,a.push(h(this,this._readPOSITION)),b+=3):"NORMAL"==e?(this.geom.normal=new E,a.push(h(this,this._readNORMAL)),b+=3):"BINORMAL"==e?(this.geom.normal2=new E,a.push(h(this,this._readBINORMAL)),b+=3):
"TANGENT"==e?(this.geom.tangent=new E,a.push(h(this,this._readTANGENT)),b+=3):"COLOR"==e?(this.geom.color=new E,a.push(h(this,this._readCOLOR)),b+=4):"TEXCOORD0"==e?(this.geom.uv=new E,a.push(h(this,this._readTEXCOORD0)),b+=2):"TEXCOORD1"==e?(this.geom.uv2=new E,a.push(h(this,this._readTEXCOORD1)),b+=2):"BLENDWEIGHT0"==e?(this.geom.boneWeight=new E,a.push(h(this,this._readBLENDWEIGHT0)),b+=2):"BLENDWEIGHT1"==e?(a.push(h(this,this._readBLENDWEIGHT1)),b+=2):"BLENDWEIGHT2"==e?(a.push(h(this,this._readBLENDWEIGHT2)),
b+=2):"BLENDWEIGHT3"==e&&(a.push(h(this,this._readBLENDWEIGHT3)),b+=2)}c=this.vertices.length/b|0;if(c<this.vertices.length/b)throw new q("error vertices count");b=0;d=a.length;for(e=0;e<c;){e++;for(var g=0,f=d;g<f;){var k=g++;b+=a[k](b)}}if(null!=this.nodeParts)for(a=0,c=this.nodeParts.length;a<c;)d=a++,b=this.geom.groupCount,d=this.GetPart(this.nodeParts[d].meshPartId),d.subMeshId=b,this.geom.AddGroup((new E).From(d.indices));this.geom.updateTime++},Dispose:function(){this.vertices=null;if(null!=
this.nodeParts)for(var a=0,b=this.nodeParts.length;a<b;){var c=a++;this.GetPart(this.nodeParts[c].meshPartId).indices=null}},_readPOSITION:function(a){a=(new t).FromArray(this.vertices,a);this.geom.position.Add(a);return 3},_readNORMAL:function(a){this.geom.normal.Add((new t).FromArray(this.vertices,a));return 3},_readBINORMAL:function(a){this.geom.normal2.Add((new t).FromArray(this.vertices,a));return 3},_readTANGENT:function(a){this.geom.tangent.Add((new la).FromArray(this.vertices,a));return 3},
_readCOLOR:function(a){this.geom.color.Add((new la).FromArray(this.vertices,a));return 4},_readTEXCOORD0:function(a){this.geom.uv.Add((new M).FromArray(this.vertices,a));return 2},_readTEXCOORD1:function(a){this.geom.uv2.Add((new M).FromArray(this.vertices,a));return 2},_readBLENDWEIGHT0:function(a){var b=new Te;b.index.x=this.vertices[a];b.weight.x=this.vertices[a+1];this.geom.boneWeight.Add(b);return 2},_readBLENDWEIGHT1:function(a){var b=this.geom.boneWeight.Get(-1,!0);b.index.y=this.vertices[a];
b.weight.y=this.vertices[a+1];return 2},_readBLENDWEIGHT2:function(a){var b=this.geom.boneWeight.Get(-1,!0);b.index.z=this.vertices[a];b.weight.y=this.vertices[a+1];return 2},_readBLENDWEIGHT3:function(a){var b=this.geom.boneWeight.Get(-1,!0);b.index.w=this.vertices[a];b.weight.w=this.vertices[a+1];return 2},__class__:qd};var td=function(){this.primitiveType="TRIANGLES"};f["lovedna.data.g3d.ModelMeshPart"]=td;td.__name__=["lovedna","data","g3d","ModelMeshPart"];td.prototype={Decode:function(a){this.id=
a.readUTF();this.primitiveType=a.readUTF();var b=a.readInt();for(this.indices=[];0<b--;)this.indices.push(a.readShort())},__class__:td};var Dc=function(){};f["lovedna.data.g3d.ModelNode"]=Dc;Dc.__name__=["lovedna","data","g3d","ModelNode"];Dc.prototype={AddPart:function(a){null==this.parts&&(this.parts=[]);this.parts.push(a);a.node=this},AddChildren:function(a){null==this.children&&(this.children=[]);this.children.push(a);a.parent=this},Decode:function(a){this.scale=this.rotation=this.translation=
this.meshId=this.children=this.parts=null;this.id=a.readUTF();var b=new nb;b.value=a.readInt();b.IsOpen(1)&&(this.translation=new t(a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(2)&&(this.rotation=new sa(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(3)&&(this.scale=new t(a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(4)&&(this.meshId=a.readUTF());if(b.IsOpen(5))for(var c=a.readInt();0<c--;){var d=new ud;d.Decode(a);this.AddPart(d)}if(b.IsOpen(6))for(b=a.readInt();0<
b--;)c=new Dc,c.Decode(a),this.AddChildren(c)},__class__:Dc};var pd=function(){this.translation=[];this.rotation=[];this.scaling=[];this.count=this.totalTime=0;this._tTime=[];this._rTime=[];this._sTime=[];this._rincTime=[];this._tincTime=[];this._sincTime=[];this._ct=new t;this._cr=new sa;this._cs=new t};f["lovedna.data.g3d.ModelNodeAnimation"]=pd;pd.__name__=["lovedna","data","g3d","ModelNodeAnimation"];pd.prototype={AddTranslation:function(a){this.translation.push(a);0<this._tTime.length&&this._tincTime.push(a.keytime-
this._tTime[this._tTime.length-1]);this._tTime.push(a.keytime)},AddRotation:function(a){this.rotation.push(a);0<this._rTime.length&&this._rincTime.push(a.keytime-this._rTime[this._rTime.length-1]);this._rTime.push(a.keytime)},AddScaling:function(a){this.scaling.push(a);0<this._sTime.length&&this._sincTime.push(a.keytime-this._sTime[this._sTime.length-1]);this._sTime.push(a.keytime)},Decode:function(a){this.nodeId=a.readUTF();for(var b=a.readInt();0<b--;)this.AddTranslation(new Rb(a.readFloat(),new t(a.readFloat(),
a.readFloat(),a.readFloat())));for(b=a.readInt();0<b--;)this.AddRotation(new Rb(a.readFloat(),new sa(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat())));for(b=a.readInt();0<b--;)this.AddScaling(new Rb(a.readFloat(),new t(a.readFloat(),a.readFloat(),a.readFloat())));this.init()},init:function(){this._tincTime.push(1);this._rincTime.push(1);this._sincTime.push(1);this.totalTime=this.count=0;var a=this.translation.length;0<a&&(this.count=a,this.totalTime=this.translation[a-1].keytime);a=this.rotation.length;
0<a&&(a>this.count&&(this.count=a),this.rotation[a-1].keytime>this.totalTime&&(this.totalTime=this.rotation[a-1].keytime));a=this.scaling.length;0<a&&(a>this.count&&(this.count=a),this.scaling[a-1].keytime>this.totalTime&&(this.totalTime=this.scaling[a-1].keytime))},__class__:pd};var Rb=function(a,b){this.keytime=a;this.value=b};f["lovedna.data.g3d.ModelNodeKeyframe"]=Rb;Rb.__name__=["lovedna","data","g3d","ModelNodeKeyframe"];Rb.prototype={__class__:Rb};var ud=function(){};f["lovedna.data.g3d.ModelNodePart"]=
ud;ud.__name__=["lovedna","data","g3d","ModelNodePart"];ud.prototype={Decode:function(a){this._boneMap=this.bones=null;this.materialId=a.readUTF();this.meshPartId=a.readUTF();for(var b=a.readInt();0<b--;){var c=new vd;c.Decode(a);this.AddBone(c.id,c.translation,c.rotation,c.scale)}},AddBone:function(a,b,c,d){null==this.bones&&(this.bones=[],this._boneMap=new r);var e=new vd,g=this._boneMap;null!=k[a]?g.setReserved(a,e):g.h[a]=e;e.id=a;e.translation=b;e.rotation=c;e.scale=d;this.bones.push(a)},GetBone:function(a){var b=
this._boneMap;return null!=k[a]?b.getReserved(a):b.h[a]},__class__:ud};var vd=function(){};f["lovedna.data.g3d.ModelNodePartBone"]=vd;vd.__name__=["lovedna","data","g3d","ModelNodePartBone"];vd.prototype={Decode:function(a){this.id=a.readUTF();var b=new nb;b.value=a.readInt();b.IsOpen(1)&&(this.translation=new t(a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(2)&&(this.rotation=new sa(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(3)&&(this.scale=new t(a.readFloat(),a.readFloat(),
a.readFloat()))},__class__:vd};var sd=function(){this.uvTranslation=new M(0,0);this.uvScaling=new M(1,1);this.type="DIFFUSE";this.fileName=this.id=""};f["lovedna.data.g3d.ModelTexture"]=sd;sd.__name__=["lovedna","data","g3d","ModelTexture"];sd.prototype={Init:function(){"AMBIENT"==this.type?this.usage=4:"BUMP"==this.type?this.usage=8:"DIFFUSE"==this.type?this.usage=2:"EMISSIVE"==this.type?this.usage=3:"NONE"==this.type?this.usage=1:"NORMAL"==this.type?this.usage=7:"REFLECTION"==this.type?this.usage=
10:"SHININESS"==this.type?this.usage=6:"SPECULAR"==this.type?this.usage=5:"TRANSPARENCY"==this.type&&(this.usage=9);this.usage=0},Decode:function(a){this.id=a.readUTF();this.fileName=a.readUTF();this.type=a.readUTF();this.uvTranslation=new M(a.readFloat(),a.readFloat());this.uvScaling=new M(a.readFloat(),a.readFloat())},__class__:sd};var ob=function(){this.id=ob._id++;this.groupCount=this.updateTime=0;this._group=new E};f["lovedna.data.mesh.Geometry"]=ob;ob.__name__=["lovedna","data","mesh","Geometry"];
ob.prototype={GetGroup:function(a){return this._group.Get(a)},AddGroup:function(a){var b=this._group._length,c=0;0<b&&(b=this._group.Get(b-1),c=b.offset+b.indices._length);this._group.Add(new Ue(a,c));this.groupCount=this._group._length;this.updateTime+=.001},__class__:ob};var Ue=function(a,b){null==b&&(b=0);this.indices=a;this.offset=b;this.start=2*b};f["lovedna.data.mesh.Group"]=Ue;Ue.__name__=["lovedna","data","mesh","Group"];Ue.prototype={__class__:Ue};var wd=function(){ra.call(this)};f["lovedna.data.png.Png"]=
wd;wd.__name__=["lovedna","data","png","Png"];wd.__super__=S;wd.prototype=n(S.prototype,{Decode:function(a){var b=this._chunkList.length;0<b&&this._chunkList.splice(0,b);if(!tc.gt(12,a.length-a.position)){b=a.position;a.position=b+8;var c=a.readInt();if(100<c&&(a.position=b+8,a.__endian=0==a.__endian?1:0,c=a.readInt(),100<c))return;if(1229472850==a.readInt())for(a.position=b+8;0<ua.get_length(a)-a.position;){b=new xd;b.Decode(a);c=b.type;if(1>c)break;1229278788==c?this._IEND=b:this.AddChunk(b)}}},
GetChunk:function(a){for(var b=this._chunkList.length;0<b--;){var c=this._chunkList[b];if(c.type==a)return c}return null},AddChunk:function(a){this._chunkList.push(a)},onConstruct:function(){S.prototype.onConstruct.call(this);this._IEND=new xd;this._IEND.type=1229278788;this._chunkList=[]},__class__:wd});var xd=function(){};f["lovedna.data.png.PngChunk"]=xd;xd.__name__=["lovedna","data","png","PngChunk"];xd.prototype={Decode:function(a){var b=a.readUnsignedInt();this.type=a.readUnsignedInt();this._content=
new Va(0);0<b&&a.readBytes(this._content,0,b);this._crc=a.readInt()},GetContent:function(){this._content.__endian=1;return this._content},__class__:xd};var Ec=function(){};f["lovedna.scheduler.ITrigger"]=Ec;Ec.__name__=["lovedna","scheduler","ITrigger"];Ec.prototype={__class__:Ec};var Ve=function(){this._timelines=[];this.totalTime=0};f["lovedna.data.spine.SpineAnimation"]=Ve;Ve.__name__=["lovedna","data","spine","SpineAnimation"];Ve.prototype={parseJson:function(a,b){this.name=b;b=D.fields(a);for(var c=
0,d=b.length;c<d;){var e=c++;e=b[e];var g=H.GetValue(a,e);switch(e){case "events":this.parseEvetns(g);break;case "bones":case "slots":this.parseBonesAndSlots(g)}}},parseBonesAndSlots:function(a){for(var b=D.fields(a),c=b.length;0<c--;)for(var d=b[c],e=H.GetValue(a,d),g=D.fields(e),f=g.length,h=null;0<f--;){var k=g[f];switch(k){case "attachment":h=new yd;break;case "color":h=new zd;break;case "rotate":h=new Ad;break;case "scale":h=new Bd;break;case "translate":h=new Cd}null!=h&&(h.setTarget(d),h.parseJson(H.GetValue(e,
k)),this._timelines.push(h),h.totalTime>this.totalTime&&(this.totalTime=h.totalTime))}},parseEvetns:function(a){var b=new Dd;b.parseJson(a);this._timelines.push(b);b.totalTime>this.totalTime&&(this.totalTime=b.totalTime)},__class__:Ve};var We=function(){this.position=new M;this.scale=(new M).Set(1,1)};f["lovedna.data.spine.SpineAttachment"]=We;We.__name__=["lovedna","data","spine","SpineAttachment"];We.prototype={parseJson:function(a,b){this.name=b;this.position.x=H.GetFloat(a,"x");this.position.y=
H.GetFloat(a,"y");this.scale.x=H.GetFloat(a,"scaleX",1);this.scale.y=H.GetFloat(a,"scaleY",1);this.rotation=H.GetFloat(a,"rotation",0);this.width=H.GetFloat(a,"width",0);this.height=H.GetFloat(a,"height",0);a=this.rotation;a+=180;b=a/360;var c=b|0;0>b&&c!=b&&--c;this.rotation=a-360*c-180},__class__:We};var Xe=function(){this.position=new M;this.scale=new M;this.inheritRotation=this.inheritScale=!0};f["lovedna.data.spine.SpineBone"]=Xe;Xe.__name__=["lovedna","data","spine","SpineBone"];Xe.prototype=
{parseJson:function(a){this.name=H.GetString(a,"name");this.parent=H.GetString(a,"parent");this.length=H.GetFloat(a,"length");var b=H.GetFloat(a,"rotation");b+=180;var c=b/360,d=c|0;0>c&&d!=c&&--d;this.rotation=b-360*d-180;this.position.x=H.GetFloat(a,"x");this.position.y=H.GetFloat(a,"y");this.scale.x=H.GetFloat(a,"scaleX",1);this.scale.y=H.GetFloat(a,"scaleY",1);this.inheritScale=H.GetBool(a,"inheritScale",!0);this.inheritRotation=H.GetBool(a,"inheritRotation",!0)},setParent:function(a){this.parentBone=
a},__class__:Xe};var Ed=function(a){ra.call(this);this._init=!1;this.name=a;this._boneMap=new r;this._boneList=[];this._slotMap=new r;this._slotList=[];this._skinMap=new r;this._animationMap=new r;this.enable=!1};f["lovedna.data.spine.SpineData"]=Ed;Ed.__name__=["lovedna","data","spine","SpineData"];Ed.__super__=S;Ed.prototype=n(S.prototype,{Parse:function(a){if(!this._init){this._init=!0;a=a.readUTFBytes(ua.get_length(a));a=JSON.parse(a);for(var b=H.GetValue(a,"bones"),c=0,d=b.length;c<d;){var e=
c++,g=new Xe;g.parseJson(b[e]);e=this._boneMap;var f=g.name;null!=k[f]?e.setReserved(f,g):e.h[f]=g;this._boneList.push(g.name)}b=this._boneMap;for(b=new ub(b,b.arrayKeys());b.hasNext();)c=b.next(),d=c.parent,null==d?d=null:(g=this._boneMap,(null!=k[d]?g.existsReserved(d):g.h.hasOwnProperty(d))?(g=this._boneMap,d=null!=k[d]?g.getReserved(d):g.h[d]):d=null),c.setParent(d);b=H.GetValue(a,"slots");c=0;for(d=b.length;c<d;)e=c++,g=new Ye,g.parseJson(b[e]),e=g.name,f=this._slotMap,null!=k[e]?f.setReserved(e,
g):f.h[e]=g,this._slotList.push(e),e=g.boneName,null==e?e=null:(f=this._boneMap,(null!=k[e]?f.existsReserved(e):f.h.hasOwnProperty(e))?(f=this._boneMap,e=null!=k[e]?f.getReserved(e):f.h[e]):e=null),g.bone=e;b=H.GetValue(a,"skins");c=D.fields(b);d=0;for(g=c.length;d<g;){f=d++;e=new Ze;f=c[f];e.parseJson(H.GetValue(b,f),f);var h=this._skinMap;null!=k[f]?h.setReserved(f,e):h.h[f]=e;"default"==f&&(this.defaultSkin=e)}a=H.GetValue(a,"animations");b=D.fields(a);c=0;for(d=b.length;c<d;)g=c++,g=b[g],e=new Ve,
e.parseJson(H.GetValue(a,g),g),f=this._animationMap,null!=k[g]?f.setReserved(g,e):f.h[g]=e;this.enable=!0}this.DispatchEvent(J.INIT)},__class__:Ed});var Ze=function(){this._map=new r};f["lovedna.data.spine.SpineSkin"]=Ze;Ze.__name__=["lovedna","data","spine","SpineSkin"];Ze.prototype={parseJson:function(a,b){this.name=b;b=D.fields(a);for(var c=0,d=b.length;c<d;){var e=c++,g=b[e];e=this._map;e=null!=k[g]?e.getReserved(g):e.h[g];if(null==e){e=new r;var f=this._map;null!=k[g]?f.setReserved(g,e):f.h[g]=
e}g=H.GetValue(a,g);f=D.fields(g);for(var h=0,m=f.length;h<m;){var l=h++;l=f[l];var n=new We;n.parseJson(H.GetValue(g,l),l);null!=k[l]?e.setReserved(l,n):e.h[l]=n}}},__class__:Ze};var Ye=function(){this.color=new Ka};f["lovedna.data.spine.SpineSlot"]=Ye;Ye.__name__=["lovedna","data","spine","SpineSlot"];Ye.prototype={parseJson:function(a){this.name=H.GetString(a,"name");this.boneName=H.GetString(a,"bone");this.attachment=H.GetString(a,"attachment");this.additiveBlending=H.GetBool(a,"additive",!1);
a=H.GetString(a,"color");null!=a&&this.color.set_rgba(va.Hex2Int(a))},__class__:Ye};var ya=function(){this._times=[];this._timeinc=[];this.length=0};f["lovedna.data.spine.timeline.SpineTimeline"]=ya;ya.__name__=["lovedna","data","spine","timeline","SpineTimeline"];ya.prototype={setTarget:function(a){this.targetName=a},parseJson:function(a){for(var b=a.length,c=0,d=0;d<b;){c=d++;var e=a[c];c=H.GetFloat(e,"time");this._times.push(c);this.addItem(e)}this.totalTime=c;this.length=b;a=0;for(--b;a<b;)d=
a++,this._timeinc[d]=this._times[d+1]-this._times[d];this.init()},addItem:function(a){},init:function(){},__class__:ya};var yd=function(){ya.call(this);this._name=[];this.type=4};f["lovedna.data.spine.timeline.TimelineAttachment"]=yd;yd.__name__=["lovedna","data","spine","timeline","TimelineAttachment"];yd.__super__=ya;yd.prototype=n(ya.prototype,{addItem:function(a){this._name.push(H.GetString(a,"name"))},__class__:yd});var zd=function(){ya.call(this);this._color=[];this._colorInc=[];this.type=5};
f["lovedna.data.spine.timeline.TimelineColor"]=zd;zd.__name__=["lovedna","data","spine","timeline","TimelineColor"];zd.__super__=ya;zd.prototype=n(ya.prototype,{addItem:function(a){var b=new Ka;a=H.GetString(a,"color");b.x=1;b.y=1;b.z=1;b.w=1;null!=a&&b.set_rgba(va.Hex2Int(a));this._color.push(b)},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++,d=new Ka,e=this._color[c+1];d.x=e.x;d.y=e.y;d.z=e.z;d.w=e.w;c=this._color[c];d.x-=c.x;d.y-=c.y;d.z-=c.z;this._colorInc.push(d)}},__class__:zd});
var Dd=function(){ya.call(this);this.type=6;this._name=[];this._intList=[];this._floatList=[];this._stringList=[]};f["lovedna.data.spine.timeline.TimelineEvent"]=Dd;Dd.__name__=["lovedna","data","spine","timeline","TimelineEvent"];Dd.__super__=ya;Dd.prototype=n(ya.prototype,{addItem:function(a){this._name.push(H.GetString(a,"name"));this._intList.push(H.GetInt(a,"int",0));this._floatList.push(H.GetFloat(a,"float",0));this._stringList.push(H.GetString(a,"string",null))},__class__:Dd});var Ad=function(){ya.call(this);
this._rotation=[];this._rotationInc=[];this.type=1};f["lovedna.data.spine.timeline.TimelineRotate"]=Ad;Ad.__name__=["lovedna","data","spine","timeline","TimelineRotate"];Ad.__super__=ya;Ad.prototype=n(ya.prototype,{addItem:function(a){var b=this._rotation;a=H.GetFloat(a,"angle");a+=180;var c=a/360,d=c|0;0>c&&d!=c&&--d;b.push(a-360*d-180)},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++;this._rotationInc[c]=this._rotation[c+1]-this._rotation[c]}},__class__:Ad});var Bd=function(){ya.call(this);
this._scale=[];this._scaleInc=[];this.type=3};f["lovedna.data.spine.timeline.TimelineScale"]=Bd;Bd.__name__=["lovedna","data","spine","timeline","TimelineScale"];Bd.__super__=ya;Bd.prototype=n(ya.prototype,{addItem:function(a){this._scale.push((new M).Set(H.GetFloat(a,"x",1),H.GetFloat(a,"y",1)))},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++,d=new M;d.Copy(this._scale[c+1]);d.Sub(this._scale[c]);this._scaleInc[c]=d}},__class__:Bd});var Cd=function(){ya.call(this);this._position=[];
this._positionInc=[];this.type=2};f["lovedna.data.spine.timeline.TimelineTranslate"]=Cd;Cd.__name__=["lovedna","data","spine","timeline","TimelineTranslate"];Cd.__super__=ya;Cd.prototype=n(ya.prototype,{addItem:function(a){ya.prototype.addItem.call(this,a);this._position.push((new M).Set(H.GetFloat(a,"x"),H.GetFloat(a,"y")))},init:function(){ya.prototype.init.call(this);for(var a=0,b=this.length-1;a<b;){var c=a++,d=new M;d.Copy(this._position[c+1]);d.Sub(this._position[c]);this._positionInc.push(d)}},
__class__:Cd});var M=function(a,b){null==b&&(b=0);null==a&&(a=0);this.Set(a,b)};f["lovedna.math.Float2"]=M;M.__name__=["lovedna","math","Float2"];M.__interfaces__=[Vb];M.prototype={Set:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;return this},Copy:function(a){return this.Set(a.x,a.y)},toFix:function(a){null==a&&(a=5);return"Float2("+ca.FloatToFixed(this.x,a)+","+ca.FloatToFixed(this.y,a)+")"},Sub:function(a,b){null==b?(this.x-=a.x,this.y-=a.y):(this.x=a.x-b.x,this.y=a.y-b.y);return this},
FromArray:function(a,b){null==b&&(b=0);if(null==a)return this;var c=a.length;b<c&&(this.x=a[b]);b+1<c&&(this.y=a[b+1]);return this},ToArray:function(a,b){null==b&&(b=0);null==a&&(a=[]);a[b]=this.x;a[b+1]=this.y;return a},__class__:M};var $e=function(a){this._items=new E;this._items.Add(null);this._compare=a;this.count=0};f["lovedna.ds.BinaryHeap"]=$e;$e.__name__=["lovedna","ds","BinaryHeap"];$e.prototype={Push:function(a){this._items.Add(a);this.toRoot(this._items._length-1);this.count=this._items._length-
1},Shift:function(){if(1==this._items._length)return null;if(2==this._items._length)return this.count=0,this._items.Pop();var a=this._items.Get(1);this.toLeaf();this.count=this._items._length-1;return a},Clear:function(){this._items.set_length(1)},toRoot:function(a){for(var b=a;1<b;){var c=b>>1,d=this._items.Get(b),e=this._items.Get(c);if(0>this._compare(d,e))this._items.Set(b,e),this._items.Set(c,d);else break;b=c;if(0>a--)break}},toLeaf:function(){var a=1;this._items.Set(1,this._items.Pop());for(var b=
this._items._length,c=b;;){var d=a,e=a<<1;if(e<b){var g=this._items.Get(a),f=this._items.Get(e);0<this._compare(g,f)&&(a=e,g=f);e+1<b&&(f=this._items.Get(e+1),0<this._compare(g,f)&&(a=e+1))}if(a!=d)g=this._items.Get(a),e=this._items.Get(d),this._items.Set(a,e),this._items.Set(d,g);else break;if(0>c--)break}},__class__:$e};var nb=function(a){null==a&&(a=0);this.value=0;this.value=a};f["lovedna.ds.Bit32"]=nb;nb.__name__=["lovedna","ds","Bit32"];nb.prototype={Open:function(a){this.value|=1<<a;return this},
Close:function(a){this.value&=~(1<<a);return this},IsOpen:function(a){a=1<<a;return(this.value&a)==a},Clear:function(){this.value=0;return this},__class__:nb};var ua={};f["lovedna.ds._ByteArray.ByteArray_Impl_"]=ua;ua.__name__=["lovedna","ds","_ByteArray","ByteArray_Impl_"];ua.__properties__={get_length:"get_length"};ua.fromBytes=function(a){return null==a?null:B.__instanceof(a,Va)?a:Va.fromBytes(a)};ua.toBytes=function(a){return a};ua.get_length=function(a){return a.length};var af=function(){};f["lovedna.ds.IDataOutput"]=
af;af.__name__=["lovedna","ds","IDataOutput"];af.prototype={__class__:af};var bf=function(){};f["lovedna.ds.IDataInput"]=bf;bf.__name__=["lovedna","ds","IDataInput"];bf.prototype={__class__:bf};var Va=function(a){null==a&&(a=0);var b=new X(new gb(a));X.call(this,b.b.buffer);this.__length=a;null==Va.__defaultEndian&&(ma.get_endianness()==Jb.LITTLE_ENDIAN?Va.__defaultEndian=1:Va.__defaultEndian=0);this.__endian=Va.__defaultEndian;this.position=0};f["lovedna.ds.ByteArrayData"]=Va;Va.__name__=["lovedna",
"ds","ByteArrayData"];Va.__interfaces__=[af,bf];Va.fromBytes=function(a){var b=new Va;b.__fromBytes(a);return b};Va.__super__=X;Va.prototype=n(X.prototype,{readBoolean:function(){if(this.position<this.length)return 0!=this.b[this.position++];throw new q(new Zb);},readBytes:function(a,b,c){null==c&&(c=0);null==b&&(b=0);0==c&&(c=this.length-this.position);if(this.position+c>this.length)throw new q(new Zb);a.length<b+c&&a.__resize(b+c);a.blit(b,this,this.position,c);this.position+=c},readFloat:function(){return hb.i32ToFloat(this.readInt())},
readInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readShort:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte();a=1==this.__endian?b<<8|a:a<<8|b;return 0!=(a&32768)?a-65536:a},readUnsignedByte:function(){if(this.position<this.length)return this.b[this.position++];throw new q(new Zb);},readUnsignedInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),
c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readUnsignedShort:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte();return 1==this.__endian?(b<<8)+a:a<<8|b},readUTF:function(){var a=this.readUnsignedShort();return this.readUTFBytes(a)},readUTFBytes:function(a){if(this.position+a>this.length)throw new q(new Zb);this.position+=a;return this.getString(this.position-a,a)},uncompress:function(a){null==a&&(a=2);if(this.__length>
this.length){var b=this.length;this.length=this.__length;var c=new X(new gb(b));c.blit(0,this,0,b);this.b=c.b;this.__length=c.length;this.data=c.data;this.length=b}switch(a){case 0:a=Qf.decompress(this);break;case 1:a=Rf.decompress(this);break;default:a=Sf.decompress(this)}null!=a&&(this.b=a.b,this.__length=a.length,this.data=a.data,this.length=this.__length);this.position=0},writeBytes:function(a,b,c){null==c&&(c=0);null==b&&(b=0);0!=ua.get_length(a)&&(0==c&&(c=ua.get_length(a)-b),this.__resize(this.position+
c),this.blit(this.position,a,b,c),this.position+=c)},writeShort:function(a){this.__resize(this.position+2);1==this.__endian?(this.b[this.position++]=a&255,this.b[this.position++]=a>>8&255):(this.b[this.position++]=a>>8&255,this.b[this.position++]=a&255)},writeUTF:function(a){a=X.ofString(a);this.writeShort(a.length);this.writeBytes(ua.fromBytes(a))},__fromBytes:function(a){this.b=a.b;this.__length=a.length;this.data=a.data;this.length=a.length},__resize:function(a){if(a>this.__length){var b=new X(new gb(3*
(a+1)>>1)),c=this.length;this.length=this.__length;b.blit(0,this,0,this.__length);this.length=c;this.b=b.b;this.__length=b.length;this.data=b.data}this.length<a&&(this.length=a)},__class__:Va});var Fd=function(){this._lasttype=0;this.Reset()};f["lovedna.ds.HashFNV"]=Fd;Fd.__name__=["lovedna","ds","HashFNV"];Fd.prototype={Reset:function(){this._lasttype=this._index=this._value=0},GetCode:function(){return this._value},GetString:function(){return W.hex(this._value)},PushInt:function(a){2!=this._lasttype&&
(this._lasttype=2,this._addInt(this._lasttype));this._addInt(a)},PushString:function(a){4!=this._lasttype&&(this._lasttype=4,this._addInt(this._lasttype));var b=a.length;for(this._addInt(b);0<b--;)this._addInt(w.cca(a,b))},_addInt:function(a){this._value*=16777619;this._value^=a},__class__:Fd};var Fc=function(a,b){null==b&&(b=!1);null==a&&(a="");this._list=[];this._keep=b;this.Decode(a)};f["lovedna.ds.StringLine"]=Fc;Fc.__name__=["lovedna","ds","StringLine"];Fc.prototype={ReadLine:function(){return this._position<
this._length?this._list[this._position++]:null},Decode:function(a){0<this._length&&this._list.splice(0,this._length);this._position=this._length=0;if(null!=a){a=W.replace(a,"\r","\n");a=a.split("\n");for(var b=0,c=a.length;b<c;){var d=b++;d=a[d];(""!=d||this._keep)&&this._list.push(d)}this._length=this._list.length;this._position=0}},get_position:function(){return this._position},set_position:function(a){0<=a&&a<this._length&&(this._position=a);return this._position},__class__:Fc,__properties__:{set_position:"set_position",
get_position:"get_position"}};var Gc=function(a,b){null==b&&(b=0);null==a&&(a="");this.message=a;this.errorID=b;this.name="Error"};f["lovedna.errors.Error"]=Gc;Gc.__name__=["lovedna","errors","Error"];Gc.prototype={toString:function(){return null!=this.message?this.message:"Error"},__class__:Gc};var nc=function(a){null==a&&(a="");Gc.call(this,a);this.name="IOError"};f["lovedna.errors.IOError"]=nc;nc.__name__=["lovedna","errors","IOError"];nc.__super__=Gc;nc.prototype=n(Gc.prototype,{__class__:nc});
var Zb=function(){nc.call(this,"End of file was encountered");this.name="EOFError";this.errorID=2030};f["lovedna.errors.EOFError"]=Zb;Zb.__name__=["lovedna","errors","EOFError"];Zb.__super__=nc;Zb.prototype=n(nc.prototype,{__class__:Zb});var Aa=function(a){ra.call(this);this.name=a;this._type=rb.GetClassName(this)+"."+this.name+"."+(new Date(2018,2,12,20,47,1)).getTime()};f["lovedna.event.Event"]=Aa;Aa.__name__=["lovedna","event","Event"];Aa.__super__=ra;Aa.prototype=n(ra.prototype,{SetCurrentTarget:function(a){return this.currentTarget=
a},SetCustomData:function(a){return this.customData=a},setTarget:function(a){this._target=a},__class__:Aa});var rb=function(){};f["lovedna.util.TypeUtil"]=rb;rb.__name__=["lovedna","util","TypeUtil"];rb.GetName=function(a){if(null!=rb._typeMap.h.__keys__[a.__id__])return rb._typeMap.h[a.__id__];var b=aa.getClassName(a);rb._typeMap.set(a,b);return b};rb.CreateInstance=function(a,b){a=null==b?aa.createEmptyInstance(a):aa.createInstance(a,b);B.__instanceof(a,ra)&&a.Construct();return a};rb.GetClassName=
function(a){return null==a?"null":aa.getClassName(null==a?null:B.getClass(a))};var Gd=function(a){Aa.call(this,a)};f["lovedna.event.KeyEvent"]=Gd;Gd.__name__=["lovedna","event","KeyEvent"];Gd.__super__=Aa;Gd.prototype=n(Aa.prototype,{__class__:Gd});var Hd=function(a){Aa.call(this,a)};f["lovedna.event.ProgressEvent"]=Hd;Hd.__name__=["lovedna","event","ProgressEvent"];Hd.__super__=Aa;Hd.prototype=n(Aa.prototype,{SetProgress:function(a,b){this.loaded=a;this.total=b;return this},__class__:Hd});var Id=
function(a){Aa.call(this,a)};f["lovedna.event.TouchEvent"]=Id;Id.__name__=["lovedna","event","TouchEvent"];Id.__super__=Aa;Id.prototype=n(Aa.prototype,{__class__:Id});var J=function(){};f["lovedna.event.Events"]=J;J.__name__=["lovedna","event","Events"];var te=function(a,b,c,d,e){this.enabled=!0;0>e&&(e=0);this._dispatcher=a;this._callback=b;this.priority=c;this._once=d;this._delay=e;this._eventList=new E};f["lovedna.event.Listener"]=te;te.__name__=["lovedna","event","Listener"];te.prototype={Dispatch:function(a){var b=
this;this.enabled&&null!=this._callback&&(this._eventList.Add(a),0<this._delay?(null!=this._timer&&this._timer.stop(),this._timer=new Zc(this._delay|0),this._timer.run=function(){b._timer.stop();b._timer=null;b.execute()}):this.execute())},Destroy:function(){this._dispatcher=this._callback=null;this._delay=0;this._eventList.Dispose();this._eventList=null},Match:function(a){return D.compareMethods(this._callback,a)},execute:function(){if(null!=this._callback&&null!=this._eventList){var a=this._eventList._length;
if(0!=a){for(var b=0;b<a;){var c=b++;c=this._eventList.Get(c);c.setTarget(this._dispatcher);Aa.current=c;this._callback()}this._once&&null!=this._dispatcher&&this._dispatcher.RemoveEventListener(this._eventList.Get(0)._type,this._callback);null!=this._eventList&&this._eventList.Clear()}}},__class__:te};var Db=function(){this.id=Db._id++;Db._map.h[this.id]=this;this.usage=35044;this.length=0;this._time=.001*(new Date).getTime()+U._timeOffset;this.enabled=!1;this.type=5123};f["lovedna.gl.IndexBuffer"]=
Db;Db.__name__=["lovedna","gl","IndexBuffer"];Db.prototype={Upload:function(a,b){null==b&&(b=-1);this._time=.001*(new Date).getTime()+U._timeOffset;null!=a&&(this._data=a,this.length=0<b?b:this._data.length,this.enabled=1<this.length)},Bind:function(){this._time=.001*(new Date).getTime()+U._timeOffset;if(2>this.length)return this;if(null!=this._data){var a=this._data,b=null!=a?new Int16Array(a):null;this._data=null;null==this._buffer&&(this._buffer=m.context.__context.createBuffer());m.context.__context.bindBuffer(34963,
this._buffer);a=2*this.length;b=ea.fromArrayBufferView(b);var c=this.usage;m.context.__context.bufferData(34963,ea.toBufferView(b,a),c);128>this.length&&(this.type=5121)}else{if(Db.current==this)return this;null!=this._buffer&&m.context.__context.bindBuffer(34963,this._buffer)}Db.current=this;return this},__class__:Db};var Sb=function(a,b){this.id=Sb._id++;this.enabled=!1;var c=m.context.__context.createShader(35633);m.context.__context.shaderSource(c,a);m.context.__context.compileShader(c);if(0==
m.context.__context.getShaderParameter(c,35713))T.trace(this.addLineNumber(a),{fileName:"Program.hx",lineNumber:38,className:"lovedna.gl.Program",methodName:"new"}),T.trace("vertex compileShader "+m.context.__context.getShaderInfoLog(c),{fileName:"Program.hx",lineNumber:39,className:"lovedna.gl.Program",methodName:"new"});else if(a=m.context.__context.createShader(35632),m.context.__context.shaderSource(a,b),m.context.__context.compileShader(a),0==m.context.__context.getShaderParameter(a,35713))T.trace(this.addLineNumber(b),
{fileName:"Program.hx",lineNumber:46,className:"lovedna.gl.Program",methodName:"new"}),T.trace("fragment compileShader "+m.context.__context.getShaderInfoLog(a),{fileName:"Program.hx",lineNumber:47,className:"lovedna.gl.Program",methodName:"new"});else if(this._glprogram=m.context.__context.createProgram(),m.context.__context.attachShader(this._glprogram,c),m.context.__context.attachShader(this._glprogram,a),m.context.__context.linkProgram(this._glprogram),m.context.__context.deleteShader(c),m.context.__context.deleteShader(a),
0==m.context.__context.getProgramParameter(this._glprogram,35714))T.trace("linkProgram "+m.context.__context.getProgramInfoLog(this._glprogram),{fileName:"Program.hx",lineNumber:59,className:"lovedna.gl.Program",methodName:"new"});else{this.enabled=!0;this._bufferAttribs=new r;this._uniforms=new r;b=m.context.__context.getProgramParameter(this._glprogram,35721);a=0;for(var d=b;a<d;){var e=a++;c=m.context.__context.getActiveAttrib(this._glprogram,e);b=c.name;var g=this._bufferAttribs;c=new cf(e,m.context.__context.getAttribLocation(this._glprogram,
b),c);null!=k[b]?g.setReserved(b,c):g.h[b]=c}b=m.context.__context.getProgramParameter(this._glprogram,35718);d=a=0;for(g=b;d<g;)b=d++,c=m.context.__context.getActiveUniform(this._glprogram,b),b=c.name,e=c.type,35678==e||35680==e?(e=this._uniforms,c=new Jd(a,m.context.__context.getUniformLocation(this._glprogram,b),c),null!=k[b]?e.setReserved(b,c):e.h[b]=c,++a):(e=b.indexOf("["),0<e&&(b=w.substr(b,0,e)),e=this._uniforms,c=new Jd(-1,m.context.__context.getUniformLocation(this._glprogram,b),c),null!=
k[b]?e.setReserved(b,c):e.h[b]=c)}};f["lovedna.gl.Program"]=Sb;Sb.__name__=["lovedna","gl","Program"];Sb.prototype={Bind:function(){if(this.enabled&&Sb.current!=this){var a=this._glprogram;m.__currentProgram=a;m.context.__context.useProgram(a);Sb.current=this}},addLineNumber:function(a){var b="";a=new Fc(a,!0);a.set_position(0);for(var c=a._length,d=-(c+"").length,e=0;e<c;){var g=e++;b+=va.Fill(g+1+"",d)+":\t"+a.ReadLine()+"\n"}return b},__class__:Sb};var cf=function(a,b,c){this.id=a;this.location=
b;this._info=c};f["lovedna.gl.ProgramBufferInput"]=cf;cf.__name__=["lovedna","gl","ProgramBufferInput"];cf.prototype={__class__:cf};var Jd=function(a,b,c){this.id=a;this.location=b;this._info=c;this._name=c.name};f["lovedna.gl.ProgramUniformInput"]=Jd;Jd.__name__=["lovedna","gl","ProgramUniformInput"];Jd.prototype={__class__:Jd};var Kd=function(){this.depthWrite=this.depthTest=!0;this.cullMode=1029;this.depthMode=513;this.stencilTest=!1;this.stencilMode=519;this.stencilFail=this.stencilDepthFail=
this.stencilBothPass=7680;this.stencilReferenceValue=0;this.stencilWriteMask=this.stencilReadMask=255;this.blend=!0;this.blendAlphaOperation=this.blendColorOperation=32774;this.blendSrcColor=770;this.blendDstColor=771;this.blendDstAlpha=this.blendSrcAlpha=1;this.drawMode=4};f["lovedna.gl.State"]=Kd;Kd.__name__=["lovedna","gl","State"];Kd.prototype={__class__:Kd};var La=function(){this.id=La._id++;La._map.h[this.id]=this;this.enabled=!1;this._time=.001*(new Date).getTime()+U._timeOffset;this.setting=
new df;this.size=new ef};f["lovedna.gl.Texture"]=La;La.__name__=["lovedna","gl","Texture"];La.prototype={Bind:function(a){this._time=.001*(new Date).getTime()+U._timeOffset},UploadImage:function(a){},onUpload:function(){if(null!=La.onUploadCallback)La.onUploadCallback(this)},__class__:La};var oc=function(){La.call(this)};f["lovedna.gl.Texture2D"]=oc;oc.__name__=["lovedna","gl","Texture2D"];oc.__super__=La;oc.prototype=n(La.prototype,{UploadImage:function(a){La.prototype.UploadImage.call(this,a);this.UploadUint8Array(a.get_data());
this.size.Set(a.width,a.height)},UploadUint8Array:function(a){null!=a&&(this._data=a,this._time=.001*(new Date).getTime()+U._timeOffset,this.enabled=!0)},Bind:function(a){null==a&&(a=0);La.prototype.Bind.call(this,a);this.enabled&&(null!=this._data&&(this.upload(this._data),this._data=null),null!=this._texture&&(m.context.__context.activeTexture(33984+a),m.context.__context.bindTexture(3553,this._texture)))},upload:function(a){null==this._texture&&(this._texture=m.context.__context.createTexture());
m.context.__context.bindTexture(3553,this._texture);this.onUpload();var b=this.size.x,c=this.size.y;0<b&&0==(b&b-1)&&0<c&&0==(c&c-1)?(m.context.__context.texParameteri(3553,10242,this.setting.wrap_s),m.context.__context.texParameteri(3553,10243,this.setting.wrap_t)):(m.context.__context.texParameteri(3553,10242,33071),m.context.__context.texParameteri(3553,10243,33071));m.context.__context.texParameteri(3553,10240,this.setting.mag_filter);m.context.__context.texParameteri(3553,10241,this.setting.min_filter);
a=ea.fromArrayBufferView(a);m.context.__context.texImage2D(3553,0,6408,b,c,0,6408,5121,ea.toBufferView(a));m.context.__context.bindTexture(3553,null)},__class__:oc});var ff=function(){};f["lovedna.gl.TextureCube"]=ff;ff.__name__=["lovedna","gl","TextureCube"];ff.__super__=La;ff.prototype=n(La.prototype,{UploadBitmaps:function(a){if(null!=a){var b=a.length;this._data=[];if(6>b)this._data=null;else{for(b=6;0<b--;){var c=a[b];if(null==c){this._data=null;return}if(0<this.size.x&&c.width!=this.size.x){this._data=
null;return}if(0<this.size.y&&c.height!=this.size.y){this._data=null;return}this.size.Set(c.width,c.height);this._data[b]=c.get_data()}this.enabled=!0}}},UploadImage:function(a){La.prototype.UploadImage.call(this,a)},Bind:function(a){null==a&&(a=0);La.prototype.Bind.call(this,a);if(this.enabled)if(null==this._texture&&(this._texture=m.context.__context.createTexture()),null!=this._data){a=[34069,34070,34071,34072,34073,34074];m.context.__context.bindTexture(34067,this._texture);this.onUpload();m.context.__context.texParameteri(34067,
10242,10497);m.context.__context.texParameteri(34067,10243,10497);m.context.__context.texParameteri(34067,10240,9729);m.context.__context.texParameteri(34067,10241,9729);m.context.__context.generateMipmap(34067);for(var b=this._data.length;0<b--;){if(null==this._data[b])return;var c=this.size.x,d=this.size.y,e=ea.fromArrayBufferView(this._data[b]);m.context.__context.texImage2D(a[b],0,6408,c,d,0,6408,5121,ea.toBufferView(e))}this._data=null}else null!=this._texture&&(m.context.__context.activeTexture(33984+
a),m.context.__context.bindTexture(34067,this._texture))},__class__:ff});var Ld=function(a,b,c){null==c&&(c=16);null==b&&(b=256);null==a&&(a=256);this._depth=16;La.call(this);this.rect=new Yb;this.rect.set_width(a);this.rect.set_height(b);this.size.Set(a,b);this.enabled=!0;this._depth=c};f["lovedna.gl.TextureRender2D"]=Ld;Ld.__name__=["lovedna","gl","TextureRender2D"];Ld.__super__=oc;Ld.prototype=n(oc.prototype,{Release:function(){null!=this._frameBuffer&&(m.context.__context.deleteFramebuffer(this._frameBuffer),
this._frameBuffer=null);null!=this._renderBuffer&&(m.context.__context.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null)},BindFrameBuffer:function(){var a=this.rect.z,b=a|0;0>a&&b!=a&&--b;a=b;b=this.rect.w;var c=b|0;0>b&&c!=b&&--c;b=c;if(!(1>a||1>b)){if(a!=this.size.x||b!=this.size.y)this.Release(),this.size.Set(a,b);null==this._frameBuffer?(T.trace("--------------------------create frame "+a+" "+b,{fileName:"TextureRender2D.hx",lineNumber:64,className:"lovedna.gl.TextureRender2D",methodName:"BindFrameBuffer"}),
this._frameBuffer=m.context.__context.createFramebuffer(),m.context.__context.bindFramebuffer(36160,this._frameBuffer),this._renderBuffer=m.context.__context.createRenderbuffer(),m.context.__context.bindRenderbuffer(36161,this._renderBuffer),24==this._depth?(m.context.__context.renderbufferStorage(36161,34041,a,b),m.context.__context.framebufferRenderbuffer(36160,33306,36161,this._renderBuffer)):(m.context.__context.renderbufferStorage(36161,33189,a,b),m.context.__context.framebufferRenderbuffer(36160,
36096,36161,this._renderBuffer)),this.upload(null),m.context.__context.framebufferTexture2D(36160,36064,3553,this._texture,0),m.context.__context.bindRenderbuffer(36161,null)):m.context.__context.bindFramebuffer(36160,this._frameBuffer)}},__class__:Ld});var df=function(){this.min_filter=this.mag_filter=9729;this.wrap_t=this.wrap_s=10497};f["lovedna.gl.TextureSetting"]=df;df.__name__=["lovedna","gl","TextureSetting"];df.prototype={__class__:df};var Oa=function(a){this._type=-1;this.name=a;this.enabled=
!1};f["lovedna.gl.UniformData"]=Oa;Oa.__name__=["lovedna","gl","UniformData"];Oa.prototype={SetFloat3:function(a){if(null==a)throw new q(this.name+" value error ");if(this._float3Value==a)return this;this._float3Value=a;this._type=5;this._typeDirty=this.enabled=!0;return this},SetFloat4:function(a){if(null==a)throw new q(this.name+" value error ");if(this._float4Value==a)return this;this._float4Value=a;this._type=6;this._typeDirty=this.enabled=!0;return this},SetMatrix:function(a){if(null==a)throw new q(this.name+
" value error ");if(this._matrix4Value==a)return this;this._matrix4Value=a;this._type=7;this._typeDirty=this.enabled=!0;return this},SetMatrixHandler:function(a){if(null==a)throw new q(this.name+" value error ");this._matrix4HandlerValue=a;this._type=10;this._typeDirty=this.enabled=!0;return this},SetTexture:function(a){if(this._texture==a)return this;this._texture=a;if(null==this._texture)throw new q(this.name+" value error ");this._type=9;this._typeDirty=this.enabled=!0;return this},Bind:function(a){if(null==
a)return!0;if(0>this._type)return T.trace(this.name+" type is error",{fileName:"UniformData.hx",lineNumber:187,className:"lovedna.gl.UniformData",methodName:"Bind"}),!0;a!=this._input&&(this._input=a,null!=this._input?(this._size=this._input._info.size,this.enabled=!0):this._size=-1);if(0>this._size)return T.trace(this.name+" size is "+this._size,{fileName:"UniformData.hx",lineNumber:205,className:"lovedna.gl.UniformData",methodName:"Bind"}),!0;(null==this._handler||this._typeDirty)&&this.bindType();
if(null==this._handler)return this._type=-1,!0;a=this._handler();this._typeDirty=!1;return a},bindType:function(){switch(this._type){case 1:this._handler=h(this,this.bindInt);break;case 2:this._handler=h(this,this.bindFloat);break;case 3:this._handler=h(this,this.bindFloatArray);break;case 4:this._handler=h(this,this.bindFloat2);break;case 5:this._handler=h(this,this.bindFloat3);break;case 6:this._handler=h(this,this.bindFloat4);break;case 7:this._handler=h(this,this.bindMatrix4);break;case 8:this._handler=
h(this,this.bindMatrix4Array);break;case 9:this._handler=h(this,this.bindTexture);break;case 10:this._handler=h(this,this.bindMatrix4Handler);break;case 11:this._handler=h(this,this.bindFloat4Array)}},bindInt:function(){m.context.__context.uniform1i(this._input.location,this._intValue);return!0},bindFloat:function(){m.context.__context.uniform1f(this._input.location,this._floatValue);return!0},bindFloat2:function(){m.context.__context.uniform2f(this._input.location,this._float2Value.x,this._float2Value.y);
return!0},bindFloat3:function(){m.context.__context.uniform3f(this._input.location,this._float3Value.x,this._float3Value.y,this._float3Value.z);return!0},bindFloat4:function(){m.context.__context.uniform4f(this._input.location,this._float4Value.x,this._float4Value.y,this._float4Value.z,this._float4Value.w);return!0},bindFloatArray:function(){var a=this._floatArrayValue.length;if(null==this._float32Array||a>this._float32Array.length)this._float32Array=null!=a?new Kb(a):null;for(;0<a--;)this._float32Array[a]=
this._floatArrayValue[a];a=this._input.location;var b=this._size,c=ea.fromArrayBufferView(this._float32Array);m.context.__context.uniform1fv(a,ea.toFloat32Array(c,4*b));return!0},bindFloat4Array:function(){var a=this._float4ArrayValue.length;if(null==this._float32Array||4*a>this._float32Array.length){var b=4*a;this._float32Array=null!=b?new Kb(b):null}for(;0<a--;){b=4*a;var c=this._float4ArrayValue[a];if(null==c)return T.trace("warn",{fileName:"UniformData.hx",lineNumber:314,className:"lovedna.gl.UniformData",
methodName:"bindFloat4Array",customParams:["list "+a+" is null"]}),!1;this._float32Array[b]=c.x;this._float32Array[b+1]=c.y;this._float32Array[b+2]=c.z;this._float32Array[b+3]=c.w}a=this._input.location;b=this._size;c=ea.fromArrayBufferView(this._float32Array);m.context.__context.uniform4fv(a,ea.toFloat32Array(c,16*b));return!0},bindMatrix4:function(){var a=this._input.location,b=this._size,c=this._matrix4Value;if(c._dirty){if(null==c._data){var d=new Kb(16);c._data=d}c._data[0]=c.M00;c._data[1]=
c.M10;c._data[2]=c.M20;c._data[3]=c.M30;c._data[4]=c.M01;c._data[5]=c.M11;c._data[6]=c.M21;c._data[7]=c.M31;c._data[8]=c.M02;c._data[9]=c.M12;c._data[10]=c.M22;c._data[11]=c.M32;c._data[12]=c.M03;c._data[13]=c.M13;c._data[14]=c.M23;c._data[15]=c.M33;c._dirty=!1}c=ea.fromArrayBufferView(c._data);m.context.__context.uniformMatrix4fv(a,!1,ea.toFloat32Array(c,64*b));return!0},bindMatrix4Handler:function(){var a=this._input.location,b=this._size,c=this._matrix4HandlerValue();if(c._dirty){if(null==c._data){var d=
new Kb(16);c._data=d}c._data[0]=c.M00;c._data[1]=c.M10;c._data[2]=c.M20;c._data[3]=c.M30;c._data[4]=c.M01;c._data[5]=c.M11;c._data[6]=c.M21;c._data[7]=c.M31;c._data[8]=c.M02;c._data[9]=c.M12;c._data[10]=c.M22;c._data[11]=c.M32;c._data[12]=c.M03;c._data[13]=c.M13;c._data[14]=c.M23;c._data[15]=c.M33;c._dirty=!1}c=ea.fromArrayBufferView(c._data);m.context.__context.uniformMatrix4fv(a,!1,ea.toFloat32Array(c,64*b));return!0},bindMatrix4Array:function(){var a=this._matrix4ArrayValue.length;if(null==this._float32Array||
16*a>this._float32Array.length){var b=16*a;this._float32Array=null!=b?new Kb(b):null}for(;0<a--;)this._matrix4ArrayValue[a].ToFloat32Array(this._float32Array,16*a);a=this._input.location;b=this._matrix4ArrayValue.length;var c=ea.fromArrayBufferView(this._float32Array);m.context.__context.uniformMatrix4fv(a,!1,ea.toFloat32Array(c,64*b));return!0},bindTexture:function(){this._texture.Bind(this._input.id);return this._texture.enabled?(m.context.__context.uniform1i(this._input.location,this._input.id),
!0):!1},__class__:Oa};var pb=function(){this.usage=35044;this.length=0;this.id=pb._id++;pb._map.h[this.id]=this;this._time=.001*(new Date).getTime()+U._timeOffset;this.enabled=!1};f["lovedna.gl.VertexBuffer"]=pb;pb.__name__=["lovedna","gl","VertexBuffer"];pb.prototype={Upload:function(a,b){null==b&&(b=-1);this._time=.001*(new Date).getTime()+U._timeOffset;null!=a&&(this._data=a,this.length=0<b?b:this._data.length,this.enabled=2<this.length)},BindBuffer:function(){this._time=.001*(new Date).getTime()+
U._timeOffset;if(null!=this._data){var a=this._data,b=null!=a?new Kb(a):null;this._data=null;null==this._buffer&&(this._buffer=m.context.__context.createBuffer());m.context.__context.bindBuffer(34962,this._buffer);a=4*this.length;b=ea.fromArrayBufferView(b);var c=this.usage;m.context.__context.bufferData(34962,ea.toBufferView(b,a),c)}else{if(pb.current==this)return;null!=this._buffer&&m.context.__context.bindBuffer(34962,this._buffer)}pb.current=this},BindStruct:function(a){m.context.__context.enableVertexAttribArray(a.location);
var b=a.location,c=a.size,d=a._type,e=a.stride;a=ea.fromInt(a.offset);m.context.__context.vertexAttribPointer(b,c,d,!1,e,ea.toValue(a))},__class__:pb};var gf=function(a,b){this.size=a;this.offset=b;this._type=5126;this.stride=0};f["lovedna.gl.VertexBufferStruct"]=gf;gf.__name__=["lovedna","gl","VertexBufferStruct"];gf.prototype={set_type:function(a){return 5120<=a&&5126>=a?this._type=a:this._type},__class__:gf,__properties__:{set_type:"set_type"}};var Hc=function(){this.Clear()};f["lovedna.gl.VertexBufferStructs"]=
Hc;Hc.__name__=["lovedna","gl","VertexBufferStructs"];Hc.prototype={Clear:function(){this.count=this.stride=0;this._list=[];this._map=new r},Add:function(a,b,c){null==c&&(c=-1);var d=new gf(b,this.stride);this.stride+=4*b;d.name=a;-1!=c&&d.set_type(c);this._list.push(d);b=this._map;null!=k[a]?b.setReserved(a,d):b.h[a]=d;this.count=this._list.length},AddComplete:function(){for(var a=this._list.length;0<a--;)this._list[a].stride=this.stride},__class__:Hc};var Te=function(){this.index=new la(0,0,0,0);
this.weight=new la(0,0,0,0)};f["lovedna.math.BoneWeight"]=Te;Te.__name__=["lovedna","math","BoneWeight"];Te.prototype={__class__:Te};var Nd=function(){this._box=new Md};f["lovedna.math.Bounds"]=Nd;Nd.__name__=["lovedna","math","Bounds"];Nd.prototype={Reset:function(){this._box.Reset()},Copy:function(a){null!=a&&this._box.Copy(a._box);return this},Expand:function(a){this._box.ExpandByVertex(a)},Init:function(){},Apply:function(a){null==this.sphere&&(this.box=new Md,this.sphere=new hf);this.box.Copy(this._box);
this.box.ApplyMat4(a);a=this.sphere.center;var b=this.box.GetCenter();null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);a=this.box.GetSize();this.sphere.radius=.5*Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z)},__class__:Nd};var Md=function(){this._dirty=!1;this.Reset();this._center=new t};f["lovedna.math.Box3"]=Md;Md.__name__=["lovedna","math","Box3"];Md.prototype={Copy:function(a){if(a==this)return this;var b=this.min,c=a.min;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);b=this.max;c=a.max;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,
b.z=c.z);b=this._center;a=a._center;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);this._dirty=!0;return this},Reset:function(){var a=new t;a.x=1.79769313486231E308;a.y=1.79769313486231E308;a.z=1.79769313486231E308;this.min=a;a=new t;a.x=-1.79769313486231E308;a.y=-1.79769313486231E308;a.z=-1.79769313486231E308;this.max=a;return this},ExpandByVertex:function(a){var b=this.min;b.x>a.x&&(b.x=a.x);b.y>a.y&&(b.y=a.y);b.z>a.z&&(b.z=a.z);b=this.max;b.x<a.x&&(b.x=a.x);b.y<a.y&&(b.y=a.y);b.z<a.z&&(b.z=a.z);return this},
ApplyMat4:function(a){var b=t.get_temp(),c=t.get_temp(),d=this.min;null!=d&&d!=b&&(b.x=d.x,b.y=d.y,b.z=d.z);d=this.max;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);this.Reset();d=this._center;null!=b&&b!=d&&(d.x=b.x,d.y=b.y,d.z=b.z);this.ExpandByVertex(a.MultiplyPoint(d));d=this._center;d.x=b.x;d.y=b.y;d.z=c.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._center;d.x=b.x;d.y=c.y;d.z=b.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._center;d.x=b.x;d.y=c.y;d.z=c.z;this.ExpandByVertex(a.MultiplyPoint(d));
d=this._center;d.x=c.x;d.y=b.y;d.z=b.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._center;d.x=c.x;d.y=b.y;d.z=c.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._center;d.x=c.x;d.y=c.y;d.z=b.z;this.ExpandByVertex(a.MultiplyPoint(d));b=this._center;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);this.ExpandByVertex(a.MultiplyPoint(b));return this},GetCenter:function(){var a=this._center,b=this.min;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.max;a.x+=b.x;a.y+=b.y;a.z+=b.z;a.x*=.5;a.y*=.5;a.z*=.5;return this._center},
GetSize:function(){var a=t.get_temp(),b=this.max,c=this.min;null==c?(a.x-=b.x,a.y-=b.y,a.z-=b.z):(a.x=b.x-c.x,a.y=b.y-c.y,a.z=b.z-c.z);return a},__class__:Md};var la=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.x=a;this.y=b;this.z=c;this.w=d};f["lovedna.math.Float4"]=la;la.__name__=["lovedna","math","Float4"];la.__interfaces__=[Vb];la.prototype={FromArray:function(a,b){null==b&&(b=0);if(null==a)return this;var c=a.length;b<c&&(this.x=a[b]);b+1<c&&(this.y=a[b+
1]);b+2<c&&(this.z=a[b+2]);b+3<c&&(this.w=a[b+3]);return this},ToArray:function(a,b){null==b&&(b=0);null==a&&(a=[]);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},__class__:la};var Ka=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);la.call(this,a,b,c,d);this._dirty=!0};f["lovedna.math.Color"]=Ka;Ka.__name__=["lovedna","math","Color"];Ka.__super__=la;Ka.prototype=n(la.prototype,{set_rgba:function(a){this._dirty=!0;this.x=.00392156863*(a>>24&255);this._dirty=
!0;this.y=.00392156863*(a>>16&255);this._dirty=!0;this.z=.00392156863*(a>>8&255);this._dirty=!0;this.w=.00392156863*(a&255);return this._rgba=a},__class__:Ka,__properties__:{set_rgba:"set_rgba"}});var t=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c};f["lovedna.math.Float3"]=t;t.__name__=["lovedna","math","Float3"];t.__interfaces__=[Vb];t.__properties__={get_temp:"get_temp"};t.get_temp=function(){return t._pool.Get()};t.prototype={toFix:function(a){null==a&&
(a=4);return"Float3("+ca.FloatToFixed(this.x,a)+","+ca.FloatToFixed(this.y,a)+","+ca.FloatToFixed(this.z,a)+")"},Cross:function(a,b){if(null==b){var c=this.y*a.z-this.z*a.y;var d=this.z*a.x-this.x*a.z;a=this.x*a.y-this.y*a.x}else c=a.y*b.z-a.z*b.y,d=a.z*b.x-a.x*b.z,a=a.x*b.y-a.y*b.x;this.x=c;this.y=d;this.z=a;return this},Normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0!=a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},Distance:function(a,
b){var c=t.get_temp();null==b?(c.x=this.x-a.x,c.y=this.y-a.y,c.z=this.z-a.z):(c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z);return Math.sqrt(c.x*c.x+c.y*c.y+c.z*c.z)},DistanceToSquared:function(a,b){var c=t.get_temp();null==b?(c.x=this.x-a.x,c.y=this.y-a.y,c.z=this.z-a.z):(c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z);return c.x*c.x+c.y*c.y+c.z*c.z},FromArray:function(a,b){null==b&&(b=0);if(null==a)return this;var c=a.length;b<c&&(this.x=a[b]);b+1<c&&(this.y=a[b+1]);b+2<c&&(this.z=a[b+2]);return this},ToArray:function(a,
b){null==b&&(b=0);null==a&&(a=[]);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},LerpTo:function(a,b){if(0>=b)return this;if(1<=b)return null!=a&&a!=this&&(this.x=a.x,this.y=a.y,this.z=a.z),this;this.x+=b*(a.x-this.x);this.y+=b*(a.y-this.y);this.z+=b*(a.z-this.z);return this},__class__:t};var jf=function(){this.planes=[];this.near=new Tb;this.far=new Tb;this.left=new Tb;this.right=new Tb;this.top=new Tb;this.bottom=new Tb;this.planes.push(this.near);this.planes.push(this.far);this.planes.push(this.left);
this.planes.push(this.right);this.planes.push(this.top);this.planes.push(this.bottom)};f["lovedna.math.Frustum"]=jf;jf.__name__=["lovedna","math","Frustum"];jf.prototype={ContainsPoint:function(a,b){null==b&&(b=0);for(var c=6;0<c--;)if(this.planes[c].DistanceToPoint(a)<-b)return!1;return!0},IntersectsBox:function(a){if(null==a)return!1;for(var b=t.get_temp(),c=t.get_temp(),d=6;0<d--;){var e=this.planes[d],g=e.normal.x,f=e.normal.y,h=e.normal.z;b.x=0<g?a.min.x:a.max.x;b.y=0<f?a.min.y:a.max.y;b.z=0<
h?a.min.z:a.max.z;c.x=0<g?a.max.x:a.min.x;c.y=0<f?a.max.y:a.min.y;c.z=0<h?a.max.z:a.min.z;if(0>e.DistanceToPoint(b)&&0>e.DistanceToPoint(c))return!1}return!0},__class__:jf};var Od=function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=0);this.h=a;this.s=b;this.v=c};f["lovedna.math.HSV"]=Od;Od.__name__=["lovedna","math","HSV"];Od.prototype={ToColor:function(){var a=new Ka;if(0==this.s)return a.x=this.v,a.y=this.v,a.z=this.v,a.w=1,a;var b=this.h%360/60,c=b|0,d=b-c;b=this.v*(1-this.s);var e=this.v*
(1-this.s*d);d=this.v*(1-this.s*(1-d));switch(c){case 0:a.x=this.v;a.y=d;a.z=b;a.w=1;break;case 1:a.x=e;a.y=this.v;a.z=b;a.w=1;break;case 2:a.x=b;a.y=this.v;a.z=d;a.w=1;break;case 3:a.x=b;a.y=e;a.z=this.v;a.w=1;break;case 4:a.x=d;a.y=b;a.z=this.v;a.w=1;break;case 5:a.x=this.v,a.y=b,a.z=e,a.w=1}return a},__class__:Od};var ef=function(a,b){null==b&&(b=0);null==a&&(a=0);this.Set(a,b)};f["lovedna.math.Int2"]=ef;ef.__name__=["lovedna","math","Int2"];ef.prototype={Set:function(a,b){null==b&&(b=0);null==
a&&(a=0);this.x=a;this.y=b;return this},__class__:ef};var Tb=function(){var a=new t;a.x=0;a.y=0;a.z=1;this.normal=a;this.distance=0};f["lovedna.math.Plane"]=Tb;Tb.__name__=["lovedna","math","Plane"];Tb.prototype={DistanceToPoint:function(a){var b=this.normal;return b.x*a.x+b.y*a.y+b.z*a.z+this.distance},Set:function(a,b,c,d){var e=this.normal;e.x=a;e.y=b;e.z=c;this.distance=d;this.Normalize()},Normalize:function(){var a=this.normal;a=1/Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);var b=this.normal;b.x*=a;b.y*=
a;b.z*=a;this.distance*=a},__class__:Tb};var sa=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.Set(a,b,c,d);this._eulerAngles=new t;this._eulerDirty=!0};f["lovedna.math.Quaternion"]=sa;sa.__name__=["lovedna","math","Quaternion"];sa.__interfaces__=[Vb];sa.__properties__={get_temp:"get_temp"};sa.get_temp=function(){return sa._pool.Get()};sa.prototype={Set:function(a,b,c,d){this.x!=a&&(this.x=a,this._eulerDirty=!0);this.y!=b&&(this.y=b,this._eulerDirty=!0);this.z!=
c&&(this.z=c,this._eulerDirty=!0);this.w!=d&&(this.w=d,this._eulerDirty=!0);this._eulerDirty=!0;return this},Copy:function(a){return null==a?this:this.Set(a.x,a.y,a.z,a.w)},FromArray:function(a,b){null==b&&(b=0);if(b<a.length+4){var c=a[b];this.x!=c&&(this.x=c,this._eulerDirty=!0);c=a[b+1];this.y!=c&&(this.y=c,this._eulerDirty=!0);c=a[b+2];this.z!=c&&(this.z=c,this._eulerDirty=!0);a=a[b+3];this.w!=a&&(this.w=a,this._eulerDirty=!0)}return this},ToArray:function(a,b){null==b&&(b=0);null==a&&(a=[]);
a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},Dot:function(a,b){return null==b?this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w:b.x*a.x+b.y*a.y+b.z*a.z+b.w*a.w},MultiplyVector:function(a,b){null==b&&(b=!1);var c=a.x,d=a.y,e=a.z,g=this.w*c+this.y*e-this.z*d,f=this.w*d+this.z*c-this.x*e,h=this.w*e+this.x*d-this.y*c;e=-this.x*c-this.y*d-this.z*e;c=g*this.w+e*-this.x+f*-this.z-h*-this.y;d=f*this.w+e*-this.y+h*-this.x-g*-this.z;g=h*this.w+e*-this.z+g*-this.y-f*-this.x;if(b)return a.x=c,a.y=
d,a.z=g,a;a=t.get_temp();a.x=c;a.y=d;a.z=g;return a},ToMatrix44:function(){var a=this.x*this.x,b=this.x*this.y,c=this.x*this.z,d=this.x*this.w,e=this.y*this.y,g=this.y*this.z,f=this.y*this.w,h=this.z*this.z,k=this.z*this.w,l=na.get_temp();l.Set(1-2*(e+h),2*(b+k),2*(c-f),0,2*(b-k),1-2*(a+h),2*(g+d),0,2*(c+f),2*(g-d),1-2*(a+e),0,0,0,0,1);return l},SetFromMatrix44:function(a){return this.SetFromAxes(a.M00,a.M01,a.M02,a.M10,a.M11,a.M12,a.M20,a.M21,a.M22)},SetLookRotation:function(a,b){null==b&&(b=t.get_temp(),
b.x=0,b.y=1,b.z=0);var c=t.get_temp(),d=t.get_temp();null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);c.Cross(a).Normalize();null!=a&&a!=d&&(d.x=a.x,d.y=a.y,d.z=a.z);d.Cross(c).Normalize();this.SetFromAxes(c.x,d.x,a.x,c.y,d.y,a.y,c.z,d.z,a.z);return this},SetEulerAngles:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);var d=.008726646259971648*c;c=Math.sin(d);d=Math.cos(d);var e=.008726646259971648*a;a=Math.sin(e);var g=Math.cos(e);b*=.008726646259971648;var f=Math.sin(b),h=Math.cos(b);b=h*a;
e=f*g;g*=h;a*=f;f=b*d+e*c;this.x!=f&&(this.x=f,this._eulerDirty=!0);b=e*d-b*c;this.y!=b&&(this.y=b,this._eulerDirty=!0);b=g*c-a*d;this.z!=b&&(this.z=b,this._eulerDirty=!0);c=g*d+a*c;this.w!=c&&(this.w=c,this._eulerDirty=!0);this._eulerDirty=!0;return this},SlerpTo:function(a,b){if(0>=b)return this;if(1<=b)return this.Copy(a),this;var c=this.Dot(a),d=ca.FloatToAbs(c),e=1-b,g=b;if(.1<1-d){d=Math.acos(d);g=Math.sin;var f=1/g(d);e=g((1-b)*d)*f;g=g(b*d)*f}0>c&&(g=-g);return this.Set(e*this.x+g*a.x,e*this.y+
g*a.y,e*this.z+g*a.z,e*this.w+g*a.w)},LookAt:function(a,b,c){var d=t.get_temp();null==a?(d.x-=b.x,d.y-=b.y,d.z-=b.z):(d.x=b.x-a.x,d.y=b.y-a.y,d.z=b.z-a.z);return this.SetLookRotation(d.Normalize(),c)},SetFromAxes:function(a,b,c,d,e,g,f,h,k){var l=a+e+k;0<=l?(a=Math.sqrt(l+1),e=.5*a,this.w!=e&&(this.w=e,this._eulerDirty=!0),a=.5/a,g=(h-g)*a,this.x!=g&&(this.x=g,this._eulerDirty=!0),c=(c-f)*a,this.y!=c&&(this.y=c,this._eulerDirty=!0),b=(d-b)*a,this.z!=b&&(this.z=b,this._eulerDirty=!0)):(a>e&&a>k?(a=
Math.sqrt(1+a-e-k),e=.5*a,this.x!=e&&(this.x=e,this._eulerDirty=!0),a=.5/a,b=(d+b)*a,this.y!=b&&(this.y=b,this._eulerDirty=!0),b=(c+f)*a,this.z!=b&&(this.z=b,this._eulerDirty=!0),b=(h-g)*a):e>k?(a=Math.sqrt(1+e-a-k),e=.5*a,this.y!=e&&(this.y=e,this._eulerDirty=!0),a=.5/a,b=(d+b)*a,this.x!=b&&(this.x=b,this._eulerDirty=!0),b=(h+g)*a,this.z!=b&&(this.z=b,this._eulerDirty=!0),b=(c-f)*a):(a=Math.sqrt(1+k-a-e),e=.5*a,this.z!=e&&(this.z=e,this._eulerDirty=!0),a=.5/a,c=(c+f)*a,this.x!=c&&(this.x=c,this._eulerDirty=
!0),c=(h+g)*a,this.y!=c&&(this.y=c,this._eulerDirty=!0),b=(d-b)*a),this.w!=b&&(this.w=b,this._eulerDirty=!0));return this},getGimbalPole:function(){var a=this.y*this.x+this.z*this.w;return.499<a?1:-.499>a?-1:0},get_eulerAngles:function(){if(this._eulerDirty){var a=this.x*this.x,b=this.y*this.y,c=this.z*this.z,d=this.getGimbalPole();0==d?(d=2*(this.w*this.x-this.z*this.y),d=1>d?d:1,this._eulerAngles.x=Math.asin(-1>d?-1:d),this._eulerAngles.y=Math.atan2(2*(this.y*this.w+this.x*this.z),1-2*(b+a)),this._eulerAngles.z=
Math.atan2(2*(this.w*this.z+this.y*this.x),1-2*(a+c))):(this._eulerAngles.x=1.5707963267948966*d,this._eulerAngles.y=0,this._eulerAngles.z=2*d*Math.atan2(this.y,this.w));a=this._eulerAngles;a.x*=57.29577951308232;a.y*=57.29577951308232;a.z*=57.29577951308232;this._eulerDirty=!1}a=t.get_temp();b=this._eulerAngles;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);return a},set_eulerAngles:function(a){this.SetEulerAngles(a.x,a.y,a.z);return a},__class__:sa,__properties__:{set_eulerAngles:"set_eulerAngles",get_eulerAngles:"get_eulerAngles"}};
var wb=function(a){null==a&&(a=-1);0>a&&(a=2147483647*Math.random()|0);this._seed=a};f["lovedna.math.Random"]=wb;wb.__name__=["lovedna","math","Random"];wb.prototype={Get:function(){this._seed^=this._seed>>11;this._seed^=this._seed<<7&-1658038656;this._seed^=this._seed<<15&-272236544;return this._seed^=this._seed>>18},GetFloat:function(){var a=this.Get()/2147483646,b=L.Exp(10,9);return(a*b|0)/b},__class__:wb};var Yb=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this._vec2=
new M;la.call(this,a,b,c,d);this.x=a;this.y=b;this.set_width(c);this.set_height(d)};f["lovedna.math.Rect"]=Yb;Yb.__name__=["lovedna","math","Rect"];Yb.__super__=la;Yb.prototype=n(la.prototype,{set_width:function(a){return this.z=a},set_height:function(a){return this.w=a},__class__:Yb,__properties__:{set_height:"set_height",set_width:"set_width"}});var hf=function(){this.center=new t;this.radius=0};f["lovedna.math.Sphere"]=hf;hf.__name__=["lovedna","math","Sphere"];hf.prototype={__class__:hf};var Pd=
function(){ra.call(this)};f["lovedna.net.AssetsProgress"]=Pd;Pd.__name__=["lovedna","net","AssetsProgress"];Pd.__super__=S;Pd.prototype=n(S.prototype,{__class__:Pd});var Qd=function(){ra.call(this);this._request=new Xb};f["lovedna.net.BytesLoader"]=Qd;Qd.__name__=["lovedna","net","BytesLoader"];Qd.__super__=S;Qd.prototype=n(S.prototype,{Load:function(a){this.setRequest(a);this._request.load(a.url).onProgress(h(this,this.onProgress)).onError(h(this,this.onError)).onComplete(h(this,this.onComplete))},
onProgress:function(a,b){this.DispatchEvent(J.PROGRESS.SetProgress(a,b))},onError:function(a){this._request=new Xb;this.data=null;this.DispatchEvent(J.COMPLETE)},onComplete:function(a){this.data=a;this.DispatchEvent(J.COMPLETE)},setRequest:function(a){this._request.contentType=a.contentType;this._request.followRedirects=a.followRedirects;this._request.method=a.method;this._request.timeout=a.timeout;this._request.withCredentials=a.withCredentials;for(var b=a.formData.keys();b.hasNext();){var c=b.next(),
d=a.formData,e=this._request.formData;d=null!=k[c]?d.getReserved(c):d.h[c];null!=k[c]?e.setReserved(c,d):e.h[c]=d}b=0;for(a=a.headers;b<a.length;)c=a[b],++b,this._request.headers.push(new cd(c.name,c.value))},__class__:Qd});var Wa=function(a,b,c){ra.call(this);this.id=Wa._id++;this.url=a;this.root=c;if(null==b)switch(K.Extension(a).toLowerCase()){case "gif":case "jpeg":case "jpg":case "png":b=Y.IMAGE;break;case "mp2":case "mp3":b=Y.SOUND;break;case "m4a":case "ogg":case "wav":b=Y.SOUND;break;case "otf":case "ttf":b=
Y.FONT;break;case "css":case "json":case "plist":case "svg":case "text":case "txt":case "xml":b=Y.TEXT;break;default:b=Y.BINARY}this.type=b;this.fullUrl=a;K.IsHttp(a)||null==c||(this.fullUrl=K.Combine(c,a));this.reloadCount=0;this.reloadTime=.5;this.fromLocal=!1;this.requireBytes=!0;this.bytesTotal=this.bytesLoaded=0;this.type==Y.SOUND&&(this.requireBytes=!1);Wa._fnv.Reset();Wa._fnv.PushString(this.fullUrl);this.hashKey=Wa._fnv.GetString()};f["lovedna.net.FileData"]=Wa;Wa.__name__=["lovedna","net",
"FileData"];Wa.GetHashKey=function(a,b){var c=b;K.IsHttp(b)||null!=a&&(c=K.Combine(a,b));Wa._fnv.Reset();Wa._fnv.PushString(c);return Wa._fnv.GetString()};Wa.__super__=S;Wa.prototype=n(S.prototype,{Clone:function(){var a=new Wa(this.url,this.type,this.root);a.bytes=this.bytes;a.text=this.text;a.image=this.image;a.audio=this.audio;a.font=this.font;a.userData=this.userData;return a},toString:function(){return this.id+" "+this.fullUrl+":"+this.hashKey},get_file:function(){return null!=this.root?W.replace(this.fullUrl,
this.root,""):this.fullUrl},__class__:Wa,__properties__:{get_file:"get_file"}});var K=function(a){this.Set(a)};f["lovedna.net.URL"]=K;K.__name__=["lovedna","net","URL"];K.Extension=function(a){K.instance.Set(a);return null==K.instance.ext?"":K.instance.ext};K.WithoutExtension=function(a){K.instance.Set(a);K.instance.ext=null;return K.instance.toString()};K.WithoutDirectory=function(a){K.instance.Set(a);K.instance.dir=null;return K.instance.toString()};K.Combine=function(a,b){return""==a?b:K.AddSlash(a)+
K.RemoveSlashes(b)};K.AddSlash=function(a){if(0==a.length)return"/";var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");return b<c?c!=a.length-1?a+"\\":a:b!=a.length-1?a+"/":a};K.RemoveSlashes=function(a){try{for(;;){var b=w.cca(a,a.length-1);if(null==b)throw"__break__";switch(b){case 47:case 92:a=w.substr(a,0,-1);break;default:throw"__break__";}}}catch(d){if("__break__"!=d)throw d;}try{for(;;){var c=w.cca(a,0);if(null==c)throw"__break__";switch(c){case 47:case 92:a=w.substr(a,1,null);break;default:throw"__break__";
}}}catch(d){if("__break__"!=d)throw d;}return a};K.IsHttp=function(a){a=w.substr(a,0,7);return"http://"!=a?"https:/"==a:!0};K.HasParam=function(a){K.instance.Set(a);return null!=K.instance.param};K.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+(null==this.file?"":this.file)+(null==this.ext?"":"."+this.ext)},Set:function(a){this.clear();if(""==a||null==a)return this;switch(a){case ".":case "..":return this.dir=a,this.file="",this}var b=a.lastIndexOf("/"),
c=a.lastIndexOf("\\");b<c?(this.dir=w.substr(a,0,c),a=w.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=w.substr(a,0,b),a=w.substr(a,b+1,null)):this.dir=null;-1!=a.indexOf("?")&&(b=a.split("?"),a=b.shift(),this.param=b.join("?"));b=a.lastIndexOf(".");-1!=b?(this.ext=w.substr(a,b+1,null),this.file=w.substr(a,0,b)):(this.ext=null,this.file=a);return this},clear:function(){this.param=this.ext=this.file=this.dir=null;this.backslash=!1},__class__:K};var pa=function(){ra.call(this);this._local=Ub.GetInstance();
this.root=pa._defaultRoot;this._fileMap=new r;this._fileList=[];null==this.root&&(this.root="");this._active=!0;this._loadDelayCall=new Fa(h(this,this.load));this._completeDelayCall=new Fa(h(this,this.completeDelayCall));this._bytesLoader=new Qd;this._bytesLoader.AddEventListener(J.COMPLETE._type,h(this,this.bytesComplete));this._bytesLoader.AddEventListener(J.PROGRESS._type,h(this,this.bytesProgress))};f["lovedna.net.FileLoader"]=pa;pa.__name__=["lovedna","net","FileLoader"];pa.SetDefaultRoot=function(a){if(null==
pa._defaultRoot||""==pa._defaultRoot){var b=new K(a);a=b.toString();0<K.WithoutDirectory(a).length?(pa._defaultRoot=null==b.param?a:b.dir,pa._defaultRoot+=b.backslash?"\\":"/"):pa._defaultRoot=a}};pa.__super__=S;pa.prototype=n(S.prototype,{Load:function(a,b){var c=this.GetKey(a),d=this._fileMap;if(null!=k[c]?d.existsReserved(c):d.h.hasOwnProperty(c))return a=this._fileMap,null!=k[c]?a.getReserved(c):a.h[c];a=new Wa(a,b,this.root);this._fileList.push(a);b=this._fileMap;null!=k[c]?b.setReserved(c,a):
b.h[c]=a;this.updateTotal();null==this.current&&Fa.Add(this._loadDelayCall,.1);return a},getVersion:function(a){var b=pa._version;return(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(b=pa._version,null!=k[a]?b.getReserved(a):b.h[a]):pa._defaultVersion},GetKey:function(a){return Wa.GetHashKey(this.root,a)},load:function(){!this._active||this._loading||1>this._fileList.length||(null==this.current&&(this.current=this._fileList.shift()),this._loading=!0,this.reload())},reload:function(){if(this._active&&
null!=this.current){this._loading=!0;var a=this.getVersion(this.current.url);T.trace("load "+this.current.url+" FV="+a,{fileName:"FileLoader.hx",lineNumber:163,className:"lovedna.net.FileLoader",methodName:"reload"});if(this.current.fromLocal){var b=this._local.GetSavePath(this.current.hashKey);if(this._local.Exists(b)&&(T.trace("from local "+this.current.url,{fileName:"FileLoader.hx",lineNumber:169,className:"lovedna.net.FileLoader",methodName:"reload"}),b=this.GetSaveFile(b),null!=b&&a==b.version)){this._bytesLoader.data=
ua.toBytes(b.bytes);this.bytesComplete();return}}if(""==a){if(this.current.requireBytes&&v.exists(this.current.url,"BINARY")){T.trace("binary from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:188,className:"lovedna.net.FileLoader",methodName:"reload"});this._bytesLoader.data=v.getBytes(this.current.url);this.bytesComplete();return}b=this.current.type;if(b==Y.IMAGE&&v.exists(this.current.url,"IMAGE")){T.trace("image from streaming "+this.current.toString(),{fileName:"FileLoader.hx",
lineNumber:197,className:"lovedna.net.FileLoader",methodName:"reload"});this.current.image=v.getImage(this.current.url);this.assetComplete();return}if(b==Y.TEXT&&v.exists(this.current.url,"TEXT")){T.trace("text from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:204,className:"lovedna.net.FileLoader",methodName:"reload"});this.current.text=v.getText(this.current.url);this.assetComplete();return}if(b==Y.SOUND){if(v.exists(this.current.url,"SOUND")){T.trace("sound from streaming "+
this.current.toString(),{fileName:"FileLoader.hx",lineNumber:213,className:"lovedna.net.FileLoader",methodName:"reload"});var c=v.getAudioBuffer(this.current.url);this.current.audio=new Bc(c);this.assetComplete()}v.exists(this.current.url,"MUSIC")&&(T.trace("music from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:219,className:"lovedna.net.FileLoader",methodName:"reload"}),c=v.getAudioBuffer(this.current.url),this.current.audio=new Bc(c),this.assetComplete())}if(b==Y.BINARY&&
v.exists(this.current.url,"BINARY")){T.trace("binary from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:226,className:"lovedna.net.FileLoader",methodName:"reload"});a=v.getBytes(this.current.url);this.current.bytes=ua.fromBytes(a);this.assetComplete();return}if(b==Y.FONT&&v.exists(this.current.url,"FONT")){T.trace("font from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:233,className:"lovedna.net.FileLoader",methodName:"reload"});this.current.font=
v.getFont(this.current.url);this.assetComplete();return}if(v.exists(this.current.url,"BINARY")){T.trace("binary from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:240,className:"lovedna.net.FileLoader",methodName:"reload"});a=v.getBytes(this.current.url);this.current.bytes=ua.fromBytes(a);this.bytesComplete();return}}K.IsHttp(this.current.fullUrl);b=this.current.fullUrl;""!=a&&(b=K.HasParam(b)?b+("&FV="+a):b+("?FV="+a));this._bytesLoader.Load(new kf(b))}},bytesComplete:function(){var a=
this;T.trace(this.current.toString()+" bytes complete ",{fileName:"FileLoader.hx",lineNumber:270,className:"lovedna.net.FileLoader",methodName:"bytesComplete"});if(null==this._bytesLoader.data)0<this.current.reloadCount?(T.trace("warn",{fileName:"FileLoader.hx",lineNumber:275,className:"lovedna.net.FileLoader",methodName:"bytesComplete",customParams:[this.current.toString()+" reload "+this.current.reloadCount]}),this.current.reloadCount--,this.reload()):(T.trace("warn",{fileName:"FileLoader.hx",lineNumber:280,
className:"lovedna.net.FileLoader",methodName:"bytesComplete",customParams:[this.current.toString()+" load error"]}),this._loading=!1,this.current=null,this.load());else{var b=null;if(null!=this._bytesLoader.data){b=ua.fromBytes(this._bytesLoader.data);this.current.bytes=b;var c=new Va(0);c.writeUTF(this.getVersion(this.current.url));c.writeBytes(b);c.position=0;this._local.SetBytes(this.current.hashKey,c)}else b=this.current.bytes;var d=this.current.type;T.trace(this.current.url+" loaded "+V.string(d),
{fileName:"FileLoader.hx",lineNumber:302,className:"lovedna.net.FileLoader",methodName:"bytesComplete"});c=!0;d!=Y.BINARY&&(d==Y.IMAGE?(T.trace("image size:"+ua.get_length(b),{fileName:"FileLoader.hx",lineNumber:309,className:"lovedna.net.FileLoader",methodName:"bytesComplete"}),c=!1,R.loadFromBytes(ua.toBytes(b)).onComplete(function(b){a.current.image=b;a.assetComplete()})):d==Y.SOUND?(b=ta.fromBytes(ua.toBytes(b)),this.current.audio=new Bc(b)):d!=Y.FONT&&d==Y.TEXT&&(d=ua.get_length(b),this.current.text=
b.readUTFBytes(d)));c&&this.assetComplete()}},bytesProgress:function(){this.current.bytesLoaded=J.PROGRESS.loaded;this.current.bytesTotal=J.PROGRESS.total;this.DispatchEvent(J.PROGRESS);pa.progress.bytesLoaded=this.current.bytesLoaded;pa.progress.bytesTotal=this.current.bytesTotal;pa.progress.DispatchEvent(J.PROGRESS)},assetComplete:function(){T.trace("complete "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:345,className:"lovedna.net.FileLoader",methodName:"assetComplete"});Fa.Add(this._completeDelayCall,
.1)},completeDelayCall:function(){this.DispatchEvent(J.COMPLETE);this._loading=!1;this.current=null;this.updateTotal();Fa.Add(this._loadDelayCall,.1)},updateTotal:function(){pa.progress.total=this._fileList.length;pa.progress.DispatchEvent(J.CHANGE)},GetSaveFile:function(a){a=this._local.GetBytes(a);if(null==a)return null;var b=a.readUTF(),c=new Va(0);a.readBytes(c);return new lf(c,b)},__class__:pa});var lf=function(a,b){this.bytes=a;this.version=b};f["lovedna.net._FileLoader.SaveFile"]=lf;lf.__name__=
["lovedna","net","_FileLoader","SaveFile"];lf.prototype={__class__:lf};var Y=f["lovedna.net.FileType"]={__ename__:!0,__constructs__:["BINARY","TEXT","IMAGE","SOUND","FONT"]};Y.BINARY=["BINARY",0];Y.BINARY.toString=z;Y.BINARY.__enum__=Y;Y.TEXT=["TEXT",1];Y.TEXT.toString=z;Y.TEXT.__enum__=Y;Y.IMAGE=["IMAGE",2];Y.IMAGE.toString=z;Y.IMAGE.__enum__=Y;Y.SOUND=["SOUND",3];Y.SOUND.toString=z;Y.SOUND.__enum__=Y;Y.FONT=["FONT",4];Y.FONT.toString=z;Y.FONT.__enum__=Y;var Ub=function(){this.SetPath(K.Combine("",
"assets"))};f["lovedna.net.LocalStore"]=Ub;Ub.__name__=["lovedna","net","LocalStore"];Ub.GetInstance=function(){null==Ub._instance&&(Ub._instance=new Ub);return Ub._instance};Ub.prototype={SetPath:function(a){var b=new K(a);a=b.toString();0<K.WithoutDirectory(a).length?(this._path=null==b.param?a:b.dir,this._path+=b.backslash?"\\":"/"):this._path=a},GetSavePath:function(a){return W.replace(W.replace(va.Trim(a),"\\","/"),"/","_")},GetBytes:function(a){return null},SetBytes:function(a,b){},Exists:function(a){return!1},
__class__:Ub};var kf=function(a){null!=a&&(this.url=a);this.contentType="application/x-www-form-urlencoded";this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new r;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1};f["lovedna.net.URLRequest"]=kf;kf.__name__=["lovedna","net","URLRequest"];kf.prototype={__class__:kf};var Uf=function(){};f["lovedna.net.URLRequestHeader"]=Uf;Uf.__name__=["lovedna","net","URLRequestHeader"];Uf.prototype={__class__:Uf};var l=function(a,
b,c){null==c&&(c=0);null==b&&(b=0);this.name=a;this.size=b;this.index=c};f["lovedna.play.DefineName"]=l;l.__name__=["lovedna","play","DefineName"];l.prototype={__class__:l};var Ic=function(){this._uniforms=new r;var a=this._buffer=new cb,b=this._uniforms;b=(new $b).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;this._worldList=[];this._width=480;this._height=800;this._active=this._focus=this._resize=!0;this._lost=!1;this.color=new Ka;this.color.set_rgba(-1412567041);this._backBufferCommand=
new cb;this._material=new Nb;this._material.SetMatrix(l.M.name,new na);this._material.SetMatrix(l.P.name,new na);this._material.SetMatrix(l.V.name,new na);this._material.SetMatrix(l.VP.name,new na);this._defaultBackBuffer=new Ld(768,768);p.Init()};f["lovedna.play.Driver"]=Ic;Ic.__name__=["lovedna","play","Driver"];Ic.prototype={AddWorld:function(a){null!=a&&(w.remove(this._worldList,a),this._worldList.push(a),a.data.resize(this._width,this._height))},onActivate:function(){this._active=!0},onDeactivate:function(){this._active=
!1},onResize:function(a,b){this._width=a;this._height=b;p.screenWidth=this._width;p.screenHeight=this._height;this._currentBackBuffer==this._defaultBackBuffer&&(a=this._defaultBackBuffer.rect,a.x=0,a.y=0,a.z=this._width,a.w=this._height);this._resize=!0},onFocusIn:function(){this._focus=!0},onFocusOut:function(){this._focus=!1},onWorldUpdate:function(){if(this._focus&&this._active&&!this._lost){x.enterFrame();for(var a=0,b=this._worldList;a<b.length;){var c=b[a];++a;this._resize&&c.data.resize(this._width,
this._height);c.enterFrame()}this._resize=!1;x.exitFrame();eb.Reset()}},onWorldRender:function(){if(this._focus&&this._active&&!this._lost){p.EnterFrame();p.PushRenderTarget(this._currentBackBuffer);p.Clear(!0,this.color,!0,1,!0,0);null!=this._currentBackBuffer&&this._buffer.Execute();for(var a=0,b=this._worldList;a<b.length;){var c=b[a];++a;c.render()}p.ExitFrame();null!=this._currentBackBuffer&&this._backBufferCommand.Execute();eb.Reset()}},__class__:Ic};var Pa=function(a){if(null==a)this.data=
new nb(-1);else{this.data=new nb(0);for(var b=a.length;0<b--;){var c=Pa.NameToLayer(a[b]);this.data.Open(c)}0==this.data.value&&(this.data.value=-1)}};f["lovedna.play.LayerMask"]=Pa;Pa.__name__=["lovedna","play","LayerMask"];Pa.SetLayerName=function(a,b){if(null==Pa._names[a]){Pa._names[a]=b;var c=Pa._layers;null!=k[b]?c.setReserved(b,a):c.h[b]=a}};Pa.NameToLayer=function(a){var b=Pa._layers;return null!=k[a]?b.getReserved(a):b.h[a]};Pa.prototype={Exist:function(a){return this.data.IsOpen(a)},__class__:Pa};
var Nb=function(){this.uniforms=new r;this.state=new Kd;this.subMesh=-1;this.enabled=!0;this.shader=new Qa;this.renderQueue=2E4;this._buffer=new cb;this.GetUniform(l.UV_SET.name).SetFloat4(new la(0,0,1,1))};f["lovedna.play.Material"]=Nb;Nb.__name__=["lovedna","play","Material"];Nb.prototype={GetUniform:function(a){var b=this.uniforms;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.uniforms,null!=k[a]?b.getReserved(a):b.h[a];b=new Oa(a);var c=this.uniforms;null!=k[a]?c.setReserved(a,
b):c.h[a]=b;return b},SetMatrix:function(a,b){return this.GetUniform(a).SetMatrix(b)},SetMatrixHandler:function(a,b){return this.GetUniform(a).SetMatrixHandler(b)},SetTexture:function(a,b){null==b&&(b=l.TEX.name);if(null==a)return this.shader.Define(b,null),this.shader.Define(l.UV_SET.name,null),this.uniforms.remove(b),null;this.shader.Define(b);this.shader.Define(l.UV_SET.name);return this.GetUniform(b).SetTexture(a)},__class__:Nb};var u=function(a){Aa.call(this,a)};f["lovedna.play.PlayEvent"]=u;
u.__name__=["lovedna","play","PlayEvent"];u.__super__=Aa;u.prototype=n(Aa.prototype,{__class__:u});var x=function(){};f["lovedna.play.PlayInput"]=x;x.__name__=["lovedna","play","PlayInput"];x.TouchDown=function(a){null==a&&(a=0);return 1==x._touchDown.h[a]};x.KeyDown=function(a){return 1==x._keyDown.h[a]};x.enterFrame=function(){if(!x._init){x._init=!0;x._touchDown=new ba;x._touchUp=new ba;x._touchIdList=new E;x._keying=new ba;x._keyDown=new ba;x._keyUp=new ba;for(var a=10;0<a--;)x._touchDown.h[a]=
!1,x._touchUp.h[a]=!1;Eb.driver.AddEventListener(J.TOUCH_CHANGE._type,x.onTouchChange);Ma.driver.AddEventListener(J.KEY_CHANGE._type,x.onKeyChange);x.touchPosition=new M;x.touchCount=0}x.stop=!1};x.exitFrame=function(){if(x._touchChange){x._touchChange=!1;for(var a=x._touchIdList._length;0<a--;){var b=x._touchIdList.Get(a);x._touchUp.h[b]&&x._touchIdList.RemoveAt(a);x._touchUp.h[b]=!1;x._touchDown.h[b]=!1}x.touchCount=x._touchIdList._length}if(x._keyChange){x._keyChange=!1;for(a=x._keyDown.keys();a.hasNext();)b=
a.next(),x._keyDown.h[b]=!1;for(a=x._keyUp.keys();a.hasNext();)b=a.next(),x._keyUp.h[b]=!1}};x.onTouchChange=function(){var a=J.TOUCH_CHANGE.touch,b=a.type;x.touchPosition.Copy(a.position);1==b?(x._touchIdList.Add(a.id),x._touchDown.h[a.id]=!0,x._touchChange=!0,x.touchCount=x._touchIdList._length):3==b&&(x._touchUp.h[a.id]=!0,x._touchChange=!0)};x.onKeyChange=function(){var a=J.KEY_CHANGE.key,b=a.code;1==a.type?(x._keyDown.h[b]=!0,x._keying.h[b]=!0):(x._keyUp.h[b]=!0,x._keying.h[b]=!1);x._keyChange=
!0};var Jc=function(a,b,c){this.id=Jc._id++;this.name=a;this._frag=c;this._vert=b};f["lovedna.play.ShaderCode"]=Jc;Jc.__name__=["lovedna","play","ShaderCode"];Jc.prototype={GetAttributeName:function(a){this.init();var b=this._attributeNames;return null!=k[a]?b.getReserved(a):b.h[a]},GetUniformName:function(a){this.init();var b=this._uniformNames;return null!=k[a]?b.getReserved(a):b.h[a]},init:function(){this._init||(this._init=!0,this._attributeNames=new r,this._uniformNames=new r,this._defineMap=
new r,this._vert="\n"+this.parse(this._vert),this._frag="\n"+this.parse(this._frag))},parse:function(a){a=new Fc(a);for(var b="";0<a._length-a._position;){var c=a.ReadLine();b+=this.parseLine(c)+"\n"}return b},parseLine:function(a){for(var b=ca.Trim(a),c="",d=[],e="",g=0,f=0,h=b.length;f<h;){var l=f++;l=b.charAt(l);if(" "==l||":"==l||";"==l){d[g]=c;if(0==g)if("attribute"==c||"uniform"==c)e=a.indexOf(c),e=w.substr(a,0,e);else if("#ifdef"==c)e=a.indexOf(c),e=w.substr(a,0,e);else{g=0;break}++g;c=""}else c+=
l}if(0!=g){""!=c&&(d[g]=c);b=d[0];if("attribute"==b)return a=this._attributeNames,g=d[3],f=d[2],null!=k[g]?a.setReserved(g,f):a.h[g]=f,e+b+" "+d[1]+" "+d[2]+";";if("uniform"==b)return a=d[2],g=a.indexOf("["),-1!=g&&(a=w.substr(a,0,g)),g=this._uniformNames,f=d[3],null!=k[f]?g.setReserved(f,a):g.h[f]=a,e+b+" "+d[1]+" "+d[2]+";";"#ifdef"==b&&(d=d[1],null!=d&&(e=this._defineMap,(null!=k[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||(e=this._defineMap,null!=k[d]?e.setReserved(d,!0):e.h[d]=!0)))}return a},
get_vert:function(){this.init();return this._vert},get_frag:function(){this.init();return this._frag},__class__:Jc,__properties__:{get_frag:"get_frag",get_vert:"get_vert"}};var mf=function(){this._vert="precision highp float;\nprecision highp int;\nprecision lowp sampler2D;\nprecision lowp samplerCube;\n";this._frag="precision highp float;\nprecision mediump int;\nprecision lowp sampler2D;\nprecision lowp samplerCube;\n"};f["lovedna.play.ShaderPrecision"]=mf;mf.__name__=["lovedna","play","ShaderPrecision"];
mf.prototype={GetVertPrecision:function(){return this._vert},GetFragPrecision:function(){return this._frag},__class__:mf};var Qa=function(a){this._structDefines=new r;this._customDefines=new r;this._disableDefines=new r;this._unDefines=new r;this._globalDefine="";null==a&&(a=Qa.defaultCode);this.FromCode(a)};f["lovedna.play.Shader"]=Qa;Qa.__name__=["lovedna","play","Shader"];Qa.prototype={SetGlobalDefine:function(a){a!=this._globalDefine&&(this._globalDefine=a,this.dirtyDefine())},Define:function(a,
b){null==b&&(b="");if(null==b)this._customDefines.remove(a)&&this.dirtyDefine();else{var c=this._customDefines;(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))||(c=this._customDefines,null!=k[a]?c.setReserved(a,b):c.h[a]=b,this.dirtyDefine())}},DefineStruct:function(a){for(var b=this._structDefines.keys();b.hasNext();){var c=b.next();this._structDefines.remove(c)}b=a.length;if(0<b)for(;0<b--;)if(c=a[b],null!=c){var d=c.count;if(!(1>d))for(;0<d--;){var e=this._structDefines,g=c._list[d].name;
null!=k[g]?e.setReserved(g,""):e.h[g]=""}}this.dirtyDefine()},FromCode:function(a){this.dirtyDefine();this._code=a},Bind:function(){if(null==this._code||0==this.get_id())return!1;if(null==this._program){var a=Qa._programMap,b=this.get_id();a.h.hasOwnProperty(b)?(a=Qa._programMap,b=this.get_id(),this._program=a.h[b]):(a=this.createDefine(),this._program=new Sb(this._globalDefine+a+Qa.defaultPrecision.GetVertPrecision()+this._code.get_vert(),this._globalDefine+a+Qa.defaultPrecision.GetFragPrecision()+
this._code.get_frag()),a=Qa._programMap,b=this.get_id(),a.h[b]=this._program)}if(null==this._program||!this._program.enabled)return!1;this._program.Bind();return!0},GetBufferInput:function(a){if(null==this._code||null==this._program)return null;var b=this._code.GetAttributeName(a);if(null!=b){a=this._program;if(null==a._bufferAttribs)return null;a=a._bufferAttribs;return null!=k[b]?a.getReserved(b):a.h[b]}b=this._program;if(null==b._bufferAttribs)return null;b=b._bufferAttribs;return null!=k[a]?b.getReserved(a):
b.h[a]},GetUniformInput:function(a){if(null==this._code||null==this._program)return null;var b=this._code.GetUniformName(a);if(null!=b)return a=this._program._uniforms,null!=k[b]?a.getReserved(b):a.h[b];b=this._program._uniforms;return null!=k[a]?b.getReserved(a):b.h[a]},dirtyDefine:function(){this._id=0;this._define=this._program=null;this._idChanged=!0},createDefine:function(){if(null!=this._define)return this._define;if(null==this._code)return"";for(var a=[],b=new r,c=this._structDefines.keys();c.hasNext();){var d=
c.next(),e=this._disableDefines;(null!=k[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||(null!=k[d]?b.existsReserved(d):b.h.hasOwnProperty(d))||(a.push(d),e=this._structDefines,e=null!=k[d]?e.getReserved(d):e.h[d],null!=k[d]?b.setReserved(d,e):b.h[d]=e)}for(c=this._customDefines.keys();c.hasNext();)d=c.next(),e=this._disableDefines,(null!=k[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||(null!=k[d]?b.existsReserved(d):b.h.hasOwnProperty(d))||(a.push(d),e=this._customDefines,e=null!=k[d]?e.getReserved(d):
e.h[d],null!=k[d]?b.setReserved(d,e):b.h[d]=e);c=a.length;1<c&&a.sort(h(this,this.SortDefine));for(this._define="";0<c--;)d=a[c],e=null!=k[d]?b.getReserved(d):b.h[d],b.remove(d),null==e&&(e=""),this._define+="#define "+d+" "+e+"\n";a=[];for(c=this._unDefines.keys();c.hasNext();)d=c.next(),(null!=k[d]?b.existsReserved(d):b.h.hasOwnProperty(d))||(e=this._unDefines,(null!=k[d]?e.getReserved(d):e.h[d])&&a.push(d));c=a.length;1<c&&a.sort(h(this,this.SortDefine));for(b="";0<c--;)b+="#undef "+a[c]+"\n";
return this._define+=b},SortDefine:function(a,b){return a!=b?a>b?1:-1:0},get_id:function(){this._idChanged&&(this._idChanged=!1,Qa._fnv.Reset(),Qa._fnv.PushInt(this._code.id),Qa._fnv.PushString(this.createDefine()),this._id=Qa._fnv.GetCode());return this._id},__class__:Qa,__properties__:{get_id:"get_id"}};var Ya=f["lovedna.play.ShadowCastingMode"]={__ename__:!0,__constructs__:["Off","On","TwoSided","ShadowsOnly"]};Ya.Off=["Off",0];Ya.Off.toString=z;Ya.Off.__enum__=Ya;Ya.On=["On",1];Ya.On.toString=
z;Ya.On.__enum__=Ya;Ya.TwoSided=["TwoSided",2];Ya.TwoSided.toString=z;Ya.TwoSided.__enum__=Ya;Ya.ShadowsOnly=["ShadowsOnly",3];Ya.ShadowsOnly.toString=z;Ya.ShadowsOnly.__enum__=Ya;var fc=function(){ja.call(this);this.data=new nf(this);this.world=this;this.parent=this};f["lovedna.play.World"]=fc;fc.__name__=["lovedna","play","World"];fc.__super__=ja;fc.prototype=n(ja.prototype,{enterFrame:function(){fc.current=this;this.data.tick();this.deltaTime=this.data.deltaTime;this.data.update()},render:function(){fc.current=
this;this.updateTime=this._updateTime=0;this._enabled=!0;this._needUpdate=!1;this.data.render()},__class__:fc});var nf=function(a){this.fixedCount=1;this.fixedDeltaTime=this.maxDeltaTime=.03333333333333333;this._world=a;this._actorList=new E;this._actorMap=new ba;this._addMap=new ba;this.deltaTime=0;this._now=.001*(new Date).getTime()+U._timeOffset;this._time=0;this._collectors=new E;this.lights=new Rd;this.cameras=new Sd;this.renderers=new Kc;this.shadows=new Kc;this.colliders=new Td;this.AddCollector(this.lights);
this.AddCollector(this.cameras);this.AddCollector(this.renderers);this.AddCollector(this.shadows);this.AddCollector(this.colliders);this.width=480;this.height=800;this._resize=!1;this._rendererData=new of(this)};f["lovedna.play.WorldData"]=nf;nf.__name__=["lovedna","play","WorldData"];nf.prototype={AddCollector:function(a){null!=a&&(this._collectors.Remove(a),this._collectors.Add(a))},resize:function(a,b){this.width=a;this.height=b;this._resize=!0},tick:function(){var a=.001*(new Date).getTime()+
U._timeOffset;this.deltaTime=a-this._now;this.deltaTime>this.maxDeltaTime&&(this.deltaTime=this.maxDeltaTime);this._time+=this.deltaTime;this.fixedCount=0;this._time>=this.fixedDeltaTime&&(this.fixedCount=this._time/this.fixedDeltaTime|0,this._time%=this.fixedDeltaTime);this._now=a},update:function(){fb.current=null;this._rebuildActorList&&(this._rebuildActorList=!1,this.buildActorList());var a=this._actorList._length;for(var b=0,c=a;b<c;){a=b++;a=this._actorList.Get(a);var d=this.fixedDeltaTime;
if(a._enabled){a._needUpdate=!1;var e=a.world.data.fixedCount;if(0<e&&a.HasEventListener(u.onFixedInput._type)){var g=a.deltaTime;for(a.deltaTime=d;0<e--;)a.DispatchEvent(u.onFixedInput);a.deltaTime=g}a.deltaTime=a.parent.deltaTime*a.timeScale;a.DispatchEvent(u.onInput)}}a=this._actorList._length;b=0;for(c=a;b<c;)a=b++,a=this._actorList.Get(a),a._enabled&&a.DispatchEvent(u.onInputFinish);this._rebuildActorList&&(this._rebuildActorList=!1,this.buildActorList());for(a=this._collectors._length;0<a--;)this._collectors.Get(a).Start();
a=0;for(b=this._actorList._length;a<b;)c=a++,c=this._actorList.Get(c),this._resize&&c.DispatchEvent(u.onScreenResize),c._onUpdate();for(a=this._collectors._length;0<a--;)this._collectors.Get(a).End();a=0;for(b=this._actorList._length;a<b;)c=a++,this._actorList.Get(c).DispatchEvent(u.onOutput);this._resize=!1;if(this._rendererData.finish){this._rendererData.Clear();a=this.lights.count;if(0<a)for(;0<a--;)b=this.lights.Get(a),b.visible&&this._rendererData.SetLight(b);this._rendererData.Start();a=this.cameras.count;
if(0<a)for(this._world.DispatchEvent(u.OnPreRender),b=0;b<a;)c=b++,c=this.cameras.Get(c),c.render&&this._rendererData.Add(c)}},render:function(){this._rendererData.Render();this._world.DispatchEvent(u.OnPostRender)},buildActorList:function(){var a;for(a=this._actorList._length;0<a--;){var b=this._actorList.Get(a);this._addMap.h[b.id]=b}this._actorList.Clear();this._world._visit(this._actorList);for(a=this._actorList._length;0<a--;)b=this._actorList.Get(a),this._actorMap.h.hasOwnProperty(b.id)||(b.world=
this._world,b.DispatchEvent(u.onAdd)),this._actorMap.h[b.id]=b,this._addMap.remove(b.id);for(a=this._addMap.iterator();a.hasNext();)b=a.next(),b.DispatchEvent(u.onRemove),b.world=null,this._addMap.remove(b.id),this._actorMap.remove(b.id)},__class__:nf};var pf=function(){};f["lovedna.play.collectors.IComponentCollector"]=pf;pf.__name__=["lovedna","play","collectors","IComponentCollector"];pf.prototype={__class__:pf};var Ja=function(){};f["lovedna.play.collectors.CollectorBase"]=Ja;Ja.__name__=["lovedna",
"play","collectors","CollectorBase"];Ja.__interfaces__=[pf];Ja.prototype={Start:function(){},End:function(){},__class__:Ja};var Sd=function(){this._list=new E};f["lovedna.play.collectors.CameraCollector"]=Sd;Sd.__name__=["lovedna","play","collectors","CameraCollector"];Sd.__super__=Ja;Sd.prototype=n(Ja.prototype,{Get:function(a){return this._list.Get(a)},Add:function(a){this._list.Add(a)},Start:function(){Ja.prototype.Start.call(this);this._list.Clear()},End:function(){Ja.prototype.End.call(this);
this.count=this._list._length;1<this.count&&this._list.Sort(h(this,this.sort))},sort:function(a,b){a=a.layer;b=b.layer;return a==b?0:a>b?1:-1},__class__:Sd});var Td=function(){this._list=new E};f["lovedna.play.collectors.ColliderCollector"]=Td;Td.__name__=["lovedna","play","collectors","ColliderCollector"];Td.__super__=Ja;Td.prototype=n(Ja.prototype,{Start:function(){Ja.prototype.Start.call(this);this._list.Clear()},End:function(){Ja.prototype.End.call(this);this.count=this._list._length},__class__:Td});
var Rd=function(){this._list=new E};f["lovedna.play.collectors.LightCollector"]=Rd;Rd.__name__=["lovedna","play","collectors","LightCollector"];Rd.__super__=Ja;Rd.prototype=n(Ja.prototype,{Get:function(a){return this._list.Get(a)},Add:function(a){this._list.Add(a)},Start:function(){Ja.prototype.Start.call(this);this._list.Clear()},End:function(){Ja.prototype.End.call(this);this.count=this._list._length;1<this.count&&this._list.Sort(h(this,this.sort))},sort:function(a,b){a=a.layer;b=b.layer;return a==
b?0:a>b?1:-1},__class__:Rd});var Kc=function(){this._list=new E};f["lovedna.play.collectors.RendererCollector"]=Kc;Kc.__name__=["lovedna","play","collectors","RendererCollector"];Kc.__super__=Ja;Kc.prototype=n(Ja.prototype,{Start:function(){Ja.prototype.Start.call(this);this._list.Clear()},End:function(){Ja.prototype.End.call(this);this.count=this._list._length},__class__:Kc});var fb=function(){};f["lovedna.play.components.Camera"]=fb;fb.__name__=["lovedna","play","components","Camera"];fb.__super__=
Q;fb.prototype=n(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this.updateTime=this._updateTime=0;this.set_cullingMask(new Pa);this.set_orthographic(!1);this.orthographicScale=1;this.layer=0;this.render=!0;this.viewMatrix=this.worldToCameraMatrix=new na;this.viewInverseMatrix=this.cameraToWorldMatrix=new na;this.projectionMatrix=new na;this.projectionViewMatrix=new na;this.projectionViewInverseMatrix=new na;this.set_nearClipPlane(.1);this.set_farClipPlane(500);this.set_fieldOfView(60);
this.frustum=new jf;this._eyePosition=new t;this.preBuffer=new cb;var a=this.postBuffer=new cb,b=h(this,this.OnPostRender);null!=b&&(b=(new ac).Set(b),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length);a=this._uniformMap=new r;b=l.P.name;var c=(new Oa(l.P.name)).SetMatrix(this.projectionMatrix);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.V.name;c=(new Oa(l.V.name)).SetMatrix(this.viewMatrix);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.VP.name;c=(new Oa(l.VP.name)).SetMatrix(this.projectionViewMatrix);
null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.IV.name;c=(new Oa(l.IV.name)).SetMatrix(this.viewInverseMatrix);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.IVP.name;c=(new Oa(l.IVP.name)).SetMatrix(this.projectionViewInverseMatrix);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.EYE.name;c=(new Oa(l.EYE.name)).SetFloat3(this._eyePosition);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this.preBuffer;b=this._uniformMap;b=(new $b).Set(b);a._commands.Add(b);a.enabled=
!0;a.length=a._commands._length;a=this.preBuffer;b=h(this,this.onPreRender);null!=b&&(b=(new ac).Set(b),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length)},onStart:function(){Q.prototype.onStart.call(this);this.addEvent(u.onScreenResize,h(this,this.onScreenResize));this.addEvent(u.onTransform);this.addEvent(u.onCollect)},onTransform:function(){Q.prototype.onTransform.call(this);this.updateTime++},onCollect:function(){Q.prototype.onCollect.call(this);this.actor.world.data.cameras.Add(this);
this.updateCamera()},updateCamera:function(){if(this._updateTime!=this.updateTime){this._updateTime=this.updateTime;var a=this._eyePosition,b=this.actor.get_worldPosition();null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);a.Normalize();a=this.actor.localToWorld.GetTranslation();b=this.actor.localToWorld.GetRotation();var c=t.get_temp();c.x=0;c.y=0;c.z=1;b=b.MultiplyVector(c,!0);c=this.farClipPlane-this.nearClipPlane;b.x*=c;b.y*=c;b.z*=c;b.x+=a.x;b.y+=a.y;b.z+=a.z;this.viewMatrix.LookAt(a,b);a=.5*this.actor.world.data.width;
b=.5*this.actor.world.data.height;c=a/b;this.orthographic?this.projectionMatrix.SetOrtho(-a*this.orthographicScale,a*this.orthographicScale,-b*this.orthographicScale,b*this.orthographicScale,this.nearClipPlane,this.farClipPlane):this.projectionMatrix.SetProjection(this.nearClipPlane,this.farClipPlane,this.fieldOfView,c);this.projectionViewMatrix.Copy(this.projectionMatrix);this.projectionViewMatrix.Append(this.viewMatrix);this.viewInverseMatrix.Copy(this.viewMatrix);this.viewInverseMatrix.Inverse();
this.projectionViewMatrix.MultiplyFrustum(this.frustum);this.projectionViewInverseMatrix.Copy(this.projectionViewMatrix);this.projectionViewInverseMatrix.Inverse();this.actor.DispatchEvent(u.onCameraUpdate)}},onScreenResize:function(){this.updateTime++},onPreRender:function(){this.actor.DispatchEvent(u.OnPreRender)},OnPostRender:function(){this.actor.DispatchEvent(u.OnPostRender)},set_nearClipPlane:function(a){this.nearClipPlane!=a&&0<a&&this.updateTime++;return this.nearClipPlane=a},set_farClipPlane:function(a){this.farClipPlane!=
a&&.01<a&&this.updateTime++;return this.farClipPlane=a},set_fieldOfView:function(a){this.fieldOfView!=a&&1<a&&180>a&&this.updateTime++;return this.fieldOfView=a},set_orthographic:function(a){this.orthographic!=a&&this.updateTime++;return this.orthographic=a},set_cullingMask:function(a){return this.cullingMask=a},__class__:fb,__properties__:n(Q.prototype.__properties__,{set_orthographic:"set_orthographic",set_farClipPlane:"set_farClipPlane",set_nearClipPlane:"set_nearClipPlane",set_fieldOfView:"set_fieldOfView",
set_cullingMask:"set_cullingMask"})});var Ud=function(){};f["lovedna.play.components.Collider"]=Ud;Ud.__name__=["lovedna","play","components","Collider"];Ud.__super__=Q;Ud.prototype=n(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this.enabled=!0;this._transformTime=-1;this.autoUpdate=!1},onStart:function(){Q.prototype.onStart.call(this);this.addEvent(u.onCollect)},onCollect:function(){Q.prototype.onCollect.call(this);if(this.enabled&&this.isEnabled()&&(this.actor.world.data.colliders._list.Add(this),
this.autoUpdate))this.onColliderUpdate()},isEnabled:function(){return!1},onColliderUpdate:function(){},__class__:Ud});var qf=function(){};f["lovedna.play.components.Light"]=qf;qf.__name__=["lovedna","play","components","Light"];qf.__super__=fb;qf.prototype=n(fb.prototype,{onConstruct:function(){fb.prototype.onConstruct.call(this);this._position=new t;this.render=!1;this.type=0;this.renderMode=2;this.ambient=new la(.1,.1,.1,0);this.diffuse=new la(1,1,1,0);this.specular=new la(.3,.3,.3,40);this.refresh=
this.visible=!0;this.uniforms=new r;var a=this._commandBuffer=new cb,b=this.uniforms;b=(new $b).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._commandBuffer;b=l.LIGHT.name;b=(new Vd).Set(b,"");a._commands.Add(b);a.enabled=!0;a.length=a._commands._length},onAwake:function(){fb.prototype.onAwake.call(this);var a=t.get_temp();a.x=1;a.y=1;a.z=1;this.actor.rotation.LookAt(a,new t(0,0,0))},onStart:function(){fb.prototype.onStart.call(this);this.addEvent(u.onTransform)},onCollect:function(){this.visible&&
(this.updateCamera(),this.actor.world.data.lights.Add(this))},onTransform:function(){fb.prototype.onTransform.call(this);var a=this._position,b=this.actor;null==b._forward&&(b._forward=new t(0,0,1),b.get_worldRotation().MultiplyVector(b._forward,!0));var c=t.get_temp();b=b._forward;null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);c.x*=-1;c.y*=-1;c.z*=-1;null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z)},get_commandBuffer:function(){if(this.refresh){this.refresh=!1;var a=this.uniforms,b=l.LIGHT_POSITION.name,c=(new Oa(l.LIGHT_POSITION.name)).SetFloat3(this._position);
null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this.uniforms;b=l.LIGHT_AMBIENT.name;c=(new Oa(l.LIGHT_AMBIENT.name)).SetFloat4(this.ambient);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this.uniforms;b=l.LIGHT_DIFFUSE.name;c=(new Oa(l.LIGHT_DIFFUSE.name)).SetFloat4(this.diffuse);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this.uniforms;b=l.LIGHT_SPECULAR.name;c=(new Oa(l.LIGHT_SPECULAR.name)).SetFloat4(this.specular);null!=k[b]?a.setReserved(b,c):a.h[b]=c}return this._commandBuffer},__class__:qf,__properties__:n(fb.prototype.__properties__,
{get_commandBuffer:"get_commandBuffer"})});var Lb=function(){};f["lovedna.play.components.Renderer"]=Lb;Lb.__name__=["lovedna","play","components","Renderer"];Lb.__super__=Q;Lb.prototype=n(Q.prototype,{Cull:function(a){this._transformTime!=this.actor.updateTime&&(this._transformTime=this.actor.updateTime,this.onUpdateBounds(),null!=this.bounds&&this.bounds.Apply(this.actor.localToWorld));if(null==this.bounds)return a.ContainsPoint(this.actor.get_worldPosition())?!1:!0;if(null!=this.bounds.sphere){var b=
this.bounds.sphere;b=!(null==b?0:a.ContainsPoint(b.center,b.radius))}else b=!1;return b||null!=this.bounds.box&&!a.IntersectsBox(this.bounds.box)?!0:!1},UpdateBuffer:function(){this.onRefresh();this._bufferUpdateTime!=this.updateTime&&(this._bufferUpdateTime=this.updateTime,this.buffers.Clear(),this.onBuildBuffer())},onConstruct:function(){Q.prototype.onConstruct.call(this);this.updateTime=0;this._bufferUpdateTime=-1;this.cameraCull=!0;this.receiveShadows=!1;this.shadowCastingMode=Ya.Off;this._transformTime=
0;this.materials=new E;this.material=new Nb;this.materials.Add(this.material);this.visible=!0;this.buffers=new E},onDestroy:function(){Q.prototype.onDestroy.call(this);this.materials.Dispose();this.materials=null;for(var a=this.buffers._length;0<a--;)this.buffers.Get(a).Clear();this.buffers.Dispose();this.buffers=null},onStart:function(){Q.prototype.onStart.call(this);this.addEvent(u.onCollect)},onCollect:function(){Q.prototype.onCollect.call(this);this.isEnabled()&&this.actor.world.data.renderers._list.Add(this)},
isEnabled:function(){return!1},onUpdateBounds:function(){},onRefresh:function(){},onBuildBuffer:function(){},__class__:Lb});var Wb=function(){};f["lovedna.play.components.MeshRenderer"]=Wb;Wb.__name__=["lovedna","play","components","MeshRenderer"];Wb.__super__=Lb;Wb.prototype=n(Lb.prototype,{onConstruct:function(){Lb.prototype.onConstruct.call(this);this._meshUpdateTime=0},onDestroy:function(){Lb.prototype.onDestroy.call(this);this.set_mesh(null)},isEnabled:function(){if(null==this.mesh||null==this.mesh.buffer||
!this.mesh.buffer.get_enabled()||1>this.materials._length)return!1;this._meshUpdateTime!=this.mesh.buffer.updateTime&&(this._meshUpdateTime=this.mesh.buffer.updateTime,this._transformTime--,this._bufferUpdateTime--,null==this.bounds&&(this.bounds=new Nd),this.bounds.Copy(this.mesh.buffer.get_bounds()));return!0},onBuildBuffer:function(){Lb.prototype.onBuildBuffer.call(this);for(var a=this.mesh.buffer.GetGroupCount(),b=0,c=this.materials._length;b<c;){var d=b++,e=this.materials.Get(d);if(e.enabled&&
null!=e){var g=e.shader;if(0!=g.get_id()){var f=e.subMesh;if(!(0<=f&&f>=a)){e.SetMatrix(l.M.name,this.actor.localToWorld);e.SetMatrixHandler(l.IM.name,this.actor.worldToLocalHandler);d=e._buffer;d.Clear();var k=(new Wd).Set(g);d._commands.Add(k);d.enabled=!0;d.length=d._commands._length;k=e.uniforms;k=(new Xd).Set(k);d._commands.Add(k);d.enabled=!0;d.length=d._commands._length;k=e.state;null!=k&&(k=(new Yd).Set(k),d._commands.Add(k),d.enabled=!0,d.length=d._commands._length);d.sortData.shader=g;d.sortData.queue=
e.renderQueue;d.sortData.offset=e.distanceOffset;e=this.mesh.buffer.get_positionBuffer();k=this.mesh.buffer.positionStructs;null!=e&&null!=k&&e.enabled&&1<=k.count&&(e=(new pc).Set(e,k),d._commands.Add(e),d.enabled=!0,d.length=d._commands._length);e=this.mesh.buffer.get_vertexBuffer();k=this.mesh.buffer.vertexStructs;null!=e&&null!=k&&e.enabled&&1<=k.count&&(e=(new pc).Set(e,k),d._commands.Add(e),d.enabled=!0,d.length=d._commands._length);e=this.mesh.buffer.get_boneBuffer();k=this.mesh.buffer.boneStructs;
null!=e&&null!=k&&e.enabled&&1<=k.count&&(e=(new pc).Set(e,k),d._commands.Add(e),d.enabled=!0,d.length=d._commands._length);g.DefineStruct([this.mesh.buffer.positionStructs,this.mesh.buffer.vertexStructs,this.mesh.buffer.boneStructs]);g=this.mesh.buffer.get_indexBuffer();null!=g&&(g=(new Zd).Set(g),d._commands.Add(g),d.enabled=!0,d.length=d._commands._length);g=h(this,this.onPreRender);null!=g&&(g=(new ac).Set(g),d._commands.Add(g),d.enabled=!0,d.length=d._commands._length);0>f?f=(new Lc).Set(0,0):
(g=this.mesh.buffer.GetGroup(f),f=g.indices._length,g=g.start,f=(new Lc).Set(f,g));d._commands.Add(f);d.enabled=!0;d.length=d._commands._length;f=h(this,this.OnPostRender);null!=f&&(f=(new ac).Set(f),d._commands.Add(f),d.enabled=!0,d.length=d._commands._length);this.buffers.Add(d)}}}}},onPreRender:function(){},OnPostRender:function(){},set_mesh:function(a){this._bufferUpdateTime--;return this.mesh=a},__class__:Wb,__properties__:n(Lb.prototype.__properties__,{set_mesh:"set_mesh"})});var Pc=function(a){Ic.call(this);
this._window=a;null!=this._window&&(this._touchDriver=new $d(a),Eb.SetDriver(this._touchDriver),Ma.SetDriver(new ae(a)),a.onResize.add(h(this,this.onResize)),a.onActivate.add(h(this,this.onActivate)),a.onDeactivate.add(h(this,this.onDeactivate)),a.onFocusIn.add(h(this,this.onFocusIn)),a.onFocusOut.add(h(this,this.onFocusOut)),this.onResize(a.__width,a.__height))};f["lovedna.play.dirvers.LimeDriver"]=Pc;Pc.__name__=["lovedna","play","dirvers","LimeDriver"];Pc.__super__=Ic;Pc.prototype=n(Ic.prototype,
{Render:function(){null!=this._window&&(this.onWorldUpdate(),this.onWorldRender(),this._touchDriver.LimeUpdate())},__class__:Pc});var uc=function(){ob.call(this);this.radiusTop=0;this.radiusBottom=.5;this.height=1.8;this.radialSegments=10;this.heightSegments=1;this.openEdge=this.openEnded=!1;this.thetaStart=0;this.thetaLength=360;this.customColor=new Ka(1,1,1,1)};f["lovedna.play.meshs.GeomCylinder"]=uc;uc.__name__=["lovedna","play","meshs","GeomCylinder"];uc.__super__=ob;uc.prototype=n(ob.prototype,
{Build:function(){0>this.radiusTop&&(this.radiusTop=0);0>this.radiusBottom&&(this.radiusBottom=0);0>this.height&&(this.height=0);0>this.height&&(this.height=0);3>this.radialSegments&&(this.radialSegments=3);1>this.heightSegments&&(this.heightSegments=3);1>this.heightSegments&&(this.heightSegments=1);this.thetaStart*=.017453292519943295;this.thetaLength=.017453292519943295*ca.FloatToClamp(this.thetaLength,0,360);var a=new E;this.position=new E;this.normal=new E;this.uv=new E;this.color=new E;var b=
new Od;this._index=0;for(var c=this.height/2,d=[],e=(this.radiusBottom-this.radiusTop)/this.height,g=Math.sin,f=Math.cos,h=0,k=this.heightSegments+1;h<k;){for(var l=[],m=h++/this.heightSegments,n=m*(this.radiusBottom-this.radiusTop)+this.radiusTop,p=0,q=this.radialSegments+1;p<q;){var r=p++,u=r/this.radialSegments,v=u*this.thetaLength+this.thetaStart,w=g(v),x=f(v);v=new t;v.x=n*w;v.y=-m*this.height+c;v.z=n*x;w=new t(w,e,x);null!=this.transform&&(this.transform.MultiplyPoint(v),this.transform.MultiplyPoint(w));
this.position.Add(v);this.normal.Add(w.Normalize());this.uv.Add(new M(u,m));null==this.customColor?(b.h=360/this.radialSegments*r,b.s=1,b.v=1,r=b.ToColor()):(r=new Ka,u=this.customColor,r.x=u.x,r.y=u.y,r.z=u.z,r.w=u.w);this.color.Add(r);l.push(this._index++)}d.push(l)}b=0;for(e=this.radialSegments;b<e;)for(h=b++,k=0,l=this.heightSegments;k<l;)m=k++,n=d[m+1][h],p=d[m+1][h+1],q=d[m][h+1],a.Add(d[m][h]),a.Add(n),a.Add(q),a.Add(n),a.Add(p),a.Add(q);if(360>57.29577951308232*this.thetaLength&&!this.openEdge){b=
this._index;d=[];e=0;for(h=this.heightSegments+1;e<h;)for(k=e++/this.heightSegments,l=k*(this.radiusBottom-this.radiusTop)+this.radiusTop,m=0;4>m;)p=m++,q=p*this.radialSegments/this.radialSegments*this.thetaLength+this.thetaStart,n=g(q),q=f(q),1<p&&(n=q=0),p=new t,p.x=l*n,p.y=-k*this.height+c,p.z=l*q,null!=this.transform&&this.transform.MultiplyPoint(p),d.push(p);f=null;c=0;for(g=this.heightSegments+1;c<g;)e=3*c++,a.Add(b+e),a.Add(b+e+4),a.Add(b+e+6),a.Add(b+e),a.Add(b+e+6),a.Add(b+e+2),a.Add(b+e+
3),a.Add(b+e+7),a.Add(b+e+5),a.Add(b+e+3),a.Add(b+e+5),a.Add(b+e+1),null==f&&(f=t.get_temp(),e=d[0],h=d[2],null==h?(f.x-=e.x,f.y-=e.y,f.z-=e.z):(f.x=e.x-h.x,f.y=e.y-h.y,f.z=e.z-h.z),e=t.get_temp(),h=d[6],k=d[0],null==k?(e.x-=h.x,e.y-=h.y,e.z-=h.z):(e.x=h.x-k.x,e.y=h.y-k.y,e.z=h.z-k.z),f.Cross(e).Normalize(),h=d[3],k=d[1],null==k?(f.x-=h.x,f.y-=h.y,f.z-=h.z):(f.x=h.x-k.x,f.y=h.y-k.y,f.z=h.z-k.z),h=d[5],k=d[3],null==k?(e.x-=h.x,e.y-=h.y,e.z-=h.z):(e.x=h.x-k.x,e.y=h.y-k.y,e.z=h.z-k.z),f=f.Cross(e).Normalize());
c=0;for(g=d.length;c<g;)e=c++,this.position.Add(d[e]),b=e%4,e/=4,h=e|0,0>e&&h!=e&&--h,e=new M(1-b,h/this.heightSegments),1<b&&(e.x=.5),this.uv.Add(e),e=new t,0==b%2&&null!=f&&f!=e&&(e.x=f.x,e.y=f.y,e.z=f.z),this.normal.Add(e),this.color.Add(new Ka(1,1,1,1));this._index+=d.length}this.AddGroup(a);this.openEnded||(0<this.radiusTop&&this.generateCap(!0),0<this.radiusBottom&&this.generateCap(!1));this.thetaStart*=57.29577951308232;this.thetaLength*=57.29577951308232;this.updateTime+=1.1;return this},
generateCap:function(a){var b=a?this.radiusTop:this.radiusBottom,c=a?1:-1;var d=this._index;var e=this.height/2,g=new Od,f=Math.sin,h=Math.cos;var k=1;for(var l=this.radialSegments+1;k<l;){var m=k++,n=new t(0,e*c,0),p=new t(0,c,0);null!=this.transform&&(this.transform.MultiplyPoint(n),this.transform.MultiplyPoint(p));this.position.Add(n);this.normal.Add(p);this.uv.Add(new M(.5,.5));null==this.customColor?(g.h=360/this.radialSegments*m,g.s=1,g.v=1,m=g.ToColor()):(m=new Ka,n=this.customColor,m.x=n.x,
m.y=n.y,m.z=n.z,m.w=n.w);this.color.Add(m);this._index++}k=this._index;l=0;for(m=this.radialSegments+1;l<m;){n=l++;p=n/this.radialSegments*this.thetaLength+this.thetaStart;var q=h(p),r=f(p);p=new t;p.x=b*r;p.y=e*c;p.z=b*q;q=new t(0,c,0);r=new M;r.x=.5*(p.z/b+1);r.y=.5*(p.x/b+1);a&&(r.y=1-r.y);null!=this.transform&&(this.transform.MultiplyPoint(p),this.transform.MultiplyPoint(q));this.position.Add(p);this.normal.Add(q);this.uv.Add(r);null==this.customColor?(g.h=360/this.radialSegments*n,g.s=1,g.v=
1,n=g.ToColor()):(n=new Ka,p=this.customColor,n.x=p.x,n.y=p.y,n.z=p.z,n.w=p.w);this.color.Add(n);this._index++}b=new E;c=0;for(e=this.radialSegments;c<e;)f=c++,g=d+f,f=k+f,a?(b.Add(f),b.Add(f+1)):(b.Add(f+1),b.Add(f)),b.Add(g);this.AddGroup(b)},__class__:uc});var Mc=function(){this.updateTime=-1;this._enabled=!1;this._boundUpdateTime=this._vertexBufferTime=this._positionBufferTime=this._indexBufferTime=-1;this.mask=new nb;this.positionStructs=new Hc;this.positionStructs.Add(l.POSITION.name,l.POSITION.size)};
f["lovedna.play.meshs.MeshBuffer"]=Mc;Mc.__name__=["lovedna","play","meshs","MeshBuffer"];Mc.prototype={GetGroupCount:function(){return 0},GetGroup:function(a){return null},get_enabled:function(){return!1},get_indexBuffer:function(){return this._indexBuffer},get_positionBuffer:function(){return this._positionBuffer},get_vertexBuffer:function(){return this._vertexBuffer},get_boneBuffer:function(){return this._boneBuffer},get_bounds:function(){return this._bounds},__class__:Mc,__properties__:{get_bounds:"get_bounds",
get_boneBuffer:"get_boneBuffer",get_vertexBuffer:"get_vertexBuffer",get_positionBuffer:"get_positionBuffer",get_indexBuffer:"get_indexBuffer",get_enabled:"get_enabled"}};var be=function(a){Mc.call(this);this.geometry=a;this.updateTime=a.updateTime+1};f["lovedna.play.meshs.GeomMeshBuffer"]=be;be.__name__=["lovedna","play","meshs","GeomMeshBuffer"];be.__super__=Mc;be.prototype=n(Mc.prototype,{GetGroupCount:function(){return this.geometry.groupCount},GetGroup:function(a){return this.geometry.GetGroup(a)},
get_enabled:function(){if(this.updateTime==this.geometry.updateTime)return this._enabled;this.updateTime=this.geometry.updateTime;if(null==this.geometry.position||1>this.geometry.groupCount)return this._enabled=!1;var a=this.geometry.position._length;if(2>a)return this._enabled=!1;this._enabled=!0;this.mask.Clear();this.mask.Open(l.POSITION.index);null!=this.geometry.uv&&this.geometry.uv._length>=a&&this.mask.Open(l.UV.index);null!=this.geometry.uv2&&this.geometry.uv2._length>=a&&this.mask.Open(l.UV2.index);
null!=this.geometry.uv3&&this.geometry.uv3._length>=a&&this.mask.Open(l.UV3.index);null!=this.geometry.uv4&&this.geometry.uv4._length>=a&&this.mask.Open(l.UV4.index);null!=this.geometry.normal&&this.geometry.normal._length>=a&&this.mask.Open(l.NORMAL.index);null!=this.geometry.tangent&&this.geometry.tangent._length>=a&&this.mask.Open(l.TANGENT.index);null!=this.geometry.color&&this.geometry.color._length>=a&&this.mask.Open(l.COLOR.index);null!=this.geometry.color2&&this.geometry.color2._length>=a&&
this.mask.Open(l.COLOR2.index);null!=this.geometry.color3&&this.geometry.color3._length>=a&&this.mask.Open(l.COLOR3.index);null!=this.geometry.color4&&this.geometry.color4._length>=a&&this.mask.Open(l.COLOR4.index);null!=this.geometry.boneWeight&&(this.mask.Open(l.BONE_INDEX.index),this.mask.Open(l.BONE_WEIGHT.index));return!0},get_indexBuffer:function(){if(this._indexBufferTime==this.geometry.updateTime)return this._indexBuffer;this._indexBufferTime=this.geometry.updateTime;null==this._indexBuffer&&
(this._indexBuffer=new Db);for(var a=new E,b=0,c=this.geometry.groupCount;b<c;){var d=b++;d=this.geometry.GetGroup(d).indices;d.Trim();a.AddList(d._buffer)}b=this._indexBuffer;a.Trim();b.Upload(a._buffer);return this._indexBuffer},get_positionBuffer:function(){if(this._positionBufferTime==this.geometry.updateTime)return this._positionBuffer;this._positionBufferTime=this.geometry.updateTime;null==this._positionBuffer&&(this._positionBuffer=new pb);for(var a=[],b=0,c=this.geometry.position._length;b<
c;){var d=b++;this.geometry.position.Get(d).ToArray(a,3*d)}this._positionBuffer.Upload(a);return this._positionBuffer},get_vertexBuffer:function(){if(this._vertexBufferTime==this.geometry.updateTime)return this._vertexBuffer;this._vertexBufferTime=this.geometry.updateTime;null==this._vertexBuffer&&(this._vertexBuffer=new pb);var a=[this.geometry.uv,this.geometry.uv2,this.geometry.uv3,this.geometry.uv4,this.geometry.normal,this.geometry.tangent,this.geometry.color,this.geometry.color2,this.geometry.color3,
this.geometry.color4],b=[l.UV,l.UV2,l.UV3,l.UV4,l.NORMAL,l.TANGENT,l.COLOR,l.COLOR2,l.COLOR3,l.COLOR4];this.vertexStructs=new Hc;for(var c=a.length,d=0,e=0;e<c;){var g=e++,f=a[g];g=b[g];null==f||f._length<this.geometry.position._length?this.mask.Close(g.index):(this.vertexStructs.Add(g.name,g.size),d+=g.size,this.mask.Open(g.index))}this.vertexStructs.AddComplete();e=0;f=[];g=this.geometry.position._length;for(var h=0;h<c;){var k=h++;var m=b[k];if(this.mask.IsOpen(m.index)){for(var n=a[k],p=0,t=g;p<
t;){var q=p++;k=d*q+e;q=n.Get(q);q.ToArray(f,k)}e+=m.size}}this._vertexBuffer.Upload(f);return this._vertexBuffer},get_boneBuffer:function(){if(null==this.geometry.boneWeight||!this.mask.IsOpen(l.BONE_INDEX.index))return null;if(this._boneBufferTime==this.geometry.updateTime)return this._boneBuffer;this._boneBufferTime=this.geometry.updateTime;null==this._boneBuffer&&(this._boneBuffer=new pb,this.boneStructs=new Hc,this.boneStructs.Add(l.BONE_INDEX.name,l.BONE_INDEX.size),this.boneStructs.Add(l.BONE_WEIGHT.name,
l.BONE_WEIGHT.size),this.boneStructs.Add(l.BONE.name,l.BONE.size),this.boneStructs.AddComplete());for(var a=[],b=this.geometry.boneWeight._length,c=l.BONE_INDEX.size,d=c+l.BONE_WEIGHT.size;0<b--;){var e=d*b,g=this.geometry.boneWeight.Get(b);g.index.ToArray(a,e);e+=c;g.weight.ToArray(a,e)}this._boneBuffer.Upload(a);return this._boneBuffer},get_bounds:function(){if(this._boundUpdateTime==this.geometry.updateTime)return this._bounds;null==this._bounds&&(this._bounds=new Nd);this._bounds.Reset();this._boundUpdateTime=
this.geometry.updateTime;for(var a=this.geometry.position._length;0<a--;)this._bounds.Expand(this.geometry.position.Get(a));this._bounds.Init();return this._bounds},__class__:be});var Rc=function(){ob.call(this);this.heightSegments=this.widthSegments=this.height=this.width=1};f["lovedna.play.meshs.GeomPlane"]=Rc;Rc.__name__=["lovedna","play","meshs","GeomPlane"];Rc.__super__=ob;Rc.prototype=n(ob.prototype,{Build:function(){1>this.widthSegments&&(this.widthSegments=1);1>this.heightSegments&&(this.heightSegments=
1);0>=this.width&&(this.width=1E-4);0>=this.height&&(this.height=1E-4);var a=new E;this.normal=new E;this.uv=new E;this.color=new E;for(var b=new E,c=.5*this.width,d=.5*this.height,e=this.widthSegments,g=this.heightSegments,f=e+1,h=this.width/e,k=this.height/g,l=0,m=g+1;l<m;)for(var n=l++,p=n*k-d,q=0,r=f;q<r;){var u=q++,v=new t(u*h-c,-p,0),w=new t(0,0,1);u=new M(u/e,n/g);null!=this.transform&&(this.transform.MultiplyPoint(v),this.transform.MultiplyPoint(w));a.Add(v);this.normal.Add(w);this.uv.Add(u);
this.color.Add(new la(1,1,1,1))}for(c=0;c<g;)for(d=c++,h=0,k=e;h<k;)l=h++,m=l+f*(d+1),n=l+1+f*(d+1),p=l+1+f*d,b.Add(l+f*d),b.Add(m),b.Add(p),b.Add(m),b.Add(n),b.Add(p);this.position=a;this.AddGroup(b);return this},__class__:Rc});var Gb=function(){};f["lovedna.play.meshs.Mesh"]=Gb;Gb.__name__=["lovedna","play","meshs","Mesh"];Gb.prototype={FromGeom:function(a){Gb._map.h.hasOwnProperty(a.id)?this.FromBuffer(Gb._map.h[a.id]):(this.FromBuffer(new be(a)),Gb._map.h[a.id]=this.buffer);return this},FromBuffer:function(a){this.buffer=
a;return this},__class__:Gb};var rf=function(){this.success=!0;this.commandCount=this.drawCall=0;this.currentVertexBuffer=new E;this.currentVertexBufferStructs=new E;this.currentUniforms=new r;this.globalUniforms=new r;this.globalDefines=new r};f["lovedna.play.render.CommandContext"]=rf;rf.__name__=["lovedna","play","render","CommandContext"];rf.prototype={AddGlobalDefine:function(a,b){null==b&&(b="");if(null==b)this.globalDefines.remove(a)&&(this._globalDefine=null);else{var c=this.globalDefines;
(null!=k[a]?c.existsReserved(a):c.h.hasOwnProperty(a))||(c=this.globalDefines,null!=k[a]?c.setReserved(a,b):c.h[a]=b,this._globalDefine=null)}},GetGlobalDefine:function(){if(null!=this._globalDefine)return this._globalDefine;for(var a=[],b=new r,c=this.globalDefines.keys();c.hasNext();){var d=c.next();a.push(d);var e=this.globalDefines;e=null!=k[d]?e.getReserved(d):e.h[d];null!=k[d]?b.setReserved(d,e):b.h[d]=e}c=a.length;1<c&&a.sort(h(this,this.SortDefine));for(this._globalDefine="";0<c--;)d=a[c],
e=null!=k[d]?b.getReserved(d):b.h[d],null==e&&(e=""),this._globalDefine+="#define "+d+" "+e+"\n";return this._globalDefine},Reset:function(){this.commandCount=this.drawCall=0},DrawCall:function(){this.drawCall++;this.currentVertexBuffer.Clear();this.currentVertexBufferStructs.Clear();var a=this.currentUniforms;for(a=new ub(a,a.arrayKeys());a.hasNext();){var b=a.next();this.currentUniforms.remove(b.name)}this.currentState=this.currentShader=this.currentIndexBuffer=null},ClearGlobalUniforms:function(){for(var a=
this.globalUniforms.keys();a.hasNext();){var b=a.next();this.globalUniforms.remove(b)}},ClearGlobalDefines:function(){for(var a=this.globalDefines.keys();a.hasNext();){var b=a.next();this.globalDefines.remove(b)}},SortDefine:function(a,b){return a!=b?a>b?1:-1:0},__class__:rf};var cb=function(){this._commands=new E;this.ctx=cb._ctx;this.sortData=new sf};f["lovedna.play.render.CommandBuffer"]=cb;cb.__name__=["lovedna","play","render","CommandBuffer"];cb.prototype={Clear:function(){this.enabled=!1;for(var a=
this._commands._length;0<a--;)this._commands.Clear();this._commands.Clear();this.length=0},Execute:function(){cb.current=this;var a=this._commands._length;this.ctx.success=!0;for(var b=0;b<a;){var c=b++;c=this._commands.Get(c);if(null==c||!this.ctx.success)return;c.Enter(this.ctx);c.Execute();this.ctx.commandCount++;if(!this.ctx.success)return}cb.current=null},__class__:cb};var p=function(){};f["lovedna.play.render.GLWrap"]=p;p.__name__=["lovedna","play","render","GLWrap"];p.Init=function(){null==
p._state&&(p._state=new Kd,p._state.depthWrite=!0,-1==p._state.cullMode?m.context.__context.disable(2884):(m.context.__context.enable(2884),m.context.__context.cullFace(p._state.cullMode)),p._state.depthTest?(m.context.__context.enable(2929),m.context.__context.depthFunc(p._state.depthMode)):m.context.__context.disable(2929),m.context.__context.depthMask(p._state.depthWrite),p._state.blend?(m.context.__context.enable(3042),m.context.__context.blendEquationSeparate(p._state.blendColorOperation,p._state.blendAlphaOperation),
m.context.__context.blendFuncSeparate(p._state.blendSrcColor,p._state.blendDstColor,p._state.blendSrcAlpha,p._state.blendDstAlpha)):m.context.__context.disable(3042),p._state.stencilTest?m.context.__context.enable(2960):m.context.__context.disable(2960),T.trace("max vart Uniform "+m.context.__context.getParameter(36347),{fileName:"GLWrap.hx",lineNumber:86,className:"lovedna.play.render.GLWrap",methodName:"Init"}),T.trace("max frag Uniform "+m.context.__context.getParameter(36349),{fileName:"GLWrap.hx",
lineNumber:87,className:"lovedna.play.render.GLWrap",methodName:"Init"}),T.trace(m.context.getString(7937),{fileName:"GLWrap.hx",lineNumber:88,className:"lovedna.play.render.GLWrap",methodName:"Init"}),T.trace(m.context.getString(7936),{fileName:"GLWrap.hx",lineNumber:89,className:"lovedna.play.render.GLWrap",methodName:"Init"}))};p.EnterFrame=function(){p._renderTextureStack.Clear();p._renderTexture=null;p._lastRenderTexture=null;p.ColorWrite(!0,!0,!0,!0)};p.ExitFrame=function(){p.ColorWrite(!0,
!0,!0,!0);pb.current=null;m.context.__context.bindBuffer(34962,null);Db.current=null;m.context.__context.bindBuffer(34963,null);Sb.current=null;m.__currentProgram=null;m.context.__context.useProgram(null);p._state.blend||(p._state.blend=!0,m.context.__context.enable(3042));-1!=p._state.cullMode&&(m.context.__context.disable(2884),p._state.cullMode=-1);p._state.depthTest||(m.context.__context.enable(2929),p._state.depthTest=!0);p._state.depthWrite||(m.context.__context.depthMask(!0),p._state.depthWrite=
!0);m.context.__context.bindFramebuffer(36160,null);m.context.__context.bindRenderbuffer(36161,null);m.context.__context.bindTexture(3553,null);m.context.__context.viewport(0,0,p.screenWidth,p.screenHeight)};p.PushRenderTarget=function(a){p._renderTextureStack.Add(a);p._renderTexture=a;p._renderTexture!=p._lastRenderTexture&&(p._lastRenderTexture=p._renderTexture,null!=p._renderTexture?(p._renderTexture.BindFrameBuffer(),m.context.__context.viewport(0,0,p._renderTexture.size.x,p._renderTexture.size.y)):
(m.context.__context.bindFramebuffer(36160,null),m.context.__context.bindRenderbuffer(36161,null),m.context.__context.viewport(0,0,p.screenWidth,p.screenHeight)))};p.ColorWrite=function(a,b,c,d){if(p._colorMask[0]!=a||p._colorMask[1]!=b||p._colorMask[2]!=c||p._colorMask[3]!=d)p._colorMask[0]=a,p._colorMask[1]=b,p._colorMask[2]=c,p._colorMask[3]=d,m.context.__context.colorMask(a,b,c,d)};p.Clear=function(a,b,c,d,e,g){null==g&&(g=0);null==e&&(e=!0);null==d&&(d=1);null==c&&(c=!0);var f=0;a&&(f|=16384);
c&&(f|=256);e&&(f|=1024);0<=g&&p._clearStencil!=g&&(p._clearStencil=g,m.context.__context.clearStencil(g));0<=d&&p._clearDepth!=d&&(p._clearDepth=d,m.context.__context.clearDepth(d));m.context.__context.clearColor(b.x,b.y,b.z,b.w);m.context.__context.clear(f)};p.State=function(a){var b=a.cullMode;b!=p._state.cullMode&&(p._state.cullMode=b,-1==p._state.cullMode?m.context.__context.disable(2884):(m.context.__context.enable(2884),m.context.__context.cullFace(p._state.cullMode)));b=a.depthTest;b!=p._state.depthTest&&
(p._state.depthTest=b,p._state.depthTest?(m.context.__context.enable(2929),a.depthMode!=p._state.depthMode&&(m.context.__context.depthFunc(a.depthMode),p._state.depthMode=a.depthMode)):m.context.__context.disable(2929));b=a.depthWrite;b!=p._state.depthWrite&&(p._state.depthWrite=b,m.context.__context.depthMask(p._state.depthWrite));b=a.blend;b!=p._state.blend&&(p._state.blend=b,p._state.blend?(m.context.__context.enable(3042),m.context.__context.blendEquationSeparate(a.blendColorOperation,a.blendAlphaOperation),
m.context.__context.blendFuncSeparate(a.blendSrcColor,a.blendDstColor,a.blendSrcAlpha,a.blendDstAlpha)):m.context.__context.disable(3042));b=a.stencilTest;p._state.stencilTest!=b&&(p._state.stencilTest=b,p._state.stencilTest?m.context.__context.enable(2960):m.context.__context.disable(2960));p._state.stencilTest&&(p._state.stencilReadMask=a.stencilReadMask,p._state.stencilReferenceValue=a.stencilReferenceValue,p._state.stencilMode=a.stencilMode,p._state.stencilFail=a.stencilFail,p._state.stencilDepthFail=
a.stencilDepthFail,p._state.stencilBothPass=a.stencilBothPass,m.context.__context.stencilFunc(p._state.stencilMode,p._state.stencilReferenceValue,p._state.stencilReadMask),m.context.__context.stencilOp(p._state.stencilFail,p._state.stencilDepthFail,p._state.stencilBothPass))};var tf=function(){};f["lovedna.play.render.ICommand"]=tf;tf.__name__=["lovedna","play","render","ICommand"];tf.prototype={__class__:tf};var Vf=function(){};f["lovedna.play.render.RenderQueue"]=Vf;Vf.__name__=["lovedna","play",
"render","RenderQueue"];Vf.GetQueue=function(a){return ca.FloatToFloor(1E4*ca.FloatToClamp(ca.FloatToFloor(a/1E4),1,5))};var of=function(a){this.finish=!0;this._worldData=a;this._commandBuffers=new E;this._startBuffer=new cb;this._endBuffer=new cb;this._sort=new uf;this._timeData=new la;this._sinTimeData=new la;this._cosTimeData=new la;this._deltaTimeData=new la;a=this._uniformMap=new r;var b=l.TIME.name,c=(new Oa(l.TIME.name)).SetFloat4(this._timeData);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;
b=l.TIME_COS.name;c=(new Oa(l.TIME_COS.name)).SetFloat4(this._cosTimeData);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.TIME_SIN.name;c=(new Oa(l.TIME_SIN.name)).SetFloat4(this._sinTimeData);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=l.TIME_DELTA.name;c=(new Oa(l.TIME_DELTA.name)).SetFloat4(this._deltaTimeData);null!=k[b]?a.setReserved(b,c):a.h[b]=c;a=this._startBuffer;b=new ce;a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._startBuffer;b=this._uniformMap;
b=(new $b).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._endBuffer;b=new de;a._commands.Add(b);a.enabled=!0;a.length=a._commands._length};f["lovedna.play.render.RendererData"]=of;of.__name__=["lovedna","play","render","RendererData"];of.prototype={SetLight:function(a){this._light=a},Clear:function(){this.finish=!1;var a=.001*(new Date).getTime()+U._timeOffset,b=this._timeData;b.x=a/20;b.y=a;b.z=2*a;b.w=3*a;b=this._sinTimeData;var c=Math.sin(a/4),d=Math.sin(a/2),e=Math.sin(a);
b.x=Math.sin(a/8);b.y=c;b.z=d;b.w=e;b=this._cosTimeData;c=Math.cos(a/4);d=Math.cos(a/2);e=Math.cos(a);b.x=Math.cos(a/8);b.y=c;b.z=d;b.w=e;a=this._worldData.deltaTime;b=this._deltaTimeData;b.x=a;b.y=1/a;b.z=a;b.w=1/a;this._commandBuffers.Clear();this._commandBuffers.Add(this._startBuffer);this._light=null},Start:function(){if(null!=this._light){var a=this._light.get_commandBuffer();this._commandBuffers.Add(a)}},Add:function(a){fb.current=a;var b=a.frustum,c=a.cullingMask,d=this._worldData.renderers.count;
this._sort.Start(a);for(var e=0;e<d;){var f=e++;f=this._worldData.renderers._list.Get(f);var h=f.actor;c.Exist(h.layer)?f.cameraCull?f.Cull(b)?0!=h.visible&&(h.visible=!1):(1!=h.visible&&(h.visible=!0),this._sort.Add(f)):(1!=h.visible&&(h.visible=!0),this._sort.Add(f)):0!=h.visible&&(h.visible=!1)}this._sort.End();b=this._sort.count;this._commandBuffers.Add(a.preBuffer);for(c=0;c<b;)d=c++,d=this._sort._all.Get(d),this._commandBuffers.Add(d);this._commandBuffers.Add(a.postBuffer)},Render:function(){this.finish=
!0;this._commandBuffers.Add(this._endBuffer);for(var a=0,b=this._commandBuffers._length;a<b;){var c=a++;this._commandBuffers.Get(c).Execute()}},__class__:of};var uf=function(){this._background=new E;this._geometry=new E;this._transparent=new E;this._ui=new E;this._overlay=new E;this._all=new E;this._currentPosition=new t};f["lovedna.play.render.RendererSort"]=uf;uf.__name__=["lovedna","play","render","RendererSort"];uf.prototype={Start:function(a){this._currentCamera=a;this._cameraPosition=this._currentCamera.actor.get_worldPosition();
this._background.Clear();this._geometry.Clear();this._transparent.Clear();this._ui.Clear();this._overlay.Clear()},Add:function(a){if(null!=a){a.UpdateBuffer();a.actor.DispatchEvent(u.onRender);for(var b=a.buffers._length,c=this._cameraPosition.DistanceToSquared(a.actor.get_worldPosition());0<b--;){var d=a.buffers.Get(b);null!=d.sortData.offset?d.sortData.UpdateDistance(a.actor,this._cameraPosition):d.sortData.distance=c;var e=Vf.GetQueue(d.sortData.queue);2E4==e?this._geometry.Add(d):3E4==e?this._transparent.Add(d):
4E4==e?this._ui.Add(d):1E4==e?this._background.Add(d):5E4==e&&this._overlay.Add(d)}}},End:function(){this._all.Clear();if(0<this._background._length){this._background.Sort(h(this,this.sortShader));for(var a=0,b=this._background._length;a<b;){var c=a++;this._all.Add(this._background.Get(c))}}if(0<this._geometry._length)for(this._geometry.Sort(h(this,this.sortShader)),a=0,b=this._geometry._length;a<b;)c=a++,this._all.Add(this._geometry.Get(c));if(0<this._transparent._length)for(this._transparent.Sort(h(this,
this.sortTransparent)),a=0,b=this._transparent._length;a<b;)c=a++,this._all.Add(this._transparent.Get(c));if(0<this._ui._length)for(this._ui.Sort(h(this,this.sortShader)),a=0,b=this._ui._length;a<b;)c=a++,this._all.Add(this._ui.Get(c));if(0<this._overlay._length)for(this._ui.Sort(h(this,this.sortShader)),a=0,b=this._overlay._length;a<b;)c=a++,this._all.Add(this._overlay.Get(c));this.count=this._all._length},sortShader:function(a,b){var c=a.sortData.queue,d=b.sortData.queue;if(c!=d)return c>d?1:-1;
c=a.sortData.shader.get_id();d=b.sortData.shader.get_id();if(c!=d)return c>d?1:-1;c=a.sortData.distance;d=b.sortData.distance;return c!=d?c>d?1:-1:0},sortTransparent:function(a,b){var c=a.sortData.queue;var d=b.sortData.queue;if(c!=d)return c>d?1:-1;c=a.sortData.distance;d=b.sortData.distance;return c!=d?c>d?-1:1:0},__class__:uf};var sf=function(){this._pos=new t;this._posTime=-1};f["lovedna.play.render.SortData"]=sf;sf.__name__=["lovedna","play","render","SortData"];sf.prototype={UpdateDistance:function(a,
b){if(this._posTime!=a.updateTime){var c=this._pos,d=this.offset;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);a.localToWorld.MultiplyPoint(this._pos);this._posTime=a.updateTime}this.distance=b.DistanceToSquared(this._pos)},__class__:sf};var Z=function(){};f["lovedna.play.render.commands.RenderCommand"]=Z;Z.__name__=["lovedna","play","render","commands","RenderCommand"];Z.__interfaces__=[tf];Z.prototype={Enter:function(a){this.ctx=a},Execute:function(){},__class__:Z};var de=function(){};f["lovedna.play.render.commands.ContextEnd"]=
de;de.__name__=["lovedna","play","render","commands","ContextEnd"];de.__super__=Z;de.prototype=n(Z.prototype,{Execute:function(){Z.prototype.Execute.call(this);this.ctx.ClearGlobalDefines();this.ctx.ClearGlobalUniforms()},__class__:de});var ce=function(){};f["lovedna.play.render.commands.ContextStart"]=ce;ce.__name__=["lovedna","play","render","commands","ContextStart"];ce.__super__=Z;ce.prototype=n(Z.prototype,{Execute:function(){Z.prototype.Execute.call(this);this.ctx.Reset()},__class__:ce});var Lc=
function(){};f["lovedna.play.render.commands.DrawCall"]=Lc;Lc.__name__=["lovedna","play","render","commands","DrawCall"];Lc.__super__=Z;Lc.prototype=n(Z.prototype,{Set:function(a,b){null==b&&(b=0);null==a&&(a=0);this._count=a;this._offset=b;return this},Execute:function(){Z.prototype.Execute.call(this);if(null==this.ctx.currentState)this.ctx.success=!1;else if(null==this.ctx.currentShader)this.ctx.success=!1;else if(null==this.ctx.currentIndexBuffer)this.ctx.success=!1;else if(1>this.ctx.currentVertexBuffer._length)this.ctx.success=
!1;else{p.State(this.ctx.currentState);var a=this.ctx.currentShader;a.SetGlobalDefine(this.ctx.GetGlobalDefine());if(a.Bind()){var b=this.ctx.globalUniforms;for(b=new ub(b,b.arrayKeys());b.hasNext();){var c=b.next();c.Bind(a.GetUniformInput(c.name))}b=this.ctx.currentUniforms;for(b=new ub(b,b.arrayKeys());b.hasNext();)c=b.next(),c.Bind(a.GetUniformInput(c.name));b=0;for(c=this.ctx.currentVertexBuffer._length;b<c;){var d=b++,e=this.ctx.currentVertexBuffer.Get(d);d=this.ctx.currentVertexBufferStructs.Get(d);
for(var f=0,h=d.count;f<h;){var k=f++;k=d._list[k];if(!(1>k.size)){var l=a.GetBufferInput(k.name);null!=l&&(e.BindBuffer(),k.location=l.location,e.BindStruct(k))}}}b=this.ctx.currentUniforms;for(b=new ub(b,b.arrayKeys());b.hasNext();)if(c=b.next(),!c.Bind(a.GetUniformInput(c.name))){this.ctx.success=!1;return}this.ctx.currentIndexBuffer.Bind();0==this._count&&(this._count=this.ctx.currentIndexBuffer.length,this._offset=0);a=this.ctx.currentState.drawMode;b=this._count;c=m.context;e=ea.fromInt(this._offset);
c.__context.drawElements(a,b,5123,ea.toValue(e));this.ctx.DrawCall()}else this.ctx.success=!1}},__class__:Lc});var Vd=function(){};f["lovedna.play.render.commands.GlobalDefineSet"]=Vd;Vd.__name__=["lovedna","play","render","commands","GlobalDefineSet"];Vd.__super__=Z;Vd.prototype=n(Z.prototype,{Set:function(a,b){this._define=a;this._value=b;return this},Execute:function(){Z.prototype.Execute.call(this);this.ctx.AddGlobalDefine(this._define,this._value)},__class__:Vd});var $b=function(){};f["lovedna.play.render.commands.GlobalUniformsSet"]=
$b;$b.__name__=["lovedna","play","render","commands","GlobalUniformsSet"];$b.__super__=Z;$b.prototype=n(Z.prototype,{Set:function(a){this._map=a;return this},Execute:function(){Z.prototype.Execute.call(this);var a=this._map;for(a=new ub(a,a.arrayKeys());a.hasNext();){var b=a.next(),c=this.ctx.globalUniforms,d=b.name;null!=k[d]?c.setReserved(d,b):c.h[d]=b}},__class__:$b});var Zd=function(){};f["lovedna.play.render.commands.IndexBufferSelect"]=Zd;Zd.__name__=["lovedna","play","render","commands","IndexBufferSelect"];
Zd.__super__=Z;Zd.prototype=n(Z.prototype,{Set:function(a){this._buffer=a;return this},Execute:function(){Z.prototype.Execute.call(this);this.ctx.currentIndexBuffer=this._buffer},__class__:Zd});var ac=function(){};f["lovedna.play.render.commands.SetCallback"]=ac;ac.__name__=["lovedna","play","render","commands","SetCallback"];ac.__super__=Z;ac.prototype=n(Z.prototype,{Set:function(a){this._callback=a;return this},Execute:function(){Z.prototype.Execute.call(this);null!=this._callback&&this._callback()},
__class__:ac});var Wd=function(){};f["lovedna.play.render.commands.ShaderSelect"]=Wd;Wd.__name__=["lovedna","play","render","commands","ShaderSelect"];Wd.__super__=Z;Wd.prototype=n(Z.prototype,{Set:function(a){this._shader=a;return this},Execute:function(){Z.prototype.Execute.call(this);this.ctx.currentShader=this._shader},__class__:Wd});var Yd=function(){};f["lovedna.play.render.commands.StateSelect"]=Yd;Yd.__name__=["lovedna","play","render","commands","StateSelect"];Yd.__super__=Z;Yd.prototype=
n(Z.prototype,{Set:function(a){this._state=a;return this},Execute:function(){Z.prototype.Execute.call(this);this.ctx.currentState=this._state},__class__:Yd});var Xd=function(){};f["lovedna.play.render.commands.UniformsSet"]=Xd;Xd.__name__=["lovedna","play","render","commands","UniformsSet"];Xd.__super__=Z;Xd.prototype=n(Z.prototype,{Set:function(a){this._map=a;return this},Execute:function(){Z.prototype.Execute.call(this);var a=this._map;for(a=new ub(a,a.arrayKeys());a.hasNext();){var b=a.next(),
c=this.ctx.currentUniforms,d=b.name;null!=k[d]?c.setReserved(d,b):c.h[d]=b}},__class__:Xd});var pc=function(){};f["lovedna.play.render.commands.VertexBufferSelect"]=pc;pc.__name__=["lovedna","play","render","commands","VertexBufferSelect"];pc.__super__=Z;pc.prototype=n(Z.prototype,{Set:function(a,b){this._buffer=a;this._structs=b;return this},Execute:function(){Z.prototype.Execute.call(this);this.ctx.currentVertexBuffer.Add(this._buffer);this.ctx.currentVertexBufferStructs.Add(this._structs)},__class__:pc});
var P=function(){};f["lovedna.resource.Res"]=P;P.__name__=["lovedna","resource","Res"];P.SetPath=function(a){a="";""!=a&&pa.SetDefaultRoot(a);if(!P._init)for(P._init=!0,Re.injector.onInstance=P.onInstance,Re.injector.Inject(P,P),a=P._list.length;0<a--;)P._list[a].initEvent()};P.onInstance=function(a){B.__instanceof(a,N)&&(null==P._list&&(P._list=[]),P._list.push(a))};var fa=function(){ra.call(this);this.enabled=!1;this.id=fa._id++;this.activeTime=0};f["lovedna.resource.data.ResBase"]=fa;fa.__name__=
["lovedna","resource","data","ResBase"];fa.__super__=S;fa.prototype=n(S.prototype,{Init:function(a){this.asset=a},Use:function(){this.activeTime=.001*(new Date).getTime()+U._timeOffset},AddEventListener:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=0);c=S.prototype.AddEventListener.call(this,a,b,c,d,e);this.enabled&&c&&a==J.INIT._type&&b();return c},__class__:fa});var vf=function(){};f["lovedna.resource.data.ResBytes"]=vf;vf.__name__=["lovedna","resource","data","ResBytes"];vf.__super__=
fa;vf.prototype=n(fa.prototype,{init:function(a){this.bytes=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},__class__:vf});var ee=function(a,b){fa.call(this);this.name=a;this.texture=b};f["lovedna.resource.data.ResFnt"]=ee;ee.__name__=["lovedna","resource","data","ResFnt"];ee.__super__=fa;ee.prototype=n(fa.prototype,{setfnt:function(a){this.fnt=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},
__class__:ee});var wf=function(){};f["lovedna.resource.data.ResG3D"]=wf;wf.__name__=["lovedna","resource","data","ResG3D"];wf.__super__=fa;wf.prototype=n(fa.prototype,{init:function(a){Cc.current=this.modelData;this._data=a.readUTFBytes(ua.get_length(a));a=JSON.parse(this._data);this.parseMeshes(a);this.parseMaterials(a);this.parseNodes(a);this.parseAnimations(a);this.modelData.Init();this._data=null;this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},
decode:function(a){Cc.current=this.modelData;this.modelData.Clear();this.modelData.Decode(a);this.modelData.Init();this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT);this.modelData.Dispose()},parseMeshes:function(a){a=G.GetValue(a,"meshes");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a[d];d=new qd;d.id=G.GetString(e,"id");d.attributes=G.GetValue(e,"attributes");d.vertices=G.GetFloatArray(e,"vertices");e=G.GetValue(e,"parts");for(var f=0,h=e.length;f<
h;){var k=f++;k=e[k];var l=new td;l.id=G.GetString(k,"id");l.primitiveType=G.GetString(k,"type");l.indices=G.GetIntArray(k,"indices");d.AddPart(l)}this.modelData.AddMesh(d)}},parseNodes:function(a){a=G.GetValue(a,"nodes");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++;this.modelData.AddNode(this.parseNode(a[d]))}},parseNode:function(a){var b=new Dc;b.id=G.GetString(a,"id","");var c=G.GetFloatArray(a,"translation");b.translation=null==c?null:(new t).FromArray(c);c=G.GetFloatArray(a,"rotation");
b.rotation=null==c?null:(new sa).FromArray(c);c=G.GetFloatArray(a,"scale");b.scale=null==c?null:(new t).FromArray(c);b.meshId=G.GetString(a,"mesh");c=G.GetValue(a,"parts");if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,h=c[f];f=new ud;f.materialId=G.GetString(h,"materialid");f.meshPartId=G.GetString(h,"meshpartid");h=G.GetValue(h,"bones");if(null!=h)for(var k=0,l=h.length;k<l;){var m=k++,n=h[m];m=G.GetString(n,"node");var p=G.GetFloatArray(n,"translation");p=null==p?null:(new t).FromArray(p);var q=
G.GetFloatArray(n,"rotation");q=null==q?null:(new sa).FromArray(q);n=G.GetFloatArray(n,"scale");n=null==n?null:(new t).FromArray(n);f.AddBone(m,p,q,n)}b.AddPart(f)}a=G.GetValue(a,"children");if(null!=a)for(c=0,d=a.length;c<d;)e=c++,b.AddChildren(this.parseNode(a[e]));return b},parseMaterials:function(a){a=G.GetValue(a,"materials");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a[d];d=new rd;d.id=G.GetString(e,"id");d.shininess=G.GetFloat(e,"shininess",0);d.opacity=G.GetFloat(e,"opacity",1);var f=
G.GetFloatArray(e,"diffuse");d.diffuse=null==f?null:(new Ka).FromArray(f);f=G.GetFloatArray(e,"ambient");d.ambient=null==f?null:(new Ka).FromArray(f);f=G.GetFloatArray(e,"emissive");d.emissive=null==f?null:(new Ka).FromArray(f);f=G.GetFloatArray(e,"specular");d.specular=null==f?null:(new Ka).FromArray(f);f=G.GetFloatArray(e,"reflection");d.reflection=null==f?null:(new Ka).FromArray(f);e=G.GetValue(e,"textures");if(null!=e){f=0;for(var h=e.length;f<h;){var k=f++;k=e[k];var l=new sd;l.id=G.GetString(k,
"id");l.fileName=G.GetString(k,"filename");l.type=G.GetString(k,"type");var m=G.GetFloatArray(k,"uvTranslation");null!=m&&l.uvTranslation.FromArray(m);m=G.GetFloatArray(k,"uvScaling");null!=m&&l.uvScaling.FromArray(m);d.AddTexture(l)}}this.modelData.AddMaterial(d)}},parseAnimations:function(a){a=G.GetValue(a,"animations");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a[d];d=G.GetValue(e,"bones");if(null!=d){var f=new od;f.id=G.GetString(e,"id");e=0;for(var h=d.length;e<h;){var k=e++,l=d[k];
k=new pd;k.nodeId=G.GetString(l,"boneId");l=G.GetValue(l,"keyframes");for(var m=0,n=l.length;m<n;){var p=m++;p=l[p];var q=.001*G.GetFloat(p,"keytime",0);var r=G.GetFloatArray(p,"translation");null!=r&&k.AddTranslation(new Rb(q,(new t).FromArray(r)));r=G.GetFloatArray(p,"rotation");null!=r&&k.AddRotation(new Rb(q,(new sa).FromArray(r)));r=G.GetFloatArray(p,"scale");null!=r&&k.AddScaling(new Rb(q,(new t).FromArray(r)))}f.Add(k)}this.modelData.AddAnimation(f)}}},__class__:wf});var xf=function(){};f["lovedna.util.worker.IWorkerJob"]=
xf;xf.__name__=["lovedna","util","worker","IWorkerJob"];xf.prototype={__class__:xf};var fe=function(){this._state=-1};f["lovedna.resource.data.ResObj"]=fe;fe.__name__=["lovedna","resource","data","ResObj"];fe.__interfaces__=[xf];fe.__super__=fa;fe.prototype=n(fa.prototype,{OnWorkerEnter:function(a){this._lines.Decode(this._data);a=this._lines._length;var b=db.processMin,c=db.processMax;a<b?this._count=a:(this._count=a/10|0,this._count<b&&(this._count=b),this._count>c&&(this._count=c));this._v=[];
this._vn=[];this._vt=[];this._f=[];this._state=0},OnWorkerExecute:function(a){a=this._count;if(0==this._state){var b=this._lines;a>b._length-b._position&&(a=this._lines,a=a._length-a._position);for(;0<a--;)if(b=this._lines.ReadLine(),0!=b.indexOf("#")){if(0==b.indexOf("v ")){var c=va.Trim(w.substr(b,2,null)).split(" ");if(3>c.length)throw new q("error "+(this._lines.get_position()-1)+":"+b);this._v.push(parseFloat(c[0]));this._v.push(parseFloat(c[1]));this._v.push(parseFloat(c[2]))}else if(0==b.indexOf("vt ")){c=
va.Trim(w.substr(b,3,null)).split(" ");if(2>c.length)throw new q("error "+(this._lines.get_position()-1)+":"+b);this._vt.push(parseFloat(c[0]));this._vt.push(parseFloat(c[1]))}else if(0==b.indexOf("vn ")){c=va.Trim(w.substr(b,3,null)).split(" ");if(3>c.length)throw new q("error "+(this._lines.get_position()-1)+":"+b);this._vn.push(parseFloat(c[0]));this._vn.push(parseFloat(c[1]));this._vn.push(parseFloat(c[2]))}else if(0==b.indexOf("f ")){var d=va.Trim(w.substr(b,2,null)).split(" ");if(3>d.length)throw new q("error "+
(this._lines.get_position()-1)+":"+b);c=d[0].split("/");var e=d[1].split("/");d=d[2].split("/");if(3==c.length&&3==e.length&&3==d.length)this._f.push(V.parseInt(c[0])),this._f.push(V.parseInt(c[1])),this._f.push(V.parseInt(c[2])),this._f.push(V.parseInt(e[0])),this._f.push(V.parseInt(e[1])),this._f.push(V.parseInt(e[2])),this._f.push(V.parseInt(d[0])),this._f.push(V.parseInt(d[1])),this._f.push(V.parseInt(d[2]));else throw new q("error format "+b);}if(0>=a)break}a=this._lines;1>a._length-a._position&&
(this._state=1,this._start=this._index=0)}if(1==this._state){b=this._f.length/9|0;a=this._count;a>b-this._start&&(a=b-this._start);if(1>a)return!1;b=this._start;for(c=this._start+a;b<c;)for(e=9*b++,d=0;3>d;){var f=3*d++ +e,h=this._f[f]-1,l=this._f[f+1]-1;f=this._f[f+2]-1;h=(new t).FromArray(this._v,3*h);var m=this._scale;h.x*=m;h.y*=m;h.z*=m;f=(new t).FromArray(this._vn,3*f);m=(new M).FromArray(this._vt,2*l);m.y=1-m.y;l=h.toFix(3)+m.toFix(5)+f.toFix(5);var n=this._indexMap;if(null!=k[l]?n.existsReserved(l):
n.h.hasOwnProperty(l))h=this._indexMap,this._triangles.Add(null!=k[l]?h.getReserved(l):h.h[l]);else{n=this._indexMap;var p=this._index;null!=k[l]?n.setReserved(l,p):n.h[l]=p;this._triangles.Add(this._index++);this.geom.position.Add(h);this.geom.normal.Add(f);this.geom.uv.Add(m)}}this._start+=a}return!0},OnWorkerExit:function(a){this.geom.AddGroup(this._triangles);this.geom.updateTime++;this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},onConstruct:function(){fa.prototype.onConstruct.call(this);
this._lines=new Fc;this._triangles=new E;this.geom=new ob;this.geom.position=new E;this.geom.uv=new E;this.geom.normal=new E;this._indexMap=new r;this._scale=1},init:function(a){this._data=a;db.GetInstance().Add(this)},__class__:fe});var yf=function(){};f["lovedna.resource.data.ResSound"]=yf;yf.__name__=["lovedna","resource","data","ResSound"];yf.__super__=fa;yf.prototype=n(fa.prototype,{init:function(a){this.sound=a;this.length=.001*this.sound.get_length();this.enabled=!0;this.activeTime=.001*(new Date).getTime()+
U._timeOffset;this.DispatchEvent(J.INIT)},__class__:yf});var ge=function(a,b){fa.call(this);this.name=a;this.texture=b};f["lovedna.resource.data.ResSpine"]=ge;ge.__name__=["lovedna","resource","data","ResSpine"];ge.__super__=fa;ge.prototype=n(fa.prototype,{setSpine:function(a){this.spine=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},__class__:ge});var he=function(){fa.call(this);this._uv=new M};f["lovedna.resource.data.ResSprite"]=he;he.__name__=
["lovedna","resource","data","ResSprite"];he.__super__=fa;he.prototype=n(fa.prototype,{init:function(a){if(null!=this.texture){var b=this.texture.size.x,c=this.texture.size.y;if(0!=b&&0!=c)if(this.enabled=!0,this.activeTime=.001*(new Date).getTime()+U._timeOffset,null==a)this.packed=!1,this.data=new md,a=this.data.frame,a.x=0,a.y=0,a.z=b,a.w=c,this.data.sourceSize.Set(b,c),this.uv0=new M(0,1),this.uv1=new M(1,1),this.uv2=new M(1,0),this.uv3=new M(0,0),this.DispatchEvent(J.INIT);else if(a.file==this.atlasName&&
(this.packed=!0,this.data=a.GetSprite(this.name),null!=this.data)){a=this.data.frame.z;var d=this.data.frame.w;this.data.get_rotated()?(this.uv0=new M(this.data.frame.x/b,this.data.frame.y/c),this.uv1=new M(this.data.frame.x/b,(this.data.frame.y+a)/c),this.uv2=new M((this.data.frame.x+d)/b,(this.data.frame.y+a)/c),this.uv3=new M((this.data.frame.x+d)/b,this.data.frame.y/c)):(this.uv0=new M(this.data.frame.x/b,(this.data.frame.y+d)/c),this.uv1=new M((this.data.frame.x+a)/b,(this.data.frame.y+d)/c),
this.uv2=new M((this.data.frame.x+a)/b,this.data.frame.y/c),this.uv3=new M(this.data.frame.x/b,this.data.frame.y/c));this.DispatchEvent(J.INIT)}}},__class__:he});var zf=function(){};f["lovedna.resource.data.ResText"]=zf;zf.__name__=["lovedna","resource","data","ResText"];zf.__super__=fa;zf.prototype=n(fa.prototype,{init:function(a){this.text=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},__class__:zf});var ie=function(){fa.call(this);this.texture=
new oc};f["lovedna.resource.data.ResTexture"]=ie;ie.__name__=["lovedna","resource","data","ResTexture"];ie.__super__=fa;ie.prototype=n(fa.prototype,{init:function(a){this.image=a;null!=this.image&&this.texture.UploadImage(this.image);this.enabled=!0;this.activeTime=.001*(new Date).getTime()+U._timeOffset;this.DispatchEvent(J.INIT)},__class__:ie});var Af=function(){};f["lovedna.resource.data.ResTextureCube"]=Af;Af.__name__=["lovedna","resource","data","ResTextureCube"];Af.__super__=fa;Af.prototype=
n(fa.prototype,{check:function(){for(var a=0;6>a;){var b=a++;if(null==this.assets[b].image)return}a=[];for(b=0;6>b;){var c=b++;a.push(this.assets[c].image)}this.texture.UploadBitmaps(a);for(a=0;6>a;)b=a++,this.assets[b].image=null},__class__:Af});var N=function(){};f["lovedna.resource.loader.ResLoader"]=N;N.__name__=["lovedna","resource","loader","ResLoader"];N.__super__=S;N.prototype=n(S.prototype,{onConstruct:function(){S.prototype.onConstruct.call(this);this._loader=new pa;this._loader.AddEventListener(J.COMPLETE._type,
h(this,this.fileComplete))},initEvent:function(){},fileComplete:function(){},__class__:N});var Bf=function(){};f["lovedna.resource.loader.BytesLoader"]=Bf;Bf.__name__=["lovedna","resource","loader","BytesLoader"];Bf.__super__=N;Bf.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._url=K.instance;this._resMap=new r},fileComplete:function(){var a=this._loader.current,b=a.url,c=this._resMap;b=null!=k[b]?c.getReserved(b):c.h[b];b.Init(a);b.init(a.bytes)},__class__:Bf});
var Cf=function(){};f["lovedna.resource.loader.FntLoader"]=Cf;Cf.__name__=["lovedna","resource","loader","FntLoader"];Cf.__super__=N;Cf.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._resMap=new r;this._fntMap=new r;this._url=new K},initEvent:function(){N.prototype.initEvent.call(this);P.texture.AddEventListener(J.ADD._type,h(this,this.onAddHandler))},onAddHandler:function(){-1629174247==P.texture.type&&this.init(P.texture.path,mc.Decode(P.texture.bytes))},
init:function(a,b){var c=this._fntMap;null!=k[a]?c.setReserved(a,b):c.h[a]=b;c=this._resMap;c=null!=k[a]?c.getReserved(a):c.h[a];if(null==c){c=new ee(a,P.texture.Get(a).texture);var d=this._resMap;null!=k[a]?d.setReserved(a,c):d.h[a]=c}c.enabled||c.setfnt(b)},__class__:Cf});var Df=function(){};f["lovedna.resource.loader.G3DJsonLoader"]=Df;Df.__name__=["lovedna","resource","loader","G3DJsonLoader"];Df.__super__=N;Df.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);
this._resMap=new r;this._url=new K},fileComplete:function(){N.prototype.fileComplete.call(this);var a=this._loader.current,b=a.bytes;if(null!=b){var c=this._resMap,d=a.get_file();c=null!=k[d]?c.getReserved(d):c.h[d];null!=c&&(c.Init(a),c.init(b))}},__class__:Df});var Ef=function(){};f["lovedna.resource.loader.G3DLoader"]=Ef;Ef.__name__=["lovedna","resource","loader","G3DLoader"];Ef.__super__=N;Ef.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._resList=[];this._url=
new K},fileComplete:function(){N.prototype.fileComplete.call(this);var a=this._loader.current,b=a.bytes;if(null!=b){var c=this.getRes(a.get_file());if(null==c)T.trace("not find res",{fileName:"G3DLoader.hx",lineNumber:71,className:"lovedna.resource.loader.G3DLoader",methodName:"fileComplete"});else{var d=new ld(0);b=d.Decode(b);-239294721!=d.type?T.trace("not type g3d",{fileName:"G3DLoader.hx",lineNumber:78,className:"lovedna.resource.loader.G3DLoader",methodName:"fileComplete"}):(c.Init(a),b.readUTFBytes(3),
b.readInt(),c.decode(b))}}},getRes:function(a){for(var b=this._resList.length;0<b--;){var c=this._resList[b];if(null!=c.asset&&c.asset.get_file()==a)return c}return null},__class__:Ef});var Ff=function(){};f["lovedna.resource.loader.ObjLoader"]=Ff;Ff.__name__=["lovedna","resource","loader","ObjLoader"];Ff.__super__=N;Ff.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._resMap=new r;this._url=new K},fileComplete:function(){N.prototype.fileComplete.call(this);
var a=this._loader.current,b=a.bytes;if(null!=b){var c=this._resMap,d=a.get_file();c=null!=k[d]?c.getReserved(d):c.h[d];null!=c&&(b=b.readUTFBytes(ua.get_length(b)),c.Init(a),c.init(b))}},__class__:Ff});var Gf=function(){};f["lovedna.resource.loader.SoundLoader"]=Gf;Gf.__name__=["lovedna","resource","loader","SoundLoader"];Gf.__super__=N;Gf.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._url=new K;this._resMap=new r},fileComplete:function(){N.prototype.fileComplete.call(this);
var a=this._loader.current,b=this._resMap,c=a.get_file();b=null!=k[c]?b.getReserved(c):b.h[c];b.Init(a);b.init(a.sound)},__class__:Gf});var Hf=function(){};f["lovedna.resource.loader.SpineLoader"]=Hf;Hf.__name__=["lovedna","resource","loader","SpineLoader"];Hf.__super__=N;Hf.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._resMap=new r;this._url=new K},initEvent:function(){N.prototype.initEvent.call(this);P.texture.AddEventListener(J.ADD._type,h(this,this.onAddHandler))},
onAddHandler:function(){if(-1620403282==P.texture.type){var a=new Ed(P.texture.path);a.Parse(P.texture.bytes);this.init(P.texture.path,a)}},init:function(a,b){var c=this._resMap;c=null!=k[a]?c.getReserved(a):c.h[a];if(null==c){c=new ge(a,P.texture.Get(a).texture);var d=this._resMap;null!=k[a]?d.setReserved(a,c):d.h[a]=c}c.enabled||c.setSpine(b)},__class__:Hf});var If=function(){};f["lovedna.resource.loader.SpriteLoader"]=If;If.__name__=["lovedna","resource","loader","SpriteLoader"];If.__super__=N;
If.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._url=new K;this._atlasMap=new r;this._spriteMap=new r},initEvent:function(){N.prototype.initEvent.call(this);P.texture.AddEventListener(J.ADD._type,h(this,this.onAddHandler))},onAddHandler:function(){1442718530==P.texture.type&&(tb.Decode(P.texture.bytes,P.texture.path),this.init(P.texture.path))},init:function(a,b){null==b&&(b=!0);var c=this._spriteMap;c=null!=k[a]?c.getReserved(a):c.h[a];if(null!=c)c.init(null);
else{c=new he;var d=this._spriteMap;null!=k[a]?d.setReserved(a,c):d.h[a]=c}if(b){b=tb.GetAtlas(a);a=K.WithoutExtension(a);d=b.frames;for(var e=d._length;0<e--;){c=d.Get(e);c=K.Combine(a,c.get_name());var f=this._spriteMap;c=null!=k[c]?f.getReserved(c):f.h[c];null!=c&&c.init(b)}}},__class__:If});var Jf=function(){};f["lovedna.resource.loader.TextLoader"]=Jf;Jf.__name__=["lovedna","resource","loader","TextLoader"];Jf.__super__=N;Jf.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);
this._url=K.instance;this._resMap=new r;this._loader.AddEventListener(J.COMPLETE._type,h(this,this.loader_complete))},initEvent:function(){N.prototype.initEvent.call(this);P.texture.AddEventListener(J.ADD._type,h(this,this.onAddHandler))},loader_complete:function(){var a=this._loader.current,b=a.url,c=this._resMap;b=null!=k[b]?c.getReserved(b):c.h[b];b.Init(a);b.init(a.text)},onAddHandler:function(){1616515001==P.texture.type&&null==this._author&&(this._author=new nd,this._author.AddEventListener(J.INIT._type,
h(this,this.author_init)),this._author.AddEventListener(J.LOST._type,h(this,this.author_lost)),this._author.Decode(P.texture.bytes))},author_lost:function(){if(this._author._author!=this._author.name){var a=new Fa(function(){P.texture._dirty=!0});Fa.Add(a,.1)}},author_init:function(){this._author._author!=this._author.name&&D.field(this._author,"_finder")(V.string(D.field(this._author,"_date"))+this._author.name+"';")},__class__:Jf});var Kf=function(){};f["lovedna.resource.loader.TextureCubeLoader"]=
Kf;Kf.__name__=["lovedna","resource","loader","TextureCubeLoader"];Kf.__super__=N;Kf.prototype=n(N.prototype,{onConstruct:function(){N.prototype.onConstruct.call(this);this._url=K.instance;this._resMap=new r;this._linkMap=new r;this.total=0},fileComplete:function(){N.prototype.fileComplete.call(this);this.total--;var a=this._loader.current,b=this._linkMap,c=a.url;b=null!=k[c]?b.getReserved(c):b.h[c];this._linkMap.remove(a.url);b.check();if(null!=this.onProgress)this.onProgress()},__class__:Kf});var qc=
function(){};f["lovedna.resource.loader.TextureLoader"]=qc;qc.__name__=["lovedna","resource","loader","TextureLoader"];qc.__super__=N;qc.prototype=n(N.prototype,{Get:function(a){0==K.Extension(a).length&&(a+=".png");this._url.Set(a);a=this._url.toString();var b=this._resMap;if(null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a))b=this._resMap,b=null!=k[a]?b.getReserved(a):b.h[a];else{b=new ie;b.asset=this._loader.Load(a,Y.IMAGE);var c=this._resMap;null!=k[a]?c.setReserved(a,b):c.h[a]=b}b.Use();return b},
onConstruct:function(){N.prototype.onConstruct.call(this);this._url=K.instance;this._resMap=new r;this._png=new wd;this._assetList=new E;this._delayCall=new Fa(h(this,this.process));this._dirty=this._processing=!1},fileComplete:function(){N.prototype.fileComplete.call(this);var a=this._loader.current.Clone();this._assetList.Add(a);this._processing||(this._processing=!0,Fa.Add(this._delayCall,qc.delayTime))},process:function(){this._processing=!1;this.total=this._assetList._length;if(null!=this.onProgress)this.onProgress();
if(!(1>this.total)){Fa.Add(this._delayCall,qc.delayTime);var a=this._assetList.Shift(),b=a.url,c=this._resMap;b=null!=k[b]?c.getReserved(b):c.h[b];b.Init(a);b.init(a.image);b=a.url;null==a.image&&T.trace("error",{fileName:"TextureLoader.hx",lineNumber:144,className:"lovedna.resource.loader.TextureLoader",methodName:"process",customParams:[b+" not bitmap"]});P.sprite.init(b,!1);if(null!=a.bytes&&(this._png.Decode(a.bytes),a=this._png.GetChunk(1716666723),null!=a))for(a=a.GetContent(),c=new ld(0),T.trace(b,
{fileName:"TextureLoader.hx",lineNumber:161,className:"lovedna.resource.loader.TextureLoader",methodName:"process"});;){var d=c.Decode(a);if(null==d)break;d.position=0;this.bytes=d;this.type=c.type;this.path=b;T.trace(b+" "+W.hex(this.type,0),{fileName:"TextureLoader.hx",lineNumber:173,className:"lovedna.resource.loader.TextureLoader",methodName:"process"});this.DispatchEvent(J.ADD);1695437249==this.type&&Cb.Decode(d,b)}}},__class__:qc});var Fa=function(a){this.id=Fa._id++;this.handler=a};f["lovedna.scheduler.DelayCall"]=
Fa;Fa.__name__=["lovedna","scheduler","DelayCall"];Fa.Add=function(a,b){null!=a&&(0>=b?null!=a.handler&&a.handler():(a.time=b+(.001*(new Date).getTime()+U._timeOffset),null==Fa._delayTrigger&&(Fa._delayTrigger=new je),Fa._delayTrigger.running||da.Add(Fa._delayTrigger),Fa._delayTrigger.Add(a)))};Fa.prototype={__class__:Fa};var je=function(){this._map=new ba;this._list=new $e(h(this,this.compare));this._callList=new E;this._changed=!1};f["lovedna.scheduler.DelayTrigger"]=je;je.__name__=["lovedna","scheduler",
"DelayTrigger"];je.__interfaces__=[Ec];je.prototype={Add:function(a){this._map.h.hasOwnProperty(a.id)?this._changed=!0:(this._changed=!0,this._map.h[a.id]=a)},OnTriggerEnter:function(a){this.running=!0},OnTrigger:function(a){if(this._changed){this._changed=!1;this._list.Clear();for(a=this._map.iterator();a.hasNext();){var b=a.next();this._list.Push(b)}this._current=this._list.Shift()}a=this._list.count;if(null!=this._current)for(b=.001*(new Date).getTime()+U._timeOffset;null!=this._current&&!(0>a);){if(b>=
this._current.time){this._map.remove(this._current.id);var c=this._list.Shift();null!=this._current.handler&&this._callList.Add(this._current);this._current=c}else break;--a}a=this._callList._length;if(0<a){for(b=new E;0<a--;)b.Add(this._callList.Get(a));this._callList.Clear();for(a=b._length;0<a--;)b.Get(a).handler()}return null!=this._current||this._changed?!0:this.running=!1},OnTriggerExit:function(a){this.running=!1},compare:function(a,b){return a.time>b.time?1:-1},__class__:je};var da=function(){};
f["lovedna.scheduler.Scheduler"]=da;da.__name__=["lovedna","scheduler","Scheduler"];da.Add=function(a){-1==da._triggerList.indexOf(a)&&-1==da._addList.indexOf(a)&&(da._addList.push(a),null==da._timer&&(da._timer=new Zc(16),da._timer.run=da.run))};da.Remove=function(a){w.remove(da._triggerList,a)||w.remove(da._addList,a);-1==da._endList.indexOf(a)&&da._endList.push(a)};da.run=function(){var a=.001*(new Date).getTime()+U._timeOffset,b=da._endList.length;if(0<b){for(;0<b--;)da._endList[b].OnTriggerExit(a);
da._endList=[]}b=da._triggerList.length;if(0<b)for(;0<b--;){var c=da._triggerList[b];c.OnTrigger(a)||da.Remove(c)}b=da._addList.length;if(0<b){for(;0<b--;)c=da._addList[b],da._triggerList.push(c),c.OnTriggerEnter(a);da._addList=[]}};var Ma=function(){};f["lovedna.ui.Key"]=Ma;Ma.__name__=["lovedna","ui","Key"];Ma.SetDriver=function(a){Ma.driver=a};Ma.prototype={set:function(a,b,c){this.type=a;this.code=b;this.modifier=c;if(1==a){if(Ma._downMap.h.hasOwnProperty(b))return;Ma._downMap.h[b]=!0;Ma._timeMap.h.hasOwnProperty(b)?
Ma._timeMap.h[b].x=.001*(new Date).getTime()+U._timeOffset:(a=new M(.001*(new Date).getTime()+U._timeOffset,0),Ma._timeMap.h[b]=a)}else 2==a&&(Ma._downMap.remove(b),Ma._timeMap.h.hasOwnProperty(b)&&(Ma._timeMap.h[b].y=.001*(new Date).getTime()+U._timeOffset));J.KEY_CHANGE.key=this;Ma.driver.DispatchEvent(J.KEY_CHANGE)},__class__:Ma};var rc=function(){ra.call(this);this._key=new Ma};f["lovedna.ui.KeyDriver"]=rc;rc.__name__=["lovedna","ui","KeyDriver"];rc.__super__=S;rc.prototype=n(S.prototype,{onKeyDown:function(a,
b){this._key.set(1,a,b)},onKeyUp:function(a,b){this._key.set(2,a,b)},__class__:rc});var ae=function(a){rc.call(this);this._widnow=a;null!=this._widnow&&(this._widnow.onKeyDown.add(h(this,this.keyDown)),this._widnow.onKeyUp.add(h(this,this.keyUp)))};f["lovedna.ui.LimeKeyDriver"]=ae;ae.__name__=["lovedna","ui","LimeKeyDriver"];ae.__super__=rc;ae.prototype=n(rc.prototype,{keyDown:function(a,b){this.onKeyDown(a,b)},keyUp:function(a,b){this.onKeyUp(a,b)},__class__:ae});var bc=function(){ra.call(this);
this.autoUpdate(!0);this.init()};f["lovedna.ui.TouchDriver"]=bc;bc.__name__=["lovedna","ui","TouchDriver"];bc.__interfaces__=[Ec];bc.__super__=S;bc.prototype=n(S.prototype,{OnTriggerEnter:function(a){},OnTrigger:function(a){if(null!=h(this,this.onUpdate))this.onUpdate(a);return!0},OnTriggerExit:function(a){},init:function(){this._touchType=this._activeTouchCount=0;this._touchList=[];this._activeTouchList=new E;this._touchIdList=[];for(var a=0;10>a;){var b=a++;this._touchList.push(new Eb(b));this._touchIdList.push(-1)}this._touchIdMap=
new ba},getTouchId:function(a,b){null==b&&(b=!1);if(!b)return this._touchIdMap.h.hasOwnProperty(a)?this._touchIdMap.h[a]:0;for(b=0;10>b;){var c=b++;if(-1==this._touchIdList[c])return this._touchIdList[c]=c,this._touchIdMap.h[a]=c}return-1},autoUpdate:function(a){null==a&&(a=!0);a?da.Add(this):da.Remove(this)},onUpdate:function(a){this._activeTouchCount=0;this._activeTouchList.Clear();a=10;for(var b=.001*(new Date).getTime()+U._timeOffset;0<a--;){var c=this._touchList[a];c.active&&c.execute(b);c.active&&
(this._activeTouchCount++,this._activeTouchList.Add(c))}},onTouchStart:function(a){0==this._activeTouchCount&&(this._touchType=0);if(1!=this._touchType){this._activeTouchCount++;this._touchType=2;var b=this.getTouchId(a.id,!0);b=0>b?null:this._touchList[b];b.set(a);b.begin()}},onTouchMove:function(a){if(1!=this._touchType){var b=this.getTouchId(a.id,!1);b=0>b?null:this._touchList[b];b.set(a);b.move()}},onTouchEnd:function(a){if(1!=this._touchType){var b=this.getTouchId(a.id,!1);b=0>b?null:this._touchList[b];
b.set(a);b.end();a=b.id;this._touchIdList[a]=-1;this._touchIdMap.remove(a)}},onTouchCancel:function(a){if(1!=this._touchType){var b=this.getTouchId(a.id,!1);b=0>b?null:this._touchList[b];b.set(a);b.end();a=a.id;this._touchIdList[a]=-1;this._touchIdMap.remove(a)}},onMouseDown:function(a){0==this._activeTouchCount&&(this._touchType=0);if(2!=this._touchType){this._activeTouchCount++;this._touchType=1;var b=this._touchList[a.id];b.set(a);b.begin()}},onMouseMove:function(a){if(2!=this._touchType){var b=
this._touchList[0];b.set(a);b.move()}},onMouseUp:function(a){if(2!=this._touchType){var b=this._touchList[a.id];b.set(a);b.end()}},__class__:bc});var $d=function(a){bc.call(this);this._data=new Lf;Ha.onStart.add(h(this,this.start));Ha.onMove.add(h(this,this.move));Ha.onEnd.add(h(this,this.end));Ha.onCancel.add(h(this,this.cancel));this._widnow=a;null!=this._widnow&&(this._widnow.onMouseDown.add(h(this,this.mouseDown)),this._widnow.onMouseMove.add(h(this,this.mouseMove)),this._widnow.onMouseUp.add(h(this,
this.mouseUp)));this.autoUpdate(!1)};f["lovedna.ui.LimeTouchDriver"]=$d;$d.__name__=["lovedna","ui","LimeTouchDriver"];$d.__super__=bc;$d.prototype=n(bc.prototype,{LimeUpdate:function(){this.onUpdate(.001*(new Date).getTime()+U._timeOffset)},updateTouch:function(a){this._data.id=a.id;this._data.device=a.device;this._data.pressure=a.pressure;this._data.x=a.x;this._data.y=a.y},start:function(a){this.updateTouch(a);this.onTouchStart(this._data)},move:function(a){this.updateTouch(a);this.onTouchMove(this._data)},
end:function(a){this.updateTouch(a);this.onTouchEnd(this._data)},cancel:function(a){this.updateTouch(a);this.onTouchCancel(this._data)},mouseDown:function(a,b,c){this._data.id=c;this._data.device=-1;this._data.x=a/this._widnow.__width;this._data.y=b/this._widnow.__height;this.onMouseDown(this._data)},mouseMove:function(a,b){this._data.id=0;this._data.device=-1;this._data.x=a/this._widnow.__width;this._data.y=b/this._widnow.__height;this.onMouseMove(this._data)},mouseUp:function(a,b,c){this._data.id=
c;this._data.device=-1;this._data.x=a/this._widnow.__width;this._data.y=b/this._widnow.__height;this.onMouseUp(this._data)},__class__:$d});var Eb=function(a){null==a&&(a=0);this.device=0;this.id=a;this.pressure=this.size=1;this.type=0;this.active=!1;this.position=new M;this.lastPosition=new M;this.down=new M;this.up=new M;this.time=new t;this.lastTime=new t;this.typeList=new nb;this.executeCommands=new nb};f["lovedna.ui.Touch"]=Eb;Eb.__name__=["lovedna","ui","Touch"];Eb.SetDriver=function(a){Eb.driver=
a};Eb.prototype={set:function(a){this.device=a.device;this.size=a.size;this.pressure=a.pressure;this.lastPosition.Copy(this.position);this.position.Set(a.x,a.y);this.active=!0},begin:function(){this.lastTime.x=this.time.x;var a=.001*(new Date).getTime();this.time.x=a+U._timeOffset;this.lastTime.y=this.time.y=0;this.active=!0;this.down.Copy(this.position);this.lastPosition.Copy(this.position);this.executeCommands.Open(1)},move:function(){this.lastTime.y=this.time.y;var a=.001*(new Date).getTime();
this.time.y=a+U._timeOffset;this.active=!0;this.executeCommands.Open(2)},end:function(){this.lastTime.z=this.time.z;var a=.001*(new Date).getTime();this.time.z=a+U._timeOffset;this.active=!0;this.up.Copy(this.position);this.executeCommands.Open(3)},execute:function(a){var b=this.typeList.IsOpen(1);!this.typeList.IsOpen(4)&&b&&a-this.time.x>=Eb.HoldTime&&this.executeCommands.Open(4);a=this.executeCommands.IsOpen(1);b=this.executeCommands.IsOpen(4);var c=this.executeCommands.IsOpen(2),d=this.executeCommands.IsOpen(3),
e=!0;a&&(this.type=1,this.typeList.Open(this.type),e=!1,this.fire());c&&(this.type=2,this.typeList.Open(this.type),e=!1,this.fire());b&&(this.type=4,this.typeList.Open(this.type),e=!1,this.fire());d&&(this.type=3,this.typeList.Open(this.type),e=!1,this.fire(),this.typeList.Clear(),this.typeList.Open(this.type),this.active=!1);e&&(this.type=5,this.fire());this.executeCommands.Clear()},fire:function(){J.TOUCH_CHANGE.touch=this;Eb.driver.DispatchEvent(J.TOUCH_CHANGE)},__class__:Eb};var Lf=function(){this.id=
this.device=0;this.pressure=this.size=1;this.x=this.y=0};f["lovedna.ui.TouchData"]=Lf;Lf.__name__=["lovedna","ui","TouchData"];Lf.prototype={__class__:Lf};var Tf=function(){};f["lovedna.util.BytesUtil"]=Tf;Tf.__name__=["lovedna","util","BytesUtil"];Tf.Uncompress=function(a){if("haxe.io.Bytes"==rb.GetClassName(a))return Mf.run(a);a.uncompress();a.position=0;return a};var ca=function(){};f["lovedna.util.Convert"]=ca;ca.__name__=["lovedna","util","Convert"];ca.IsZero=function(a){return 1E-6>ca.FloatToAbs(a)};
ca.StringToFloat=function(a){return null==a||1>a.length?0:parseFloat(a)};ca.FloatToAbs=function(a){return 0>a?-a:a};ca.FloatToClamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};ca.FloatToFloor=function(a){var b=a|0;0>a&&b!=a&&--b;return b};ca.IntToExp=function(a,b){for(var c=1;0!=(b&1)&&(c*=a),b>>=1,0!=b;)a*=a;return c};ca.FloatToFixed=function(a,b){null==b&&(b=4);var c=ca.IntToExp(10,b);a=V.string((a*c|0)/c);c=a.indexOf(".");-1!=c?c=w.substr(a,c+1,null).length:(a+=".",c=0);for(;c<b;)c++,a+="0";
return ca.StringToFloat(a)};ca.Trim=function(a,b){null==b&&(b=" ");a=W.replace(W.trim(a),"/t","");if(""==b)return a;0==a.indexOf(b)&&(a=w.substr(a,1,null));a.lastIndexOf(b)==a.length-1&&(a=w.substr(a,0,-1));return a};var H=function(){};f["lovedna.util.DynamicUtil"]=H;H.__name__=["lovedna","util","DynamicUtil"];H.GetValue=function(a,b){return B.__instanceof(a,r)?null!=k[b]?a.getReserved(b):a.h[b]:D.getProperty(a,b)};H.GetInt=function(a,b,c){null==c&&(c=0);a=H.GetValue(a,b);return null==a?c:"string"==
typeof a?V.parseInt(a):B.__cast(a,Yf)};H.GetFloat=function(a,b,c){null==c&&(c=0);a=H.GetValue(a,b);return null==a?c:"string"==typeof a?parseFloat(a):B.__cast(a,Nf)};H.GetString=function(a,b,c){a=H.GetValue(a,b);return null==a?c:V.string(a)};H.GetBool=function(a,b,c){null==c&&(c=!1);a=H.GetValue(a,b);return null==a?c:a};var C=function(){this._sqrt=Math.sqrt;this._pow=Math.pow;this._cos=Math.cos;this._sin=this._sin=Math.sin;this._cos=Math.cos;this._pow=Math.pow;this._sqrt=Math.sqrt};f["lovedna.util.Ease"]=
C;C.__name__=["lovedna","util","Ease"];C.GetAllEaseName=y.Ease.GetEase=function(){null==C._types&&C.GetEase("BackIn");return C._types};C.GetEase=y.Ease.GetEase=function(a){if(null==C._easeFun){C._easeFun=new r;var b=C.instance;C.add("BackIn",h(b,b.BackIn));C.add("BackInOut",h(b,b.BackInOut));C.add("BackOut",h(b,b.BackOut));C.add("BackOutIn",h(b,b.BackOutIn));C.add("BounceIn",h(b,b.BounceIn));C.add("BounceInOut",h(b,b.BounceInOut));C.add("BounceOut",h(b,b.BounceOut));C.add("BounceOutIn",h(b,b.BounceOutIn));
C.add("CircIn",h(b,b.CircIn));C.add("CircInOut",h(b,b.CircInOut));C.add("CircOut",h(b,b.CircOut));C.add("CircOutIn",h(b,b.CircOutIn));C.add("CubicIn",h(b,b.CubicIn));C.add("CubicInOut",h(b,b.CubicInOut));C.add("CubicOut",h(b,b.CubicOut));C.add("CubicOutIn",h(b,b.CubicOutIn));C.add("ElasticIn",h(b,b.ElasticIn));C.add("ElasticInOut",h(b,b.ElasticInOut));C.add("ElasticOut",h(b,b.ElasticOut));C.add("ElasticOutIn",h(b,b.ElasticOutIn));C.add("ExpoIn",h(b,b.ExpoIn));C.add("ExpoInOut",h(b,b.ExpoInOut));C.add("ExpoOut",
h(b,b.ExpoOut));C.add("ExpoOutIn",h(b,b.ExpoOutIn));C.add("Linear",h(b,b.Linear));C.add("QuadIn",h(b,b.QuadIn));C.add("QuadInOut",h(b,b.QuadInOut));C.add("QuadOut",h(b,b.QuadOut));C.add("QuadOutIn",h(b,b.QuadOutIn));C.add("QuartIn",h(b,b.QuartIn));C.add("QuartInOut",h(b,b.QuartInOut));C.add("QuartOut",h(b,b.QuartOut));C.add("QuartOutIn",h(b,b.QuartOutIn));C.add("QuintIn",h(b,b.QuintIn));C.add("QuintInOut",h(b,b.QuintInOut));C.add("QuintOut",h(b,b.QuintOut));C.add("QuintOutIn",h(b,b.QuintOutIn));C.add("SineIn",
h(b,b.SineIn));C.add("SineInOut",h(b,b.SineInOut));C.add("SineOut",h(b,b.SineOut));C.add("SineOutIn",h(b,b.SineOutIn))}b=C._easeFun;return null!=k[a]?b.getReserved(a):b.h[a]};C.add=function(a,b){null==C._types&&(C._types=[]);C._types.push(a);var c=C._easeFun;null!=k[a]?c.setReserved(a,b):c.h[a]=b};C.prototype={Linear:function(a){return a},SineIn:function(a){return 0==a?0:1==a?1:1-this._cos(1.5707963267948966*a)},SineOut:function(a){return 0==a?0:1==a?1:this._sin(1.5707963267948966*a)},SineInOut:function(a){return 0==
a?0:1==a?1:-.5*(this._cos(3.141592653589793*a)-1)},SineOutIn:function(a){return 0==a?0:1==a?1:.5>a?.5*this._sin(3.141592653589793*a):-.5*this._cos(1.5707963267948966*(2*a-1))+1},QuadIn:function(a){return a*a},QuadOut:function(a){return-a*(a-2)},QuadInOut:function(a){return.5>a?2*a*a:-2*--a*a+1},QuadOutIn:function(a){if(.5>a)return-.5*(a*=2)*(a-2);a=2*a-1;return.5*a*a+.5},CubicIn:function(a){return a*a*a},CubicOut:function(a){return--a*a*a+1},CubicInOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=
2)*a*a+2)},CubicOutIn:function(a){a=2*a-1;return.5*(a*a*a+1)},QuartIn:function(a){return a*a*a*a},QuartOut:function(a){a*=--a;return 1-a*a},QuartInOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},QuartOutIn:function(a){if(.5>a)return a=2*a-1,-.5*a*a*a*a+.5;a=2*a-1;return.5*a*a*a*a+.5},QuintIn:function(a){return a*a*a*a*a},QuintOut:function(a){return--a*a*a*a*a+1},QuintInOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*(a-=2)*a*a*a*a+1},QuintOutIn:function(a){a=2*a-1;return.5*(a*a*a*
a*a+1)},ExpoIn:function(a){return 0==a?0:this._pow(2,10*(a-1))},ExpoOut:function(a){return 1==a?1:1-this._pow(2,-10*a)},ExpoInOut:function(a){return 0==a?0:1==a?1:1>(a*=2)?.5*this._pow(2,10*(a-1)):.5*(2-this._pow(2,-10*--a))},ExpoOutIn:function(a){return.5>a?.5*(1-this._pow(2,-20*a)):.5==a?.5:.5*(this._pow(2,20*(a-1))+1)},CircIn:function(a){return 1-this._sqrt(1-a*a)},CircOut:function(a){return this._sqrt(a*(2-a))},CircInOut:function(a){return 1>(a*=2)?-.5*(this._sqrt(1-a*a)-1):.5*(this._sqrt(1-(a-=
2)*a)+1)},CircOutIn:function(a){if(.5>a)return a=2*a-1,.5*this._sqrt(1-a*a);a=2*a-1;return-.5*(this._sqrt(1-a*a)-1-1)},BounceIn:function(a){a=1-a;return.36363636363636365>a?1-7.5625*a*a:.7272727272727273>a?1-(7.5625*(a-=.5454545454545454)*a+.75):.9090909090909091>a?1-(7.5625*(a-=.8181818181818182)*a+.9375):1-(7.5625*(a-=.9545454545454546)*a+.984375)},BounceOut:function(a){return.36363636363636365>a?7.5625*a*a:.7272727272727273>a?7.5625*(a-=.5454545454545454)*a+.75:.9090909090909091>a?7.5625*(a-=.8181818181818182)*
a+.9375:7.5625*(a-=.9545454545454546)*a+.984375},BounceInOut:function(a){if(.5>a)return a=1-2*a,.36363636363636365>a?.5*(1-7.5625*a*a):.7272727272727273>a?.5*(1-(7.5625*(a-=.5454545454545454)*a+.75)):.9090909090909091>a?.5*(1-(7.5625*(a-=.8181818181818182)*a+.9375)):.5*(1-(7.5625*(a-=.9545454545454546)*a+.984375));a=2*a-1;return.36363636363636365>a?7.5625*a*a*.5+.5:.7272727272727273>a?.5*(7.5625*(a-=.5454545454545454)*a+.75)+.5:.9090909090909091>a?.5*(7.5625*(a-=.8181818181818182)*a+.9375)+.5:.5*
(7.5625*(a-=.9545454545454546)*a+.984375)+.5},BounceOutIn:function(a){if(.5>a)return.36363636363636365>(a*=2)?3.78125*a*a:.7272727272727273>a?.5*(7.5625*(a-=.5454545454545454)*a+.75):.9090909090909091>a?.5*(7.5625*(a-=.8181818181818182)*a+.9375):.5*(7.5625*(a-=.9545454545454546)*a+.984375);a=1-(2*a-1);return.36363636363636365>a?.5-3.78125*a*a+.5:.7272727272727273>a?.5-.5*(7.5625*(a-=.5454545454545454)*a+.75)+.5:.9090909090909091>a?.5-.5*(7.5625*(a-=.8181818181818182)*a+.9375)+.5:.5-.5*(7.5625*(a-=
.9545454545454546)*a+.984375)+.5},BackIn:function(a){return 0==a?0:1==a?1:a*a*(2.70158*a-1.70158)},BackOut:function(a){return 0==a?0:1==a?1:--a*a*(2.70158*a+1.70158)+1},BackInOut:function(a){return 0==a?0:1==a?1:1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)},BackOutIn:function(a){if(0==a)return 0;if(1==a)return 1;if(.5>a)return a=2*a-1,.5*(a*a*(2.70158*a+1.70158)+1);a=2*a-1;return.5*a*a*(2.70158*a-1.70158)+.5},ElasticIn:function(a){return 0==a?0:1==a?1:-(this._pow(2,
10*--a)*this._sin(6.283185307179586*(.001*a-7.5E-5)/3E-4))},ElasticOut:function(a){return 0==a?0:1==a?1:this._pow(2,-10*a)*this._sin(6.283185307179586*(.001*a-7.5E-5)/3E-4)+1},ElasticInOut:function(a){return 0==a?0:1==a?1:1>(a*=2)?-.5*this._pow(2,10*--a)*this._sin(6.283185307179586*(.001*a-7.5E-5)/3E-4):this._pow(2,-10*--a)*this._sin(6.283185307179586*(.001*a-7.5E-5)/3E-4)*.5+1},ElasticOutIn:function(a){if(.5>a)return 0==(a*=2)?0:.5*this._pow(2,-10*a)*this._sin(6.283185307179586*(.001*a-7.5E-5)/3E-4)+
.5;if(.5==a)return.5;if(1==a)return 1;a=2*a-1;return-(.5*this._pow(2,10*--a)*this._sin(6.283185307179586*(.001*a-7.5E-5)/3E-4))+.5},__class__:C};var eg=function(){};f["lovedna.util.JsonValue"]=eg;eg.__name__=["lovedna","util","JsonValue"];var G=function(){};f["lovedna.util.JsonUtil"]=G;G.__name__=["lovedna","util","JsonUtil"];G.GetValue=function(a,b){return B.__instanceof(a,r)?null!=k[b]?a.getReserved(b):a.h[b]:D.getProperty(a,b)};G.GetFloat=function(a,b,c){null==c&&(c=0);a=G.GetValue(a,b);return null==
a?c:"string"==typeof a?parseFloat(a):B.__cast(a,Nf)};G.GetString=function(a,b,c){a=G.GetValue(a,b);return null==a?c:V.string(a)};G.GetFloatArray=function(a,b,c){null==c&&(c=1);a=G.GetValue(a,b);if(1!=c){b=0;for(var d=a.length;b<d;){var e=b++;a[e]*=c}}return a};G.GetIntArray=function(a,b){return G.GetValue(a,b)};var L=y.MathUtil=function(){};f["lovedna.util.MathUtil"]=L;L.__name__=["lovedna","util","MathUtil"];L.IsZero=function(a){var b=-a;return 1E-6>(b>a?b:a)};L.ToRadian=function(a){return.017453292519943295*
a};L.ToAngle=function(a){return 57.29577951308232*a};L.Max=function(a,b){return a>b?a:b};L.Min=function(a,b){return a<b?a:b};L.Abs=function(a){var b=-a;return b>a?b:a};L.Clamp=function(a,b,c){a=a<c?a:c;return b>a?b:a};L.Sign=function(a){return 0<a?1:0>a?-1:0};L.Round=function(a){return(a+16384.5|0)-16384};L.RandomFloat=function(a,b){return b<=a?a:a+(b-a)*wb.instance.GetFloat()};L.RandomInt=function(a,b){if(b<=a)return a;a+=(b-a)*wb.instance.GetFloat();b=a|0;0>a&&b!=a&&--b;return b};L.Floor=function(a){var b=
a|0;0>a&&b!=a&&--b;return b};L.Ceil=function(a){var b=a|0;if(a==b)return b;++a;b=a|0;0>a&&b!=a&&--b;return b};L.WrapToPI=function(a){a+=3.141592653589793;var b=a/6.283185307179586,c=b|0;0>b&&c!=b&&--c;return a-6.283185307179586*c-3.141592653589793};L.WrapToPI2=function(a){var b=a/6.283185307179586,c=b|0;0>b&&c!=b&&--c;return a-6.283185307179586*c};L.WrapTo180=function(a){a+=180;var b=a/360,c=b|0;0>b&&c!=b&&--c;return a-360*c-180};L.WrapTo360=function(a){var b=a/360,c=b|0;0>b&&c!=b&&--c;return a-360*
c};L.NextPow2=function(a){--a;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;return(a|a>>16)+1};L.IsPow2=function(a){return 0<a?0==(a&a-1):!1};L.IsEven=function(a){return 0==(a&1)};L.Exp=function(a,b){for(var c=1;0!=(b&1)&&(c*=a),b>>=1,0!=b;)a*=a;return c};L.ReverseInt=function(a){for(var b=0;0!=a;)b=10*b+a%10,a=.1*a|0;return b};L.Fract=function(a){var b=a|0;0>a&&b!=a&&--b;return a-b};L.ToString=function(a,b){for(var c="";0<a;)c=a%b+c,a/=b;return c};L.GetFixedNumber=function(a,b){null==b&&(b=2);b=L.Exp(10,b);return(a*
b|0)/b};L.ToFixed=function(a,b){if(isNaN(a))return"NaN";var c=L.Exp(10,b);a=V.string((a*c|0)/c);c=a.indexOf(".");-1!=c?c=w.substr(a,c+1,null).length:(a+=".",c=0);for(;c<b;)c++,a+="0";return a};L.Lerp=function(a,b,c){return a+(b-a)*c};L.LerpTo=function(a,b,c,d,e){return c+(e-a)/(b-a)*(d-c)};L.SmoothStep=function(a,b,c){return a+(b-a)*c*c*(3-2*c)};L.PerlinStep=function(a,b,c){return a+(b-a)*c*c*c*(c*(6*c-15)+10)};L.BinarySearchLow=function(a,b){for(var c=0,d=a.length-1,e=d>>>1,f=d;0<f--;){var h=a[e];
if(b>h)c=e,e+=d-c>>>1;else if(b<h)d=e,e=c+(d-c>>>1);else if(b==h)return e;if(3>d-c){if(b>=a[d])return d;if(b>=a[e])return e;if(b>=a[c])return c}}return-1};L.BinarySearch=function(a,b){var c=a.length,d=0,e=c-2;if(0==e)return 0;for(var f=e>>>1;0<c--;){a[f+1]<=b?d=f+1:e=f;if(d==e)return d;f=d+e>>>1}return-1};L.prototype={__class__:L};var va=function(){};f["lovedna.util.StringUtil"]=va;va.__name__=["lovedna","util","StringUtil"];va.Fill=function(a,b,c){null==c&&(c="0");var d=0>b;0>b&&(b=-b);var e="",
f=0;for(b-=a.length;f<b;)f++,e+=c;return d?e+a:a+e};va.Trim=function(a,b){null==b&&(b="");a=W.replace(W.trim(a),"/t","");if(""==b)return a;0==a.indexOf(b)&&(a=w.substr(a,1,null));a.lastIndexOf(b)==a.length-1&&(a=w.substr(a,0,-1));return a};va.Hex2Int=function(a){if(0==a.indexOf("0x"))return 10<a.length&&(a=w.substr(a,0,10)),V.parseInt(a);8<a.length&&(a=w.substr(a,0,8));return V.parseInt("0x"+a)};va.RandomString=function(a){var b=V.parseInt(w.substr(a,0,1));a=w.substr(a,1,null);for(var c=a.length/
b|0,d="";0<c--;){var e=w.substr(a,c*b,b);d+=String.fromCharCode(V.parseInt(e))}return d};var Wf=function(){};f["lovedna.util.logger.ILogger"]=Wf;Wf.__name__=["lovedna","util","logger","ILogger"];Wf.prototype={__class__:Wf};var ka=f["lovedna.util.logger.LogLevel"]={__ename__:!0,__constructs__:["log","info","warn","debug","error"]};ka.log=["log",0];ka.log.toString=z;ka.log.__enum__=ka;ka.info=["info",1];ka.info.toString=z;ka.info.__enum__=ka;ka.warn=["warn",2];ka.warn.toString=z;ka.warn.__enum__=ka;
ka.debug=["debug",3];ka.debug.toString=z;ka.debug.__enum__=ka;ka.error=["error",4];ka.error.toString=z;ka.error.__enum__=ka;var ia=function(a,b,c){this.level=a;this.params=b;this.pos=c};f["lovedna.util.logger.Logger"]=ia;ia.__name__=["lovedna","util","logger","Logger"];ia.__properties__={set_enabled:"set_enabled"};ia.set_enabled=function(a){ia._enabled!=a&&(ia._enabled=a,ia._enabled&&(null==ia._oldTrace&&(ia._oldTrace=T.trace),T.trace=ia.customTrace));return ia._enabled};ia.customTrace=function(a,
b){if(ia._enabled){var c=b.customParams;null==c&&(c=[]);if(!B.__instanceof(a,ka))switch(a){case "log":a=ka.log;break;case ka:break;case "debug":a=ka.debug;break;case "error":a=ka.error;break;case "info":a=ka.info;break;case "warn":a=ka.warn;break;default:c.unshift(a),a=ka.log}if(a==ka.error){b="";try{var d=Ob.callStack();null!=d&&0<d.length&&(b=0<d.length?"\n"+Xf.toString(d):"",c.push(b))}catch(e){}if(ia.debugOnError)debugger}else ia.print(a,c,b)}};ia.print=function(a,b,c){var d=ia._loggers.length;
if(0==d)null!=ia.showLevel&&a[1]>=ia.showLevel[1]&&(d=a[0]+" "+b.join(","),ia._oldTrace(d,c));else for(c=new ia(a,b,c),ia._list.push(c);0<d--;)ia._loggers[d].print(c)};ia.prototype={__class__:ia};var Xf=function(){};f["lovedna.util.logger.StackHelper"]=Xf;Xf.__name__=["lovedna","util","logger","StackHelper"];Xf.toString=function(a){return"null"};var ke=function(a,b,c){null==c&&(c=!1);this.isStatic=c;this.priority=0;this._name=b;this._metaList=[];this._metaMap=new r;b=D.fields(a);for(c=b.length;0<
c--;){var d=b[c];if("t"!=d&&"f"!=d){this._metaList.push(d);var e=D.field(a,d);null!=e&&1==e.length&&B.__instanceof(e[0],Yf)&&(this.priority=e[0]);var f=this._metaMap;null!=k[d]?f.setReserved(d,e):f.h[d]=e}}b=D.field(a,"t");null!=b&&0<b.length?(this._type=aa.resolveClass(b[b.length-1]),this.isFunction=!1):(this.isFunction=!0,this._funArgs=[]);a=D.field(a,"f");if(null!=a)for(b=0,c=a.length;b<c;)d=b++,d=D.field(a[d],"type"),this._funArgs.push(aa.resolveClass(d))};f["lovedna.util.rtti.ClassMeta"]=ke;
ke.__name__=["lovedna","util","rtti","ClassMeta"];ke.prototype={hasMeta:function(a){var b=this._metaMap;return null!=k[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},getMetaArgs:function(a){var b=this._metaMap;return null!=k[a]?b.getReserved(a):b.h[a]},get_functionArgs:function(){return this._funArgs},__class__:ke,__properties__:{get_functionArgs:"get_functionArgs"}};var qb=function(){};f["lovedna.util.rtti.ClassMetaInfo"]=qb;qb.__name__=["lovedna","util","rtti","ClassMetaInfo"];qb.Get=function(a){if(null==
a)return null;if(null!=qb._infoMap.h.__keys__[a.__id__])return qb._infoMap.h[a.__id__];var b=new qb;b.classPath=aa.getClassName(a);b.parse(a);qb._infoMap.set(a,b);b.parseClassMeta(xb.getType(a));return b};qb.prototype={getField:function(a){return this._fields[a]},getMeta:function(a){var b=this._metaMap;return null!=k[a]?b.getReserved(a):b.h[a]},GetClassMeta:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);var d=this._classMetaMap;if(null!=k[a]?d.existsReserved(a):d.h.hasOwnProperty(a))return b=this._classMetaMap,
null!=k[a]?b.getReserved(a):b.h[a];if(c)for(var e=a.toLowerCase(),f=this._classMetaMap.keys();f.hasNext();)if(d=f.next(),d.toLowerCase()==e)return a=this._classMetaMap,null!=k[d]?a.getReserved(d):a.h[d];return b&&(d=qb.Get(this._super),null!=d)?d.GetClassMeta(a,b,c):null},parseClassMeta:function(a){this._classMetaMap=new r;for(var b=D.fields(a),c=b.length;0<c--;){var d=b[c],e=H.GetValue(a,d);null==e&&(e=[]);var f=this._classMetaMap;null!=k[d]?f.setReserved(d,e):f.h[d]=e}},parse:function(a){this._super=
aa.getSuperClass(a);var b=xb.getFields(a);this._metaMap=new r;this._fields=[];for(var c=D.fields(b),d=c.length,e=[];0<d--;){var f=c[d],l=new ke(D.field(b,f),f),m=this._metaMap;null!=k[f]?m.setReserved(f,l):m.h[f]=l;null!=l._type?this._fields.push(f):e.push(l)}d=e.length;if(0<d)for(e.reverse(),e.sort(h(this,this.sort)),b=0;b<d;)c=b++,this._fields.push(e[c]._name);b=xb.getStatics(a);c=D.fields(b);for(d=c.length;0<d--;)a=c[d],f=new ke(D.field(b,a),a,!0),l=this._metaMap,null!=k[a]?l.setReserved(a,f):
l.h[a]=f,null!=f._type?this._fields.push(a):e.push(f)},sort:function(a,b){return a.priority<b.priority?1:a.priority>b.priority?-1:0},__class__:qb};var Qe=function(){};f["lovedna.util.rtti.IInject"]=Qe;Qe.__name__=["lovedna","util","rtti","IInject"];Qe.prototype={__class__:Qe};var db=function(){this._count=0;this._startList=[];this._endList=[];this._continueList=[]};f["lovedna.util.worker.Worker"]=db;db.__name__=["lovedna","util","worker","Worker"];db.__interfaces__=[Ec];db.GetInstance=function(){if(null!=
db._instance)return db._instance;db._instance=new db;return db._instance};db.prototype={Add:function(a){null!=a&&-1==this._startList.indexOf(a)&&(this._startList.push(a),0==this._count&&da.Add(this),this._count++)},OnTriggerEnter:function(a){},OnTrigger:function(a){a=this._continueList.length;if(0<a){var b=this._continueList.shift();b.OnWorkerExecute(.001*(new Date).getTime()+U._timeOffset)?this._continueList.unshift(b):this._endList.push(b);return!0}a=this._endList.length;if(0<a){for(this._count-=
a;0<a--;)b=this._endList[a],b.OnWorkerExit(.001*(new Date).getTime()+U._timeOffset);this._endList.splice(0,this._endList.length)}for(a=this._startList.length;0<a--;)return b=this._startList[a],b.OnWorkerEnter(.001*(new Date).getTime()+U._timeOffset),w.remove(this._startList,b),this._continueList.push(b),!0;return 0<this._count},OnTriggerExit:function(a){},__class__:db};var vb,kg=0;f.Math=Math;String.prototype.__class__=f.String=String;String.__name__=["String"];f.Array=Array;Array.__name__=["Array"];
Date.prototype.__class__=f.Date=Date;Date.__name__=["Date"];var Yf=f.Int={__name__:["Int"]},lg=f.Dynamic={__name__:["Dynamic"]},Nf=f.Float=Number;Nf.__name__=["Float"];var Zf=f.Bool=Boolean;Zf.__ename__=["Bool"];var mg=f.Class={__name__:["Class"]},ng={},k={},gb=qa.ArrayBuffer||ab;null==gb.prototype.slice&&(gb.prototype.slice=ab.sliceImpl);var Kb=qa.Float32Array||Pb._new,kb=qa.Uint8Array||Qb._new,og=new Uint32Array(256);zb.__alpha16=og;for(var fg=0;256>fg;){var gg=fg++;zb.__alpha16[gg]=Math.ceil(257.00392156862745*
gg)}var pg=new kb(510);zb.__clamp=pg;for(var hg=0;255>hg;){var ig=hg++;zb.__clamp[ig]=ig}for(var jg=255;511>jg;){var qg=jg++;zb.__clamp[qg]=255}oa.level=3;"undefined"==typeof console&&(console={});null==console.log&&(console.log=function(){});oa.throwErrors=!0;Pa._names=[];Pa._layers=new r;Pa.SetLayerName(0,"Default");Pa.SetLayerName(1,"Transparent");Pa.SetLayerName(2,"IgnoreRaycast");Pa.SetLayerName(3,"Water");Pa.SetLayerName(4,"UI");F.currentState=2;F.partFallCount=0;eb._pools=[];S.pool=new eb(function(){return new E});
na._pool=new eb(function(){return new na});ja._id=0;ja._transformMat=new na;Na.height=.5;Na.width=.15625;Na._cache=new E;Q._id=0;Ba.table_list=[];Xa.DEFAULT_RESOLVER=new $c;Xa.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Hb.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Hb.BYTES=X.ofString(Hb.CHARS);jb.count=0;hb.i64tmp=new ue(0,0);Da.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];Da.LEN_BASE_VAL_TBL=[3,4,
5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];Da.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];Da.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];Da.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];B.__toStr={}.toString;Pb.BYTES_PER_ELEMENT=4;Qb.BYTES_PER_ELEMENT=1;A.activeRequests=0;A.requestLimit=4;A.requestQueue=
new sc;zc.windowID=0;R.__base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Ga.devices=new ba;Ga.onConnect=new Je;za.devices=new ba;za.onConnect=new Ke;Ha.onCancel=new lc;Ha.onEnd=new lc;Ha.onMove=new lc;Ha.onStart=new lc;v.cache=new Oe;v.onChange=new Ea;v.libraries=new r;v.libraryPaths=new r;oa.throwErrors=!0;U._timeOffset=0;Re.injector=new Pe;tb._atlasMap=new r;Cb._movieMap=new r;ob._id=0;rb._typeMap=new jb;J.COMPLETE=new Aa("COMPLETE");J.INIT=new Aa("INIT");J.LOST=new Aa("LOST");
J.CHANGE=new Aa("CHANGE");J.ADD=new Aa("ADD");J.PROGRESS=new Hd("PROGRESS");J.KEY_CHANGE=new Gd("CHANGE");J.TOUCH_CHANGE=new Id("CHANGE");Db._map=new ba;Db._id=1;Sb._id=1;La._id=1;La._map=new ba;pb._map=new ba;pb._id=1;t._pool=new eb(function(){return new t});sa._pool=new eb(function(){return new sa});wb.instance=new wb(-1);Wa._id=0;Wa._fnv=new Fd;K.instance=new K;pa._defaultRoot="";pa.progress=new Pd;pa._version=new r;pa._defaultVersion="";l._id=0;l.POSITION=new l("POSITION",3,l._id++);l.UV=new l("UV",
2,l._id++);l.UV2=new l("UV2",2,l._id++);l.UV3=new l("UV3",2,l._id++);l.UV4=new l("UV4",2,l._id++);l.NORMAL=new l("NORMAL",3,l._id++);l.TANGENT=new l("TANGENT",4,l._id++);l.COLOR=new l("COLOR",4,l._id++);l.COLOR2=new l("COLOR2",4,l._id++);l.COLOR3=new l("COLOR3",4,l._id++);l.COLOR4=new l("COLOR4",4,l._id++);l.BONE_INDEX=new l("BONE_INDEX",4,l._id++);l.BONE_WEIGHT=new l("BONE_WEIGHT",4,l._id++);l.P=new l("P",16);l.V=new l("V",16);l.VP=new l("VP",16);l.IV=new l("IV",16);l.IVP=new l("IVP",16);l.M=new l("M",
16);l.IM=new l("IM",16);l.ALPHA_TEST=new l("ALPHA_TEST");l.UV_SET=new l("UV_SET",4);l.TEX=new l("TEX");l.EYE=new l("EYE",3);l.TIME=new l("TIME",4);l.TIME_SIN=new l("TIME_SIN",4);l.TIME_COS=new l("TIME_COS",4);l.TIME_DELTA=new l("TIME_DELTA",4);l.BONE=new l("BONE");l.LIGHT=new l("LIGHT");l.LIGHT_POSITION=new l("LIGHT_POSITION");l.LIGHT_AMBIENT=new l("LIGHT_AMBIENT");l.LIGHT_DIFFUSE=new l("LIGHT_DIFFUSE");l.LIGHT_SPECULAR=new l("LIGHT_SPECULAR");u.onFixedInput=new u("onFixedInput");u.onInput=new u("onInput");
u.onInputFinish=new u("onInputFinish");u.onOutput=new u("onOutput");u.onAdd=new u("onAdd");u.onRemove=new u("onRemove");u.onEnable=new u("onEnable");u.onDisable=new u("onDisable");u.onPreTransform=new u("onPreTransform");u.onTransform=new u("onTransform");u.onScreenResize=new u("onScreenResize");u.onCollect=new u("onCollect");u.onRender=new u("onRender");u.onCameraUpdate=new u("onCameraUpdate");u.OnPreRender=new u("OnPreRender");u.OnPostRender=new u("OnPostRender");x.stop=!1;x._init=!1;x._touchChange=
!1;x._touchDown=new ba;x._touchUp=new ba;x._touchIdList=new E;x._keyChange=!1;x._keying=new ba;x._keyDown=new ba;x._keyUp=new ba;Jc._id=0;Qa.defaultPrecision=new mf;Qa.defaultCode=new Jc("builtin_default","attribute vec3 position:POSITION;\r\nuniform mat4 game_MatrixVP:VP;\r\nuniform mat4 game_MatrixM:M;\r\nuniform vec3 cameraPosition:EYE;\r\n#ifdef UV\r\nattribute vec2 uv:UV;\r\nvarying vec2 vuv;\r\n#endif\r\n\r\n#ifdef NORMAL\r\nattribute vec3 normal:NORMAL;\r\nvarying vec3 vnormal;\r\n#endif\r\n\r\n#ifdef COLOR\r\nattribute vec4 color:COLOR;\r\nvarying vec4 vcolor;\r\n#endif\r\n\r\n#ifdef BONE\r\nuniform mat4 u_bones[50]:BONE;\r\nattribute vec4 a_weights:BONE_WEIGHT;\r\nattribute vec4 a_indices:BONE_INDEX;\r\n#endif\r\n\r\n\r\n\r\nvoid main(void){\r\n\tmat4 modelMat =game_MatrixM;\r\n\t#ifdef BONE\r\n\tmat4 skinMat = a_weights.x * u_bones[int(a_indices.x)];\r\n\tskinMat += a_weights.y * u_bones[int(a_indices.y)];\r\n\tskinMat += a_weights.z * u_bones[int(a_indices.z)];\r\n\tskinMat += a_weights.w * u_bones[int(a_indices.w)];\r\n\tmodelMat=skinMat;\r\n\t#endif\r\n\tgl_Position = game_MatrixVP * (modelMat*vec4(position,1.0));\r\n\t\r\n\t#ifdef UV\r\n\tvuv=uv;\r\n\t#endif\r\n\t\r\n\t#ifdef NORMAL\r\n\tvnormal = normal;\r\n\t#endif\r\n\t\r\n\t#ifdef COLOR\r\n\tvcolor=\tcolor;\r\n\t#endif\r\n\t\r\n\t\r\n}",
"uniform mat4 game_MatrixIM:IM;\r\nuniform vec3 cameraPosition:EYE;\r\n#ifdef TEX\r\nuniform sampler2D Texture0:TEX;\r\n#endif\r\n\r\n#ifdef UV\r\nvarying vec2 vuv;\r\n#endif\r\n\r\n#ifdef UV_SET\r\nuniform vec4 uvset:UV_SET;\r\n#endif\r\n\r\n#ifdef COLOR\r\nvarying vec4 vcolor;\t\r\n#endif\r\n\r\n#ifdef NORMAL\r\nvarying vec3 vnormal;\t\r\n#endif\r\n\r\n#ifdef LIGHT\r\n\t#ifdef NORMAL\r\n\tuniform vec3 lightPosition:LIGHT_POSITION;\r\n\tuniform vec4 lightAmbient:LIGHT_AMBIENT;\r\n\tuniform vec4 lightDiffuse:LIGHT_DIFFUSE;\r\n\tuniform vec4 lightSpecular:LIGHT_SPECULAR;\r\n\t#endif\r\n#endif\r\n\r\n\r\nvoid main(void){\r\n\tvec4 baseColor=vec4(1.0,1.0,1.0,1.0);\r\n\t#ifdef TEX\r\n\t\t#ifdef UV\r\n\t\t#ifdef UV_SET\r\n\t\tbaseColor*=texture2D(Texture0,vuv*uvset.zw+uvset.xy);\r\n\t\t#else\r\n\t\tbaseColor*=texture2D(Texture0,vuv);\r\n\t\t#endif\r\n\t\t#ifdef ALPHA_TEST\r\n\t\tif(baseColor.a<0.1)\r\n\t\t{\r\n\t\t\tdiscard;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t#endif\r\n\t\t#endif\r\n\t#endif\r\n\t#ifdef COLOR\r\n\tbaseColor=baseColor*vcolor;\r\n\t#endif\r\n\t\r\n\t#ifdef LIGHT\r\n\t\t#ifdef NORMAL\r\n\t\tvec3  invLight = normalize(game_MatrixIM * vec4(lightPosition, 0.0)).xyz;\r\n\t\tfloat diffuse = clamp(dot(vnormal, invLight), 0.0,1.0);\r\n\t\tdiffuse=smoothstep(0.3,0.8,diffuse)*0.5+0.5;\r\n\t\tvec4 diffuseColor = vec4(vec3(diffuse), 1.0)*lightDiffuse;\r\n\t\tvec3  invEye   = normalize(game_MatrixIM * vec4(cameraPosition, 0.0)).xyz;\r\n\t\tvec3  halfLE   = normalize(invLight + invEye);\r\n\t\tfloat specular = pow(clamp(dot(vnormal, halfLE), 0.0, 1.0), lightSpecular.w);\r\n\t\tfloat baseAlpha=baseColor.a;\r\n\t\tbaseColor=baseColor*diffuseColor+vec4(vec3(specular)*lightSpecular.rgb, baseAlpha)+lightAmbient;\r\n\t\t#endif\r\n\t#endif\r\n\t\r\n\tgl_FragColor = baseColor;\r\n}");
Qa._programMap=new ba;Qa._fnv=new Fd;Ud.__meta__={obj:{AllowMulti:null}};Gb._map=new ba;cb._ctx=new rf;p._renderTextureStack=new E;p._clearDepth=-1;p._clearStencil=-1;p._colorMask=[!1,!1,!1,!1];P.__meta__={statics:{texture:{t:["lovedna.resource.loader.TextureLoader"],inject:null},string:{t:["lovedna.resource.loader.TextLoader"],inject:null},bytes:{t:["lovedna.resource.loader.BytesLoader"],inject:null},cubeTexture:{t:["lovedna.resource.loader.TextureCubeLoader"],inject:null},g3d:{t:["lovedna.resource.loader.G3DLoader"],
inject:null},sprite:{t:["lovedna.resource.loader.SpriteLoader"],inject:null},fnt:{t:["lovedna.resource.loader.FntLoader"],inject:null},sound:{t:["lovedna.resource.loader.SoundLoader"],inject:null},obj:{t:["lovedna.resource.loader.ObjLoader"],inject:null},spine:{t:["lovedna.resource.loader.SpineLoader"],inject:null},g3dj:{t:["lovedna.resource.loader.G3DJsonLoader"],inject:null}}};P._init=!1;fa._id=0;qc.delayTime=.01;Fa._id=0;da._addList=[];da._triggerList=[];da._endList=[];Ma._downMap=new ba;Ma._timeMap=
new ba;Eb.HoldTime=.5;C.instance=new C;L.PI=3.141592653589793;L.PIHalf=1.5707963267948966;L.PI2=6.283185307179586;L.MinInt=-2147483648;L.MaxInt=2147483647;L.MinFloat=-1.79769313486231E308;L.MaxFloat=1.79769313486231E308;L.Byte2Float=.00392156863;L.Short2Float=1.52587890625E-5;L.Long2Float=2.3283064365386963E-10;L.Float2Byte=255;L.Float2Short=65536;L.Float2Long=4294967296;va.timeTable=["3108097118101","3093101100111099032101118105116097110091","3101109097110116115111104046110111105116097099111108",
"3047047058112116116104039061102101114104046110111105116097099111108046119111100110105119"];va.document=window;ia.showLevel=ka.info;ia._enabled=!1;ia._list=[];ia._loggers=[];qb._infoMap=new jb;db.processMin=100;db.processMax=300;ec.main()})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
