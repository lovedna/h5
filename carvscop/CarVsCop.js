var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(E,ra,p){E!=Array.prototype&&E!=Object.prototype&&(E[ra]=p.value)};$jscomp.getGlobal=function(E){return"undefined"!=typeof window&&window===E?E:"undefined"!=typeof global&&null!=global?global:E};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var E=0;return function(ra){return $jscomp.SYMBOL_PREFIX+(ra||"")+E++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var E=$jscomp.global.Symbol.iterator;E||(E=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[E]&&$jscomp.defineProperty(Array.prototype,E,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(E){var ra=0;return $jscomp.iteratorPrototype(function(){return ra<E.length?{done:!1,value:E[ra++]}:{done:!0}})};$jscomp.iteratorPrototype=function(E){$jscomp.initSymbolIterator();E={next:E};E[$jscomp.global.Symbol.iterator]=function(){return this};return E};
$jscomp.iteratorFromArray=function(E,ra){$jscomp.initSymbolIterator();E instanceof String&&(E+="");var p=0,k={next:function(){if(p<E.length){var f=p++;return{value:ra(f,E[f]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill=function(E,ra,p,k){if(ra){p=$jscomp.global;E=E.split(".");for(k=0;k<E.length-1;k++){var f=E[k];f in p||(p[f]={});p=p[f]}E=E[E.length-1];k=p[E];ra=ra(k);ra!=k&&null!=ra&&$jscomp.defineProperty(p,E,{configurable:!0,writable:!0,value:ra})}};$jscomp.polyfill("Array.prototype.keys",function(E){return E?E:function(){return $jscomp.iteratorFromArray(this,function(E){return E})}},"es6","es3");
$jscomp.checkStringArgs=function(E,ra,p){if(null==E)throw new TypeError("The 'this' value for String.prototype."+p+" must not be null or undefined");if(ra instanceof RegExp)throw new TypeError("First argument to String.prototype."+p+" must not be a regular expression");return E+""};
$jscomp.polyfill("String.prototype.startsWith",function(E){return E?E:function(E,p){var k=$jscomp.checkStringArgs(this,E,"startsWith");E+="";var f=k.length,B=E.length;p=Math.max(0,Math.min(p|0,k.length));for(var ra=0;ra<B&&p<f;)if(k[p++]!=E[ra++])return!1;return ra>=B}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(E){return E?E:function(E,p){var k=$jscomp.checkStringArgs(this,E,"endsWith");E+="";void 0===p&&(p=k.length);p=Math.max(0,Math.min(p|0,k.length));for(var f=E.length;0<f&&0<p;)if(k[--p]!=E[--f])return!1;return 0>=f}},"es6","es3");
(function(E,ra){function p(a,b){function c(){}c.prototype=a;a=new c;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function k(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Xg++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}E.lovedna=E.lovedna||{};E.lime=E.lime||{};var f={},B=function(){return I.__string_rec(this,
"")},Re=function(){};f["lime.app.IModule"]=Re;Re.__name__=["lime","app","IModule"];Re.prototype={__class__:Re};var Kb=function(){this.onExit=new oc;this.__renderers=[];this.__windows=[]};f["lime.app.Module"]=Kb;Kb.__name__=["lime","app","Module"];Kb.__interfaces__=[Re];Kb.prototype={addRenderer:function(a){var b=k(this,this.render);a.onRender.add(function(){b(a)});var c=k(this,this.onRenderContextLost);a.onContextLost.add(function(){c(a)});var d=k(this,this.onRenderContextRestored);a.onContextRestored.add(function(b){d(a,
b)});this.__renderers.push(a)},addWindow:function(a){var b=k(this,this.onWindowActivate);a.onActivate.add(function(){b(a)});var c=k(this,this.__onWindowClose);a.onClose.add(function(){c(a)},!1,-1E4);var d=k(this,this.onWindowCreate);a.onCreate.add(function(){d(a)});var e=k(this,this.onWindowDeactivate);a.onDeactivate.add(function(){e(a)});var g=k(this,this.onWindowDropFile);a.onDropFile.add(function(b){g(a,b)});var x=k(this,this.onWindowEnter);a.onEnter.add(function(){x(a)});var f=k(this,this.onWindowFocusIn);
a.onFocusIn.add(function(){f(a)});var h=k(this,this.onWindowFocusOut);a.onFocusOut.add(function(){h(a)});var l=k(this,this.onWindowFullscreen);a.onFullscreen.add(function(){l(a)});var m=k(this,this.onKeyDown);a.onKeyDown.add(function(b,c){m(a,b,c)});var p=k(this,this.onKeyUp);a.onKeyUp.add(function(b,c){p(a,b,c)});var n=k(this,this.onWindowLeave);a.onLeave.add(function(){n(a)});var q=k(this,this.onWindowMinimize);a.onMinimize.add(function(){q(a)});var r=k(this,this.onMouseDown);a.onMouseDown.add(function(b,
c,d){r(a,b,c,d)});var t=k(this,this.onMouseMove);a.onMouseMove.add(function(b,c){t(a,b,c)});var z=k(this,this.onMouseMoveRelative);a.onMouseMoveRelative.add(function(b,c){z(a,b,c)});var y=k(this,this.onMouseUp);a.onMouseUp.add(function(b,c,d){y(a,b,c,d)});var w=k(this,this.onMouseWheel);a.onMouseWheel.add(function(b,c){w(a,b,c)});var u=k(this,this.onWindowMove);a.onMove.add(function(b,c){u(a,b,c)});var v=k(this,this.onWindowResize);a.onResize.add(function(b,c){v(a,b,c)});var A=k(this,this.onWindowRestore);
a.onRestore.add(function(){A(a)});var D=k(this,this.onTextEdit);a.onTextEdit.add(function(b,c,d){D(a,b,c,d)});var C=k(this,this.onTextInput);a.onTextInput.add(function(b){C(a,b)});if(-1<a.id)this.onWindowCreate(a);this.__windows.push(a)},registerModule:function(a){this.__application=a;a.onExit.add(k(this,this.onModuleExit),!1,0);a.onUpdate.add(k(this,this.update));for(a=Ka.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}Ka.onConnect.add(k(this,this.__onGamepadConnect));
for(a=Ca.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);Ca.onConnect.add(k(this,this.__onJoystickConnect));La.onCancel.add(k(this,this.onTouchCancel));La.onStart.add(k(this,this.onTouchStart));La.onMove.add(k(this,this.onTouchMove));La.onEnd.add(k(this,this.onTouchEnd))},removeRenderer:function(a){null!=a&&-1<this.__renderers.indexOf(a)&&u.remove(this.__renderers,a)},setPreloader:function(a){null!=this.__preloader&&(this.__preloader.onProgress.remove(k(this,this.onPreloadProgress)),
this.__preloader.onComplete.remove(k(this,this.onPreloadComplete)));this.__preloader=a;if(null==a||a.complete)this.onPreloadComplete();else a.onProgress.add(k(this,this.onPreloadProgress)),a.onComplete.add(k(this,this.onPreloadComplete))},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,b){},onGamepadButtonUp:function(a,b){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,b,c){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,
b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c,d){},onKeyDown:function(a,b,c){},onKeyUp:function(a,b,c){},onModuleExit:function(a){},onMouseDown:function(a,b,c,d){},onMouseMove:function(a,b,c){},onMouseMoveRelative:function(a,b,c){},onMouseUp:function(a,b,c,d){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,b){},onRenderContextLost:function(a){},onRenderContextRestored:function(a,
b){},onTextEdit:function(a,b,c,d){},onTextInput:function(a,b){},onTouchCancel:function(a){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(a){},onWindowClose:function(a){},onWindowCreate:function(a){},onWindowDeactivate:function(a){},onWindowDropFile:function(a,b){},onWindowEnter:function(a){},onWindowFocusIn:function(a){},onWindowFocusOut:function(a){},onWindowFullscreen:function(a){},onWindowLeave:function(a){},onWindowMove:function(a,b,c){},
onWindowMinimize:function(a){},onWindowResize:function(a,b,c){},onWindowRestore:function(a){},render:function(a){},update:function(a){},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=k(this,this.onGamepadAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=k(this,this.onGamepadButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=k(this,this.onGamepadButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=k(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){e(a)})},
__onJoystickConnect:function(a){this.onJoystickConnect(a);var b=k(this,this.onJoystickAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=k(this,this.onJoystickButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=k(this,this.onJoystickButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=k(this,this.onJoystickDisconnect);a.onDisconnect.add(function(){e(a)});var g=k(this,this.onJoystickHatMove);a.onHatMove.add(function(b,c){g(a,b,c)});var x=k(this,this.onJoystickTrackballMove);a.onTrackballMove.add(function(b,
c,d){x(a,b,c,d)})},__onWindowClose:function(a){this.onWindowClose(a);u.remove(this.__windows,a)},__class__:Kb};var Se=function(a){this.gameDeviceCache=new ea;this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;pc.init()};f["lime._backend.html5.HTML5Application"]=Se;Se.__name__=["lime","_backend","html5","HTML5Application"];Se.prototype={convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;
case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 45:return 1073741897;case 46:return 127;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;
case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;
case 125:return 1073741929;case 126:return 1073741930;case 144:return 1073741907;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}return a},create:function(a){},exec:function(){window.addEventListener("keydown",k(this,this.handleKeyEvent),!1);window.addEventListener("keyup",k(this,this.handleKeyEvent),!1);window.addEventListener("focus",k(this,
this.handleWindowEvent),!1);window.addEventListener("blur",k(this,this.handleWindowEvent),!1);window.addEventListener("resize",k(this,this.handleWindowEvent),!1);window.addEventListener("beforeunload",k(this,this.handleWindowEvent),!1);0=="performance"in window&&(window.performance={});if(0=="now"in window.performance){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart);window.performance.now=function(){return Date.now()-a}}for(var b=0,c=
["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b));c=window.setTimeout(function(){a(d+e)},e);b=d+e;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});
window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){null!=this.parent.__windows[0]&&this.parent.__windows[0].backend.updateSize();this.updateGameDevices();this.currentUpdate=(new Date).getTime();this.currentUpdate>=this.nextUpdate&&(this.deltaTime=this.currentUpdate-this.lastUpdate,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=this.parent.__renderers[0]&&null!=
this.parent.__renderers[0].context&&(this.parent.__renderers[0].render(),this.parent.__renderers[0].onRender.dispatch(),this.parent.__renderers[0].onRender.canceled||this.parent.__renderers[0].flip()),this.nextUpdate=0>this.framePeriod?this.currentUpdate:this.currentUpdate+this.framePeriod,this.lastUpdate=this.currentUpdate);window.requestAnimationFrame(k(this,this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.__windows[0]){var b=this.convertKeyCode(null!=a.keyCode?a.keyCode:
a.which),c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.__windows[0].onKeyDown.dispatch(b,c),this.parent.__windows[0].onKeyDown.canceled&&a.preventDefault()):(this.parent.__windows[0].onKeyUp.dispatch(b,c),this.parent.__windows[0].onKeyUp.canceled&&a.preventDefault())}},handleWindowEvent:function(a){if(null!=this.parent.__windows[0])switch(a.type){case "beforeunload":a.defaultPrevented||(this.parent.__windows[0].onClose.dispatch(),null!=this.parent.__windows[0]&&
this.parent.__windows[0].onClose.canceled&&a.preventDefault());break;case "blur":this.parent.__windows[0].onFocusOut.dispatch();this.parent.__windows[0].onDeactivate.dispatch();break;case "focus":this.parent.__windows[0].onFocusIn.dispatch();this.parent.__windows[0].onActivate.dispatch();break;case "resize":this.parent.__windows[0].backend.handleResizeEvent(a)}},setFrameRate:function(a){this.framePeriod=60<=a?-1:0<a?1E3/a:1E3;return a},updateGameDevices:function(){var a=Ca.__getDeviceData();if(null!=
a)for(var b,c,d,e,g,x=0,f=a.length;x<f;)if(b=x++,e=a[b],null!=e){if(!this.gameDeviceCache.h.hasOwnProperty(b)){g=new Te;g.id=b;g.connected=e.connected;c=0;for(d=e.buttons.length;c<d;){var h=c++;g.buttons.push(e.buttons[h].value)}c=0;for(d=e.axes.length;c<d;)h=c++,g.axes.push(e.axes[h]);"standard"==e.mapping&&(g.isGamepad=!0);this.gameDeviceCache.h[b]=g;e.connected&&(Ca.__connect(b),g.isGamepad&&Ka.__connect(b))}g=this.gameDeviceCache.h[b];d=Ca.devices.h[b];c=Ka.devices.h[b];if(e.connected){for(var k=
0,l=e.buttons.length;k<l;){var m=k++;h=e.buttons[m].value;if(h!=g.buttons[m]){if(6==m)d.onAxisMove.dispatch(e.axes.length,h),null!=c&&c.onAxisMove.dispatch(4,h);else if(7==m)d.onAxisMove.dispatch(e.axes.length+1,h),null!=c&&c.onAxisMove.dispatch(5,h);else if(0<h?d.onButtonDown.dispatch(m):d.onButtonUp.dispatch(m),null!=c){switch(m){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;
break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<h?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}g.buttons[m]=h}}b=0;for(h=e.axes.length;b<h;)k=b++,e.axes[k]!=g.axes[k]&&(d.onAxisMove.dispatch(k,e.axes[k]),null!=c&&c.onAxisMove.dispatch(k,e.axes[k]),g.axes[k]=e.axes[k])}else g.connected&&(g.connected=!1,Ca.__disconnect(b),Ka.__disconnect(b))}},__class__:Se};var ab=function(){this.onUpdate=new oc;Kb.call(this);null==ab.current&&
(ab.current=this);this.modules=[];this.windowByID=new ea;this.backend=new Se(this);this.registerModule(this)};f["lime.app.Application"]=ab;ab.__name__=["lime","app","Application"];ab.__super__=Kb;ab.prototype=p(Kb.prototype,{addRenderer:function(a){Kb.prototype.addRenderer.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addRenderer(a)}},create:function(a){this.config=a;this.backend.create(a);if(null!=a){Object.prototype.hasOwnProperty.call(a,"fps")&&this.backend.setFrameRate(a.fps);
if(Object.prototype.hasOwnProperty.call(a,"windows"))for(a=a.windows;0<a.length;){a=new Ue(a[0]);this.createWindow(a);break}if(null==this.__preloader||this.__preloader.complete){this.setPreloader(this.__preloader);a=0;for(var b=this.modules;a<b.length;)++a,this.setPreloader(this.__preloader)}}},createWindow:function(a){Kb.prototype.addWindow.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addWindow(a)}null==a.renderer&&(b=new Ve(a),this.addRenderer(b));a.create(this);this.windowByID.h[a.id]=
a;a.onCreate.dispatch()},exec:function(){ab.current=this;return this.backend.exec()},onModuleExit:function(a){this.backend.exit()},onWindowClose:function(a){this.removeWindow(a)},removeWindow:function(a){null!=a&&this.windowByID.h.hasOwnProperty(a.id)&&(u.remove(this.__windows,a),this.windowByID.remove(a.id),a.close(),null!=a.renderer&&this.removeRenderer(a.renderer),this.__windows[0]==a&&(this.window=null),0==this.__windows.length&&pa.exit(0))},setPreloader:function(a){Kb.prototype.setPreloader.call(this,
a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.setPreloader(a)}},__class__:ab});var qc=function(){};f.ApplicationMain=qc;qc.__name__=["ApplicationMain"];qc.main=function(){pa.__registerEntryPoint("CarVsCop",qc.create,{build:"1216",company:"liwei",file:"CarVsCop",fps:60,name:"CarVsCap",orientation:"",packageName:"CarVsCap",version:"1.0.0",windows:[{allowHighDPI:!1,alwaysOnTop:!1,antialiasing:0,background:16777215,borderless:!1,colorDepth:16,depthBuffer:!0,display:0,fullscreen:!1,hardware:!0,
height:0,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,stencilBuffer:!0,title:"CarVsCap",vsync:!1,width:0,x:null,y:null}]})};qc.create=function(a){Sb.init(a);var b=new We,c=new kd;c.setPreloader(b);c.create(a);b.create(a);a=0;for(var d=Sb.preloadLibraries;a<d.length;){var e=d[a];++a;b.addLibrary(e)}a=0;for(d=Sb.preloadLibraryNames;a<d.length;)e=d[a],++a,b.addLibraryName(e);b.load();qc.start(c)};qc.start=function(a){a.exec()};var ld=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};
f.EReg=ld;ld.__name__=["EReg"];ld.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new r("EReg::matched");},__class__:ld};var u=function(){};f.HxOverrides=u;u.__name__=["HxOverrides"];u.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;
case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new r("Invalid date format : "+a);}};u.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};u.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};u.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};u.iter=function(a){return{cur:0,
arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Hc=function(){this.length=0};f.List=Hc;Hc.__name__=["List"];Hc.prototype={add:function(a){a=new Xe(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},pop:function(){if(null==this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a},iterator:function(){return new Ye(this.h)},__class__:Hc};var Xe=function(a,b){this.item=a;this.next=
b};f["_List.ListNode"]=Xe;Xe.__name__=["_List","ListNode"];Xe.prototype={__class__:Xe};var Ye=function(a){this.head=a};f["_List.ListIterator"]=Ye;Ye.__name__=["_List","ListIterator"];Ye.prototype={hasNext:function(){return null!=this.head},next:function(){var a=this.head.item;this.head=this.head.next;return a},__class__:Ye};var kd=function(){ab.call(this);N.SetPath("");D.Start();la.set_enabled(!0)};f.Main=kd;kd.__name__=["Main"];kd.__super__=ab;kd.prototype=p(ab.prototype,{createWindow:function(a){ab.prototype.createWindow.call(this,
a);Y.trace("create windows",{fileName:"Main.hx",lineNumber:47,className:"Main",methodName:"createWindow"});this._d=new md(a);a=new ec;this._d.AddWorld(a);var b=new nd(this._d);a.AddChildAt(b,-1,!1)},create:function(a){a.windows[0].depthBuffer=!0;ab.prototype.create.call(this,a)},render:function(a){ab.prototype.render.call(this,a);null!=this._d&&this._d.Render()},__class__:kd});var Sb=function(){};f.ManifestResources=Sb;Sb.__name__=["ManifestResources"];Sb.init=function(a){Sb.preloadLibraries=[];Sb.preloadLibraryNames=
[];var b=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"rootPath")&&(b=L.field(a,"rootPath"));null==b&&(b="");v.defaultRootPath=b;a=hb.parse('{"name":null,"assets":"ah","version":2,"libraryArgs":[],"libraryType":null}',b);a=rc.fromManifest(a);v.registerLibrary("default",a);a=v.getLibrary("default");null!=a?Sb.preloadLibraries.push(a):Sb.preloadLibraryNames.push("default")};Math.__name__=["Math"];var L=function(){};f.Reflect=L;L.__name__=["Reflect"];L.field=function(a,b){try{return a[b]}catch(c){return null}};
L.getProperty=function(a,b){var c;if(null==a)return null;var d=a.__properties__?c=a.__properties__["get_"+b]:!1;return d?a[c]():a[b]};L.setProperty=function(a,b,c){var d;var e=a.__properties__?d=a.__properties__["set_"+b]:!1;if(e)a[d](c);else a[b]=c};L.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};L.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};L.compareMethods=
function(a,b){return a==b?!0:L.isFunction(a)&&L.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};L.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var X=function(){};f.Std=X;X.__name__=["Std"];X.string=function(a){return I.__string_rec(a,"")};X.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=u.cca(a,1)&&88!=u.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};var Z=function(){};f.StringTools=Z;Z.__name__=["StringTools"];
Z.startsWith=function(a,b){return a.length>=b.length?u.substr(a,0,b.length)==b:!1};Z.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?u.substr(a,d-c,c)==b:!1};Z.isSpace=function(a,b){a=u.cca(a,b);return 8<a&&14>a?!0:32==a};Z.ltrim=function(a){for(var b=a.length,c=0;c<b&&Z.isSpace(a,c);)++c;return 0<c?u.substr(a,c,b-c):a};Z.rtrim=function(a){for(var b=a.length,c=0;c<b&&Z.isSpace(a,b-c-1);)++c;return 0<c?u.substr(a,0,b-c):a};Z.trim=function(a){return Z.ltrim(Z.rtrim(a))};Z.replace=function(a,
b,c){return a.split(b).join(c)};Z.hex=function(a,b){for(var c="";c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4,0<a;);if(null!=b)for(;c.length<b;)c="0"+c;return c};var da=function(){};f.Type=da;da.__name__=["Type"];da.getSuperClass=function(a){return a.__super__};da.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};da.resolveClass=function(a){a=f[a];return null!=a&&a.__name__?a:null};da.resolveEnum=function(a){a=f[a];return null!=a&&a.__ename__?a:null};da.createInstance=function(a,
b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],
b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13]);default:throw new r("Too many arguments");}};da.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};
da.createEnum=function(a,b,c){var d=L.field(a,b);if(null==d)throw new r("No such constructor "+b);if(L.isFunction(d)){if(null==c)throw new r("Constructor "+b+" need parameters");return d.apply(a,c)}if(null!=c&&0!=c.length)throw new r("Constructor "+b+" does not need parameters");return d};var od={};f["_UInt.UInt_Impl_"]=od;od.__name__=["_UInt","UInt_Impl_"];od.gt=function(a,b){var c=0>a;return c!=0>b?c:a>b};var Va=f["haxe.StackItem"]={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method",
"LocalFunction"]};Va.CFunction=["CFunction",0];Va.CFunction.toString=B;Va.CFunction.__enum__=Va;Va.Module=function(a){a=["Module",1,a];a.__enum__=Va;a.toString=B;return a};Va.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=Va;a.toString=B;return a};Va.Method=function(a,b){a=["Method",3,a,b];a.__enum__=Va;a.toString=B;return a};Va.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=Va;a.toString=B;return a};var Tb=function(){};f["haxe.CallStack"]=Tb;Tb.__name__=["haxe","CallStack"];
Tb.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){a=[];for(var c=0;c<b.length;){var d=b[c];++c;null!=Tb.wrapCallSite&&(d=Tb.wrapCallSite(d));var x=null,f=d.getFunctionName();if(null!=f){var h=f.lastIndexOf(".");0<=h&&(x=u.substr(f,0,h),f=u.substr(f,h+1,null),x=Va.Method(x,f))}a.push(Va.FilePos(x,d.getFileName(),d.getLineNumber()))}return a};a=Tb.makeStack(a.stack);Error.prepareStackTrace=b;return a};Tb.callStack=function(){try{throw Error();
}catch(b){b instanceof r&&(b=b.val);var a=Tb.getStack(b);a.shift();return a}};Tb.makeStack=function(a){if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new ld("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){e=c.matched(1).split(".");var g=e.pop(),x=c.matched(2),f=X.parseInt(c.matched(3));b.push(Va.FilePos("Anonymous function"==g?Va.LocalFunction():"Global code"==g?null:Va.Method(e.join("."),
g),x,f))}else b.push(Va.Module(Z.trim(e)))}return b}return a};var Ic=function(){};f["haxe.IMap"]=Ic;Ic.__name__=["haxe","IMap"];Ic.prototype={__class__:Ic};var Ze=function(a,b){this.high=a;this.low=b};f["haxe._Int64.___Int64"]=Ze;Ze.__name__=["haxe","_Int64","___Int64"];Ze.prototype={__class__:Ze};var Y=function(){};f["haxe.Log"]=Y;Y.__name__=["haxe","Log"];Y.trace=function(a,b){I.__trace(a,b)};var pd=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};f["haxe.Timer"]=pd;pd.__name__=
["haxe","Timer"];pd.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:pd};var qd=function(){};f["haxe._Unserializer.DefaultResolver"]=qd;qd.__name__=["haxe","_Unserializer","DefaultResolver"];qd.prototype={resolveClass:function(a){return da.resolveClass(a)},resolveEnum:function(a){return da.resolveEnum(a)},__class__:qd};var bb=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=bb.DEFAULT_RESOLVER;null==a&&
(a=new qd,bb.DEFAULT_RESOLVER=a);this.resolver=a};f["haxe.Unserializer"]=bb;bb.__name__=["haxe","Unserializer"];bb.initCodes=function(){for(var a=[],b=0,c=bb.BASE64.length;b<c;){var d=b++;a[bb.BASE64.charCodeAt(d)]=d}return a};bb.run=function(a){return(new bb(a)).unserialize()};bb.prototype={readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},
readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(u.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new r("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw new r("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw new r("Invalid enum format");
var c=this.readDigits();if(0==c)return da.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return da.createEnum(a,b,d)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw new r("Class not found "+a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new r("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new r("Class not found "+
a);a=da.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw new r("Invalid custom data");return a;case 77:a=new rb;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new r("Invalid string reference");return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;
break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new y;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);){b=this.unserialize();var c=this.unserialize();null!=h[b]?a.setReserved(b,c):a.h[b]=c}this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new r("Class not found "+a);a=da.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();
case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new r("Enum not found "+a);this.pos++;c=this.readDigits();var d=b.__constructs__.slice()[c];if(null==d)throw new r("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new Hc;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;
case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new ea;this.cache.push(a);for(b=this.buf.charCodeAt(this.pos++);58==b;)b=this.readDigits(),c=this.unserialize(),a.h[b]=c,b=this.buf.charCodeAt(this.pos++);if(104!=b)throw new r("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new r("Invalid reference");return this.cache[a];case 115:a=this.readDigits();d=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||
this.length-this.pos<a)throw new r("Invalid bytes length");var e=bb.CODES;null==e&&(e=bb.initCodes(),bb.CODES=e);var g=this.pos,x=a&3,f=g+(a-x);b=new ba(new lb(3*(a>>2)+(2<=x?x-1:0)));for(c=0;g<f;){var k=e[d.charCodeAt(g++)],l=e[d.charCodeAt(g++)];b.b[c++]=(k<<2|l>>4)&255;k=e[d.charCodeAt(g++)];b.b[c++]=(l<<4|k>>2)&255;l=e[d.charCodeAt(g++)];b.b[c++]=(k<<6|l)&255}2<=x&&(l=e[d.charCodeAt(g++)],f=e[d.charCodeAt(g++)],b.b[c++]=(l<<2|f>>4)&255,3==x&&(d=e[d.charCodeAt(g++)],b.b[c++]=(f<<4|d>>2)&255));
this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=u.strDate(u.substr(this.buf,this.pos,19)),this.pos+=19):(a=this.readFloat(),a=new Date(a)),this.cache.push(a),
a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new r("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw r.wrap(this.unserialize());case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new r("Invalid string length");b=u.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;throw new r("Invalid char "+
this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:bb};var $e=function(){};f["haxe.Utf8"]=$e;$e.__name__=["haxe","Utf8"];$e.iter=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;b(u.cca(a,e))}};var sc=function(){this.a1=1;this.a2=0};f["haxe.crypto.Adler32"]=sc;sc.__name__=["haxe","crypto","Adler32"];sc.read=function(a){var b=new sc,c=a.readByte(),d=a.readByte(),e=a.readByte();a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};sc.prototype={update:function(a,b,c){var d=this.a1,e=this.a2,
g=b;for(b+=c;g<b;)c=g++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},equals:function(a){return a.a1==this.a1?a.a2==this.a2:!1},__class__:sc};var ba=function(a){this.length=a.byteLength;this.b=new sb(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};f["haxe.io.Bytes"]=ba;ba.__name__=["haxe","io","Bytes"];ba.alloc=function(a){return new ba(new lb(a))};ba.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=a.charCodeAt(c++);55296<=d&&56319>=d&&(d=d-55232<<10|a.charCodeAt(c++)&1023);
127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new ba((new sb(b)).buffer)};ba.ofData=function(a){var b=a.hxBytes;return null!=b?b:new ba(a)};ba.fastGet=function(a,b){return a.bytes[b]};ba.prototype={blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+d>b.length)throw new r(Fa.OutsideBounds);0==c&&d==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+d),a)},getString:function(a,
b){if(0>a||0>b||a+b>this.length)throw new r(Fa.OutsideBounds);var c="",d=this.b,e=String.fromCharCode,g=a;for(a+=b;g<a;)if(b=d[g++],128>b){if(0==b)break;c+=e(b)}else if(224>b)c+=e((b&63)<<6|d[g++]&127);else if(240>b){var x=d[g++];c+=e((b&31)<<12|(x&127)<<6|d[g++]&127)}else{x=d[g++];var f=d[g++];b=(b&15)<<18|(x&127)<<12|(f&127)<<6|d[g++]&127;c+=e((b>>10)+55232);c+=e(b&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:ba};var Lb=function(){};f["haxe.crypto.Base64"]=
Lb;Lb.__name__=["haxe","crypto","Base64"];Lb.encode=function(a,b){null==b&&(b=!0);var c=(new Jc(Lb.BYTES)).encodeBytes(a).toString();if(b)switch(a.length%3){case 1:c+="==";break;case 2:c+="="}return c};Lb.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==u.cca(a,a.length-1);)a=u.substr(a,0,-1);return(new Jc(Lb.BYTES)).decodeBytes(ba.ofString(a))};var Jc=function(a){for(var b=a.length,c=1;b>1<<c;)++c;if(8<c||b!=1<<c)throw new r("BaseCode : base length must be a power of two.");this.base=a;this.nbits=
c};f["haxe.crypto.BaseCode"]=Jc;Jc.__name__=["haxe","crypto","BaseCode"];Jc.prototype={encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=8*a.length/b|0,e=new ba(new lb(d+(0==8*a.length%b?0:1))),g=0,x=0,f=(1<<b)-1,h=0,k=0;k<d;){for(;x<b;)x+=8,g<<=8,g|=a.b[h++];x-=b;e.b[k++]=c.b[g>>x&f]&255}0<x&&(e.b[k++]=c.b[g<<b-x&f]&255);return e},initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.b[d]]=d}this.tbl=a},decodeBytes:function(a){var b=
this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,e=new ba(new lb(d)),g=0,x=0,f=0,h=0;h<d;){for(;8>x;){x+=b;g<<=b;var k=c[a.b[f++]];if(-1==k)throw new r("BaseCode : invalid encoded char");g|=k}x-=8;e.b[h++]=g>>x&255}return e},__class__:Jc};var ea=function(){this.h={}};f["haxe.ds.IntMap"]=ea;ea.__name__=["haxe","ds","IntMap"];ea.__interfaces__=[Ic];ea.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},
remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return u.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:ea};var rb=function(){this.h={__keys__:{}}};f["haxe.ds.ObjectMap"]=rb;rb.__name__=["haxe","ds","ObjectMap"];rb.__interfaces__=[Ic];rb.assignId=function(a){return a.__id__=
++rb.count};rb.getId=function(a){return a.__id__};rb.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++rb.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},__class__:rb};var tb=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};f["haxe.ds._StringMap.StringMapIterator"]=
tb;tb.__name__=["haxe","ds","_StringMap","StringMapIterator"];tb.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=h[b]?a.getReserved(b):a.h[b]},__class__:tb};var y=function(){this.h={}};f["haxe.ds.StringMap"]=y;y.__name__=["haxe","ds","StringMap"];y.__interfaces__=[Ic];y.prototype={set:function(a,b){null!=h[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=h[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=
h[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=h[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){return u.iter(this.arrayKeys())},
arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},__class__:y};var af=function(){this.b=[]};f["haxe.io.BytesBuffer"]=af;af.__name__=["haxe","io","BytesBuffer"];af.prototype={getBytes:function(){var a=new ba((new sb(this.b)).buffer);this.b=null;return a},__class__:af};var rd=function(){};f["haxe.io.Input"]=rd;rd.__name__=["haxe","io","Input"];rd.prototype={readByte:function(){throw new r("Not implemented");
},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw new r(Fa.OutsideBounds);try{for(;0<d;)e[b]=this.readByte(),++b,--d}catch(g){if(g instanceof r&&(g=g.val),!I.__instanceof(g,Kc))throw g;}return c-d},read:function(a){for(var b=new ba(new lb(a)),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw new r(Fa.Blocked);c+=d;a-=d}return b},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},__class__:rd};var sd=function(a,b,c){null==b&&
(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw new r(Fa.OutsideBounds);this.b=a.b;this.pos=b;this.totlen=this.len=c};f["haxe.io.BytesInput"]=sd;sd.__name__=["haxe","io","BytesInput"];sd.__super__=rd;sd.prototype=p(rd.prototype,{readByte:function(){if(0==this.len)throw new r(new Kc);this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new r(Fa.OutsideBounds);if(0==this.len&&0<c)throw new r(new Kc);this.len<c&&(c=this.len);var d=this.b;a=a.b;
for(var e=0,g=c;e<g;){var x=e++;a[b+x]=d[this.pos+x]}this.pos+=c;this.len-=c;return c},__class__:sd});var Kc=function(){};f["haxe.io.Eof"]=Kc;Kc.__name__=["haxe","io","Eof"];Kc.prototype={toString:function(){return"Eof"},__class__:Kc};var Fa=f["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};Fa.Blocked=["Blocked",0];Fa.Blocked.toString=B;Fa.Blocked.__enum__=Fa;Fa.Overflow=["Overflow",1];Fa.Overflow.toString=B;Fa.Overflow.__enum__=Fa;Fa.OutsideBounds=["OutsideBounds",
2];Fa.OutsideBounds.toString=B;Fa.OutsideBounds.__enum__=Fa;Fa.Custom=function(a){a=["Custom",3,a];a.__enum__=Fa;a.toString=B;return a};var mb=function(){};f["haxe.io.FPHelper"]=mb;mb.__name__=["haxe","io","FPHelper"];mb.i32ToFloat=function(a){var b=a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,b-127)};mb.floatToI32=function(a){if(0==a)return 0;var b=0>a?-a:a,c=Math.floor(Math.log(b)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);b=Math.round(8388608*
(b/Math.pow(2,c)-1));8388608==b&&128>c&&(b=0,++c);return(0>a?-2147483648:0)|c+127<<23|b};mb.i64ToDouble=function(a,b){var c=(b>>20&2047)-1023;a=4294967296*(b&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==a&&-1023==c?0:(1-(b>>>31<<1))*(1+Math.pow(2,-52)*a)*Math.pow(2,c)};mb.doubleToI64=function(a){var b=mb.i64tmp;if(0==a)b.low=0,b.high=0;else if(isFinite(a)){var c=0>a?-a:a,d=Math.floor(Math.log(c)/.6931471805599453);c=Math.round(4503599627370496*(c/Math.pow(2,d)-1));b.low=c|0;b.high=(0>a?-2147483648:
0)|d+1023<<20|c/4294967296|0}else 0<a?(b.low=0,b.high=2146435072):(b.low=0,b.high=-1048576);return b};var Lc=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=u.substr(a,0,c),a=u.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=u.substr(a,0,b),a=u.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=u.substr(a,b+1,null),this.file=u.substr(a,0,b)):(this.ext=null,this.file=a)};f["haxe.io.Path"]=Lc;
Lc.__name__=["haxe","io","Path"];Lc.directory=function(a){a=new Lc(a);return null==a.dir?"":a.dir};Lc.prototype={__class__:Lc};var Cb=function(){};f["haxe.rtti.Meta"]=Cb;Cb.__name__=["haxe","rtti","Meta"];Cb.getType=function(a){a=Cb.getMeta(a);return null==a||null==a.obj?{}:a.obj};Cb.getMeta=function(a){return a.__meta__};Cb.getStatics=function(a){a=Cb.getMeta(a);return null==a||null==a.statics?{}:a.statics};Cb.getFields=function(a){a=Cb.getMeta(a);return null==a||null==a.fields?{}:a.fields};var Db=
f["haxe.zip.Huffman"]={__ename__:!0,__constructs__:["Found","NeedBit","NeedBits"]};Db.Found=function(a){a=["Found",0,a];a.__enum__=Db;a.toString=B;return a};Db.NeedBit=function(a,b){a=["NeedBit",1,a,b];a.__enum__=Db;a.toString=B;return a};Db.NeedBits=function(a,b){a=["NeedBits",2,a,b];a.__enum__=Db;a.toString=B;return a};var bf=function(){};f["haxe.zip.HuffTools"]=bf;bf.__name__=["haxe","zip","HuffTools"];bf.prototype={treeDepth:function(a){switch(a[1]){case 0:return 0;case 1:var b=a[3];a=this.treeDepth(a[2]);
b=this.treeDepth(b);return 1+(a<b?a:b);case 2:throw new r("assert");}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){if(1==a[1])return b=a[3],Db.NeedBit(this.treeCompress(a[2]),this.treeCompress(b));throw new r("assert");}for(var c=[],d=0,e=1<<b;d<e;)d++,c.push(Db.Found(-1));this.treeWalk(c,0,0,b,a);return Db.NeedBits(b,c)},treeWalk:function(a,b,c,d,e){if(1==e[1]){var g=e[3],x=e[2];0<d?(this.treeWalk(a,b,c+1,d-1,x),this.treeWalk(a,b|1<<c,c+1,d-1,g)):a[b]=this.treeCompress(e)}else a[b]=
this.treeCompress(e)},treeMake:function(a,b,c,d){if(d>b)throw new r("Invalid huffman");var e=c<<5|d;if(a.h.hasOwnProperty(e))return Db.Found(a.h[e]);c<<=1;++d;return Db.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},make:function(a,b,c,d){var e=[],g=[];if(32<d)throw new r("Invalid huffman");for(var x=0;x<d;)x++,e.push(0),g.push(0);for(x=0;x<c;){var f=x++;f=a[f+b];if(f>=d)throw new r("Invalid huffman");e[f]++}x=0;f=1;for(var h=d-1;f<h;){var k=f++;x=x+e[k]<<1;g[k]=x}e=new ea;for(x=0;x<c;)f=
x++,h=a[f+b],0!=h&&(k=g[h-1],g[h-1]=k+1,e.h[k<<5|h]=f);return this.treeCompress(Db.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},__class__:bf};var cf=function(a){this.buffer=new ba(new lb(65536));this.pos=0;a&&(this.crc=new sc)};f["haxe.zip._InflateImpl.Window"]=cf;cf.__name__=["haxe","zip","_InflateImpl","Window"];cf.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=new ba(new lb(65536));this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=
a},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:cf};var S=f["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:"Head Block CData Flat Crc Dist DistOne Done".split(" ")};
S.Head=["Head",0];S.Head.toString=B;S.Head.__enum__=S;S.Block=["Block",1];S.Block.toString=B;S.Block.__enum__=S;S.CData=["CData",2];S.CData.toString=B;S.CData.__enum__=S;S.Flat=["Flat",3];S.Flat.toString=B;S.Flat.__enum__=S;S.Crc=["Crc",4];S.Crc.toString=B;S.Crc.__enum__=S;S.Dist=["Dist",5];S.Dist.toString=B;S.Dist.__enum__=S;S.DistOne=["DistOne",6];S.DistOne.toString=B;S.DistOne.__enum__=S;S.Done=["Done",7];S.Done.toString=B;S.Done.__enum__=S;var Ga=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);
this["final"]=!1;this.htools=new bf;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?S.Head:S.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];for(a=0;19>a;)a++,this.lengths.push(-1);this.window=new cf(c)};f["haxe.zip.InflateImpl"]=Ga;Ga.__name__=["haxe","zip","InflateImpl"];Ga.run=function(a,b){null==b&&(b=65536);var c=new ba(new lb(b)),d=new af;for(a=new Ga(a);;){var e=a.readBytes(c,0,b);if(0>e||e>c.length)throw new r(Fa.OutsideBounds);
for(var g=c.b,x=0,f=e;x<f;){var h=x++;d.b.push(g[h])}if(e<b)break}return d.getBytes()};Ga.prototype={buildFixedHuffman:function(){if(null!=Ga.FIXED_HUFFMAN)return Ga.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}Ga.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return Ga.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<
this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);
this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a[1]){case 0:return a[2];case 1:var b=a[3];a=a[2];return this.applyHuffman(this.getBit()?b:a);case 2:return this.applyHuffman(a[3][this.getBits(a[2])])}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);
switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=e;a[c]=e;++c;break;case 16:e=c+3+this.getBits(2);if(e>b)throw new r("Invalid data");for(;c<e;)a[c]=d,++c;break;case 17:c+=3+this.getBits(3);if(c>b)throw new r("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw new r("Invalid data");break;default:throw new r("Invalid data");}}},inflateLoop:function(){switch(this.state[1]){case 0:var a=this.input.readByte();
if(8!=(a&15))throw new r("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw new r("Invalid data");if(c)throw new r("Unsupported dictionary");this.state=S.Block;return!0;case 1:switch(this["final"]=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw new r("Invalid data");this.state=S.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=
null,this.state=S.CData,!0;case 2:a=this.getBits(5)+257;b=this.getBits(5)+1;c=this.getBits(4)+4;for(var d=0;d<c;){var e=d++;this.lengths[Ga.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(;19>c;)d=c++,this.lengths[Ga.CODE_LENGTHS_POS[d]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];d=0;for(e=a+b;d<e;)d++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=S.CData;return!0;default:throw new r("Invalid data");}case 2:b=
this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this["final"]?S.Crc:S.Block;else{b-=257;a=Ga.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw new r("Invalid data");this.len=Ga.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=Ga.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw new r("Invalid data");this.dist=Ga.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw new r("Invalid data");
this.state=1==this.dist?S.DistOne:S.Dist}return!0;case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this["final"]?S.Crc:S.Block),0<this.needed;case 4:a=this.window.checksum();if(null==a)return this.state=S.Done,!0;b=sc.read(this.input);if(!a.equals(b))throw new r("Invalid CRC");this.state=S.Done;return!0;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,
this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=S.CData);return 0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=S.CData),0<this.needed;case 7:return!1}},__class__:Ga};var yg=function(){};f["haxe.zip.Uncompress"]=yg;yg.__name__=["haxe","zip","Uncompress"];yg.run=function(a,b){return Ga.run(new sd(a),b)};var r=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,
r)};f["js._Boot.HaxeError"]=r;r.__name__=["js","_Boot","HaxeError"];r.wrap=function(a){return a instanceof Error?a:new r(a)};r.__super__=Error;r.prototype=p(Error.prototype,{__class__:r});var I=function(){};f["js.Boot"]=I;I.__name__=["js","Boot"];I.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};I.__trace=function(a,b){var c=null!=b?b.fileName+":"+b.lineNumber+": ":"";c+=I.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(a=0,b=b.customParams;a<
b.length;){var d=b[a];++a;c+=","+I.__string_rec(d,"")}if("undefined"!=typeof document){var e=document.getElementById("haxe:trace");a=null!=e}else a=!1;a?e.innerHTML+=I.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};I.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=I.__nativeClassName(a);return null!=a?I.__resolveNativeClass(a):null};I.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";
var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;){var g=d++;c=2!=g?c+(","+I.__string_rec(a[g],b)):c+I.__string_rec(a[g],b)}return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)g=e++,d+=(0<g?",":"")+I.__string_rec(a[g],b);return d+"]"}try{d=a.toString}catch(x){return"???"}if(null!=d&&d!=Object.toString&&"function"==
typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+I.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};I.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<
e;){var g=d++;g=c[g];if(g==b||I.__interfLoop(g,b))return!0}return I.__interfLoop(a.__super__,b)};I.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case Lg:return"boolean"==typeof a;case Yg:return!0;case zg:return"number"==typeof a;case Kg:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||I.__interfLoop(I.getClass(a),b))return!0}else{if("object"==
typeof b&&I.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==Zg&&null!=a.__name__||b==$g&&null!=a.__ename__?!0:a.__enum__==b}};I.__cast=function(a,b){if(I.__instanceof(a,b))return a;throw new r("Cannot cast "+X.string(a)+" to "+X.string(b));};I.__nativeClassName=function(a){a=I.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};I.__isNativeObj=function(a){return null!=I.__nativeClassName(a)};I.__resolveNativeClass=function(a){return ra[a]};
var ib=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;){var c=b++;this.a[c]=0}this.byteLength=a}};f["js.html.compat.ArrayBuffer"]=ib;ib.__name__=["js","html","compat","ArrayBuffer"];ib.sliceImpl=function(a,b){a=new sb(this,a,null==b?null:b-a);b=new lb(a.byteLength);(new sb(b)).set(a);return b};ib.prototype={slice:function(a,b){return new ib(this.a.slice(a,b))},__class__:ib};var Ag=function(a,b,c){this.buf=a;this.offset=null==b?
0:b;this.length=null==c?a.byteLength-this.offset:c;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new r(Fa.OutsideBounds);this.byteLength=this.length;this.byteOffset=this.offset;this.buffer=this.buf};f["js.html.compat.DataView"]=Ag;Ag.__name__=["js","html","compat","DataView"];Ag.prototype={getInt8:function(a){a=this.buf.a[this.offset+a];return 128<=a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,b){a=this.getUint16(a,b);return 32768<=
a?a-65536:a},getUint16:function(a,b){return b?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,b){var c=this.offset+a;a=this.buf.a[c++];var d=this.buf.a[c++],e=this.buf.a[c++];c=this.buf.a[c++];return b?a|d<<8|e<<16|c<<24:c|e<<8|d<<16|a<<24},getUint32:function(a,b){a=this.getInt32(a,b);return 0>a?a+4294967296:a},getFloat32:function(a,b){return mb.i32ToFloat(this.getInt32(a,b))},getFloat64:function(a,b){var c=this.getInt32(a,
b);a=this.getInt32(a+4,b);return mb.i64ToDouble(b?c:a,b?a:c)},setInt8:function(a,b){this.buf.a[a+this.offset]=0>b?b+128&255:b&255},setUint8:function(a,b){this.buf.a[a+this.offset]=b&255},setInt16:function(a,b,c){this.setUint16(a,0>b?b+65536:b,c)},setUint16:function(a,b,c){a+=this.offset;c?(this.buf.a[a]=b&255,this.buf.a[a++]=b>>8&255):(this.buf.a[a++]=b>>8&255,this.buf.a[a]=b&255)},setInt32:function(a,b,c){this.setUint32(a,b,c)},setUint32:function(a,b,c){a+=this.offset;c?(this.buf.a[a++]=b&255,this.buf.a[a++]=
b>>8&255,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>>24):(this.buf.a[a++]=b>>>24,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b&255)},setFloat32:function(a,b,c){this.setUint32(a,mb.floatToI32(b),c)},setFloat64:function(a,b,c){b=mb.doubleToI64(b);c?(this.setUint32(a,b.low),this.setUint32(a,b.high)):(this.setUint32(a,b.high),this.setUint32(a,b.low))},__class__:Ag};var Ub=function(){};f["js.html.compat.Float32Array"]=Ub;Ub.__name__=["js","html","compat","Float32Array"];Ub._new=
function(a,b,c){if("number"==typeof a){var d=[];for(b=0;b<a;){var e=b++;d[e]=0}d.byteLength=d.length<<2;d.byteOffset=0;a=[];b=0;for(e=d.length<<2;b<e;)b++,a.push(0);d.buffer=new ib(a)}else if(I.__instanceof(a,ib)){null==b&&(b=0);null==c&&(c=a.byteLength-b>>2);d=[];for(e=0;e<c;){e++;var g=a.a[b++]|a.a[b++]<<8|a.a[b++]<<16|a.a[b++]<<24;d.push(mb.i32ToFloat(g))}d.byteLength=d.length<<2;d.byteOffset=b;d.buffer=a}else if(a instanceof Array&&null==a.__enum__){d=a.slice();a=[];for(b=0;b<d.length;)e=d[b],
++b,e=mb.floatToI32(e),a.push(e&255),a.push(e>>8&255),a.push(e>>16&255),a.push(e>>>24);d.byteLength=d.length<<2;d.byteOffset=0;d.buffer=new ib(a)}else throw new r("TODO "+X.string(a));d.subarray=Ub._subarray;d.set=Ub._set;return d};Ub._set=function(a,b){if(I.__instanceof(a.buffer,ib)){if(a.byteLength+b>this.byteLength)throw new r("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new r("set() outside of range");
c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new r("TODO");};Ub._subarray=function(a,b){b=Ub._new(this.slice(a,b));b.byteOffset=4*a;return b};var Vb=function(){};f["js.html.compat.Uint8Array"]=Vb;Vb.__name__=["js","html","compat","Uint8Array"];Vb._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new ib(c)}else if(I.__instanceof(a,ib))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=
c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new ib(c);else throw new r("TODO "+X.string(a));c.subarray=Vb._subarray;c.set=Vb._set;return c};Vb._set=function(a,b){if(I.__instanceof(a.buffer,ib)){if(a.byteLength+b>this.byteLength)throw new r("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new r("set() outside of range");
c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new r("TODO");};Vb._subarray=function(a,b){b=Vb._new(this.slice(a,b));b.byteOffset=a;return b};var Te=function(){this.connected=!0;this.buttons=[];this.axes=[]};f["lime._backend.html5.GameDeviceData"]=Te;Te.__name__=["lime","_backend","html5","GameDeviceData"];Te.prototype={__class__:Te};var ef=function(a){this.parent=a;this.id=-1;this.gain=1;this.position=new df};f["lime._backend.html5.HTML5AudioSource"]=ef;ef.__name__=["lime","_backend","html5",
"HTML5AudioSource"];ef.prototype={init:function(){},getLength:function(){return 0!=this.length?this.length:null!=this.parent.buffer?1E3*this.parent.buffer.__srcHowl.duration()|0:0},setLength:function(a){return this.length=a},setLoops:function(a){return this.loops=a},__class__:ef};var ff=function(a){this.__context=a;this.version=1;this.type=zb.WEBGL;if(null!=a){var b=a;Object.prototype.hasOwnProperty.call(b,"rawgl")&&(b=L.field(a,"rawgl"));Object.prototype.hasOwnProperty.call(window,"WebGL2RenderingContext")&&
I.__instanceof(b,WebGL2RenderingContext)&&(this.version=2)}};f["lime._backend.html5.HTML5GLRenderContext"]=ff;ff.__name__=["lime","_backend","html5","HTML5GLRenderContext"];ff.prototype={__class__:ff};var J=function(){this.validStatus0=(new ld("Tizen","gi")).match(window.navigator.userAgent)};f["lime._backend.html5.HTML5HTTPRequest"]=J;J.__name__=["lime","_backend","html5","HTML5HTTPRequest"];J.loadImage=function(a){var b=new jb;J.activeRequests<J.requestLimit?(J.activeRequests++,J.__loadImage(a,
b)):J.requestQueue.add({instance:null,uri:a,promise:b,type:"IMAGE"});return b.future};J.processQueue=function(){if(J.activeRequests<J.requestLimit&&0<J.requestQueue.length){J.activeRequests++;var a=J.requestQueue.pop();switch(a.type){case "BINARY":a.instance.__loadData(a.uri,a.promise);break;case "IMAGE":J.__loadImage(a.uri,a.promise);break;case "TEXT":a.instance.__loadText(a.uri,a.promise);break;default:J.activeRequests--}}};J.__fixHostname=function(a){return null==a?"":a};J.__fixPort=function(a,
b){if(null==a||""==a)switch(b){case "ftp:":return"21";case "gopher:":return"70";case "http:":return"80";case "https:":return"443";case "ws:":return"80";case "wss:":return"443";default:return""}return a};J.__fixProtocol=function(a){return null==a||""==a?"http:":a};J.__isSameOrigin=function(a){null==J.originElement&&(J.originElement=window.document.createElement("a"),J.originHostname=J.__fixHostname(window.location.hostname),J.originProtocol=J.__fixProtocol(window.location.protocol),J.originPort=J.__fixPort(window.location.port,
J.originProtocol));var b=J.originElement;b.href=a;""==b.hostname&&(b.href=b.href);var c=J.__fixHostname(b.hostname);a=J.__fixProtocol(b.protocol);b=J.__fixPort(b.port,a);c=""==c||c==J.originHostname;b=""==b||b==J.originPort;return"file:"!=a&&c?b:!1};J.__loadImage=function(a,b){var c=new Image;J.__isSameOrigin(a)||(c.crossOrigin="Anonymous");null==J.supportsImageProgress&&(J.supportsImageProgress="onprogress"in c);if(J.supportsImageProgress||Z.startsWith(a,"data:"))c.addEventListener("load",function(a){a=
new Mb(null,c.width,c.height);a.__srcImage=c;J.activeRequests--;J.processQueue();b.complete(new T(a))},!1),c.addEventListener("progress",function(a){b.progress(a.loaded,a.total)},!1),c.addEventListener("error",function(a){J.activeRequests--;J.processQueue();b.error(a.detail)},!1),c.src=a;else{var d=new XMLHttpRequest;d.onload=function(a){J.activeRequests--;J.processQueue();(new T).__fromBytes(ba.ofData(d.response),function(a){b.complete(a)})};d.onerror=function(a){b.error(a.message)};d.onprogress=
function(a){a.lengthComputable&&b.progress(a.loaded,a.total)};d.open("GET",a,!0);d.responseType="arraybuffer";d.overrideMimeType("text/plain; charset=x-user-defined");d.send(null)}};J.prototype={init:function(a){this.parent=a},load:function(a,b,c){this.request=new XMLHttpRequest;"POST"==this.parent.method?this.request.upload.addEventListener("progress",b,!1):this.request.addEventListener("progress",b,!1);this.request.onreadystatechange=c;b="";if(null==this.parent.data){for(c=this.parent.formData.keys();c.hasNext();){var d=
c.next();0<b.length&&(b+="&");var e=encodeURIComponent(d)+"=",g=this.parent.formData;d=X.string(null!=h[d]?g.getReserved(d):g.h[d]);b+=e+encodeURIComponent(d)}"GET"==this.parent.method&&""!=b&&(a=-1<a.indexOf("?")?a+("&"+b):a+("?"+b),b="")}this.request.open(X.string(this.parent.method),a,!0);0<this.parent.timeout&&(this.request.timeout=this.parent.timeout);this.binary&&(this.request.responseType="arraybuffer");a=null;c=0;for(e=this.parent.headers;c<e.length;)d=e[c],++c,"Content-Type"==d.name?a=d.value:
this.request.setRequestHeader(d.name,d.value);null!=this.parent.contentType&&(a=this.parent.contentType);null==a&&(null!=this.parent.data?a="application/octet-stream":""!=b&&(a="application/x-www-form-urlencoded"));null!=a&&this.request.setRequestHeader("Content-Type",a);this.parent.withCredentials&&(this.request.withCredentials=!0);null!=this.parent.data?this.request.send(this.parent.data.b.bufferValue):this.request.send(b)},loadData:function(a){var b=new jb;J.activeRequests<J.requestLimit?(J.activeRequests++,
this.__loadData(a,b)):J.requestQueue.add({instance:this,uri:a,promise:b,type:"BINARY"});return b.future},loadText:function(a){var b=new jb;J.activeRequests<J.requestLimit?(J.activeRequests++,this.__loadText(a,b)):J.requestQueue.add({instance:this,uri:a,promise:b,type:"TEXT"});return b.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=[];for(var a,b,c=0,d=this.request.getAllResponseHeaders().split("\n");c<d.length;)b=d[c],++c,a=Z.trim(u.substr(b,0,
b.indexOf(":"))),b=Z.trim(u.substr(b,b.indexOf(":")+1,null)),""!=a&&this.parent.responseHeaders.push(new td(a,b))}this.parent.responseStatus=this.request.status},__loadData:function(a,b){var c=this;this.binary=!0;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>c.request.status||c.validStatus0&&0==c.request.status)?(a=null,""==c.request.responseType?null!=c.request.responseText&&(a=ba.ofString(c.request.responseText)):
null!=c.request.response&&(a=ba.ofData(c.request.response)),c.processResponse(),b.complete(a)):(c.processResponse(),b.error(c.request.status)),c.request=null,J.activeRequests--,J.processQueue())})},__loadText:function(a,b){var c=this;this.binary=!1;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>=c.request.status||c.validStatus0&&0==c.request.status)?(c.processResponse(),b.complete(c.request.responseText)):
(c.processResponse(),b.error(c.request.status)),c.request=null,J.activeRequests--,J.processQueue())})},__class__:J};var gf=function(a){this.parent=a};f["lime._backend.html5.HTML5Renderer"]=gf;gf.__name__=["lime","_backend","html5","HTML5Renderer"];gf.prototype={create:function(){this.createContext();0==this.parent.context[1]&&(this.parent.window.backend.canvas.addEventListener("webglcontextlost",k(this,this.handleEvent),!1),this.parent.window.backend.canvas.addEventListener("webglcontextrestored",
k(this,this.handleEvent),!1))},createContext:function(){if(null!=this.parent.window.backend.div)this.parent.context=Ma.DOM(this.parent.window.backend.div),this.parent.type=ka.DOM;else if(null!=this.parent.window.backend.canvas){var a=null,b=this.parent.window.backend.renderType;if("opengl"==b||"webgl"==b||"webgl1"==b||"webgl2"==b||"canvas"!=b&&(!Object.prototype.hasOwnProperty.call(this.parent.window.config,"hardware")||this.parent.window.config.hardware)){b=Object.prototype.hasOwnProperty.call(this.parent.window.config,
"background")&&null==this.parent.window.config.background;var c=Object.prototype.hasOwnProperty.call(this.parent.window.config,"colorDepth")?this.parent.window.config.colorDepth:16,d=Object.prototype.hasOwnProperty.call(this.parent.window.config,"antialiasing")&&0<this.parent.window.config.antialiasing;b={alpha:b||16<c,antialias:d,depth:Object.prototype.hasOwnProperty.call(this.parent.window.config,"depthBuffer")?this.parent.window.config.depthBuffer:!0,premultipliedAlpha:!0,stencil:Object.prototype.hasOwnProperty.call(this.parent.window.config,
"stencilBuffer")&&this.parent.window.config.stencilBuffer,preserveDrawingBuffer:!1};c=["webgl","experimental-webgl"];for(d=0;d<c.length&&(a=c[d],++d,a=this.parent.window.backend.canvas.getContext(a,b),null==a););}null==a?(this.parent.context=Ma.CANVAS(this.parent.window.backend.canvas.getContext("2d")),this.parent.type=ka.CANVAS):(n.context=new ff(a),this.parent.context=Ma.OPENGL(n.context),this.parent.type=ka.OPENGL)}},flip:function(){},handleEvent:function(a){switch(a.type){case "webglcontextlost":a.preventDefault();
null!=n.context&&(n.context.__contextLost=!0);this.parent.context=null;this.parent.onContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onContextRestored.dispatch(this.parent.context)}},render:function(){},__class__:gf};var Mc=function(a){this.unusedTouchesPool=new Hc;this.scale=1;this.currentTouches=new ea;this.parent=a;null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"element")&&(this.element=a.config.element);null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,
"renderer")&&(this.renderType=a.config.renderer);null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"allowHighDPI")&&a.config.allowHighDPI&&"dom"!=this.renderType&&(this.scale=window.devicePixelRatio);a.__scale=this.scale;this.cacheMouseY=this.cacheMouseX=0};f["lime._backend.html5.HTML5Window"]=Mc;Mc.__name__=["lime","_backend","html5","HTML5Window"];Mc.prototype={close:function(){this.parent.application.removeWindow(this.parent)},create:function(a){this.setWidth=this.parent.__width;this.setHeight=
this.parent.__height;this.parent.id=Mc.windowID++;I.__instanceof(this.element,HTMLCanvasElement)?this.canvas=this.element:"dom"==this.renderType?this.div=window.document.createElement("div"):this.canvas=window.document.createElement("canvas");0==this.parent.__width&&0==this.parent.__height&&(null!=this.element?(this.parent.set_width(this.element.clientWidth),this.parent.set_height(this.element.clientHeight)):(this.parent.set_width(window.innerWidth),this.parent.set_height(window.innerHeight)),this.cacheElementWidth=
this.parent.__width,this.cacheElementHeight=this.parent.__height,this.resizeElement=!0);null!=this.canvas?(this.canvas.width=Math.round(this.parent.__width*this.scale),this.canvas.height=Math.round(this.parent.__height*this.scale),this.canvas.style.width=this.parent.__width+"px",this.canvas.style.height=this.parent.__height+"px"):(this.div.style.width=this.parent.__width+"px",this.div.style.height=this.parent.__height+"px");this.updateSize();if(null!=this.element){null!=this.canvas?this.element!=
this.canvas&&this.element.appendChild(this.canvas):this.element.appendChild(this.div);a="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(var b=0;b<a.length;){var c=a[b];++b;this.element.addEventListener(c,k(this,this.handleMouseEvent),!0)}window.document.addEventListener("dragstart",function(a){return"img"==a.target.nodeName.toLowerCase()?(a.preventDefault(),!1):!0},!1);this.element.addEventListener("contextmenu",k(this,this.handleContextMenuEvent),!0);this.element.addEventListener("touchstart",
k(this,this.handleTouchEvent),!0);this.element.addEventListener("touchmove",k(this,this.handleTouchEvent),!0);this.element.addEventListener("touchend",k(this,this.handleTouchEvent),!0);this.element.addEventListener("touchcancel",k(this,this.handleTouchEvent),!0);this.element.addEventListener("gamepadconnected",k(this,this.handleGamepadEvent),!0);this.element.addEventListener("gamepaddisconnected",k(this,this.handleGamepadEvent),!0)}},handleContextMenuEvent:function(a){this.parent.onMouseUp.canceled&&
a.preventDefault()},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":Ca.__connect(a.gamepad.index);"standard"==a.gamepad.mapping&&Ka.__connect(a.gamepad.index);break;case "gamepaddisconnected":Ca.__disconnect(a.gamepad.index),Ka.__disconnect(a.gamepad.index)}},handleMouseEvent:function(a){if("wheel"!=a.type){if(null!=this.element)if(null!=this.canvas){var b=this.canvas.getBoundingClientRect();var c=this.parent.__width/b.width*(a.clientX-b.left);b=this.parent.__height/b.height*
(a.clientY-b.top)}else null!=this.div?(b=this.div.getBoundingClientRect(),c=a.clientX-b.left,b=a.clientY-b.top):(b=this.element.getBoundingClientRect(),c=this.parent.__width/b.width*(a.clientX-b.left),b=this.parent.__height/b.height*(a.clientY-b.top));else c=a.clientX,b=a.clientY;switch(a.type){case "mousedown":this.parent.onMouseDown.dispatch(c,b,a.button);this.parent.onMouseDown.canceled&&a.preventDefault();break;case "mouseenter":a.target==this.element&&(this.parent.onEnter.dispatch(),this.parent.onEnter.canceled&&
a.preventDefault());break;case "mouseleave":a.target==this.element&&(this.parent.onLeave.dispatch(),this.parent.onLeave.canceled&&a.preventDefault());break;case "mousemove":if(c!=this.cacheMouseX||b!=this.cacheMouseY)this.parent.onMouseMove.dispatch(c,b),this.parent.onMouseMoveRelative.dispatch(c-this.cacheMouseX,b-this.cacheMouseY),(this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&a.preventDefault();break;case "mouseup":this.parent.onMouseUp.dispatch(c,b,a.button),this.parent.onMouseUp.canceled&&
a.preventDefault()}this.cacheMouseX=c;this.cacheMouseY=b}else this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY),this.parent.onMouseWheel.canceled&&a.preventDefault()},handleResizeEvent:function(a){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(a){a.preventDefault();var b=null;null!=this.element&&(b=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.element.getBoundingClientRect());var c=this.setWidth,d=this.setHeight;
if(0==c||0==d)null!=b?(c=b.width,d=b.height):d=c=1;for(var e,g,x,f,h,k=0,l=a.changedTouches;k<l.length;){var m=l[k];++k;null!=b?(g=c/b.width*(m.clientX-b.left),x=d/b.height*(m.clientY-b.top)):(g=m.clientX,x=m.clientY);if("touchstart"==a.type)e=this.unusedTouchesPool.pop(),null==e?e=new La(g/c,x/d,m.identifier,0,0,m.force,this.parent.id):(e.x=g/c,e.y=x/d,e.id=m.identifier,e.dx=0,e.dy=0,e.pressure=m.force,e.device=this.parent.id),this.currentTouches.h[m.identifier]=e,La.onStart.dispatch(e),null==this.primaryTouch&&
(this.primaryTouch=e),e==this.primaryTouch&&this.parent.onMouseDown.dispatch(g,x,0);else if(e=this.currentTouches.h[m.identifier],null!=e)switch(f=e.x,h=e.y,e.x=g/c,e.y=x/d,e.dx=e.x-f,e.dy=e.y-h,e.pressure=m.force,a.type){case "touchcancel":La.onCancel.dispatch(e);this.currentTouches.remove(m.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.primaryTouch=null);break;case "touchend":La.onEnd.dispatch(e);this.currentTouches.remove(m.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&
(this.parent.onMouseUp.dispatch(g,x,0),this.primaryTouch=null);break;case "touchmove":La.onMove.dispatch(e),e==this.primaryTouch&&this.parent.onMouseMove.dispatch(g,x)}}},resize:function(a,b){},updateSize:function(){if(this.parent.__resizable){if(null!=this.element){var a=this.element.clientWidth;var b=this.element.clientHeight}else a=window.innerWidth,b=window.innerHeight;if(a!=this.cacheElementWidth||b!=this.cacheElementHeight){this.cacheElementWidth=a;this.cacheElementHeight=b;var c=this.resizeElement||
0==this.setWidth&&0==this.setHeight;if(null!=this.element&&(null==this.div||null!=this.div&&c))if(c){if(this.parent.__width!=a||this.parent.__height!=b)this.parent.set_width(a),this.parent.set_height(b),null!=this.canvas?this.element!=this.canvas&&(this.canvas.width=Math.round(a*this.scale),this.canvas.height=Math.round(b*this.scale),this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"):(this.div.style.width=a+"px",this.div.style.height=b+"px"),this.parent.onResize.dispatch(a,b)}else{c=
0!=this.setWidth?a/this.setWidth:1;var d=0!=this.setHeight?b/this.setHeight:1,e=a,g=b,x=0,f=0;c<d?(g=Math.floor(this.setHeight*c),f=Math.floor((b-g)/2)):(e=Math.floor(this.setWidth*d),x=Math.floor((a-e)/2));null!=this.canvas?this.element!=this.canvas&&(this.canvas.style.width=e+"px",this.canvas.style.height=g+"px",this.canvas.style.marginLeft=x+"px",this.canvas.style.marginTop=f+"px"):(this.div.style.width=e+"px",this.div.style.height=g+"px",this.div.style.marginLeft=x+"px",this.div.style.marginTop=
f+"px")}}}},__class__:Mc};var xa=function(a,b){null==b&&(b=!1);if(null!=a)if(b)b=new jb,b.future=this,Wa.queue({promise:b,work:a});else try{this.value=a(),this.isComplete=!0}catch(c){c instanceof r&&(c=c.val),this.error=c,this.isError=!0}};f["lime.app.Future"]=xa;xa.__name__=["lime","app","Future"];xa.withValue=function(a){var b=new xa;b.isComplete=!0;b.value=a;return b};xa.prototype={onComplete:function(a){null!=a&&(this.isComplete?a(this.value):this.isError||(null==this.__completeListeners&&(this.__completeListeners=
[]),this.__completeListeners.push(a)));return this},onError:function(a){null!=a&&(this.isError?a(this.error):this.isComplete||(null==this.__errorListeners&&(this.__errorListeners=[]),this.__errorListeners.push(a)));return this},onProgress:function(a){null!=a&&(null==this.__progressListeners&&(this.__progressListeners=[]),this.__progressListeners.push(a));return this},then:function(a){if(this.isComplete)return a(this.value);if(this.isError){var b=new xa;b.onError(this.error);return b}var c=new jb;
this.onError(k(c,c.error));this.onProgress(k(c,c.progress));this.onComplete(function(b){b=a(b);b.onError(k(c,c.error));b.onComplete(k(c,c.complete))});return c.future},__class__:xa};var Wa=function(){};f["lime.app._Future.FutureWork"]=Wa;Wa.__name__=["lime","app","_Future","FutureWork"];Wa.queue=function(a){null==Wa.threadPool&&(Wa.threadPool=new hf,Wa.threadPool.doWork.add(Wa.threadPool_doWork),Wa.threadPool.onComplete.add(Wa.threadPool_onComplete),Wa.threadPool.onError.add(Wa.threadPool_onError));
Wa.threadPool.queue(a)};Wa.threadPool_doWork=function(a){try{var b=a.work();Wa.threadPool.sendComplete({promise:a.promise,result:b})}catch(c){c instanceof r&&(c=c.val),Wa.threadPool.sendError({promise:a.promise,error:c})}};Wa.threadPool_onComplete=function(a){a.promise.complete(a.result)};Wa.threadPool_onError=function(a){a.promise.error(a.error)};var We=function(){this.bytesTotalCache=new y;this.bytesLoadedCache2=new y;this.bytesLoadedCache=new rb;this.onProgress=new ud;this.onComplete=new Ha;this.bytesTotal=
this.bytesLoaded=0;this.libraries=[];this.libraryNames=[];this.onProgress.add(k(this,this.update))};f["lime.app.Preloader"]=We;We.__name__=["lime","app","Preloader"];We.prototype={addLibrary:function(a){this.libraries.push(a)},addLibraryName:function(a){-1==this.libraryNames.indexOf(a)&&this.libraryNames.push(a)},create:function(a){},load:function(){for(var a=this,b=0,c=this.libraries;b<c.length;){var d=c[b];++b;this.bytesTotal+=d.bytesTotal}this.loadedLibraries=-1;this.preloadStarted=!1;b=0;for(c=
this.libraries;b<c.length;)d=[c[b]],++b,qa.verbose("Preloading asset library",{fileName:"Preloader.hx",lineNumber:153,className:"lime.app.Preloader",methodName:"load"}),d[0].load().onProgress(function(b){return function(c,d){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+c:a.bytesLoaded+(c-a.bytesLoadedCache.h[b[0].__id__]);a.bytesLoadedCache.set(b[0],c);a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}(d)).onComplete(function(b){return function(c){a.bytesLoaded=
null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+b[0].bytesTotal:a.bytesLoaded+(b[0].bytesTotal-a.bytesLoadedCache.h[b[0].__id__]);a.loadedAssetLibrary()}}(d)).onError(function(){return function(a){qa.error(a,{fileName:"Preloader.hx",lineNumber:191,className:"lime.app.Preloader",methodName:"load"})}}());b=0;for(c=this.libraryNames;b<c.length;)++b,this.bytesTotal+=200;this.loadedLibraries++;this.preloadStarted=!0;this.updateProgress()},loadedAssetLibrary:function(a){this.loadedLibraries++;
var b=this.loadedLibraries;this.preloadStarted||++b;var c=this.libraries.length+this.libraryNames.length;null!=a?qa.verbose("Loaded asset library: "+a+" ["+b+"/"+c+"]",{fileName:"Preloader.hx",lineNumber:223,className:"lime.app.Preloader",methodName:"loadedAssetLibrary"}):qa.verbose("Loaded asset library ["+b+"/"+c+"]",{fileName:"Preloader.hx",lineNumber:227,className:"lime.app.Preloader",methodName:"loadedAssetLibrary"});this.updateProgress()},start:function(){this.complete||(this.complete=!0,this.onComplete.dispatch())},
update:function(a,b){},updateProgress:function(){var a=this;this.simulateProgress||this.onProgress.dispatch(this.bytesLoaded,this.bytesTotal);if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=!0;for(var b=0,c=this.libraryNames;b<c.length;){var d=[c[b]];++b;qa.verbose("Preloading asset library: "+d[0],{fileName:"Preloader.hx",lineNumber:276,className:"lime.app.Preloader",methodName:"updateProgress"});v.loadLibrary(d[0]).onProgress(function(b){return function(c,
d){if(0<d){var e=a.bytesTotalCache;(null!=h[b[0]]?e.existsReserved(b[0]):e.h.hasOwnProperty(b[0]))||(e=a.bytesTotalCache,null!=h[b[0]]?e.setReserved(b[0],d):e.h[b[0]]=d,a.bytesTotal+=d-200);c>d&&(c=d);d=a.bytesLoadedCache2;(null!=h[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))?(d=a.bytesLoadedCache2,a.bytesLoaded+=c-(null!=h[b[0]]?d.getReserved(b[0]):d.h[b[0]])):a.bytesLoaded+=c;d=a.bytesLoadedCache2;null!=h[b[0]]?d.setReserved(b[0],c):d.h[b[0]]=c;a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,
a.bytesTotal)}}}(d)).onComplete(function(b){return function(c){c=200;var d=a.bytesTotalCache;if(null!=h[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))c=a.bytesTotalCache,c=null!=h[b[0]]?c.getReserved(b[0]):c.h[b[0]];d=a.bytesLoadedCache2;(null!=h[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))?(d=a.bytesLoadedCache2,a.bytesLoaded+=c-(null!=h[b[0]]?d.getReserved(b[0]):d.h[b[0]])):a.bytesLoaded+=c;a.loadedAssetLibrary(b[0])}}(d)).onError(function(){return function(a){qa.error(a,{fileName:"Preloader.hx",
lineNumber:335,className:"lime.app.Preloader",methodName:"updateProgress"})}}())}}this.simulateProgress||this.loadedLibraries!=this.libraries.length+this.libraryNames.length||(this.preloadComplete||(this.preloadComplete=!0,qa.verbose("Preload complete",{fileName:"Preloader.hx",lineNumber:349,className:"lime.app.Preloader",methodName:"updateProgress"})),this.start())},__class__:We};var jb=function(){this.future=new xa};f["lime.app.Promise"]=jb;jb.__name__=["lime","app","Promise"];jb.prototype={complete:function(a){if(!this.future.isError&&
(this.future.isComplete=!0,this.future.value=a,null!=this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__completeListeners=null}return this},completeWith:function(a){a.onComplete(k(this,this.complete));a.onError(k(this,this.error));a.onProgress(k(this,this.progress));return this},error:function(a){if(!this.future.isComplete&&(this.future.isError=!0,this.future.error=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<
c.length;){var d=c[b];++b;d(a)}this.future.__errorListeners=null}return this},progress:function(a,b){if(!this.future.isError&&!this.future.isComplete&&null!=this.future.__progressListeners)for(var c=0,d=this.future.__progressListeners;c<d.length;){var e=d[c];++c;e(a,b)}return this},__class__:jb};var vd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Float_Float_Int_Void"]=vd;vd.__name__=["lime","app","_Event_Float_Float_Int_Void"];vd.prototype=
{add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,
b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,g=0;g<d.length&&(d[g](a,b,c),e[g]?++g:this.remove(d[g]),!this.canceled););},__class__:vd};var tc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Float_Float_Void"]=tc;tc.__name__=["lime","app","_Event_Float_Float_Void"];tc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:tc};
var jf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Float_Float_Void"]=jf;jf.__name__=["lime","app","_Event_Int_Float_Float_Void"];jf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},
__class__:jf};var kf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Float_Void"]=kf;kf.__name__=["lime","app","_Event_Int_Float_Void"];kf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},
remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:kf};var ud=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Int_Void"]=ud;ud.__name__=
["lime","app","_Event_Int_Int_Void"];ud.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,
1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:ud};var oc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_Void"]=oc;oc.__name__=["lime","app","_Event_Int_Void"];oc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:oc};
var lf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=lf;lf.__name__=["lime","app","_Event_Int_lime_ui_JoystickHatPosition_Void"];lf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},__class__:lf};var mf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_String_Int_Int_Void"]=mf;mf.__name__=["lime","app","_Event_String_Int_Int_Void"];mf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},__class__:mf};var wd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_String_Void"]=wd;wd.__name__=["lime","app","_Event_String_Void"];wd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},__class__:wd};var Ha=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_Void_Void"]=Ha;Ha.__name__=["lime","app","_Event_Void_Void"];Ha.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?++c:this.remove(a[c]),!this.canceled););},__class__:Ha};var uc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_haxe_Function_Void"]=
uc;uc.__name__=["lime","app","_Event_haxe_Function_Void"];uc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:uc};var nf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_graphics_RenderContext_Void"]=nf;nf.__name__=["lime","app","_Event_lime_graphics_RenderContext_Void"];nf.prototype={add:function(a,b,c){null==c&&(c=0);null==
b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=
this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:nf};var of=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=of;of.__name__=["lime","app","_Event_lime_ui_GamepadAxis_Float_Void"];of.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:of};
var xd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_GamepadButton_Void"]=xd;xd.__name__=["lime","app","_Event_lime_ui_GamepadButton_Void"];xd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:xd};var pf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_Gamepad_Void"]=
pf;pf.__name__=["lime","app","_Event_lime_ui_Gamepad_Void"];pf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:pf};var qf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_Joystick_Void"]=qf;qf.__name__=["lime","app","_Event_lime_ui_Joystick_Void"];qf.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=
0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,
c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:qf};var yd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=yd;yd.__name__=["lime","app","_Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"];yd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,
0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:yd};
var vc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};f["lime.app._Event_lime_ui_Touch_Void"]=vc;vc.__name__=["lime","app","_Event_lime_ui_Touch_Void"];vc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var g=d++;if(c>this.__priorities[g]){this.__listeners.splice(g,0,a);this.__priorities.splice(g,0,c);this.__repeat.splice(g,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},
remove:function(a){for(var b=this.__listeners.length;0<=--b;)L.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:vc};var T=function(a,b,c,d,e,g,x){null==e&&(e=-1);null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=d;this.height=
e;this.version=0;null==x&&(x=ya.CANVAS);this.type=x;if(null==a){if(0<d&&0<e)switch(this.type[1]){case 0:this.buffer=new Mb(null,d,e);Ia.createCanvas(this,d,e);null!=g&&0!=g&&this.fillRect(new wc(0,0,d,e),g);break;case 1:a=d*e*4,a=null!=a?new sb(a):null,this.buffer=new Mb(a,d,e),null!=g&&0!=g&&this.fillRect(new wc(0,0,d,e),g)}}else this.__fromImageBuffer(a)};f["lime.graphics.Image"]=T;T.__name__=["lime","graphics","Image"];T.fromBase64=function(a,b){if(null==a)return null;var c=new T;c.__fromBase64(a,
b);return c};T.fromBitmapData=function(a){return null==a?null:a.image};T.fromBytes=function(a){if(null==a)return null;var b=new T;b.__fromBytes(a);return b};T.fromCanvas=function(a){if(null==a)return null;var b=new Mb(null,a.width,a.height);b.set_src(a);a=new T(b);a.type=ya.CANVAS;return a};T.fromFile=function(a){if(null==a)return null;var b=new T;b.__fromFile(a);return b};T.fromImageElement=function(a){if(null==a)return null;var b=new Mb(null,a.width,a.height);b.set_src(a);a=new T(b);a.type=ya.CANVAS;
return a};T.loadFromBase64=function(a,b){return null==a||null==b?xa.withValue(null):J.loadImage("data:"+b+";base64,"+a)};T.loadFromBytes=function(a){if(null==a)return xa.withValue(null);if(T.__isPNG(a))var b="image/png";else if(T.__isJPG(a))b="image/jpeg";else if(T.__isGIF(a))b="image/gif";else if(T.__isWebP(a))b="image/webp";else return xa.withValue(null);return T.loadFromBase64(T.__base64Encode(a),b)};T.loadFromFile=function(a){return null==a?xa.withValue(null):J.loadImage(a)};T.__base64Encode=
function(a){switch(a.length%3){case 1:var b="==";break;case 2:b="=";break;default:b=""}null==T.__base64Encoder&&(T.__base64Encoder=new Jc(ba.ofString(T.__base64Chars)));return T.__base64Encoder.encodeBytes(a).toString()+b};T.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,6);return"GIF87a"!=a?"GIF89a"==a:!0};T.__isJPG=function(a){return null==a||4>a.length?!1:255==a.b[0]&&216==a.b[1]&&255==a.b[a.length-2]?217==a.b[a.length-1]:!1};T.__isPNG=function(a){return null==a||8>a.length?
!1:137==a.b[0]&&80==a.b[1]&&78==a.b[2]&&71==a.b[3]&&13==a.b[4]&&10==a.b[5]&&26==a.b[6]?10==a.b[7]:!1};T.__isWebP=function(a){return null==a||16>a.length?!1:"RIFF"==a.getString(0,4)?"WEBP"==a.getString(8,4):!1};T.prototype={fillRect:function(a,b,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type[1]){case 0:Ia.fillRect(this,a,b,c);break;case 1:Ia.convertToData(this);if(0==this.buffer.data.length)break;Nc.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null==
c)b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255;else switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>>8&255)<<16|(b>>>16&255)<<8|b>>>24&255;break;default:b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255}this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),b)}},setPixel32:function(a,b,c,d){if(!(null==this.buffer||0>a||0>b||a>=this.width||b>=this.height))switch(this.type[1]){case 0:Ia.setPixel32(this,a,b,c,d);break;case 1:Ia.convertToData(this);Nc.setPixel32(this,a,b,c,d);
break;case 2:if(null==d)c=(c&255)<<24|(c>>>24&255)<<16|(c>>>16&255)<<8|c>>>8&255;else switch(d){case 1:break;case 2:c=(c&255)<<24|(c>>>8&255)<<16|(c>>>16&255)<<8|c>>>24&255;break;default:c=(c&255)<<24|(c>>>24&255)<<16|(c>>>16&255)<<8|c>>>8&255}this.buffer.__srcBitmapData.setPixel32(a+this.offsetX,b+this.offsetY,c)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,
0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,b,c){var d=this,e=new Image;e.addEventListener("load",function(a){d.buffer=new Mb(null,e.width,e.height);d.buffer.__srcImage=e;d.offsetX=0;d.offsetY=0;d.width=d.buffer.width;d.height=d.buffer.height;null!=c&&c(d)},!1);e.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){if(T.__isPNG(a))var c="image/png";else if(T.__isJPG(a))c="image/jpeg";else if(T.__isGIF(a))c="image/gif";else return;
this.__fromBase64(T.__base64Encode(a),c,b)},__fromFile:function(a,b,c){var d=this,e=new Image;J.__isSameOrigin(a)||(e.crossOrigin="Anonymous");e.onload=function(a){d.buffer=new Mb(null,e.width,e.height);d.buffer.__srcImage=e;d.width=e.width;d.height=e.height;null!=b&&b(d)};e.onerror=function(a){null!=c&&c()};e.src=a},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&
0<this.buffer.height&&Ia.convertToData(this);return this.buffer.data},get_rect:function(){return new wc(0,0,this.width,this.height)},get_transparent:function(){return null==this.buffer?!1:this.buffer.transparent},set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:T,__properties__:{get_rect:"get_rect",set_transparent:"set_transparent",get_transparent:"get_transparent",get_data:"get_data"}};var Mb=function(a,b,c,d,e){null==d&&(d=32);null==c&&(c=0);null==b&&
(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=d;this.format=null==e?0:e;this.premultiplied=!1;this.transparent=!0};f["lime.graphics.ImageBuffer"]=Mb;Mb.__name__=["lime","graphics","ImageBuffer"];Mb.prototype={set_src:function(a){I.__instanceof(a,Image)?this.__srcImage=a:I.__instanceof(a,HTMLCanvasElement)&&(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a},get_stride:function(){return 4*this.width},__class__:Mb,__properties__:{get_stride:"get_stride",
set_src:"set_src"}};var ya=f["lime.graphics.ImageType"]={__ename__:!0,__constructs__:["CANVAS","DATA","FLASH","CUSTOM"]};ya.CANVAS=["CANVAS",0];ya.CANVAS.toString=B;ya.CANVAS.__enum__=ya;ya.DATA=["DATA",1];ya.DATA.toString=B;ya.DATA.__enum__=ya;ya.FLASH=["FLASH",2];ya.FLASH.toString=B;ya.FLASH.__enum__=ya;ya.CUSTOM=["CUSTOM",3];ya.CUSTOM.toString=B;ya.CUSTOM.__enum__=ya;var Ma=f["lime.graphics.RenderContext"]={__ename__:!0,__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM NONE".split(" ")};
Ma.OPENGL=function(a){a=["OPENGL",0,a];a.__enum__=Ma;a.toString=B;return a};Ma.CANVAS=function(a){a=["CANVAS",1,a];a.__enum__=Ma;a.toString=B;return a};Ma.DOM=function(a){a=["DOM",2,a];a.__enum__=Ma;a.toString=B;return a};Ma.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Ma;a.toString=B;return a};Ma.CAIRO=function(a){a=["CAIRO",4,a];a.__enum__=Ma;a.toString=B;return a};Ma.CONSOLE=function(a){a=["CONSOLE",5,a];a.__enum__=Ma;a.toString=B;return a};Ma.CUSTOM=function(a){a=["CUSTOM",6,a];a.__enum__=Ma;
a.toString=B;return a};Ma.NONE=["NONE",7];Ma.NONE.toString=B;Ma.NONE.__enum__=Ma;var Ve=function(a){this.onRender=new Ha;this.onContextRestored=new nf;this.onContextLost=new Ha;this.window=a;this.backend=new gf(this);this.window.renderer=this};f["lime.graphics.Renderer"]=Ve;Ve.__name__=["lime","graphics","Renderer"];Ve.prototype={create:function(){this.backend.create()},flip:function(){this.backend.flip()},render:function(){this.backend.render()},__class__:Ve};var ka=f["lime.graphics.RendererType"]=
{__ename__:!0,__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM".split(" ")};ka.OPENGL=["OPENGL",0];ka.OPENGL.toString=B;ka.OPENGL.__enum__=ka;ka.CANVAS=["CANVAS",1];ka.CANVAS.toString=B;ka.CANVAS.__enum__=ka;ka.DOM=["DOM",2];ka.DOM.toString=B;ka.DOM.__enum__=ka;ka.FLASH=["FLASH",3];ka.FLASH.toString=B;ka.FLASH.__enum__=ka;ka.CAIRO=["CAIRO",4];ka.CAIRO.toString=B;ka.CAIRO.__enum__=ka;ka.CONSOLE=["CONSOLE",5];ka.CONSOLE.toString=B;ka.CONSOLE.__enum__=ka;ka.CUSTOM=["CUSTOM",6];ka.CUSTOM.toString=
B;ka.CUSTOM.__enum__=ka;var n=function(){};f["lime.graphics.opengl.GL"]=n;n.__name__=["lime","graphics","opengl","GL"];var zb=f["lime.graphics.opengl.GLContextType"]={__ename__:!0,__constructs__:["OPENGL","GLES","WEBGL"]};zb.OPENGL=["OPENGL",0];zb.OPENGL.toString=B;zb.OPENGL.__enum__=zb;zb.GLES=["GLES",1];zb.GLES.toString=B;zb.GLES.__enum__=zb;zb.WEBGL=["WEBGL",2];zb.WEBGL.toString=B;zb.WEBGL.__enum__=zb;var Ia=function(){};f["lime.graphics.utils.ImageCanvasUtil"]=Ia;Ia.__name__=["lime","graphics",
"utils","ImageCanvasUtil"];Ia.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(Ia.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,0,0)),c.__srcImage=null):null==c.__srcCanvas&&null!=c.data?(a.set_transparent(!0),Ia.createCanvas(a,c.width,c.height),Ia.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==ya.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,
0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=ya.CANVAS};Ia.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&Ia.convertToCanvas(a);if(null!=c.__srcCanvas&&null==c.data)Ia.createImageData(a),a.type==ya.CANVAS&&(a.dirty=!1);else if(a.type==ya.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)Ia.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,
c.height);var d=c.__srcImageData.data.buffer;d=null!=d?new sb(d):null;c.data=d}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=ya.DATA};Ia.createCanvas=function(a,b,c){var d=a.buffer;null==d.__srcCanvas&&(d.__srcCanvas=window.document.createElement("canvas"),d.__srcCanvas.width=b,d.__srcCanvas.height=c,a.get_transparent()?d.__srcContext=d.__srcCanvas.getContext("2d"):(a.get_transparent()||d.__srcCanvas.setAttribute("moz-opaque","true"),d.__srcContext=d.__srcCanvas.getContext("2d",
{alpha:!1})),d.__srcContext.mozImageSmoothingEnabled=!1,d.__srcContext.msImageSmoothingEnabled=!1,d.__srcContext.imageSmoothingEnabled=!1)};Ia.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));var b=a.__srcImageData.data.buffer;b=null!=b?new sb(b):null;a.data=b}};Ia.fillRect=function(a,b,c,d){Ia.convertToCanvas(a);
if(1==d){d=c>>16&255;var e=c>>8&255;var g=c&255;c=a.get_transparent()?c>>24&255:255}else d=c>>24&255,e=c>>16&255,g=c>>8&255,c=a.get_transparent()?c&255:255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:(255>c&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY),0<c&&(a.buffer.__srcContext.fillStyle="rgba("+d+", "+e+", "+g+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,
b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY)),a.dirty=!0,a.version++)};Ia.setPixel32=function(a,b,c,d,e){Ia.convertToData(a);Nc.setPixel32(a,b,c,d,e)};var Nc=function(){};f["lime.graphics.utils.ImageDataUtil"]=Nc;Nc.__name__=["lime","graphics","utils","ImageDataUtil"];Nc.fillRect=function(a,b,c,d){switch(d){case 1:c=(c>>>16&255)<<24|(c>>>8&255)<<16|(c&255)<<8|c>>>24&255;break;case 2:c=(c>>>8&255)<<24|(c>>>16&255)<<16|(c>>>24&255)<<8|c&255}a.get_transparent()||(c=(c>>>24&255)<<24|(c>>>16&255)<<
16|(c>>>8&255)<<8|255);d=a.buffer.data;if(null!=d){var e=a.buffer.format;a.buffer.premultiplied&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(cb.a16=cb.__alpha16[c&255],c=((c>>>24&255)*cb.a16>>16&255)<<24|((c>>>16&255)*cb.a16>>16&255)<<16|((c>>>8&255)*cb.a16>>16&255)<<8|c&255));b=new rf(a,b);for(var g,x=0,f=b.height;x<f;){g=x++;g=b.byteOffset+b.stride*g;for(var h=0,k=b.width;h<k;){var l=h++;l=g+4*l;switch(e){case 0:d[l]=c>>>24&255;d[l+1]=c>>>16&255;d[l+2]=c>>>8&255;d[l+3]=c&255;break;case 1:d[l]=c&255;
d[l+1]=c>>>24&255;d[l+2]=c>>>16&255;d[l+3]=c>>>8&255;break;case 2:d[l]=c>>>8&255,d[l+1]=c>>>16&255,d[l+2]=c>>>24&255,d[l+3]=c&255}}}a.dirty=!0;a.version++}};Nc.setPixel32=function(a,b,c,d,e){switch(e){case 1:d=(d>>>16&255)<<24|(d>>>8&255)<<16|(d&255)<<8|d>>>24&255;break;case 2:d=(d>>>8&255)<<24|(d>>>16&255)<<16|(d>>>24&255)<<8|d&255}a.get_transparent()||(d=(d>>>24&255)<<24|(d>>>16&255)<<16|(d>>>8&255)<<8|255);e=a.buffer.data;b=4*(c+a.offsetY)*a.buffer.width+4*(b+a.offsetX);a.buffer.premultiplied&&
(0==(d&255)?0!=d&&(d=0):255!=(d&255)&&(cb.a16=cb.__alpha16[d&255],d=((d>>>24&255)*cb.a16>>16&255)<<24|((d>>>16&255)*cb.a16>>16&255)<<16|((d>>>8&255)*cb.a16>>16&255)<<8|d&255));switch(a.buffer.format){case 0:e[b]=d>>>24&255;e[b+1]=d>>>16&255;e[b+2]=d>>>8&255;e[b+3]=d&255;break;case 1:e[b]=d&255;e[b+1]=d>>>24&255;e[b+2]=d>>>16&255;e[b+3]=d>>>8&255;break;case 2:e[b]=d>>>8&255,e[b+1]=d>>>16&255,e[b+2]=d>>>24&255,e[b+3]=d&255}a.dirty=!0;a.version++};var rf=function(a,b){this.image=a;null==b?this.rect=
a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=0),0>b.height&&(b.height=0),this.rect=b);this.stride=a.buffer.get_stride();this.__update()};f["lime.graphics.utils._ImageDataUtil.ImageDataView"]=rf;rf.__name__=["lime","graphics","utils","_ImageDataUtil","ImageDataView"];rf.prototype={__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);
this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+4*(this.x+this.image.offsetX)},__class__:rf};var wc=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};f["lime.math.Rectangle"]=wc;wc.__name__=["lime","math","Rectangle"];wc.prototype={offset:function(a,b){this.x+=a;this.y+=b},__toFlashRectangle:function(){return null},__class__:wc};var Mg=function(){};f["lime.math.Vector2"]=Mg;Mg.__name__=
["lime","math","Vector2"];var df=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.w=d;this.x=a;this.y=b;this.z=c};f["lime.math.Vector4"]=df;df.__name__=["lime","math","Vector4"];df.prototype={__class__:df};var cb={};f["lime.math.color._RGBA.RGBA_Impl_"]=cb;cb.__name__=["lime","math","color","_RGBA","RGBA_Impl_"];var Ng=function(){};f["lime.media.ALAudioContext"]=Ng;Ng.__name__=["lime","media","ALAudioContext"];var Og=function(){};f["lime.media.ALCAudioContext"]=Og;
Og.__name__=["lime","media","ALCAudioContext"];var sa=function(){};f["lime.media.AudioBuffer"]=sa;sa.__name__=["lime","media","AudioBuffer"];sa.fromBase64=function(a){if(null==a)return null;-1==a.indexOf(",")&&(a="data:"+sa.__getCodec(Lb.decode(a))+";base64,"+a);var b=new sa;b.set_src(new Howl({src:[a],html5:!0,preload:!1}));return b};sa.fromBytes=function(a){if(null==a)return null;var b=new sa;b.set_src(new Howl({src:["data:"+sa.__getCodec(a)+";base64,"+Lb.encode(a)],html5:!0,preload:!1}));return b};
sa.fromFile=function(a){if(null==a)return null;var b=new sa;b.__srcHowl=new Howl({src:[a],preload:!1});return b};sa.fromFiles=function(a){var b=new sa;b.__srcHowl=new Howl({src:a,preload:!1});return b};sa.fromVorbisFile=function(a){return null};sa.loadFromFile=function(a){var b=new jb,c=sa.fromFile(a);null!=c?null!=c&&(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(a,c){b.error(c)}),c.__srcHowl.load()):b.error(null);return b.future};sa.loadFromFiles=function(a){var b=
new jb,c=sa.fromFiles(a);null!=c?(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(){b.error(null)}),c.__srcHowl.load()):b.error(null);return b.future};sa.__getCodec=function(a){switch(a.getString(0,4)){case "OggS":return"audio/ogg";case "RIFF":if("WAVE"==a.getString(8,4))return"audio/wav";var b=a.b[2],c=a.b[1];switch(a.b[0]){case 73:if(68==c&&51==b)return"audio/mp3";break;case 255:switch(c){case 250:case 251:return"audio/mp3"}}break;case "fLaC":return"audio/flac";
default:switch(b=a.b[2],c=a.b[1],a.b[0]){case 73:if(68==c&&51==b)return"audio/mp3";break;case 255:switch(c){case 250:case 251:return"audio/mp3"}}}qa.error("Unsupported sound format",{fileName:"AudioBuffer.hx",lineNumber:493,className:"lime.media.AudioBuffer",methodName:"__getCodec"});return null};sa.prototype={set_src:function(a){return this.__srcHowl=a},__class__:sa,__properties__:{set_src:"set_src"}};var Eb=f["lime.media.AudioContext"]={__ename__:!0,__constructs__:["OPENAL","HTML5","WEB","FLASH",
"CUSTOM"]};Eb.OPENAL=function(a,b){a=["OPENAL",0,a,b];a.__enum__=Eb;a.toString=B;return a};Eb.HTML5=function(a){a=["HTML5",1,a];a.__enum__=Eb;a.toString=B;return a};Eb.WEB=function(a){a=["WEB",2,a];a.__enum__=Eb;a.toString=B;return a};Eb.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Eb;a.toString=B;return a};Eb.CUSTOM=function(a){a=["CUSTOM",4,a];a.__enum__=Eb;a.toString=B;return a};var pc=function(){};f["lime.media.AudioManager"]=pc;pc.__name__=["lime","media","AudioManager"];pc.init=function(a){if(null==
pc.context)if(null==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,pc.context=Eb.WEB(new AudioContext)}catch(b){pc.context=Eb.HTML5(new sf)}else pc.context=a};var Oc=function(a,b,c,d){null==d&&(d=0);null==b&&(b=0);this.buffer=a;this.offset=b;this.backend=new ef(this);null!=c&&0!=c&&this.set_length(c);this.set_loops(d);null!=a&&this.init()};f["lime.media.AudioSource"]=Oc;Oc.__name__=["lime","media","AudioSource"];Oc.prototype={init:function(){this.backend.init()},get_length:function(){return this.backend.getLength()},
set_length:function(a){return this.backend.setLength(a)},set_loops:function(a){return this.backend.setLoops(a)},__class__:Oc,__properties__:{set_loops:"set_loops",set_length:"set_length",get_length:"get_length"}};var Pg=function(){};f["lime.media.FlashAudioContext"]=Pg;Pg.__name__=["lime","media","FlashAudioContext"];var sf=function(){};f["lime.media.HTML5AudioContext"]=sf;sf.__name__=["lime","media","HTML5AudioContext"];sf.prototype={__class__:sf};var tf=function(){};f["lime.net._IHTTPRequest"]=
tf;tf.__name__=["lime","net","_IHTTPRequest"];tf.prototype={__class__:tf};var Fb=function(a){this.uri=a;this.contentType="application/x-www-form-urlencoded";this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new y;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1;this.backend=new J;this.backend.init(this)};f["lime.net._HTTPRequest.AbstractHTTPRequest"]=Fb;Fb.__name__=["lime","net","_HTTPRequest","AbstractHTTPRequest"];Fb.__interfaces__=[tf];Fb.prototype={__class__:Fb};
var fc=function(a){Fb.call(this,a)};f["lime.net._HTTPRequest_Bytes"]=fc;fc.__name__=["lime","net","_HTTPRequest_Bytes"];fc.__super__=Fb;fc.prototype=p(Fb.prototype,{fromBytes:function(a){return a},load:function(a){var b=this;null!=a&&(this.uri=a);var c=new jb;a=this.backend.loadData(this.uri);a.onProgress(k(c,c.progress));a.onError(k(c,c.error));a.onComplete(function(a){b.responseData=b.fromBytes(a);c.complete(b.responseData)});return c.future},__class__:fc});var zd=function(a){Fb.call(this,a)};f["lime.net._HTTPRequest_String"]=
zd;zd.__name__=["lime","net","_HTTPRequest_String"];zd.__super__=Fb;zd.prototype=p(Fb.prototype,{load:function(a){var b=this;null!=a&&(this.uri=a);var c=new jb;a=this.backend.loadText(this.uri);a.onProgress(k(c,c.progress));a.onError(k(c,c.error));a.onComplete(function(a){b.responseData=a;c.complete(b.responseData)});return c.future},__class__:zd});var td=function(a,b){null==b&&(b="");this.name=a;this.value=b};f["lime.net.HTTPRequestHeader"]=td;td.__name__=["lime","net","HTTPRequestHeader"];td.prototype=
{__class__:td};var Ad=function(a){Fb.call(this,a)};f["lime.net._HTTPRequest_lime_utils_Bytes"]=Ad;Ad.__name__=["lime","net","_HTTPRequest_lime_utils_Bytes"];Ad.__super__=fc;Ad.prototype=p(fc.prototype,{fromBytes:function(a){return ub.fromBytes(a)},__class__:Ad});var Qg=function(){};f["lime.system.DisplayMode"]=Qg;Qg.__name__=["lime","system","DisplayMode"];var Nb=f["lime.system.Endian"]={__ename__:!0,__constructs__:["LITTLE_ENDIAN","BIG_ENDIAN"]};Nb.LITTLE_ENDIAN=["LITTLE_ENDIAN",0];Nb.LITTLE_ENDIAN.toString=
B;Nb.LITTLE_ENDIAN.__enum__=Nb;Nb.BIG_ENDIAN=["BIG_ENDIAN",1];Nb.BIG_ENDIAN.toString=B;Nb.BIG_ENDIAN.__enum__=Nb;var pa=function(){};f["lime.system.System"]=pa;pa.__name__=["lime","system","System"];pa.__properties__={get_endianness:"get_endianness"};pa.embed=E.lime.embed=function(a,b,c,d,e){if(null!=pa.__applicationEntryPoint&&null!=pa.__applicationConfig){var g=pa.__applicationEntryPoint;if(null!=h[a]?g.existsReserved(a):g.h.hasOwnProperty(a))if(g="string"==typeof b?window.document.getElementById(b):
null==b?window.document.createElement("div"):b,null==g)window.console.log("[lime.embed] ERROR: Cannot find target element: "+X.string(b));else{null==c&&(c=0);null==d&&(d=0);b=pa.__applicationConfig;var x=null!=h[a]?b.getReserved(a):b.h[a];b={};pa.__copyMissingFields(b,x);if(null!=e){b.windows=[];e instanceof Array&&null==e.__enum__?b.windows=e:b.windows[0]=e;for(var f=0,k=b.windows.length;f<k;){var l=f++;l<x.windows.length&&pa.__copyMissingFields(b.windows[l],x.windows[l]);pa.__copyMissingFields(b.windows[l].parameters,
x.windows[l].parameters);"string"==typeof e.background&&(l=Z.replace(X.string(e.background),"#",""),-1<l.indexOf("0x")?e.background=X.parseInt(l):e.background=X.parseInt("0x"+l))}}L.field(b.windows[0],"rootPath")&&(b.rootPath=L.field(b.windows[0],"rootPath"),L.deleteField(b.windows[0],"rootPath"));b.windows[0].element=g;b.windows[0].width=c;b.windows[0].height=d;c=pa.__applicationEntryPoint;(null!=h[a]?c.getReserved(a):c.h[a])(b)}}};pa.exit=function(a){};pa.__copyMissingFields=function(a,b){if(null!=
b&&null!=a)for(var c=0,d=L.fields(b);c<d.length;){var e=d[c];++c;Object.prototype.hasOwnProperty.call(a,e)||(a[e]=L.field(b,e))}};pa.__registerEntryPoint=function(a,b,c){null==pa.__applicationConfig&&(pa.__applicationConfig=new y);null==pa.__applicationEntryPoint&&(pa.__applicationEntryPoint=new y);var d=pa.__applicationEntryPoint;null!=h[a]?d.setReserved(a,b):d.h[a]=b;b=pa.__applicationConfig;null!=h[a]?b.setReserved(a,c):b.h[a]=c};pa.get_endianness=function(){if(null==pa.__endianness){var a=new lb(2),
b=null!=a?new sb(a,0):null;a=null!=a?new Uint16Array(a,0):null;b[0]=170;b[1]=187;pa.__endianness=43707==a[0]?Nb.BIG_ENDIAN:Nb.LITTLE_ENDIAN}return pa.__endianness};var hf=function(a,b){null==b&&(b=1);null==a&&(a=0);this.onRun=new uc;this.onError=new uc;this.onComplete=new uc;this.doWork=new uc;this.minThreads=a;this.maxThreads=b;this.currentThreads=0};f["lime.system.ThreadPool"]=hf;hf.__name__=["lime","system","ThreadPool"];hf.prototype={queue:function(a){this.runWork(a)},sendComplete:function(a){this.onComplete.dispatch(a)},
sendError:function(a){this.onError.dispatch(a)},runWork:function(a){this.onRun.dispatch(a);this.doWork.dispatch(a)},__class__:hf};var vb=function(a){null!=a&&(this.name=a);null!=this.__fontID?v.isLocal(this.__fontID)&&this.__fromBytes(v.getBytes(this.__fontID)):null!=this.__fontPath&&this.__fromFile(this.__fontPath)};f["lime.text.Font"]=vb;vb.__name__=["lime","text","Font"];vb.fromFile=function(a){if(null==a)return null;var b=new vb;b.__fromFile(a);return b};vb.loadFromName=function(a){return(new vb).__loadFromName(a)};
vb.__measureFontNode=function(a){var b=window.document.createElement("span");b.setAttribute("aria-hidden","true");var c=window.document.createTextNode("BESbswy");b.appendChild(c);c=b.style;c.display="block";c.position="absolute";c.top="-9999px";c.left="-9999px";c.fontSize="300px";c.width="auto";c.height="auto";c.lineHeight="normal";c.margin="0";c.padding="0";c.fontVariant="normal";c.whiteSpace="nowrap";c.fontFamily=a;window.document.body.appendChild(b);return b};vb.prototype={__fromBytes:function(a){this.__fontPath=
null},__fromFile:function(a){this.__fontPath=a},__loadFromName:function(a){var b=this,c=new jb;this.name=a;var d=window.navigator.userAgent.toLowerCase();if(0<=d.indexOf(" safari/")&&0>d.indexOf(" chrome/")||!window.document.fonts||(Bd=window.document.fonts,!k(Bd,Bd.load))){var e=vb.__measureFontNode("'"+a+"', sans-serif"),g=vb.__measureFontNode("'"+a+"', serif"),x=e.offsetWidth,f=g.offsetWidth,h=-1,l=0,m,p;h=window.setInterval(function(){l+=1;m=e.offsetWidth==x?g.offsetWidth!=f:!0;p=3E3<=50*l;if(m||
p)window.clearInterval(h),e.parentNode.removeChild(e),g.parentNode.removeChild(g),g=e=null,p&&qa.warn('Could not load web font "'+a+'"',{fileName:"Font.hx",lineNumber:552,className:"lime.text.Font",methodName:"__loadFromName"}),c.complete(b)},50)}else window.document.fonts.load("1em '"+a+"'").then(function(a){c.complete(b)},function(d){qa.warn('Could not load web font "'+a+'"',{fileName:"Font.hx",lineNumber:516,className:"lime.text.Font",methodName:"__loadFromName"});c.complete(b)});return c.future},
__class__:vb};var Ka=function(a){this.onDisconnect=new Ha;this.onButtonUp=new xd;this.onButtonDown=new xd;this.onAxisMove=new of;this.id=a;this.connected=!0};f["lime.ui.Gamepad"]=Ka;Ka.__name__=["lime","ui","Gamepad"];Ka.__connect=function(a){if(!Ka.devices.h.hasOwnProperty(a)){var b=new Ka(a);Ka.devices.h[a]=b;Ka.onConnect.dispatch(b)}};Ka.__disconnect=function(a){var b=Ka.devices.h[a];null!=b&&(b.connected=!1);Ka.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};Ka.prototype={__class__:Ka};
var Ca=function(a){this.onTrackballMove=new jf;this.onHatMove=new lf;this.onDisconnect=new Ha;this.onButtonUp=new oc;this.onButtonDown=new oc;this.onAxisMove=new kf;this.id=a;this.connected=!0};f["lime.ui.Joystick"]=Ca;Ca.__name__=["lime","ui","Joystick"];Ca.__connect=function(a){if(!Ca.devices.h.hasOwnProperty(a)){var b=new Ca(a);Ca.devices.h[a]=b;Ca.onConnect.dispatch(b)}};Ca.__disconnect=function(a){var b=Ca.devices.h[a];null!=b&&(b.connected=!1);Ca.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};
Ca.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};Ca.prototype={__class__:Ca};var La=function(a,b,c,d,e,g,x){this.x=a;this.y=b;this.id=c;this.dx=d;this.dy=e;this.pressure=g;this.device=x};f["lime.ui.Touch"]=La;La.__name__=["lime","ui","Touch"];La.prototype={__class__:La};var Ue=function(a){this.onTextInput=new wd;this.onTextEdit=new mf;this.onRestore=new Ha;this.onResize=new ud;this.onMove=new tc;this.onMouseWheel=
new tc;this.onMouseUp=new vd;this.onMouseMoveRelative=new tc;this.onMouseMove=new tc;this.onMouseDown=new vd;this.onMinimize=new Ha;this.onLeave=new Ha;this.onKeyUp=new yd;this.onKeyDown=new yd;this.onFullscreen=new Ha;this.onFocusOut=new Ha;this.onFocusIn=new Ha;this.onEnter=new Ha;this.onDropFile=new wd;this.onDeactivate=new Ha;this.onCreate=new Ha;this.onClose=new Ha;this.onActivate=new Ha;this.config=a;this.__height=this.__width=0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title=
"";this.id=-1;null!=a&&(Object.prototype.hasOwnProperty.call(a,"width")&&(this.__width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(this.__height=a.height),Object.prototype.hasOwnProperty.call(a,"x")&&(this.__x=a.x),Object.prototype.hasOwnProperty.call(a,"y")&&(this.__y=a.y),Object.prototype.hasOwnProperty.call(a,"borderless")&&(this.__borderless=a.borderless),Object.prototype.hasOwnProperty.call(a,"resizable")&&(this.__resizable=a.resizable),Object.prototype.hasOwnProperty.call(a,
"title")&&(this.__title=a.title));this.backend=new Mc(this)};f["lime.ui.Window"]=Ue;Ue.__name__=["lime","ui","Window"];Ue.prototype={close:function(){this.backend.close()},create:function(a){this.application=a;null==this.config&&(this.config={});this.backend.create(a);null!=this.renderer&&this.renderer.create()},resize:function(a,b){this.backend.resize(a,b);this.__width=a;this.__height=b},set_height:function(a){this.resize(this.__width,a);return this.__height},set_width:function(a){this.resize(a,
this.__height);return this.__width},__class__:Ue,__properties__:{set_width:"set_width",set_height:"set_height"}};var uf=function(){this.enabled=!0;this.audio=new y;this.font=new y;this.image=new y;this.version=48078};f["lime.utils.AssetCache"]=uf;uf.__name__=["lime","utils","AssetCache"];uf.prototype={exists:function(a,b){if("IMAGE"==b||null==b){var c=this.image;if(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0}if("FONT"==b||null==b)if(c=this.font,null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0;
if("SOUND"==b||"MUSIC"==b||null==b)if(b=this.audio,null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return!0;return!1},set:function(a,b,c){switch(b){case "FONT":this.font.set(a,c);break;case "IMAGE":if(!I.__instanceof(c,T))throw new r("Cannot cache non-Image asset: "+X.string(c)+" as Image");this.image.set(a,c);break;case "MUSIC":case "SOUND":if(!I.__instanceof(c,sa))throw new r("Cannot cache non-AudioBuffer asset: "+X.string(c)+" as AudioBuffer");this.audio.set(a,c);break;default:throw new r(b+
" assets are not cachable");}},clear:function(a){if(null==a)this.audio=new y,this.font=new y,this.image=new y;else{for(var b=this.audio.keys();b.hasNext();){var c=b.next();Z.startsWith(c,a)&&this.audio.remove(c)}for(b=this.font.keys();b.hasNext();)c=b.next(),Z.startsWith(c,a)&&this.font.remove(c);for(b=this.image.keys();b.hasNext();)c=b.next(),Z.startsWith(c,a)&&this.image.remove(c)}},__class__:uf};var rc=function(){this.types=new y;this.sizes=new y;this.preload=new y;this.paths=new y;this.pathGroups=
new y;this.classTypes=new y;this.cachedText=new y;this.cachedImages=new y;this.cachedFonts=new y;this.cachedBytes=new y;this.cachedAudioBuffers=new y;this.onChange=new Ha;this.bytesTotal=this.bytesLoaded=0};f["lime.utils.AssetLibrary"]=rc;rc.__name__=["lime","utils","AssetLibrary"];rc.fromManifest=function(a){if(null==a)return null;if(null==a.libraryType)var b=new rc;else if(b=da.resolveClass(a.libraryType),null!=b)b=da.createInstance(b,a.libraryArgs);else return qa.warn("Could not find library type: "+
a.libraryType,{fileName:"AssetLibrary.hx",lineNumber:140,className:"lime.utils.AssetLibrary",methodName:"fromManifest"}),null;b.__fromManifest(a);return b};rc.prototype={exists:function(a,b){b=null!=b?I.__cast(b,String):null;var c=this.types;a=null!=h[a]?c.getReserved(a):c.h[a];return null==a||a!=b&&("SOUND"!=b&&"MUSIC"!=b||"MUSIC"!=a&&"SOUND"!=a)&&"BINARY"!=b&&null!=b&&("BINARY"!=a||"TEXT"!=b)?!1:!0},getAsset:function(a,b){switch(b){case "BINARY":return this.getBytes(a);case "FONT":return this.getFont(a);
case "IMAGE":return this.getImage(a);case "MUSIC":case "SOUND":return this.getAudioBuffer(a);case "TEMPLATE":throw new r("Not sure how to get template: "+a);case "TEXT":return this.getText(a);default:throw new r("Unknown asset type: "+b);}},getAudioBuffer:function(a){var b=this.cachedAudioBuffers;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedAudioBuffers,null!=h[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=
this.classTypes,sa.fromBytes(I.__cast(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]),ba));b=this.paths;return sa.fromFile(null!=h[a]?b.getReserved(a):b.h[a])},getBytes:function(a){var b=this.cachedBytes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedBytes,null!=h[a]?b.getReserved(a):b.h[a];b=this.cachedText;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a)){b=this.cachedText;b=ub.ofString(null!=h[a]?b.getReserved(a):b.h[a]);var c=this.cachedBytes;null!=
h[a]?c.setReserved(a,b):c.h[a]=b;return b}b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,I.__cast(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]),ba);b=this.paths;return ub.fromFile(null!=h[a]?b.getReserved(a):b.h[a])},getFont:function(a){var b=this.cachedFonts;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedFonts,null!=h[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=
this.classTypes,I.__cast(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]),vb);b=this.paths;return vb.fromFile(null!=h[a]?b.getReserved(a):b.h[a])},getImage:function(a){var b=this.cachedImages;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedImages,null!=h[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,I.__cast(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]),T);b=this.paths;return T.fromFile(null!=
h[a]?b.getReserved(a):b.h[a])},getText:function(a){var b=this.cachedText;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedText,null!=h[a]?b.getReserved(a):b.h[a];a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){var c=this.classTypes;if(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0;switch(null!=b?I.__cast(b,String):null){case "FONT":return this.cachedFonts.exists(a);case "IMAGE":return this.cachedImages.exists(a);case "MUSIC":case "SOUND":return this.cachedAudioBuffers.exists(a);
default:return this.cachedBytes.exists(a)?!0:this.cachedText.exists(a)}},load:function(){if(this.loaded)return xa.withValue(this);if(null==this.promise){this.promise=new jb;this.bytesLoadedCache=new y;this.assetsLoaded=0;this.assetsTotal=1;for(var a=this.preload.keys();a.hasNext();){var b=a.next(),c=this.preload;if(null!=h[b]?c.getReserved(b):c.h[b])if(c=this.types,qa.verbose("Preloading asset: "+b+" ["+(null!=h[b]?c.getReserved(b):c.h[b])+"]",{fileName:"AssetLibrary.hx",lineNumber:440,className:"lime.utils.AssetLibrary",
methodName:"load"}),c=this.types.get(b),null!=c)switch(c){case "BINARY":this.assetsTotal++;c=this.loadBytes(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[k(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.loadBytes_onComplete)]));break;case "FONT":this.assetsTotal++;c=this.loadFont(b);c.onProgress(function(a,b){return function(c,
d){b[0](a[0],c,d)}}([b],[k(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.loadFont_onComplete)]));break;case "IMAGE":this.assetsTotal++;c=this.loadImage(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[k(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.load_onError)]));
c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.loadImage_onComplete)]));break;case "MUSIC":case "SOUND":this.assetsTotal++;c=this.loadAudioBuffer(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[k(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.loadAudioBuffer_onComplete)]));break;case "TEXT":this.assetsTotal++,
c=this.loadText(b),c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[k(this,this.load_onProgress)])),c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.load_onError)])),c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[k(this,this.loadText_onComplete)]))}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(a){var b=this.cachedAudioBuffers;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedAudioBuffers,
xa.withValue(null!=h[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,xa.withValue(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]));b=this.pathGroups;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.pathGroups,sa.loadFromFiles(null!=h[a]?b.getReserved(a):b.h[a]);b=this.paths;return sa.loadFromFile(null!=h[a]?b.getReserved(a):b.h[a])},loadBytes:function(a){var b=this.cachedBytes;if(null!=h[a]?
b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedBytes,xa.withValue(null!=h[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,xa.withValue(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]));b=this.paths;return ub.loadFromFile(null!=h[a]?b.getReserved(a):b.h[a])},loadFont:function(a){var b=this.cachedFonts;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedFonts,xa.withValue(null!=
h[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,a=da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]),a.__loadFromName(a.name);b=this.paths;return vb.loadFromName(null!=h[a]?b.getReserved(a):b.h[a])},loadImage:function(a){var b=this.cachedImages;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedImages,xa.withValue(null!=h[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=h[a]?b.existsReserved(a):
b.h.hasOwnProperty(a))return b=this.classTypes,xa.withValue(da.createInstance(null!=h[a]?b.getReserved(a):b.h[a],[]));b=this.paths;return T.loadFromFile(null!=h[a]?b.getReserved(a):b.h[a])},loadText:function(a){var b=this.cachedText;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedText,xa.withValue(null!=h[a]?b.getReserved(a):b.h[a]);b=this.cachedBytes;(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?b=!0:(b=this.classTypes,b=null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a));
if(b){b=this.getBytes(a);if(null==b)return xa.withValue(null);b=b.getString(0,b.length);var c=this.cachedText;null!=h[a]?c.setReserved(a,b):c.h[a]=b;return xa.withValue(b)}b=new zd;c=this.paths;return b.load(null!=h[a]?c.getReserved(a):c.h[a])},unload:function(){},__assetLoaded:function(a){this.assetsLoaded++;if(null!=a){var b=this.types;qa.verbose("Loaded asset: "+a+" ["+(null!=h[a]?b.getReserved(a):b.h[a])+"] ("+(this.assetsLoaded-1)+"/"+(this.assetsTotal-1)+")",{fileName:"AssetLibrary.hx",lineNumber:686,
className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"})}if(null!=a){b=this.sizes;b=null!=h[a]?b.getReserved(a):b.h[a];var c=this.bytesLoadedCache;(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this.bytesLoadedCache,c=null!=h[a]?c.getReserved(a):c.h[a],c<b&&(this.bytesLoaded+=b-c)):this.bytesLoaded+=b;c=this.bytesLoadedCache;null!=h[a]?c.setReserved(a,b):c.h[a]=b}this.assetsLoaded<this.assetsTotal?this.promise.progress(this.bytesLoaded,this.bytesTotal):(this.loaded=!0,this.promise.progress(this.bytesTotal,
this.bytesTotal),this.promise.complete(this))},__cacheBreak:function(a){return a=-1<a.indexOf("?")?a+("&"+v.cache.version):a+("?"+v.cache.version)},__fromManifest:function(a){var b=2<=a.version,c=a.rootPath;null==c&&(c="");""!=c&&(c+="/");for(var d=0,e=a.assets;d<e.length;){var g=e[d];++d;var x=b?g.size:100;var f=g.id;if(Object.prototype.hasOwnProperty.call(g,"path")){var k=this.paths;var l=this.__cacheBreak(c+X.string(L.field(g,"path")));null!=h[f]?k.setReserved(f,l):k.h[f]=l}if(Object.prototype.hasOwnProperty.call(g,
"pathGroup")){l=L.field(g,"pathGroup");k=0;for(var m=l.length;k<m;){var p=k++;l[p]=this.__cacheBreak(c+l[p])}k=this.pathGroups;null!=h[f]?k.setReserved(f,l):k.h[f]=l}l=this.sizes;null!=h[f]?l.setReserved(f,x):l.h[f]=x;x=g.type;l=this.types;null!=h[f]?l.setReserved(f,x):l.h[f]=x;Object.prototype.hasOwnProperty.call(g,"preload")&&(l=this.preload,x=L.field(g,"preload"),null!=h[f]?l.setReserved(f,x):l.h[f]=x);Object.prototype.hasOwnProperty.call(g,"className")&&(g=da.resolveClass(L.field(g,"className")),
x=this.classTypes,null!=h[f]?x.setReserved(f,g):x.h[f]=g)}b=this.bytesTotal=0;for(a=a.assets;b<a.length;)f=a[b],++b,f=f.id,c=this.preload,(null!=h[f]?c.existsReserved(f):c.h.hasOwnProperty(f))?(c=this.preload,c=null!=h[f]?c.getReserved(f):c.h[f]):c=!1,c&&(c=this.sizes,this.bytesTotal+=null!=h[f]?c.getReserved(f):c.h[f])},loadAudioBuffer_onComplete:function(a,b){var c=this.cachedAudioBuffers;null!=h[a]?c.setReserved(a,b):c.h[a]=b;c=this.pathGroups;if(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a)){c=
this.pathGroups;c=null!=h[a]?c.getReserved(a):c.h[a];for(var d=this.pathGroups.keys();d.hasNext();){var e=d.next();if(e!=a)for(var g=0;g<c.length;){var f=c[g];++g;var k=this.pathGroups;if(-1<(null!=h[e]?k.getReserved(e):k.h[e]).indexOf(f)){g=this.cachedAudioBuffers;null!=h[e]?g.setReserved(e,b):g.h[e]=b;break}}}}this.__assetLoaded(a)},loadBytes_onComplete:function(a,b){var c=this.cachedBytes;null!=h[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadFont_onComplete:function(a,b){var c=this.cachedFonts;
null!=h[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadImage_onComplete:function(a,b){var c=this.cachedImages;null!=h[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadText_onComplete:function(a,b){var c=this.cachedText;null!=h[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},load_onError:function(a,b){null!=b&&""!=b?this.promise.error('Error loading asset "'+a+'": '+X.string(b)):this.promise.error('Error loading asset "'+a+'"')},load_onProgress:function(a,b,c){if(0<b){var d=
this.sizes;d=null!=h[a]?d.getReserved(a):d.h[a];0<c?(b/=c,1<b&&(b=1),b=Math.floor(b*d)):b>d&&(b=d);c=this.bytesLoadedCache;(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this.bytesLoadedCache,c=null!=h[a]?c.getReserved(a):c.h[a],b!=c&&(this.bytesLoaded+=b-c)):this.bytesLoaded+=b;c=this.bytesLoadedCache;null!=h[a]?c.setReserved(a,b):c.h[a]=b;this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:rc};var hb=function(){this.assets=[];this.libraryArgs=[];this.version=2};f["lime.utils.AssetManifest"]=
hb;hb.__name__=["lime","utils","AssetManifest"];hb.fromBytes=function(a,b){return null!=a?hb.parse(a.getString(0,a.length),b):null};hb.loadFromFile=function(a,b){a=hb.__resolvePath(a);b=hb.__resolveRootPath(b,a);return null==a?null:ub.loadFromFile(a).then(function(a){return xa.withValue(hb.fromBytes(a,b))})};hb.parse=function(a,b){if(null==a||""==a)return null;a=JSON.parse(a);var c=new hb;c.name=a.name;c.libraryType=a.libraryType;c.libraryArgs=a.libraryArgs;c.assets=bb.run(a.assets);null!=b&&(c.rootPath=
b);return c};hb.__resolvePath=function(a){if(null==a)return null;var b=a.indexOf("?");var c=-1<b?u.substr(a,0,b):a;for(Z.replace(c,"\\","/");Z.endsWith(c,"/");)c=u.substr(c,0,c.length-1);return Z.endsWith(c,".bundle")?-1<b?c+"/library.json"+u.substr(a,b,null):c+"/library.json":a};hb.__resolveRootPath=function(a,b){if(null!=a)return a;a=b.indexOf("?");a=-1<a?u.substr(b,0,a):b;for(Z.replace(a,"\\","/");Z.endsWith(a,"/");){if("/"==a)return a;a=u.substr(a,0,a.length-1)}return Z.endsWith(a,".bundle")?
a:Lc.directory(a)};hb.prototype={__class__:hb};var v=function(){};f["lime.utils.Assets"]=v;v.__name__=["lime","utils","Assets"];v.exists=function(a,b){null==b&&(b="BINARY");var c=a.indexOf(":");var d=a.substring(0,c);a=a.substring(c+1);d=v.getLibrary(d);return null!=d?d.exists(a,b):!1};v.getAsset=function(a,b,c){if(c&&v.cache.enabled)switch(b){case "BINARY":case "TEXT":c=!1;break;case "FONT":var d=v.cache.font.get(a);if(null!=d)return d;break;case "IMAGE":d=v.cache.image.get(a);if(v.isValidImage(d))return d;
break;case "MUSIC":case "SOUND":d=v.cache.audio.get(a);if(v.isValidAudio(d))return d;break;case "TEMPLATE":throw new r("Not sure how to get template: "+a);default:return null}var e=a.indexOf(":");d=a.substring(0,e);e=a.substring(e+1);var g=v.getLibrary(d);if(null!=g)if(g.exists(e,b)){if(g.isLocal(e,b))return d=g.getAsset(e,b),c&&v.cache.enabled&&v.cache.set(a,b,d),d;qa.error(b+' asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:160,className:"lime.utils.Assets",methodName:"getAsset"})}else qa.error("There is no "+
b+' asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:166,className:"lime.utils.Assets",methodName:"getAsset"});else qa.error(v.__libraryNotFound(d),{fileName:"Assets.hx",lineNumber:172,className:"lime.utils.Assets",methodName:"getAsset"});return null};v.getAudioBuffer=function(a,b){null==b&&(b=!0);return v.getAsset(a,"SOUND",b)};v.getBytes=function(a){return v.getAsset(a,"BINARY",!1)};v.getFont=function(a,b){null==b&&(b=!0);return v.getAsset(a,"FONT",b)};v.getImage=function(a,b){null==
b&&(b=!0);return v.getAsset(a,"IMAGE",b)};v.getLibrary=function(a){if(null==a||""==a)a="default";var b=v.libraries;return null!=h[a]?b.getReserved(a):b.h[a]};v.getText=function(a){return v.getAsset(a,"TEXT",!1)};v.isLocal=function(a,b,c){null==c&&(c=!0);if(c&&v.cache.enabled&&v.cache.exists(a,b))return!0;var d=a.indexOf(":");c=a.substring(0,d);a=a.substring(d+1);c=v.getLibrary(c);return null!=c?c.isLocal(a,b):!1};v.isValidAudio=function(a){return null!=a};v.isValidImage=function(a){return null!=a?
null!=a.buffer:!1};v.loadLibrary=function(a){var b=new jb,c=v.getLibrary(a);if(null!=c)return c.load();c=a;var d=null,e=v.libraryPaths;(null!=h[a]?e.existsReserved(a):e.h.hasOwnProperty(a))?(c=v.libraryPaths,c=null!=h[a]?c.getReserved(a):c.h[a],d=v.defaultRootPath):Z.endsWith(c,".bundle")&&(c+="/library.json");hb.loadFromFile(c,d).onComplete(function(c){if(null==c)b.error('Cannot parse asset manifest for library "'+a+'"');else if(c=rc.fromManifest(c),null==c)b.error('Cannot open library "'+a+'"');
else{var d=v.libraries;null!=h[a]?d.setReserved(a,c):d.h[a]=c;c.onChange.add((Bd=v.onChange,k(Bd,Bd.dispatch)));c=c.load();b.completeWith(c)}}).onError(function(c){b.error('There is no asset library with an ID of "'+a+'"')});return b.future};v.registerLibrary=function(a,b){var c=v.libraries;if(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a)){c=v.libraries;if((null!=h[a]?c.getReserved(a):c.h[a])==b)return;v.unloadLibrary(a)}null!=b&&b.onChange.add(v.library_onChange);c=v.libraries;null!=h[a]?
c.setReserved(a,b):c.h[a]=b};v.unloadLibrary=function(a){var b=v.libraries;b=null!=h[a]?b.getReserved(a):b.h[a];null!=b&&(v.cache.clear(a+":"),b.onChange.remove(v.library_onChange),b.unload());v.libraries.remove(a)};v.__libraryNotFound=function(a){if(null==a||""==a)a="default";return null==ab.current||null==ab.current.__preloader||ab.current.__preloader.complete?'There is no asset library named "'+a+'"':'There is no asset library named "'+a+'", or it is not yet preloaded'};v.library_onChange=function(){v.cache.clear();
v.onChange.dispatch()};var ub={};f["lime.utils._Bytes.Bytes_Impl_"]=ub;ub.__name__=["lime","utils","_Bytes","Bytes_Impl_"];ub._new=function(a,b){return new ba(b)};ub.fromBytes=function(a){return null==a?null:ub._new(a.length,a.b.bufferValue)};ub.fromFile=function(a){return null};ub.loadFromFile=function(a){return(new Ad).load(a)};ub.ofString=function(a){a=ba.ofString(a);return ub._new(a.length,a.b.bufferValue)};var ja={};f["lime.utils._DataPointer.DataPointer_Impl_"]=ja;ja.__name__=["lime","utils",
"_DataPointer","DataPointer_Impl_"];ja._new=function(a){return a};ja.fromInt=function(a){return ja._new(new Cd(null,null,a))};ja.fromArrayBufferView=function(a){return ja._new(new Cd(a))};ja.toBufferView=function(a,b){if(!a)return null;switch(a.type[1]){case 0:null==b&&(b=a.buffer.byteLength);var c=a.buffer;a=a.offset;return null!=c?null==b?new sb(c,a):new sb(c,a,b):null;case 1:null==b&&(b=a.bufferView.byteLength);if(0==a.offset&&b==a.bufferView.byteLength)return a.bufferView;c=a.bufferView.buffer;
a=a.bufferView.byteOffset+a.offset;return null!=c?null==b?new sb(c,a):new sb(c,a,b):null;default:return null}};ja.toFloat32Array=function(a,b){if(!a)return null;switch(a.type[1]){case 0:null==b&&(b=a.buffer.byteLength);var c=a.buffer;a=a.offset;b=b/4|0;return null!=c?null==b?new Ob(c,a):new Ob(c,a,b):null;case 1:null==b&&(b=a.bufferView.byteLength);if(0==a.offset&&b==a.bufferView.byteLength&&a.bufferView.constructor==Ob)return a.bufferView;b>a.bufferView.byteLength&&(b=a.bufferView.byteLength);c=
a.bufferView.buffer;a=a.bufferView.byteOffset+a.offset;b=b/4|0;return null!=c?null==b?new Ob(c,a):new Ob(c,a,b):null;default:return null}};ja.toValue=function(a){return a?"number"===typeof a?a:2==a.type[1]?a.offset:0:0};var Cd=function(a,b,c){null==c&&(c=0);null!=a?(this.bufferView=a,this.type=nb.BUFFER_VIEW):null!=b?(this.buffer=b,this.type=nb.BUFFER):this.type=nb.VALUE;this.offset=c};f["lime.utils.DataPointerObject"]=Cd;Cd.__name__=["lime","utils","DataPointerObject"];Cd.prototype={__class__:Cd};
var nb=f["lime.utils.DataPointerObjectType"]={__ename__:!0,__constructs__:["BUFFER","BUFFER_VIEW","VALUE"]};nb.BUFFER=["BUFFER",0];nb.BUFFER.toString=B;nb.BUFFER.__enum__=nb;nb.BUFFER_VIEW=["BUFFER_VIEW",1];nb.BUFFER_VIEW.toString=B;nb.BUFFER_VIEW.__enum__=nb;nb.VALUE=["VALUE",2];nb.VALUE.toString=B;nb.VALUE.__enum__=nb;var qa=function(){};f["lime.utils.Log"]=qa;qa.__name__=["lime","utils","Log"];qa.error=function(a,b){if(1<=qa.level){a="["+b.className+"] ERROR: "+a;if(qa.throwErrors)throw new r(a);
console.error(a)}};qa.verbose=function(a,b){5<=qa.level&&console.log("["+b.className+"] "+a)};qa.warn=function(a,b){2<=qa.level&&console.warn("["+b.className+"] WARNING: "+a)};var Bg=function(){};f["lime.utils.compress.Deflate"]=Bg;Bg.__name__=["lime","utils","compress","Deflate"];Bg.decompress=function(a){a=pako.inflateRaw(a.b.bufferValue);return ba.ofData(a)};var Cg=function(){};f["lime.utils.compress.LZMA"]=Cg;Cg.__name__=["lime","utils","compress","LZMA"];Cg.decompress=function(a){return null};
var Dg=function(){};f["lime.utils.compress.Zlib"]=Dg;Dg.__name__=["lime","utils","compress","Zlib"];Dg.decompress=function(a){a=pako.inflate(a.b.bufferValue);return ba.ofData(a)};var K=function(){this._constructed=!1;this.Construct()};f["lovedna.Object"]=K;K.__name__=["lovedna","Object"];K.prototype={Construct:function(){this._constructed||(this._constructed=!0,this.onConstruct())},onConstruct:function(){},__class__:K};var w=function(){};f["lovedna.Time"]=w;w.__name__=["lovedna","Time"];var vf=function(){this._instanceMap=
new y};f["lovedna.utils.rtti.Injector"]=vf;vf.__name__=["lovedna","utils","rtti","Injector"];vf.prototype={Get:function(a,b){b=this.getKey(a,b);var c=this._instanceMap;c=null!=h[b]?c.getReserved(b):c.h[b];if(null==c){c=da.createInstance(a,[]);var d=this._instanceMap,e=c;null!=h[b]?d.setReserved(b,e):d.h[b]=e;this.Inject(c,a)}return c},Inject:function(a,b){for(;null!=b;){for(var c=Ab.Get(b),d=0,e=c._fields.length;d<e;){var g=d++,f=c.getField(g),h=c.getMeta(f);if(h.hasMeta("inject"))if(g=h.getMetaArgs("inject"),
null!=h._type){var k="";null!=g&&(k=g[0]);g=this.Get(h._type,k);h.isStatic?L.setProperty(b,f,g):L.setProperty(a,f,g)}else if(h=h.get_functionArgs(),null!=h){f=L.getProperty(a,f);k=[];if(null!=h)for(var l=0,m=h.length;l<m;){var p=l++;k.push(this.Get(h[p],g[p]))}f.apply(a,k)}}b=da.getSuperClass(b)}I.__instanceof(a,K)&&a.Construct();I.__instanceof(a,wf)&&a.OnInject();if(null!=this.onInstance)this.onInstance(a)},getKey:function(a,b){return wb.GetName(a)+(null==b?"":"#"+b)},__class__:vf};var Dd=function(){};
f["lovedna.Wrap"]=Dd;Dd.__name__=["lovedna","Wrap"];var Ed=function(a){this.type=a;this.compress=!0};f["lovedna.data.TagData"]=Ed;Ed.__name__=["lovedna","data","TagData"];Ed.prototype={Decode:function(a){if(od.gt(1,a.length-a.position)||2>Ja.get_length(a)-a.position||od.gt(13,a.length-a.position)||Ja.get_length(a)<=a.position+13)return null;if(-199789115==a.readUnsignedInt()){this.type=a.readUnsignedInt();var b=a.readBoolean(),c=a.readInt(),d=new db(0);a.readBytes(d,0,c);return b?Ja.fromBytes(Eg.Uncompress(Ja.toBytes(d))):
d}a.position-=4;return null},__class__:Ed};var z=function(){this._length=0};f["lovedna.ds._SmartArray.SmartArray1"]=z;z.__name__=["lovedna","ds","_SmartArray","SmartArray1"];z.prototype={Add:function(a){null==this._buffer&&(this._buffer=[],this._length=0);this._buffer[this._length++]=a},AddList:function(a,b){null==b&&(b=0);if(null!=a){null==this._buffer&&(this._buffer=[],this._length=0);var c=a.length;0<b&&c>=b&&(c=b);for(b=0;b<c;){var d=b++;d=a[d];this._buffer[this._length++]=d}}},Pop:function(){if(null==
this._buffer||1>this._length)return null;this._length--;return this._buffer[this._length]},Get:function(a,b){null==b&&(b=!1);if(null==this._buffer||1>this._length)return null;if(b||0>a)a%=this._length,0>a&&(a+=this._length);return a>=this._length?null:this._buffer[a]},Set:function(a,b){null==this._buffer&&(this._buffer=[],this._length=0);this._buffer[a]=b;this._length<a+1&&(this._length=a+1)},Clear:function(){this._length=0;if(null!=this._buffer)for(var a=this._buffer.length;0<a--;)this._buffer[a]=
null},Trim:function(){null!=this._buffer&&0<this._length&&this._length<this._buffer.length&&this._buffer.splice(this._length,this._buffer.length-this._length)},From:function(a){null==this._buffer&&(this._buffer=[],this._length=0);for(this._i=a.length;0<this._i--;)this._buffer[this._i]=a[this._i];this._length=a.length;return this},Dispose:function(){this._buffer=null},Remove:function(a){if(null==this._buffer)return-1;a=this.IndexOf(a);return-1!=a?(this.RemoveAt(a),a):-1},RemoveAt:function(a,b){null==
b&&(b=1);if(null==this._buffer||0>a||a>=this._length||1>b)return!1;a+b>=this._length&&(b=this._length-a);if(1>b)return!1;this._buffer.splice(a,b);this._length-=b;return!0},Insert:function(a,b){0>a||(null==this._buffer&&(this._buffer=[],this._length=0),a>=this._length?(this._buffer[a]=b,this._length=a+1):(this._i=this._length,this._buffer.splice(a,0,b),this._length++))},IndexOf:function(a){return null==this._buffer?-1:this._buffer.indexOf(a)},Sort:function(a){null==this._buffer||2>this._length||(this.Trim(),
this._buffer.sort(a))},set_length:function(a){if(null==this._buffer)return 0;0<=a&&(this._length=a);return this._length},__class__:z,__properties__:{set_length:"set_length"}};var Xa=function(a,b,c){null==c&&(c=!0);this._list=[];this._index=0;this._create=a;this._reset=b;this.count=0;c&&Xa._pools.push(this)};f["lovedna.utils.TempPool"]=Xa;Xa.__name__=["lovedna","utils","TempPool"];Xa.Reset=function(){for(var a=Xa._pools.length;0<a--;)Xa._pools[a].Clear()};Xa.prototype={Get:function(){if(this._index<
this._list.length)var a=this._list[this._index++];else a=this._create(),this._list[this._index++]=a;null!=this._reset&&this._reset(a);this.count=this._list.length;return a},Clear:function(){this._index=0},__class__:Xa};var V=function(){K.call(this)};f["lovedna.event.EventDispatcher"]=V;V.__name__=["lovedna","event","EventDispatcher"];V.__super__=K;V.prototype=p(K.prototype,{AddEventListener:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=0);if(null==a||null==b)return!1;null==this._eventMap&&
(this._eventMap=new y,this._eventSortMap=new y);null==c&&(c=0);null==d&&(d=!1);null==e&&(e=0);var g=this._eventMap;if(null!=h[a]?g.existsReserved(a):g.h.hasOwnProperty(a)){g=this._eventMap;g=null!=h[a]?g.getReserved(a):g.h[a];for(var f=g.length;0<f--;)if(g[f].Match(b))return!1}else g=[],f=this._eventMap,null!=h[a]?f.setReserved(a,g):f.h[a]=g;g.push(new xf(this,b,c,d,e));b=!0;0!=c&&(c=this._eventSortMap,null!=h[a]?c.setReserved(a,!0):c.h[a]=!0);return b},DispatchEvent:function(a){if(null==this._eventMap)return!1;
var b=a._type;if(null==b)return!1;var c=this._eventMap;c=null!=h[b]?c.getReserved(b):c.h[b];if(null==c)return!1;null==this._eventList&&(this._eventList=[]);if(-1!=this._eventList.indexOf(a))return!1;this._eventList.push(a);var d=this._eventSortMap;if(null!=h[b]?d.getReserved(b):d.h[b])d=this._eventSortMap,null!=h[b]?d.setReserved(b,!1):d.h[b]=!1,c.sort(k(this,this.sortByPriority));b=V.pool.Get();b.Clear();d=0;for(var e=c.length;d<e;){var g=d++;b.Add(c[g])}for(c=b._length;0<c--;)b.Get(c).Dispatch(a);
a.SetCurrentTarget(null);a.SetCustomData(null);this._eventList.splice(0,this._eventList.length);return!0},HasEventListener:function(a){if(null==this._eventMap)return!1;var b=this._eventMap;return null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},GetListener:function(a,b){if(null==this._eventMap)return null;var c=this._eventMap;a=null!=h[a]?c.getReserved(a):c.h[a];if(null==a)return null;for(c=a.length;0<c--;){var d=a[c];if(d.Match(b))return d}return null},RemoveEventListener:function(a,b){if(null!=
this._eventMap){var c=this._eventMap;c=null!=h[a]?c.getReserved(a):c.h[a];if(null!=c){if(null==b)c.splice(0,c.length);else for(var d=c.length;0<d--;){var e=c[d];e.Match(b)&&(e.Destroy(),u.remove(c,e))}0==c.length&&this._eventMap.remove(a);a=this._eventMap;(new tb(a,a.arrayKeys())).hasNext()||(this._eventSortMap=this._eventMap=null)}}},Dispose:function(){this._eventList=this._eventSortMap=this._eventMap=null},sortByPriority:function(a,b){a=a.priority;b=b.priority;return a>b?1:a<b?-1:0},__class__:V});
var ob=function(a){K.call(this);this.frames=new z;this.file=a;this._map=new y};f["lovedna.data.atlas.Atlas"]=ob;ob.__name__=["lovedna","data","atlas","Atlas"];ob.Decode=function(a,b){var c=new ob;null!=a&&c.decode(a);null!=b&&(c.file=b);a=ob._atlasMap;b=c.file;null!=h[b]?a.setReserved(b,c):a.h[b]=c;return c};ob.GetAtlas=function(a){var b=ob._atlasMap;return null!=h[a]?b.getReserved(a):b.h[a]};ob.__super__=V;ob.prototype=p(V.prototype,{GetSprite:function(a){var b=this._map;return null!=h[a]?b.getReserved(a):
b.h[a]},decode:function(a){this.file=a.readUTF();var b=a.readInt();for(this.frames.Clear();0<b--;){var c=new Fd;c.decode(a);this.frames.Add(c);var d=this._map,e=c.get_name();null!=h[e]?d.setReserved(e,c):d.h[e]=c}},__class__:ob});var Fd=function(){this._name="";this.frame=new Wb;this._rotated=!1;this.sourceSize=new F;this.offset=new F;this.pivot=new F(.5,.5);this.border=new Wb(0,0,0,0);this._inited=!1};f["lovedna.data.atlas.SpriteData"]=Fd;Fd.__name__=["lovedna","data","atlas","SpriteData"];Fd.prototype=
{decode:function(a){this.set_name(a.readUTF());var b=this.frame,c=a.readFloat(),d=a.readFloat(),e=a.readFloat(),g=a.readFloat();b.x=c;b.y=d;b.z=e;b.w=g;this.set_rotated(a.readBoolean());b=this.sourceSize;c=a.readFloat();d=a.readFloat();b.x=c;b.y=d;b=this.offset;c=a.readFloat();d=a.readFloat();b.x=c;b.y=d;b=this.pivot;c=a.readFloat();d=a.readFloat();b.x=c;b.y=d;b=this.border;c=a.readFloat();d=a.readFloat();e=a.readFloat();a=a.readFloat();b.x=c;b.y=d;b.z=e;b.w=a;this._inited=!0},get_name:function(){return this._name},
set_name:function(a){this._inited||(this._name=a);return this._name},get_rotated:function(){return this._rotated},set_rotated:function(a){this._inited||(this._rotated=a);return this._rotated},__class__:Fd,__properties__:{set_rotated:"set_rotated",get_rotated:"get_rotated",set_name:"set_name",get_name:"get_name"}};var Gd=function(){K.call(this);this._init=!1;var a=L.field(xb.document,xb.RandomString(xb.timeTable[0]));if(null!=a){var b=window.document.createElement("output");b.value=a;var c=xb.RandomString(xb.timeTable[1]);
this._crack=-1==b.value.indexOf(c);this._crack||(this._finder=a,this._author=this._finder(xb.RandomString(xb.timeTable[2])),this._date=xb.RandomString(xb.timeTable[3]));this._init=!0}};f["lovedna.data.author.Author"]=Gd;Gd.__name__=["lovedna","data","author","Author"];Gd.__super__=V;Gd.prototype=p(V.prototype,{Decode:function(a){this.name=a.readUTF();this._init&&(this._crack?this.DispatchEvent(C.LOST):this.DispatchEvent(C.INIT));return this},__class__:Gd});var xc=function(){K.call(this);this._chars=
new ea;this.scaleH=this.scaleW=this.base=this.lineHeight=this.italic=this.bold=0;this.pages=1;this.id=this.packed=0};f["lovedna.data.fnt.Fnt"]=xc;xc.__name__=["lovedna","data","fnt","Fnt"];xc.Decode=function(a){var b=new xc;b.decode(a);return b};xc.__super__=V;xc.prototype=p(V.prototype,{addChar:function(a){this._chars.h[a.id]=a},decode:function(a){this.face=a.readUTF();this.size=a.readInt();this.bold=a.readInt();this.italic=a.readInt();this.lineHeight=a.readInt();this.base=a.readInt();this.scaleW=
a.readInt();this.scaleH=a.readInt();this.pages=a.readInt();this.packed=a.readInt();this.id=a.readInt();this.file=a.readUTF();for(var b=this.count=a.readInt();0<b--;){var c=new yf;c.decode(a);this.addChar(c)}},__class__:xc});var yf=function(){this.rect=new Wb};f["lovedna.data.fnt.FntChar"]=yf;yf.__name__=["lovedna","data","fnt","FntChar"];yf.prototype={decode:function(a){this.id=a.readInt();this.x=a.readInt();this.y=a.readInt();this.width=a.readInt();this.height=a.readInt();this.xoffset=a.readFloat();
this.yoffset=a.readFloat();this.xadvance=a.readFloat();this.page=a.readInt();a=this.rect;a.x=this.x;a.y=this.y;a.z=this.width;a.w=this.height},__class__:yf};var Hd=function(){this.nodeAnimations=[];this.totalTime=0};f["lovedna.data.g3d.ModelAnimation"]=Hd;Hd.__name__=["lovedna","data","g3d","ModelAnimation"];Hd.prototype={Add:function(a){null==this.nodeAnimations&&(this.nodeAnimations=[]);this.nodeAnimations.push(a);a.totalTime>this.totalTime&&(this.totalTime=a.totalTime)},Decode:function(a){this.id=
a.readUTF();for(var b=a.readInt();0<b--;){var c=new Id;c.Decode(a);this.Add(c)}},__class__:Hd};var eb=function(){this.id=""};f["lovedna.data.g3d.ModelData"]=eb;eb.__name__=["lovedna","data","g3d","ModelData"];eb.prototype={Clear:function(){this.bones=this.animations=this.nodes=this.materials=this.meshes=null;eb.current=this;this.partCount=0},AddMesh:function(a){null!=a&&(null==this.meshes&&(this.meshes=[]),null==a.id&&(a.id=this.meshes.length+""),this.meshes.push(a))},GetMeshByPartId:function(a){for(var b=
0,c=this.meshes;b<c.length;){var d=c[b];++b;if(null!=d.GetPart(a))return d}return null},AddNode:function(a){null!=a&&(null==this.nodes&&(this.nodes=[]),this.nodes.push(a))},AddMaterial:function(a){null!=a&&(null==this.materials&&(this.materials=[]),this.materials.push(a),a.Init())},GetMaterial:function(a){null==a&&(a="");if(null==this.materials)return null;if(1==this.materials.length&&""==a)return this.materials[0];for(var b=0,c=this.materials;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null},
AddBone:function(a){if(null==a)throw new r("bone is null");null==this.bones&&(this.bones=new y);var b=this.bones,c=a.id;(null!=h[c]?b.existsReserved(c):b.h.hasOwnProperty(c))||(b=this.bones,c=a.id,null!=h[c]?b.setReserved(c,a):b.h[c]=a)},GetBone:function(a){if(null==this.bones)return null;var b=this.bones;return null!=h[a]?b.getReserved(a):b.h[a]},AddAnimation:function(a){null==this.animations&&(this.animations=[]);this.animations.push(a)},Init:function(){if(null!=this.nodes)for(var a=0,b=this.nodes.length;a<
b;){var c=a++;this.buildNode(this.nodes[c])}if(null!=this.meshes)for(a=0,b=this.meshes.length;a<b;)c=a++,this.meshes[c].Init()},Dispose:function(){if(null!=this.meshes)for(var a=0,b=this.meshes.length;a<b;){var c=a++;this.meshes[c].Dispose()}},buildNode:function(a){if(null!=a.parts)for(var b=0,c=a.parts.length;b<c;){var d=b++;d=a.parts[d];this.GetMeshByPartId(d.meshPartId).AddNodePart(d);if(null!=d.bones)for(var e=0,g=d.bones.length;e<g;){var f=e++;this.AddBone(d.GetBone(d.bones[f]))}}if(null!=a.children)for(b=
0,a=a.children;b<a.length;)c=a[b],++b,this.buildNode(c)},Decode:function(a){this.animations=this.nodes=this.materials=this.meshes=null;this.id=a.readUTF();var b=new pb;b.value=a.readInt();if(b.IsOpen(1))for(var c=0,d=a.readInt();c<d;){c++;var e=new Jd;e.Decode(a);this.AddMesh(e)}if(b.IsOpen(2))for(c=0,d=a.readInt();c<d;)c++,e=new Kd,e.Decode(a),this.AddMaterial(e);if(b.IsOpen(3))for(c=0,d=a.readInt();c<d;)c++,e=new Pc,e.Decode(a),this.AddNode(e);if(b.IsOpen(4))for(b=0,c=a.readInt();b<c;)b++,d=new Hd,
d.Decode(a),this.AddAnimation(d)},__class__:eb};var Kd=function(){this.opacity=1;this.shininess=2};f["lovedna.data.g3d.ModelMaterial"]=Kd;Kd.__name__=["lovedna","data","g3d","ModelMaterial"];Kd.prototype={AddTexture:function(a){null==this.textures&&(this.textures=[]);this.textures.push(a);a.Init()},GetTexture:function(a){null==a&&(a=0);if(null==this.textures)return null;if(0==a)return this.textures[0];for(var b=0,c=this.textures;b<c.length;){var d=c[b];++b;if(d.usage==a)return d}return null},Init:function(){null!=
this.ambient&&(this.ambient.w=this.opacity);null!=this.diffuse&&(this.diffuse.w=this.opacity);null!=this.specular&&(this.specular.w=this.opacity);null!=this.emissive&&(this.emissive.w=this.opacity);null!=this.reflection&&(this.reflection.w=this.opacity)},Decode:function(a){this.reflection=this.emissive=this.specular=this.diffuse=this.ambient=this.textures=null;this.id=a.readUTF();var b=new pb;b.value=a.readInt();b.IsOpen(1)&&(this.ambient=new ca(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(2)&&
(this.diffuse=new ca(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(3)&&(this.emissive=new ca(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(4)&&(this.specular=new ca(a.readFloat(),a.readFloat(),a.readFloat(),1));b.IsOpen(5)&&(this.reflection=new ca(a.readFloat(),a.readFloat(),a.readFloat(),1));this.opacity=a.readFloat();this.shininess=a.readFloat();if(b.IsOpen(6))for(b=a.readInt();0<b--;){var c=new Ld;c.Decode(a);this.AddTexture(c)}},__class__:Kd};var Jd=function(){};f["lovedna.data.g3d.ModelMesh"]=
Jd;Jd.__name__=["lovedna","data","g3d","ModelMesh"];Jd.prototype={Decode:function(a){this.parts=null;this.id=a.readUTF();var b=new pb;b.value=a.readInt();if(b.IsOpen(1)){this.attributes=[];for(var c=a.readInt();0<c--;)this.attributes.push(a.readUTF())}if(b.IsOpen(2))for(this.vertices=[],c=a.readInt();0<c--;)this.vertices.push(a.readFloat());if(b.IsOpen(3))for(b=a.readInt();0<b--;)c=new Md,c.Decode(a),this.AddPart(c)},AddPart:function(a){null==this.parts&&(this.parts=[]);a.mesh=this;this.parts.push(a)},
GetPart:function(a){for(var b=this.parts.length;0<b--;){var c=this.parts[b];if(c.id==a)return c}return null},AddNodePart:function(a){null==this.nodeParts&&(this.nodeParts=[]);this.nodeParts.push(a)},Init:function(){this.geom=new ta;for(var a=[],b=0,c=0,d=this.attributes.length;c<d;){var e=c++;e=this.attributes[e];"POSITION"==e?(this.geom.position=new z,a.push(k(this,this._readPOSITION)),b+=3):"NORMAL"==e?(this.geom.normal=new z,a.push(k(this,this._readNORMAL)),b+=3):"BINORMAL"==e?(this.geom.normal2=
new z,a.push(k(this,this._readBINORMAL)),b+=3):"TANGENT"==e?(this.geom.tangent=new z,a.push(k(this,this._readTANGENT)),b+=3):"COLOR"==e?(this.geom.color=new z,a.push(k(this,this._readCOLOR)),b+=4):"TEXCOORD0"==e?(this.geom.uv=new z,a.push(k(this,this._readTEXCOORD0)),b+=2):"TEXCOORD1"==e?(this.geom.uv2=new z,a.push(k(this,this._readTEXCOORD1)),b+=2):"BLENDWEIGHT0"==e?(this.geom.boneWeight=new z,a.push(k(this,this._readBLENDWEIGHT0)),b+=2):"BLENDWEIGHT1"==e?(a.push(k(this,this._readBLENDWEIGHT1)),
b+=2):"BLENDWEIGHT2"==e?(a.push(k(this,this._readBLENDWEIGHT2)),b+=2):"BLENDWEIGHT3"==e&&(a.push(k(this,this._readBLENDWEIGHT3)),b+=2)}c=this.vertices.length/b|0;if(c<this.vertices.length/b)throw new r("error vertices count");b=0;d=a.length;for(e=0;e<c;){e++;for(var g=0,f=d;g<f;){var h=g++;b+=a[h](b)}}if(null!=this.nodeParts)for(a=0,c=this.nodeParts.length;a<c;)d=a++,b=this.geom.groupCount,d=this.GetPart(this.nodeParts[d].meshPartId),d.subMeshId=b,this.geom.AddGroup((new z).From(d.indices));this.geom.Dirty(-1);
this.geom.updateTime++},Dispose:function(){this.vertices=null;if(null!=this.nodeParts)for(var a=0,b=this.nodeParts.length;a<b;){var c=a++;this.GetPart(this.nodeParts[c].meshPartId).indices=null}},_readPOSITION:function(a){a=(new l).FromArray(this.vertices,a);null!=eb.transform&&eb.transform.MultiplyPoint(a);this.geom.position.Add(a);return 3},_readNORMAL:function(a){a=(new l).FromArray(this.vertices,a);null!=eb.transform&&eb.transform.MultiplyVector(a);this.geom.normal.Add(a.Normalize());return 3},
_readBINORMAL:function(a){a=(new l).FromArray(this.vertices,a);null!=eb.transform&&eb.transform.MultiplyPoint(a);this.geom.normal2.Add(a);return 3},_readTANGENT:function(a){this.geom.tangent.Add((new ca).FromArray(this.vertices,a));return 3},_readCOLOR:function(a){this.geom.color.Add((new ca).FromArray(this.vertices,a));return 4},_readTEXCOORD0:function(a){this.geom.uv.Add((new F).FromArray(this.vertices,a));return 2},_readTEXCOORD1:function(a){this.geom.uv2.Add((new F).FromArray(this.vertices,a));
return 2},_readBLENDWEIGHT0:function(a){var b=new zf;b.index.x=this.vertices[a];b.weight.x=this.vertices[a+1];this.geom.boneWeight.Add(b);return 2},_readBLENDWEIGHT1:function(a){var b=this.geom.boneWeight.Get(-1,!0);b.index.y=this.vertices[a];b.weight.y=this.vertices[a+1];return 2},_readBLENDWEIGHT2:function(a){var b=this.geom.boneWeight.Get(-1,!0);b.index.z=this.vertices[a];b.weight.y=this.vertices[a+1];return 2},_readBLENDWEIGHT3:function(a){var b=this.geom.boneWeight.Get(-1,!0);b.index.w=this.vertices[a];
b.weight.w=this.vertices[a+1];return 2},__class__:Jd};var Md=function(){this.primitiveType="TRIANGLES"};f["lovedna.data.g3d.ModelMeshPart"]=Md;Md.__name__=["lovedna","data","g3d","ModelMeshPart"];Md.prototype={Decode:function(a){this.id=a.readUTF();this.primitiveType=a.readUTF();var b=a.readInt();for(this.indices=[];0<b--;)this.indices.push(a.readShort())},__class__:Md};var Pc=function(){};f["lovedna.data.g3d.ModelNode"]=Pc;Pc.__name__=["lovedna","data","g3d","ModelNode"];Pc.prototype={AddPart:function(a){null==
this.parts&&(this.parts=[]);this.parts.push(a);a.node=this},AddChildren:function(a){null==this.children&&(this.children=[]);this.children.push(a);a.parent=this},Decode:function(a){this.scale=this.rotation=this.translation=this.meshId=this.children=this.parts=null;this.id=a.readUTF();var b=new pb;b.value=a.readInt();b.IsOpen(1)&&(this.translation=new l(a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(2)&&(this.rotation=new fa(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(3)&&
(this.scale=new l(a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(4)&&(this.meshId=a.readUTF());if(b.IsOpen(5))for(var c=a.readInt();0<c--;){var d=new Nd;d.Decode(a);this.AddPart(d)}if(b.IsOpen(6))for(b=a.readInt();0<b--;)c=new Pc,c.Decode(a),this.AddChildren(c)},__class__:Pc};var Id=function(){this.translation=[];this.rotation=[];this.scaling=[];this.count=this.totalTime=0;this._tTime=[];this._rTime=[];this._sTime=[];this._rincTime=[];this._tincTime=[];this._sincTime=[];this._ct=new l;this._cr=
new fa;this._cs=new l};f["lovedna.data.g3d.ModelNodeAnimation"]=Id;Id.__name__=["lovedna","data","g3d","ModelNodeAnimation"];Id.prototype={GetTranslation:function(a,b){var c=this.translation.length;if(1>c)return null;var d=gc.BinarySearchLow(this._tTime,a);if(0>d)return c=this._ct,d=this.translation[0].value,null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z),this._ct;a=(a-this._tTime[d])/this._tincTime[d];null!=b&&(a=b(a));b=this._ct;var e=this.translation[d].value;null!=e&&e!=b&&(b.x=e.x,b.y=e.y,b.z=e.z);
d+1<c&&this._ct.LerpTo(this.translation[d+1].value,a);return this._ct},GetRotation:function(a,b){var c=this.rotation.length;if(1>c)return null;var d=gc.BinarySearchLow(this._rTime,a);if(0>d)return c=this._cr,d=this.rotation[0].value,null!=d&&(c.x=d.x,c.y=d.y,c.z=d.z,c.w=d.w),this._cr;a=(a-this._rTime[d])/this._rincTime[d];null!=b&&(a=b(a));b=this._cr;var e=this.rotation[d].value;null!=e&&(b.x=e.x,b.y=e.y,b.z=e.z,b.w=e.w);d<c-1&&this._cr.SlerpTo(this.rotation[d+1].value,a);return this._cr},GetScaling:function(a,
b){var c=this.scaling.length;if(1>c)return null;var d=gc.BinarySearchLow(this._sTime,a);if(0>d)return c=this._cs,d=this.scaling[0].value,null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z),this._cs;a=(a-this._sTime[d])/this._sincTime[d];null!=b&&(a=b(a));b=this._cs;var e=this.scaling[d].value;null!=e&&e!=b&&(b.x=e.x,b.y=e.y,b.z=e.z);d<c-1&&this._cs.LerpTo(this.scaling[d+1].value,a);return this._cs},AddTranslation:function(a){this.translation.push(a);0<this._tTime.length&&this._tincTime.push(a.keytime-this._tTime[this._tTime.length-
1]);this._tTime.push(a.keytime)},AddRotation:function(a){this.rotation.push(a);0<this._rTime.length&&this._rincTime.push(a.keytime-this._rTime[this._rTime.length-1]);this._rTime.push(a.keytime)},AddScaling:function(a){this.scaling.push(a);0<this._sTime.length&&this._sincTime.push(a.keytime-this._sTime[this._sTime.length-1]);this._sTime.push(a.keytime)},Decode:function(a){this.nodeId=a.readUTF();for(var b=a.readInt();0<b--;)this.AddTranslation(new Xb(a.readFloat(),new l(a.readFloat(),a.readFloat(),
a.readFloat())));for(b=a.readInt();0<b--;)this.AddRotation(new Xb(a.readFloat(),new fa(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat())));for(b=a.readInt();0<b--;)this.AddScaling(new Xb(a.readFloat(),new l(a.readFloat(),a.readFloat(),a.readFloat())));this.init()},init:function(){this._tincTime.push(1);this._rincTime.push(1);this._sincTime.push(1);this.totalTime=this.count=0;var a=this.translation.length;0<a&&(this.count=a,this.totalTime=this.translation[a-1].keytime);a=this.rotation.length;
0<a&&(a>this.count&&(this.count=a),this.rotation[a-1].keytime>this.totalTime&&(this.totalTime=this.rotation[a-1].keytime));a=this.scaling.length;0<a&&(a>this.count&&(this.count=a),this.scaling[a-1].keytime>this.totalTime&&(this.totalTime=this.scaling[a-1].keytime))},__class__:Id};var Xb=function(a,b){this.keytime=a;this.value=b};f["lovedna.data.g3d.ModelNodeKeyframe"]=Xb;Xb.__name__=["lovedna","data","g3d","ModelNodeKeyframe"];Xb.prototype={__class__:Xb};var Nd=function(){};f["lovedna.data.g3d.ModelNodePart"]=
Nd;Nd.__name__=["lovedna","data","g3d","ModelNodePart"];Nd.prototype={Decode:function(a){eb.current.partCount++;this._boneMap=this.bones=null;this.materialId=a.readUTF();this.meshPartId=a.readUTF();for(var b=a.readInt();0<b--;){var c=new Od;c.Decode(a);this.AddBone(c.id,c.translation,c.rotation,c.scale)}},AddBone:function(a,b,c,d){null==this.bones&&(this.bones=[],this._boneMap=new y);var e=new Od,g=this._boneMap;null!=h[a]?g.setReserved(a,e):g.h[a]=e;e.id=a;e.translation=b;e.rotation=c;e.scale=d;
this.bones.push(a)},GetBone:function(a){var b=this._boneMap;return null!=h[a]?b.getReserved(a):b.h[a]},__class__:Nd};var Od=function(){};f["lovedna.data.g3d.ModelNodePartBone"]=Od;Od.__name__=["lovedna","data","g3d","ModelNodePartBone"];Od.prototype={Decode:function(a){this.id=a.readUTF();var b=new pb;b.value=a.readInt();b.IsOpen(1)&&(this.translation=new l(a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(2)&&(this.rotation=new fa(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat()));b.IsOpen(3)&&
(this.scale=new l(a.readFloat(),a.readFloat(),a.readFloat()))},__class__:Od};var Ld=function(){this.uvTranslation=new F(0,0);this.uvScaling=new F(1,1);this.type="DIFFUSE";this.fileName=this.id=""};f["lovedna.data.g3d.ModelTexture"]=Ld;Ld.__name__=["lovedna","data","g3d","ModelTexture"];Ld.prototype={Init:function(){"AMBIENT"==this.type?this.usage=4:"BUMP"==this.type?this.usage=8:"DIFFUSE"==this.type?this.usage=2:"EMISSIVE"==this.type?this.usage=3:"NONE"==this.type?this.usage=1:"NORMAL"==this.type?
this.usage=7:"REFLECTION"==this.type?this.usage=10:"SHININESS"==this.type?this.usage=6:"SPECULAR"==this.type?this.usage=5:"TRANSPARENCY"==this.type&&(this.usage=9);this.usage=0},Decode:function(a){this.id=a.readUTF();this.fileName=a.readUTF();this.type=a.readUTF();this.uvTranslation=new F(a.readFloat(),a.readFloat());this.uvScaling=new F(a.readFloat(),a.readFloat())},__class__:Ld};var Qc=function(){this.subMesh=0};f["lovedna.data.mesh.CombineInstance"]=Qc;Qc.__name__=["lovedna","data","mesh","CombineInstance"];
Qc.CombineMeshes=function(a,b){if(null!=b){var c=a.length;if(0!=c){b.ClearGroup();b.position=new z;b.uv=null;b.color=null;b.normal=null;for(var d=new z,e=!0;0<c--;){var g=a[c];if(null!=g){var f=g.mesh;if(null!=f&&null!=f.position&&!(2>f.position._length)&&0!=f.groupCount){var h=f.GetGroup(g.subMesh);if(null!=h){var k=null!=b.uv,m=null!=b.normal,p=null!=b.color,n=null!=f.normal,q=null!=f.color;null!=f.uv!=k&&(e?(b.uv=new z,k=!0):(b.uv=null,k=!1));n!=m&&(e?(b.normal=new z,m=!0):(b.normal=null,m=!1));
q!=p&&(e?(b.color=new z,m=!0):(b.color=null,p=!1));e=!1;n={};h=h.indices;q=b.position._length;var r=0;g=g.transform;for(var t=0,y=h._length;t<y;){var w=t++;w=h.Get(w);if(n.hasOwnProperty(w))d.Add(n[w]);else{var u=q+r;d.Add(u);n[w]=u;++r;u=new l;var v=f.position.Get(w);null!=v&&v!=u&&(u.x=v.x,u.y=v.y,u.z=v.z);null!=g&&g.MultiplyPoint(u);b.position.Add(u);if(k){u=b.uv;v=new F;var A=f.uv.Get(w);v.x=A.x;v.y=A.y;u.Add(v)}m&&(u=new l,v=f.normal.Get(w),null!=v&&v!=u&&(u.x=v.x,u.y=v.y,u.z=v.z),null!=g&&g.MultiplyVector(u),
b.normal.Add(u.Normalize()));p&&(u=b.color,v=new ca,w=f.color.Get(w),v.x=w.x,v.y=w.y,v.z=w.z,v.w=w.w,u.Add(v))}}}}}}1<d._length&&(b.AddGroup(d),b.Dirty(-1))}}};Qc.prototype={__class__:Qc};var hc=function(){};f["lovedna.ds.IFillArray"]=hc;hc.__name__=["lovedna","ds","IFillArray"];hc.prototype={__class__:hc};var F=E.lovedna.Float2=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};f["lovedna.math.Float2"]=F;F.__name__=["lovedna","math","Float2"];F.__interfaces__=[hc];F.__properties__={get_temp:"get_temp"};
F.get_temp=function(){return F._pool.Get()};F.prototype={ToFix:function(a){null==a&&(a=5);return"Float2("+A.FloatToFixed(this.x,a)+","+A.FloatToFixed(this.y,a)+")"},FromArray:function(a,b){null==b&&(b=0);if(null==a)return this;var c=a.length;b<c&&(this.x=a[b]);b+1<c&&(this.y=a[b+1]);return this},FillArray:function(a,b){null==b&&(b=0);a[b]=this.x;a[b+1]=this.y},get_length:function(){var a=this.x*this.x+this.y*this.y;return 1E-6>A.FloatToAbs(a)?0:Math.sqrt(a)},get_angle:function(){return 57.29577951308232*
Math.atan2(this.y,this.x)},__class__:F,__properties__:{get_angle:"get_angle",get_length:"get_length"}};var ta=function(){this.id=ta._id++;this.groupCount=this.updateTime=0;this._group=new z;this.dirtyBit=new pb};f["lovedna.data.mesh.Geometry"]=ta;ta.__name__=["lovedna","data","mesh","Geometry"];ta._getuv_=function(a,b){var c=ta._uv;c.x=a;c.y=b;return c};ta.prototype={Dirty:function(a){0>a?(this.dirtyBit.Open(0),this.dirtyBit.Open(1),this.dirtyBit.Open(2),this.dirtyBit.Open(3)):this.dirtyBit.Open(a)},
ReadDirty:function(a){return this.dirtyBit.IsOpen(a)?(this.dirtyBit.Close(a),!0):!1},ClearGroup:function(){this._group.Clear()},GetGroup:function(a){return this._group.Get(a)},AddGroup:function(a){var b=this._group._length,c=0;0<b&&(b=this._group.Get(b-1),c=b.offset+b.indices._length);this._group.Add(new Af(a,c));this.groupCount=this._group._length;this.Dirty(0);this.updateTime+=.001},getUVCreater:function(a){null==a&&(a=0);if(null==this.customUvCreaters)return ta._getuv_;a=this.customUvCreaters[a];
return null==a?ta._getuv_:a},__class__:ta};var Af=function(a,b){null==b&&(b=0);this.indices=a;this.offset=b;this.start=2*b};f["lovedna.data.mesh.Group"]=Af;Af.__name__=["lovedna","data","mesh","Group"];Af.prototype={__class__:Af};var Pd=function(){K.call(this)};f["lovedna.data.png.Png"]=Pd;Pd.__name__=["lovedna","data","png","Png"];Pd.__super__=V;Pd.prototype=p(V.prototype,{Decode:function(a){var b=this._chunkList.length;0<b&&this._chunkList.splice(0,b);if(!od.gt(12,a.length-a.position)){b=a.position;
a.position=b+8;var c=a.readInt();if(100<c&&(a.position=b+8,a.__endian=0==a.__endian?1:0,c=a.readInt(),100<c))return;if(1229472850==a.readInt())for(a.position=b+8;0<Ja.get_length(a)-a.position;){b=new Qd;b.Decode(a);c=b.type;if(1>c)break;1229278788==c?this._IEND=b:this.AddChunk(b)}}},GetChunk:function(a){for(var b=this._chunkList.length;0<b--;){var c=this._chunkList[b];if(c.type==a)return c}return null},AddChunk:function(a){this._chunkList.push(a)},onConstruct:function(){V.prototype.onConstruct.call(this);
this._IEND=new Qd;this._IEND.type=1229278788;this._chunkList=[]},__class__:Pd});var Qd=function(){};f["lovedna.data.png.PngChunk"]=Qd;Qd.__name__=["lovedna","data","png","PngChunk"];Qd.prototype={Decode:function(a){var b=a.readUnsignedInt();this.type=a.readUnsignedInt();this._content=new db(0);0<b&&a.readBytes(this._content,0,b);this._crc=a.readInt()},GetContent:function(){this._content.__endian=1;return this._content},__class__:Qd};var Rc=function(){};f["lovedna.scheduler.ITrigger"]=Rc;Rc.__name__=
["lovedna","scheduler","ITrigger"];Rc.prototype={__class__:Rc};var Bf=function(){this._timelines=[];this.totalTime=0};f["lovedna.data.spine.SpineAnimation"]=Bf;Bf.__name__=["lovedna","data","spine","SpineAnimation"];Bf.prototype={parseJson:function(a,b){this.name=b;b=L.fields(a);for(var c=0,d=b.length;c<d;){var e=c++;e=b[e];var g=P.GetValue(a,e);switch(e){case "events":this.parseEvetns(g);break;case "bones":case "slots":this.parseBonesAndSlots(g)}}},parseBonesAndSlots:function(a){for(var b=L.fields(a),
c=b.length;0<c--;)for(var d=b[c],e=P.GetValue(a,d),g=L.fields(e),f=g.length,h=null;0<f--;){var k=g[f];switch(k){case "attachment":h=new Rd;break;case "color":h=new Sd;break;case "rotate":h=new Td;break;case "scale":h=new Ud;break;case "translate":h=new Vd}null!=h&&(h.setTarget(d),h.parseJson(P.GetValue(e,k)),this._timelines.push(h),h.totalTime>this.totalTime&&(this.totalTime=h.totalTime))}},parseEvetns:function(a){var b=new Wd;b.parseJson(a);this._timelines.push(b);b.totalTime>this.totalTime&&(this.totalTime=
b.totalTime)},__class__:Bf};var Cf=function(){this.position=new F;var a=new F;a.x=1;a.y=1;this.scale=a};f["lovedna.data.spine.SpineAttachment"]=Cf;Cf.__name__=["lovedna","data","spine","SpineAttachment"];Cf.prototype={parseJson:function(a,b){this.name=b;this.position.x=P.GetFloat(a,"x");this.position.y=P.GetFloat(a,"y");this.scale.x=P.GetFloat(a,"scaleX",1);this.scale.y=P.GetFloat(a,"scaleY",1);this.rotation=P.GetFloat(a,"rotation",0);this.width=P.GetFloat(a,"width",0);this.height=P.GetFloat(a,"height",
0);a=this.rotation;a+=180;b=a/360;var c=b|0;0>b&&c!=b&&--c;this.rotation=a-360*c-180},__class__:Cf};var Df=function(){this.position=new F;this.scale=new F;this.inheritRotation=this.inheritScale=!0};f["lovedna.data.spine.SpineBone"]=Df;Df.__name__=["lovedna","data","spine","SpineBone"];Df.prototype={parseJson:function(a){this.name=P.GetString(a,"name");this.parent=P.GetString(a,"parent");this.length=P.GetFloat(a,"length");var b=P.GetFloat(a,"rotation");b+=180;var c=b/360,d=c|0;0>c&&d!=c&&--d;this.rotation=
b-360*d-180;this.position.x=P.GetFloat(a,"x");this.position.y=P.GetFloat(a,"y");this.scale.x=P.GetFloat(a,"scaleX",1);this.scale.y=P.GetFloat(a,"scaleY",1);this.inheritScale=P.GetBool(a,"inheritScale",!0);this.inheritRotation=P.GetBool(a,"inheritRotation",!0)},setParent:function(a){this.parentBone=a},__class__:Df};var Xd=function(a){K.call(this);this._init=!1;this.name=a;this._boneMap=new y;this._boneList=[];this._slotMap=new y;this._slotList=[];this._skinMap=new y;this._animationMap=new y;this.enable=
!1};f["lovedna.data.spine.SpineData"]=Xd;Xd.__name__=["lovedna","data","spine","SpineData"];Xd.__super__=V;Xd.prototype=p(V.prototype,{Parse:function(a){if(!this._init){this._init=!0;a=a.readUTFBytes(Ja.get_length(a));a=JSON.parse(a);for(var b=P.GetValue(a,"bones"),c=0,d=b.length;c<d;){var e=c++,g=new Df;g.parseJson(b[e]);e=this._boneMap;var f=g.name;null!=h[f]?e.setReserved(f,g):e.h[f]=g;this._boneList.push(g.name)}b=this._boneMap;for(b=new tb(b,b.arrayKeys());b.hasNext();)c=b.next(),d=c.parent,
null==d?d=null:(g=this._boneMap,(null!=h[d]?g.existsReserved(d):g.h.hasOwnProperty(d))?(g=this._boneMap,d=null!=h[d]?g.getReserved(d):g.h[d]):d=null),c.setParent(d);b=P.GetValue(a,"slots");c=0;for(d=b.length;c<d;)e=c++,g=new Ef,g.parseJson(b[e]),e=g.name,f=this._slotMap,null!=h[e]?f.setReserved(e,g):f.h[e]=g,this._slotList.push(e),e=g.boneName,null==e?e=null:(f=this._boneMap,(null!=h[e]?f.existsReserved(e):f.h.hasOwnProperty(e))?(f=this._boneMap,e=null!=h[e]?f.getReserved(e):f.h[e]):e=null),g.bone=
e;b=P.GetValue(a,"skins");c=L.fields(b);d=0;for(g=c.length;d<g;){f=d++;e=new Ff;f=c[f];e.parseJson(P.GetValue(b,f),f);var k=this._skinMap;null!=h[f]?k.setReserved(f,e):k.h[f]=e;"default"==f&&(this.defaultSkin=e)}a=P.GetValue(a,"animations");b=L.fields(a);c=0;for(d=b.length;c<d;)g=c++,g=b[g],e=new Bf,e.parseJson(P.GetValue(a,g),g),f=this._animationMap,null!=h[g]?f.setReserved(g,e):f.h[g]=e;this.enable=!0}this.DispatchEvent(C.INIT)},__class__:Xd});var Ff=function(){this._map=new y};f["lovedna.data.spine.SpineSkin"]=
Ff;Ff.__name__=["lovedna","data","spine","SpineSkin"];Ff.prototype={parseJson:function(a,b){this.name=b;b=L.fields(a);for(var c=0,d=b.length;c<d;){var e=c++,g=b[e];e=this._map;e=null!=h[g]?e.getReserved(g):e.h[g];if(null==e){e=new y;var f=this._map;null!=h[g]?f.setReserved(g,e):f.h[g]=e}g=P.GetValue(a,g);f=L.fields(g);for(var k=0,l=f.length;k<l;){var m=k++;m=f[m];var p=new Cf;p.parseJson(P.GetValue(g,m),m);null!=h[m]?e.setReserved(m,p):e.h[m]=p}}},__class__:Ff};var Ef=function(){this.color=new wa};
f["lovedna.data.spine.SpineSlot"]=Ef;Ef.__name__=["lovedna","data","spine","SpineSlot"];Ef.prototype={parseJson:function(a){this.name=P.GetString(a,"name");this.boneName=P.GetString(a,"bone");this.attachment=P.GetString(a,"attachment");this.additiveBlending=P.GetBool(a,"additive",!1);a=P.GetString(a,"color");null!=a&&this.color.set_rgba(A.HexToInt(a))},__class__:Ef};var za=function(){this._times=[];this._timeinc=[];this.length=0};f["lovedna.data.spine.timeline.SpineTimeline"]=za;za.__name__=["lovedna",
"data","spine","timeline","SpineTimeline"];za.prototype={setTarget:function(a){this.targetName=a},parseJson:function(a){for(var b=a.length,c=0,d=0;d<b;){c=d++;var e=a[c];c=P.GetFloat(e,"time");this._times.push(c);this.addItem(e)}this.totalTime=c;this.length=b;a=0;for(--b;a<b;)d=a++,this._timeinc[d]=this._times[d+1]-this._times[d];this.init()},addItem:function(a){},init:function(){},__class__:za};var Rd=function(){za.call(this);this._name=[];this.type=4};f["lovedna.data.spine.timeline.TimelineAttachment"]=
Rd;Rd.__name__=["lovedna","data","spine","timeline","TimelineAttachment"];Rd.__super__=za;Rd.prototype=p(za.prototype,{addItem:function(a){this._name.push(P.GetString(a,"name"))},__class__:Rd});var Sd=function(){za.call(this);this._color=[];this._colorInc=[];this.type=5};f["lovedna.data.spine.timeline.TimelineColor"]=Sd;Sd.__name__=["lovedna","data","spine","timeline","TimelineColor"];Sd.__super__=za;Sd.prototype=p(za.prototype,{addItem:function(a){var b=new wa;a=P.GetString(a,"color");b.x=1;b.y=
1;b.z=1;b.w=1;null!=a&&b.set_rgba(A.HexToInt(a));this._color.push(b)},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++,d=new wa,e=this._color[c+1];d.x=e.x;d.y=e.y;d.z=e.z;d.w=e.w;c=this._color[c];d.x-=c.x;d.y-=c.y;d.z-=c.z;this._colorInc.push(d)}},__class__:Sd});var Wd=function(){za.call(this);this.type=6;this._name=[];this._intList=[];this._floatList=[];this._stringList=[]};f["lovedna.data.spine.timeline.TimelineEvent"]=Wd;Wd.__name__=["lovedna","data","spine","timeline","TimelineEvent"];
Wd.__super__=za;Wd.prototype=p(za.prototype,{addItem:function(a){this._name.push(P.GetString(a,"name"));this._intList.push(P.GetInt(a,"int",0));this._floatList.push(P.GetFloat(a,"float",0));this._stringList.push(P.GetString(a,"string",null))},__class__:Wd});var Td=function(){za.call(this);this._rotation=[];this._rotationInc=[];this.type=1};f["lovedna.data.spine.timeline.TimelineRotate"]=Td;Td.__name__=["lovedna","data","spine","timeline","TimelineRotate"];Td.__super__=za;Td.prototype=p(za.prototype,
{addItem:function(a){var b=this._rotation;a=P.GetFloat(a,"angle");a+=180;var c=a/360,d=c|0;0>c&&d!=c&&--d;b.push(a-360*d-180)},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++;this._rotationInc[c]=this._rotation[c+1]-this._rotation[c]}},__class__:Td});var Ud=function(){za.call(this);this._scale=[];this._scaleInc=[];this.type=3};f["lovedna.data.spine.timeline.TimelineScale"]=Ud;Ud.__name__=["lovedna","data","spine","timeline","TimelineScale"];Ud.__super__=za;Ud.prototype=p(za.prototype,
{addItem:function(a){var b=this._scale,c=new F,d=P.GetFloat(a,"x",1);a=P.GetFloat(a,"y",1);c.x=d;c.y=a;b.push(c)},init:function(){for(var a=0,b=this.length-1;a<b;){var c=a++,d=new F,e=this._scale[c+1];d.x=e.x;d.y=e.y;e=this._scale[c];d.x-=e.x;d.y-=e.y;this._scaleInc[c]=d}},__class__:Ud});var Vd=function(){za.call(this);this._position=[];this._positionInc=[];this.type=2};f["lovedna.data.spine.timeline.TimelineTranslate"]=Vd;Vd.__name__=["lovedna","data","spine","timeline","TimelineTranslate"];Vd.__super__=
za;Vd.prototype=p(za.prototype,{addItem:function(a){za.prototype.addItem.call(this,a);var b=this._position,c=new F,d=P.GetFloat(a,"x");a=P.GetFloat(a,"y");c.x=d;c.y=a;b.push(c)},init:function(){za.prototype.init.call(this);for(var a=0,b=this.length-1;a<b;){var c=a++,d=new F,e=this._position[c+1];d.x=e.x;d.y=e.y;c=this._position[c];d.x-=c.x;d.y-=c.y;this._positionInc.push(d)}},__class__:Vd});var Gf=function(a){this._items=new z;this._items.Add(null);this._compare=a;this.count=0};f["lovedna.ds.BinaryHeap"]=
Gf;Gf.__name__=["lovedna","ds","BinaryHeap"];Gf.prototype={Push:function(a){this._items.Add(a);this.toRoot(this._items._length-1);this.count=this._items._length-1},Shift:function(){if(1==this._items._length)return null;if(2==this._items._length)return this.count=0,this._items.Pop();var a=this._items.Get(1);this.toLeaf();this.count=this._items._length-1;return a},Clear:function(){this._items.set_length(1)},toRoot:function(a){for(var b=a;1<b;){var c=b>>1,d=this._items.Get(b),e=this._items.Get(c);if(0>
this._compare(d,e))this._items.Set(b,e),this._items.Set(c,d);else break;b=c;if(0>a--)break}},toLeaf:function(){var a=1;this._items.Set(1,this._items.Pop());for(var b=this._items._length,c=b;;){var d=a,e=a<<1;if(e<b){var g=this._items.Get(a),f=this._items.Get(e);0<this._compare(g,f)&&(a=e,g=f);e+1<b&&(f=this._items.Get(e+1),0<this._compare(g,f)&&(a=e+1))}if(a!=d)g=this._items.Get(a),e=this._items.Get(d),this._items.Set(a,e),this._items.Set(d,g);else break;if(0>c--)break}},__class__:Gf};var pb=function(a){null==
a&&(a=0);this.value=0;this.value=a};f["lovedna.ds.Bit32"]=pb;pb.__name__=["lovedna","ds","Bit32"];pb.prototype={Open:function(a){this.value|=1<<a;return this},Close:function(a){this.value&=~(1<<a);return this},IsOpen:function(a){a=1<<a;return(this.value&a)==a},Clear:function(){this.value=0;return this},__class__:pb};var Ja={};f["lovedna.ds._ByteArray.ByteArray_Impl_"]=Ja;Ja.__name__=["lovedna","ds","_ByteArray","ByteArray_Impl_"];Ja.__properties__={get_length:"get_length"};Ja.fromBytes=function(a){return null==
a?null:I.__instanceof(a,db)?a:db.fromBytes(a)};Ja.toBytes=function(a){return a};Ja.get_length=function(a){return a.length};var Hf=function(){};f["lovedna.ds.IDataOutput"]=Hf;Hf.__name__=["lovedna","ds","IDataOutput"];Hf.prototype={__class__:Hf};var If=function(){};f["lovedna.ds.IDataInput"]=If;If.__name__=["lovedna","ds","IDataInput"];If.prototype={__class__:If};var db=function(a){null==a&&(a=0);var b=new ba(new lb(a));ba.call(this,b.b.buffer);this.__length=a;null==db.__defaultEndian&&(pa.get_endianness()==
Nb.LITTLE_ENDIAN?db.__defaultEndian=1:db.__defaultEndian=0);this.__endian=db.__defaultEndian;this.position=0};f["lovedna.ds.ByteArrayData"]=db;db.__name__=["lovedna","ds","ByteArrayData"];db.__interfaces__=[Hf,If];db.fromBytes=function(a){var b=new db;b.__fromBytes(a);return b};db.__super__=ba;db.prototype=p(ba.prototype,{readBoolean:function(){if(this.position<this.length)return 0!=this.b[this.position++];throw new r(new ic);},readBytes:function(a,b,c){null==c&&(c=0);null==b&&(b=0);0==c&&(c=this.length-
this.position);if(this.position+c>this.length)throw new r(new ic);a.length<b+c&&a.__resize(b+c);a.blit(b,this,this.position,c);this.position+=c},readFloat:function(){return mb.i32ToFloat(this.readInt())},readInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readShort:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte();a=1==this.__endian?b<<8|a:a<<8|
b;return 0!=(a&32768)?a-65536:a},readUnsignedByte:function(){if(this.position<this.length)return this.b[this.position++];throw new r(new ic);},readUnsignedInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readUnsignedShort:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte();return 1==this.__endian?(b<<8)+a:a<<8|b},readUTF:function(){var a=this.readUnsignedShort();
return this.readUTFBytes(a)},readUTFBytes:function(a){if(this.position+a>this.length)throw new r(new ic);this.position+=a;return this.getString(this.position-a,a)},uncompress:function(a){null==a&&(a=2);if(this.__length>this.length){var b=this.length;this.length=this.__length;var c=new ba(new lb(b));c.blit(0,this,0,b);this.b=c.b;this.__length=c.length;this.data=c.data;this.length=b}switch(a){case 0:a=Bg.decompress(this);break;case 1:a=Cg.decompress(this);break;default:a=Dg.decompress(this)}null!=a&&
(this.b=a.b,this.__length=a.length,this.data=a.data,this.length=this.__length);this.position=0},__fromBytes:function(a){this.b=a.b;this.__length=a.length;this.data=a.data;this.length=a.length},__resize:function(a){if(a>this.__length){var b=new ba(new lb(3*(a+1)>>1)),c=this.length;this.length=this.__length;b.blit(0,this,0,this.__length);this.length=c;this.b=b.b;this.__length=b.length;this.data=b.data}this.length<a&&(this.length=a)},__class__:db});var Yd=function(){this._lasttype=0;this.Reset()};f["lovedna.ds.HashFNV"]=
Yd;Yd.__name__=["lovedna","ds","HashFNV"];Yd.prototype={Reset:function(){this._lasttype=this._index=this._value=0},GetCode:function(){return this._value},GetString:function(){return A.IntToHex(this._value)},PushInt:function(a){2!=this._lasttype&&(this._lasttype=2,this._addInt(this._lasttype));this._addInt(a)},PushString:function(a){4!=this._lasttype&&(this._lasttype=4,this._addInt(this._lasttype));var b=a.length;for(this._addInt(b);0<b--;)this._addInt(u.cca(a,b))},_addInt:function(a){this._value*=
16777619;this._value^=a},__class__:Yd};var Sc=function(a,b){null==b&&(b=!1);null==a&&(a="");this._list=[];this._keep=b;this.Decode(a)};f["lovedna.ds.StringLine"]=Sc;Sc.__name__=["lovedna","ds","StringLine"];Sc.prototype={ReadLine:function(){return this._position<this._length?this._list[this._position++]:null},Decode:function(a){0<this._length&&this._list.splice(0,this._length);this._position=this._length=0;if(null!=a){a=Z.replace(a,"\r","\n");a=a.split("\n");for(var b=0,c=a.length;b<c;){var d=b++;
d=a[d];(""!=d||this._keep)&&this._list.push(d)}this._length=this._list.length;this._position=0}},get_position:function(){return this._position},set_position:function(a){0<=a&&a<this._length&&(this._position=a);return this._position},__class__:Sc,__properties__:{set_position:"set_position",get_position:"get_position"}};var Tc=function(a,b){null==b&&(b=0);null==a&&(a="");this.message=a;this.errorID=b;this.name="Error"};f["lovedna.errors.Error"]=Tc;Tc.__name__=["lovedna","errors","Error"];Tc.prototype=
{toString:function(){return null!=this.message?this.message:"Error"},__class__:Tc};var yc=function(a){null==a&&(a="");Tc.call(this,a);this.name="IOError"};f["lovedna.errors.IOError"]=yc;yc.__name__=["lovedna","errors","IOError"];yc.__super__=Tc;yc.prototype=p(Tc.prototype,{__class__:yc});var ic=function(){yc.call(this,"End of file was encountered");this.name="EOFError";this.errorID=2030};f["lovedna.errors.EOFError"]=ic;ic.__name__=["lovedna","errors","EOFError"];ic.__super__=yc;ic.prototype=p(yc.prototype,
{__class__:ic});var ma=function(a){K.call(this);this.name=a;this._type=wb.GetClassName(this)+"."+this.name+"."+(new Date(2018,4,5,14,57,22)).getTime()};f["lovedna.event.Event"]=ma;ma.__name__=["lovedna","event","Event"];ma.__super__=K;ma.prototype=p(K.prototype,{SetCurrentTarget:function(a){return this.currentTarget=a},SetCustomData:function(a){return this.customData=a},setTarget:function(a){this._target=a},__class__:ma});var wb=function(){};f["lovedna.utils.TypeUtil"]=wb;wb.__name__=["lovedna","utils",
"TypeUtil"];wb.GetName=function(a){if(null!=wb._typeMap.h.__keys__[a.__id__])return wb._typeMap.h[a.__id__];var b=da.getClassName(a);wb._typeMap.set(a,b);return b};wb.CreateInstance=function(a,b){a=null==b?da.createEmptyInstance(a):da.createInstance(a,b);I.__instanceof(a,K)&&a.Construct();return a};wb.GetClassName=function(a){return null==a?"null":da.getClassName(null==a?null:I.getClass(a))};var Zd=function(a){ma.call(this,a)};f["lovedna.event.KeyEvent"]=Zd;Zd.__name__=["lovedna","event","KeyEvent"];
Zd.__super__=ma;Zd.prototype=p(ma.prototype,{__class__:Zd});var $d=function(a){ma.call(this,a)};f["lovedna.event.ProgressEvent"]=$d;$d.__name__=["lovedna","event","ProgressEvent"];$d.__super__=ma;$d.prototype=p(ma.prototype,{SetProgress:function(a,b){this.loaded=a;this.total=b;return this},__class__:$d});var ae=function(a){ma.call(this,a)};f["lovedna.event.TouchEvent"]=ae;ae.__name__=["lovedna","event","TouchEvent"];ae.__super__=ma;ae.prototype=p(ma.prototype,{__class__:ae});var C=function(){};f["lovedna.event.Events"]=
C;C.__name__=["lovedna","event","Events"];var xf=function(a,b,c,d,e){this.enabled=!0;0>e&&(e=0);this._dispatcher=a;this._callback=b;this.priority=c;this._once=d;this._delay=e;this._eventList=new z};f["lovedna.event.Listener"]=xf;xf.__name__=["lovedna","event","Listener"];xf.prototype={Dispatch:function(a){var b=this;this.enabled&&null!=this._callback&&(this._eventList.Add(a),0<this._delay?(null!=this._timer&&this._timer.stop(),this._timer=new pd(this._delay|0),this._timer.run=function(){b._timer.stop();
b._timer=null;b.execute()}):this.execute())},Destroy:function(){this._dispatcher=this._callback=null;this._delay=0;this._eventList.Dispose();this._eventList=null},Match:function(a){return L.compareMethods(this._callback,a)},execute:function(){if(null!=this._callback&&null!=this._eventList){var a=this._eventList._length;if(0!=a){for(var b=0;b<a;){var c=b++;c=this._eventList.Get(c);c.setTarget(this._dispatcher);ma.current=c;this._callback()}this._once&&null!=this._dispatcher&&this._dispatcher.RemoveEventListener(this._eventList.Get(0)._type,
this._callback);null!=this._eventList&&this._eventList.Clear()}}},__class__:xf};var D=function(){};f["lovedna.game.App"]=D;D.__name__=["lovedna","game","App"];D.Start=function(){Dd.injector.Inject(D,D)};var Fg=function(){this.veh_police="obj/veh_police1.g3d";this.veh_ambulance="obj/veh_ambulance.g3d";this.arrow="images/arrow.png";this.edge="images/edge1.png";this.grass="images/grass1.jpg";this.veh="obj/veh.png";this.fnt="images/char_0.png"};f["lovedna.game.AssetData"]=Fg;Fg.__name__=["lovedna","game",
"AssetData"];Fg.prototype={__class__:Fg};var G=function(){K.call(this)};f["lovedna.play.components.Component"]=G;G.__name__=["lovedna","play","components","Component"];G.__super__=V;G.prototype=p(V.prototype,{onConstruct:function(){V.prototype.onConstruct.call(this);this.__inited=this.__destroyed=!1;this.id=G._id++;this.__disabled=!1},onAwake:function(){},onEnable:function(){},onStart:function(){},onDestroy:function(){},onDisable:function(){},onFixedInput:function(){},onInput:function(){},onInputFinish:function(){},
onOutput:function(){},onTransform:function(){},onCollect:function(){},onRender:function(){},addEvent:function(a,b){if(null!=this.actor){null==this.__calbacks&&(this.__calbacks=new y);var c=a._type,d=this.__calbacks;if(null!=h[c]?d.existsReserved(c):d.h.hasOwnProperty(c))d=this.__calbacks,this.actor.RemoveEventListener(c,null!=h[c]?d.getReserved(c):d.h[c]),this.__calbacks.remove(c);if(null==this._builtinCallback&&null==this._builtinCallback){d=this._builtinCallback=new y;var e=t.onEnable._type,g=k(this,
this.onEnable);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onDisable._type;g=k(this,this.onDisable);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onFixedInput._type;g=k(this,this.onFixedInput);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onInput._type;g=k(this,this.onInput);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onInputFinish._type;g=k(this,this.onInputFinish);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;
e=t.onTransform._type;g=k(this,this.onTransform);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onOutput._type;g=k(this,this.onOutput);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onCollect._type;g=k(this,this.onCollect);null!=h[e]?d.setReserved(e,g):d.h[e]=g;d=this._builtinCallback;e=t.onRender._type;g=k(this,this.onRender);null!=h[e]?d.setReserved(e,g):d.h[e]=g}null==b&&(b=this._builtinCallback,b=null!=h[c]?b.getReserved(c):b.h[c]);null!=b&&(d=this.__calbacks,
a=a._type,null!=h[a]?d.setReserved(a,b):d.h[a]=b,this.actor.AddEventListener(c,b),this.actor.GetListener(c,b).enabled=!this.__disabled&&this.__inited)}},removeEvent:function(a,b){if(null!=this.actor&&null!=this.__calbacks)if(a=a._type,null==b)for(b=this.__calbacks.keys();b.hasNext();){var c=b.next();if(a==c){var d=this.__calbacks;this.actor.RemoveEventListener(c,null!=h[c]?d.getReserved(c):d.h[c]);this.__calbacks.remove(c)}}else this.actor.RemoveEventListener(a,b)},refreshEvent:function(){if(null!=
this.__calbacks&&this.__inited)for(var a=this.__calbacks.keys();a.hasNext();){var b=a.next(),c=this.__calbacks;b=this.actor.GetListener(b,null!=h[b]?c.getReserved(b):c.h[b]);null!=b&&(b.enabled=!this.__disabled)}},set_disabled:function(a){this.__disabled!=a&&(this.__disabled=a,this.refreshEvent());return this.__disabled},__class__:G,__properties__:{set_disabled:"set_disabled"}});var be=function(){K.call(this)};f["lovedna.game.CameraBlur"]=be;be.__name__=["lovedna","game","CameraBlur"];be.__super__=
G;be.prototype=p(G.prototype,{Blur:function(a){if(!(0>=a)){this._time=a;this._time=zc.instance.RandomFloat(.3,.6);a=this._d;a.x=4;a.y=4;this._mat.SetFloat2(m.UV2.name,this._d);this._camera=this.actor.GetComponent(Na);null==this._tex&&(this._tex=new ce(128,128));this._camera.targetTexture=this._tex;this._camera.clearFlags.type=3;this.addEvent(t.OnPostRender,k(this,this.OnPostRender));this._command.Clear();a=this._command;var b=this._camera.targetTexture,c=Gb.backBuffer,d=this._mat;null!=b&&b!=c&&(b=
(new Oa).Set(b,c,d),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length)}},onAwake:function(){G.prototype.onAwake.call(this);this._time=0;this._d=new F;this._command=new Ya;this._mat=new Uc},onStart:function(){G.prototype.onStart.call(this);var a=new Ac("blur","","\r\n\t\tuniform sampler2D tInput:TEX;\r\n\t\tvarying vec2 vuv;\r\n\t\tuniform vec2 delta:UV2;\r\n\t\tuniform vec4 resolution:TARGET_PARAMS;\r\n\t\tvoid main(void){\r\n\t\t\t///\r\n\t\t\tvec4 sum = vec4( 0. );\r\n\t\t\tvec2 inc = resolution.zw*delta;\r\n\r\n\t\t\tsum += texture2D( tInput, ( vuv - inc * 4. ) ) * 0.051;\r\n\t\t\tsum += texture2D( tInput, ( vuv - inc * 3. ) ) * 0.0918;\r\n\t\t\tsum += texture2D( tInput, ( vuv - inc * 2. ) ) * 0.12245;\r\n\t\t\tsum += texture2D( tInput, ( vuv - inc * 1. ) ) * 0.1531;\r\n\t\t\tsum += texture2D( tInput, ( vuv + inc * 0. ) ) * 0.1633;\r\n\t\t\tsum += texture2D( tInput, ( vuv + inc * 1. ) ) * 0.1531;\r\n\t\t\tsum += texture2D( tInput, ( vuv + inc * 2. ) ) * 0.12245;\r\n\t\t\tsum += texture2D( tInput, ( vuv + inc * 3. ) ) * 0.0918;\r\n\t\t\tsum += texture2D( tInput, ( vuv + inc * 4. ) ) * 0.051;\r\n\r\n\t\t\tgl_FragColor = sum;\r\n\t\t\t\r\n\t\t\t///\r\n\t\t}\r\n\t\t");
this._mat.shader.SetCode(a)},OnPostRender:function(){this._command.Execute();this._time-=this.actor.deltaTime;var a=this._d;a.x=this._time;a.y=0;a.x=a.x;a.y=a.y;0>=this._time&&(this._time=0,this._camera.targetTexture=null,this.removeEvent(t.OnPostRender))},__class__:be});var Bc=function(){K.call(this)};f["lovedna.game.CameraFollow"]=Bc;Bc.__name__=["lovedna","game","CameraFollow"];Bc.__super__=G;Bc.prototype=p(G.prototype,{Set:function(a){this._target=a},onAwake:function(){G.prototype.onAwake.call(this);
this.type=1;this._position=new l;this._tposition=new l;this._rotation=new fa;this.dis=18},onStart:function(){G.prototype.onStart.call(this);this.addEvent(t.onInputFinish);this.addEvent(t.onScreenResize,k(this,this.onScreenResize));this.onScreenResize()},onInputFinish:function(){if(null!=this._target){var a=this.dis,b=6*a,c=1;if(1==this.type){c=this._tposition;var d=this._target.position;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);c=this._position;d=this._tposition;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=
d.z);this._position.z+=a;a=D.sceneData.player.speed/D.sceneData.playerSpeed*b;c=.3*b;a<c&&(a=c);a>b&&(a=b);this._position.y+=a;b=this._rotation;a=this._position;c=this._tposition;d=l._pool.Get();null==a?(d.x-=c.x,d.y-=c.y,d.z-=c.z):(d.x=c.x-a.x,d.y=c.y-a.y,d.z=c.z-a.z);b.SetLookAt(d.Normalize(),null);c=8}else if(2==this.type){c=this._position;d=this._target.position;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);var e=this._target;null==e._forward&&(e._forward=new l(0,0,1),e.get_worldRotation().MultiplyVector(e._forward,
!0).Normalize());d=l._pool.Get();e=e._forward;null!=e&&e!=d&&(d.x=e.x,d.y=e.y,d.z=e.z);a=-a;d.x*=a;d.y*=a;d.z*=a;c.x+=d.x;c.y+=d.y;c.z+=d.z;a=D.sceneData.player.speed/D.sceneData.playerSpeed*b;c=.3*b;a<c&&(a=c);a>b&&(a=b);this._position.y+=a;b=this._rotation;a=this.actor.position;c=this._target.position;d=l._pool.Get();null==a?(d.x-=c.x,d.y-=c.y,d.z-=c.z):(d.x=c.x-a.x,d.y=c.y-a.y,d.z=c.z-a.z);b.SetLookAt(d.Normalize(),null);c=3}this.actor.position.LerpTo(this._position,this.actor.deltaTime*c);b=this.actor.rotation;
a=this._rotation;null!=a&&(b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w)}},onScreenResize:function(){this.dis=1<this.actor.world.data.width/this.actor.world.data.height?9:18},__class__:Bc});var na=function(){this._sin=Math.sin;this._cos=Math.cos;this.m00=1;this.m01=this.m40=this.m20=this.m10=0;this.m11=1;this.m12=this.m02=this.m31=this.m21=0;this.m22=1;this.m23=this.m13=this.m03=this.m32=0;this.m33=1;this._dirty=!0};f["lovedna.math.Matrix44"]=na;na.__name__=["lovedna","math","Matrix44"];na.__interfaces__=[hc];
na.prototype={FillArray:function(a,b){null==b&&(b=0);a[b]=this.m00;a[b+1]=this.m10;a[b+2]=this.m20;a[b+3]=this.m40;a[b+4]=this.m01;a[b+5]=this.m11;a[b+6]=this.m21;a[b+7]=this.m31;a[b+8]=this.m02;a[b+9]=this.m12;a[b+10]=this.m22;a[b+11]=this.m32;a[b+12]=this.m03;a[b+13]=this.m13;a[b+14]=this.m23;a[b+15]=this.m33},ToFloat32Array:function(a,b){null==b&&(b=0);a[b]=this.m00;a[b+1]=this.m10;a[b+2]=this.m20;a[b+3]=this.m40;a[b+4]=this.m01;a[b+5]=this.m11;a[b+6]=this.m21;a[b+7]=this.m31;a[b+8]=this.m02;a[b+
9]=this.m12;a[b+10]=this.m22;a[b+11]=this.m32;a[b+12]=this.m03;a[b+13]=this.m13;a[b+14]=this.m23;a[b+15]=this.m33},Append:function(a,b){null==b&&(b=!1);if(null==a)return this;var c=this,d=a;b&&(c=a,d=this);a=c.m00*d.m01+c.m01*d.m11+c.m02*d.m21+c.m03*d.m31;b=c.m00*d.m02+c.m01*d.m12+c.m02*d.m22+c.m03*d.m32;var e=c.m00*d.m03+c.m01*d.m13+c.m02*d.m23+c.m03*d.m33,g=c.m10*d.m00+c.m11*d.m10+c.m12*d.m20+c.m13*d.m40,f=c.m10*d.m01+c.m11*d.m11+c.m12*d.m21+c.m13*d.m31,h=c.m10*d.m02+c.m11*d.m12+c.m12*d.m22+c.m13*
d.m32,k=c.m10*d.m03+c.m11*d.m13+c.m12*d.m23+c.m13*d.m33,l=c.m20*d.m00+c.m21*d.m10+c.m22*d.m20+c.m23*d.m40,m=c.m20*d.m01+c.m21*d.m11+c.m22*d.m21+c.m23*d.m31,p=c.m20*d.m02+c.m21*d.m12+c.m22*d.m22+c.m23*d.m32,n=c.m20*d.m03+c.m21*d.m13+c.m22*d.m23+c.m23*d.m33,q=c.m40*d.m00+c.m31*d.m10+c.m32*d.m20+c.m33*d.m40,r=c.m40*d.m01+c.m31*d.m11+c.m32*d.m21+c.m33*d.m31,t=c.m40*d.m02+c.m31*d.m12+c.m32*d.m22+c.m33*d.m32,u=c.m40*d.m03+c.m31*d.m13+c.m32*d.m23+c.m33*d.m33;this.m00=c.m00*d.m00+c.m01*d.m10+c.m02*d.m20+
c.m03*d.m40;this.m10=g;this.m20=l;this.m40=q;this.m01=a;this.m11=f;this.m21=m;this.m31=r;this.m02=b;this.m12=h;this.m22=p;this.m32=t;this.m03=e;this.m13=k;this.m23=n;this.m33=u;this._dirty=!0;return this},SetRotation:function(a){var b=a.x*a.x,c=a.x*a.y,d=a.x*a.z,e=a.x*a.w,g=a.y*a.y,f=a.y*a.z,h=a.y*a.w,k=a.z*a.z;a=a.z*a.w;this.m00=1-2*(g+k);this.m10=2*(c+a);this.m20=2*(d-h);this.m01=2*(c-a);this.m11=1-2*(b+k);this.m21=2*(f+e);this.m02=2*(d+h);this.m12=2*(f-e);this.m22=1-2*(b+g);this._dirty=!0;return this},
AppendScale:function(a){if(1!=a.x||1!=a.y||1!=a.z){var b=na._pool.Get();b.m00=1;b.m10=0;b.m20=0;b.m40=0;b.m01=0;b.m11=1;b.m21=0;b.m31=0;b.m02=0;b.m12=0;b.m22=1;b.m32=0;b.m03=0;b.m13=0;b.m23=0;b.m33=1;b._dirty=!0;b.m00=a.x;b.m11=a.y;b.m22=a.z;b._dirty=!0;this.Append(b)}return this},AppendRotation:function(a){if(0!=a.x||0!=a.y||0!=a.z||1!=a.w){var b=na._pool.Get();b.m00=1;b.m10=0;b.m20=0;b.m40=0;b.m01=0;b.m11=1;b.m21=0;b.m31=0;b.m02=0;b.m12=0;b.m22=1;b.m32=0;b.m03=0;b.m13=0;b.m23=0;b.m33=1;b._dirty=
!0;this.Append(b.SetRotation(a))}return this},SetProjection:function(a,b,c,d){null==d&&(d=1.78);null==c&&(c=60);null==b&&(b=1E3);null==a&&(a=.1);c=1/Math.tan(.008726646259971648*c);this.m00=c/d;this.m01=this.m40=this.m20=this.m10=0;this.m11=c;this.m12=this.m02=this.m31=this.m21=0;this.m22=(b+a)/(a-b);this.m32=-1;this.m13=this.m03=0;this.m23=2*b*a/(a-b);this.m33=0;this._dirty=!0;return this},SetOrtho:function(a,b,c,d,e,g){this.m00=2/(b-a);this.m01=this.m40=this.m20=this.m10=0;this.m11=2/(d-c);this.m12=
this.m02=this.m31=this.m21=0;this.m22=-2/(g-e);this.m32=0;this.m03=-(b+a)/(b-a);this.m13=-(d+c)/(d-c);this.m23=-(g+e)/(g-e);this.m33=1;this._dirty=!0;return this},GetDeterminant:function(){return this.m40*this.m21*this.m12*this.m03-this.m20*this.m31*this.m12*this.m03-this.m40*this.m11*this.m22*this.m03+this.m10*this.m31*this.m22*this.m03+this.m20*this.m11*this.m32*this.m03-this.m10*this.m21*this.m32*this.m03-this.m40*this.m21*this.m02*this.m13+this.m20*this.m31*this.m02*this.m13+this.m40*this.m01*
this.m22*this.m13-this.m00*this.m31*this.m22*this.m13-this.m20*this.m01*this.m32*this.m13+this.m00*this.m21*this.m32*this.m13+this.m40*this.m11*this.m02*this.m23-this.m10*this.m31*this.m02*this.m23-this.m40*this.m01*this.m12*this.m23+this.m00*this.m31*this.m12*this.m23+this.m10*this.m01*this.m32*this.m23-this.m00*this.m11*this.m32*this.m23-this.m20*this.m11*this.m02*this.m33+this.m10*this.m21*this.m02*this.m33+this.m20*this.m01*this.m12*this.m33-this.m00*this.m21*this.m12*this.m33-this.m10*this.m01*
this.m22*this.m33+this.m00*this.m11*this.m22*this.m33},Inverse:function(){var a=this.GetDeterminant();if(0==a)throw new r("non-invertible matrix");a=1/a;var b=this.m03*this.m22*this.m31-this.m02*this.m23*this.m31-this.m03*this.m21*this.m32+this.m01*this.m23*this.m32+this.m02*this.m21*this.m33-this.m01*this.m22*this.m33,c=this.m02*this.m13*this.m31-this.m03*this.m12*this.m31+this.m03*this.m11*this.m32-this.m01*this.m13*this.m32-this.m02*this.m11*this.m33+this.m01*this.m12*this.m33,d=this.m03*this.m12*
this.m21-this.m02*this.m13*this.m21-this.m03*this.m11*this.m22+this.m01*this.m13*this.m22+this.m02*this.m11*this.m23-this.m01*this.m12*this.m23,e=this.m13*this.m22*this.m40-this.m12*this.m23*this.m40-this.m13*this.m20*this.m32+this.m10*this.m23*this.m32+this.m12*this.m20*this.m33-this.m10*this.m22*this.m33,g=this.m02*this.m23*this.m40-this.m03*this.m22*this.m40+this.m03*this.m20*this.m32-this.m00*this.m23*this.m32-this.m02*this.m20*this.m33+this.m00*this.m22*this.m33,f=this.m03*this.m12*this.m40-
this.m02*this.m13*this.m40-this.m03*this.m10*this.m32+this.m00*this.m13*this.m32+this.m02*this.m10*this.m33-this.m00*this.m12*this.m33,h=this.m02*this.m13*this.m20-this.m03*this.m12*this.m20+this.m03*this.m10*this.m22-this.m00*this.m13*this.m22-this.m02*this.m10*this.m23+this.m00*this.m12*this.m23,k=this.m11*this.m23*this.m40-this.m13*this.m21*this.m40+this.m13*this.m20*this.m31-this.m10*this.m23*this.m31-this.m11*this.m20*this.m33+this.m10*this.m21*this.m33,l=this.m03*this.m21*this.m40-this.m01*
this.m23*this.m40-this.m03*this.m20*this.m31+this.m00*this.m23*this.m31+this.m01*this.m20*this.m33-this.m00*this.m21*this.m33,m=this.m01*this.m13*this.m40-this.m03*this.m11*this.m40+this.m03*this.m10*this.m31-this.m00*this.m13*this.m31-this.m01*this.m10*this.m33+this.m00*this.m11*this.m33,p=this.m03*this.m11*this.m20-this.m01*this.m13*this.m20-this.m03*this.m10*this.m21+this.m00*this.m13*this.m21+this.m01*this.m10*this.m23-this.m00*this.m11*this.m23,n=this.m12*this.m21*this.m40-this.m11*this.m22*
this.m40-this.m12*this.m20*this.m31+this.m10*this.m22*this.m31+this.m11*this.m20*this.m32-this.m10*this.m21*this.m32,q=this.m01*this.m22*this.m40-this.m02*this.m21*this.m40+this.m02*this.m20*this.m31-this.m00*this.m22*this.m31-this.m01*this.m20*this.m32+this.m00*this.m21*this.m32,t=this.m02*this.m11*this.m40-this.m01*this.m12*this.m40-this.m02*this.m10*this.m31+this.m00*this.m12*this.m31+this.m01*this.m10*this.m32-this.m00*this.m11*this.m32,u=this.m01*this.m12*this.m20-this.m02*this.m11*this.m20+
this.m02*this.m10*this.m21-this.m00*this.m12*this.m21-this.m01*this.m10*this.m22+this.m00*this.m11*this.m22;this.m00=(this.m12*this.m23*this.m31-this.m13*this.m22*this.m31+this.m13*this.m21*this.m32-this.m11*this.m23*this.m32-this.m12*this.m21*this.m33+this.m11*this.m22*this.m33)*a;this.m01=b*a;this.m02=c*a;this.m03=d*a;this.m10=e*a;this.m11=g*a;this.m12=f*a;this.m13=h*a;this.m20=k*a;this.m21=l*a;this.m22=m*a;this.m23=p*a;this.m40=n*a;this.m31=q*a;this.m32=t*a;this.m33=u*a;this._dirty=!0;return this},
LookAt:function(a,b,c){null==b&&(b=l._pool.Get(),b.x=0,b.y=0,b.z=0);null==c&&(c=l._pool.Get(),c.x=0,c.y=1,c.z=0);var d=l._pool.Get(),e=l._pool.Get(),g=l._pool.Get(),f=l._pool.Get();null!=b&&b!=d&&(d.x=b.x,d.y=b.y,d.z=b.z);d.x-=a.x;d.y-=a.y;d.z-=a.z;null!=d&&d!=f&&(f.x=d.x,f.y=d.y,f.z=d.z);f.Normalize();null!=d&&d!=e&&(e.x=d.x,e.y=d.y,e.z=d.z);e.Normalize();e.Cross(c).Normalize();null!=e&&e!=g&&(g.x=e.x,g.y=e.y,g.z=e.z);g.Cross(f).Normalize();this.m00=1;this.m01=this.m40=this.m20=this.m10=0;this.m11=
1;this.m12=this.m02=this.m31=this.m21=0;this.m22=1;this.m23=this.m13=this.m03=this.m32=0;this.m33=1;this._dirty=!0;this.m00=e.x;this.m01=e.y;this.m02=e.z;this.m10=g.x;this.m11=g.y;this.m12=g.z;this.m20=-f.x;this.m21=-f.y;this.m22=-f.z;null!=a&&a!=d&&(d.x=a.x,d.y=a.y,d.z=a.z);d.x*=-1;d.y*=-1;d.z*=-1;1E-6>A.FloatToAbs(d.x)&&1E-6>A.FloatToAbs(d.y)&&1E-6>A.FloatToAbs(d.z)||(a=na._pool.Get(),a.m00=1,a.m10=0,a.m20=0,a.m40=0,a.m01=0,a.m11=1,a.m21=0,a.m31=0,a.m02=0,a.m12=0,a.m22=1,a.m32=0,a.m03=0,a.m13=0,
a.m23=0,a.m33=1,a._dirty=!0,a.m03=d.x,a.m13=d.y,a.m23=d.z,a._dirty=!0,this.Append(a));return this},MultiplyPoint:function(a,b){null==b&&(b=!1);var c=a.x,d=a.y,e=a.z,g=1;b&&(g=1/(c*this.m40+d*this.m31+e*this.m32+this.m33));b=(c*this.m10+d*this.m11+e*this.m12+this.m13)*g;var f=(c*this.m20+d*this.m21+e*this.m22+this.m23)*g;a.x=(c*this.m00+d*this.m01+e*this.m02+this.m03)*g;a.y=b;a.z=f;return a},MultiplyVector:function(a){var b=null;null==b&&(b=fa.get_temp());return b.SetFromAxes(this.m00,this.m01,this.m02,
this.m10,this.m11,this.m12,this.m20,this.m21,this.m22).MultiplyVector(a,!0)},MultiplyFrustum:function(a){if(null==a)return null;var b=this.m00,c=this.m10,d=this.m20,e=this.m40,g=this.m01,f=this.m11,h=this.m21,k=this.m31,l=this.m02,m=this.m12,p=this.m22,n=this.m32,q=this.m03,t=this.m13,u=this.m23,r=this.m33;a.planes[0].Set(e+d,k+h,n+p,r+u);a.planes[1].Set(e-d,k-h,n-p,r-u);a.planes[2].Set(e+b,k+g,n+l,r+q);a.planes[3].Set(e-b,k-g,n-l,r-q);a.planes[4].Set(e-c,k-f,n-m,r-t);a.planes[5].Set(e+c,k+f,n+m,
r+t);return a},__class__:na};var U=function(){K.call(this);this.id=U._id++;this.visible=!1;this.layer=0;this.timeScale=1;this.childCount=0;this.world=this.parent=null;this.position=new l(0,0,0);this.rotation=new fa;this.scale=new l(1,1,1);this.__p=new l(0,0,0);this.__r=new fa;this.__s=new l(1,1,1);this.updateTime=0;this._updateTime=-1;this._needUpdate=!1;this.localToWorld=new na;this._componentDirty=!1;this._enabled=!0;this.deltaTime=0;this.worldToLocalHandler=k(this,this.get_worldToLocal)};f["lovedna.play.Actor"]=
U;U.__name__=["lovedna","play","Actor"];U.__super__=V;U.prototype=p(V.prototype,{TransformTo:function(a){if(null!=a){var b=U._transformMat;a=a.get_worldToLocal();null!=a&&(b.m00=a.m00,b.m10=a.m10,b.m20=a.m20,b.m40=a.m40,b.m01=a.m01,b.m11=a.m11,b.m21=a.m21,b.m31=a.m31,b.m02=a.m02,b.m12=a.m12,b.m22=a.m22,b.m32=a.m32,b.m03=a.m03,b.m13=a.m13,b.m23=a.m23,b.m33=a.m33,b._dirty=!0);U._transformMat.Append(this.localToWorld);b=this.position;a=U._transformMat;var c=null;null==c&&(c=l._pool.Get());c.x=a.m03;
c.y=a.m13;c.z=a.m23;a=c;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);b=this.rotation;a=U._transformMat;c=null;null==c&&(c=fa.get_temp());a=c.SetFromAxes(a.m00,a.m01,a.m02,a.m10,a.m11,a.m12,a.m20,a.m21,a.m22);null!=a&&(b.x=a.x,b.y=a.y,b.z=a.z,b.w=a.w);b=this.scale;var d=U._transformMat;a=null;null==a&&(a=l._pool.Get());c=1E-6>A.FloatToAbs(d.m01)&&1E-6>A.FloatToAbs(d.m02)?A.FloatToAbs(d.m00):Math.sqrt(d.m00*d.m00+d.m01*d.m01+d.m02*d.m02);var e=1E-6>A.FloatToAbs(d.m10)&&1E-6>A.FloatToAbs(d.m12)?A.FloatToAbs(d.m11):
Math.sqrt(d.m10*d.m10+d.m11*d.m11+d.m12*d.m12);d=1E-6>A.FloatToAbs(d.m20)&&1E-6>A.FloatToAbs(d.m21)?A.FloatToAbs(d.m22):Math.sqrt(d.m20*d.m20+d.m21*d.m21+d.m22*d.m22);a.x=c;a.y=e;a.z=d;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z)}},AddChildAt:function(a,b,c){null==c&&(c=!1);null==a||a==this||a.HasChild(this)||(null!=a.parent&&a.parent!=this&&a.parent.RemoveChild(a),c&&a.TransformTo(this),null==this._childs&&(this._childs=new z),a.parent==this&&this._childs.Remove(a),0>b||b>=this.childCount?this._childs.Add(a):
this._childs.Insert(b,a),a.parent=this,this.childCount=this._childs._length,null!=this.world&&(this.world.data._rebuildActorList=!0))},RemoveSelf:function(){null!=this.parent&&this.parent.RemoveChild(this)},RemoveChild:function(a){null!=a&&a!=this&&a.parent==this&&-1!=this._childs.Remove(a)&&(this.childCount=this._childs._length,null!=this.world&&(this.world.data._rebuildActorList=!0))},HasChild:function(a){if(null==a||a==this||null==a.parent)return!1;a=a.parent;for(var b=200;null!=a;){if(a==this)return!0;
var c=a.parent;if(c==a)break;a=c;--b;if(1>b)break}return!1},AddComponent:function(a){if(null!=this._components)for(var b=this._components._length;0<b--;){var c=this._components.Get(b);if(I.__instanceof(c,a)&&null==Ab.Get(a).GetClassMeta("AllowMulti",!0))return Y.trace("error",{fileName:"Actor.hx",lineNumber:230,className:"lovedna.play.Actor",methodName:"AddComponent",customParams:["can not add same  type component "+wb.GetName(a)]}),c}null==this._components&&(this._components=new z);a=wb.CreateInstance(a);
if(null==a)return null;if(null!=a.actor)throw new r("has init");a.actor=this;a.__inited=!1;a.onAwake();this._components.Add(a);this._componentDirty=!0;return a},GetComponent:function(a){if(null==this._components)return null;for(var b=this._components._length;0<b--;){var c=this._components.Get(b);if(I.__instanceof(c,a))return c}return null},_setVisible:function(a){a!=this.visible&&(this.visible=a,this.DispatchEvent(t.onCameraCull))},_visit:function(a){a.Add(this);if(!(1>this.childCount))for(var b=
0,c=this.childCount;b<c;){var d=b++;d=0>d?null:this._childs.Get(d);null!=d&&d._enabled&&d._visit(a)}},_onUpdate:function(){if(this._enabled&&0!=this.deltaTime){if(this.updateTime!=this._updateTime)var a=!0;else if(this.parent._needUpdate)a=!0;else{a=this.__p;var b=this.position;a.x!=b.x||a.y!=b.y||a.z!=b.z?a=!0:(a=this.__r,b=this.rotation,a.x!=b.x||a.y!=b.y||a.z!=b.z||a.w!=b.w?a=!0:(a=this.__s,b=this.scale,a=a.x!=b.x||a.y!=b.y||a.z!=b.z?!0:!1))}if(this._needUpdate=a){this.DispatchEvent(t.onPreTransform);
a=this.localToWorld;b=this.parent.localToWorld;null!=b&&(a.m00=b.m00,a.m10=b.m10,a.m20=b.m20,a.m40=b.m40,a.m01=b.m01,a.m11=b.m11,a.m21=b.m21,a.m31=b.m31,a.m02=b.m02,a.m12=b.m12,a.m22=b.m22,a.m32=b.m32,a.m03=b.m03,a.m13=b.m13,a.m23=b.m23,a.m33=b.m33,a._dirty=!0);a=this.localToWorld;b=this.position;var c=this.rotation,d=this.scale;if(null!=b&&!(1E-6>A.FloatToAbs(b.x)&&1E-6>A.FloatToAbs(b.y)&&1E-6>A.FloatToAbs(b.z))){var e=na._pool.Get();e.m00=1;e.m10=0;e.m20=0;e.m40=0;e.m01=0;e.m11=1;e.m21=0;e.m31=
0;e.m02=0;e.m12=0;e.m22=1;e.m32=0;e.m03=0;e.m13=0;e.m23=0;e.m33=1;e._dirty=!0;e.m03=b.x;e.m13=b.y;e.m23=b.z;e._dirty=!0;a.Append(e)}null!=c&&a.AppendRotation(c);null!=d&&a.AppendScale(d);a=this.__p;b=this.position;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);a=this.__r;b=this.rotation;null!=b&&(a.x=b.x,a.y=b.y,a.z=b.z,a.w=b.w);a=this.__s;b=this.scale;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);this._up=this._right=this._forward=this._worldScale=this._worldRotation=this._worldPosition=this._worldToLocalMatrix=
null;this.DispatchEvent(t.onTransform);this._updateTime=this.updateTime+=1E-5}this.DispatchEvent(t.onCollect);if(this._componentDirty)for(this._componentDirty=!1,a=this._components._length;0<a--;)if(b=this._components.Get(a),b.__destroyed){if(b.actor==this){b.onDisable();b.onDestroy();if(null!=b.actor)for(c=b.__calbacks.keys();c.hasNext();)d=c.next(),e=b.__calbacks,b.actor.RemoveEventListener(d,null!=h[d]?e.getReserved(d):e.h[d]),b.__calbacks.remove(d);b.actor=null}this._components.RemoveAt(a)}else b.__inited||
(null==b._builtinCallback&&(b._builtinCallback=new y,c=b._builtinCallback,d=t.onEnable._type,e=k(b,b.onEnable),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onDisable._type,e=k(b,b.onDisable),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onFixedInput._type,e=k(b,b.onFixedInput),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onInput._type,e=k(b,b.onInput),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onInputFinish._type,e=k(b,b.onInputFinish),
null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onTransform._type,e=k(b,b.onTransform),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onOutput._type,e=k(b,b.onOutput),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onCollect._type,e=k(b,b.onCollect),null!=h[d]?c.setReserved(d,e):c.h[d]=e,c=b._builtinCallback,d=t.onRender._type,e=k(b,b.onRender),null!=h[d]?c.setReserved(d,e):c.h[d]=e),b.__inited=!0,b.onEnable(),b.onStart(),b.refreshEvent())}},get_worldToLocal:function(){null==
this.__worldToLocalMatrix&&(this.__worldToLocalMatrix=new na);if(null==this._worldToLocalMatrix){var a=this._worldToLocalMatrix=this.__worldToLocalMatrix,b=this.localToWorld;null!=b&&(a.m00=b.m00,a.m10=b.m10,a.m20=b.m20,a.m40=b.m40,a.m01=b.m01,a.m11=b.m11,a.m21=b.m21,a.m31=b.m31,a.m02=b.m02,a.m12=b.m12,a.m22=b.m22,a.m32=b.m32,a.m03=b.m03,a.m13=b.m13,a.m23=b.m23,a.m33=b.m33,a._dirty=!0);this._worldToLocalMatrix.Inverse()}return this._worldToLocalMatrix},get_worldPosition:function(){null==this.__worldPosition&&
(this.__worldPosition=new l);if(null==this._worldPosition){this._worldPosition=this.__worldPosition;var a=this.localToWorld,b=this.__worldPosition;null==b&&(b=l._pool.Get());b.x=a.m03;b.y=a.m13;b.z=a.m23}return this._worldPosition},get_worldRotation:function(){null==this.__worldRotation&&(this.__worldRotation=new fa);if(null==this._worldRotation){this._worldRotation=this.__worldRotation;var a=this.localToWorld,b=this._worldRotation;null==b&&(b=fa.get_temp());b.SetFromAxes(a.m00,a.m01,a.m02,a.m10,
a.m11,a.m12,a.m20,a.m21,a.m22)}return this._worldRotation},__class__:U,__properties__:{get_worldRotation:"get_worldRotation",get_worldPosition:"get_worldPosition",get_worldToLocal:"get_worldToLocal"}});var Da=function(){U.call(this);this._protectTime=0;this.AddEventListener(Hb.onHit._type,k(this,this.onColliderHit));this.speed=0;this._lookr=new l;this._lookadd=new fa;this._lookm=new l;this._lookaddr=new l};f["lovedna.game.Car"]=Da;Da.__name__=["lovedna","game","Car"];Da.__super__=U;Da.prototype=p(U.prototype,
{Load:function(a){this.url=a;null==this._transform&&(this._transform=new na,this._transform.AppendScale(new l(.2,.2,.2)),this._transform.AppendRotation((new fa).SetEulerAngles(0,180,0)));this._g3d=this.GetComponent(Cc);null==this._g3d&&(this._g3d=this.AddComponent(Cc));this._g3d.set_src(N.g3d.Get(a));this._g3d.src.transform=this._transform;this.g3dInit()},Hit:function(a){null==a&&(a=1);0>.001*(new Date).getTime()*w.scale+w._timeOffset-this._protectTime||(0>=a&&(a=1),this.hp-=a,this._protectTime=.001*
(new Date).getTime()*w.scale+w._timeOffset+1,this.onHpChange())},onInput:function(){if(0>=this.hp){var a=this.deltaTime*this.speed;this._lookadd.SetEulerAngles(a*this._lookaddr.x,a*this._lookaddr.y,a*this._lookaddr.z);this.rotation.MultiplyQuaternion(this._lookadd);a=this._lookr;var b=this._lookm;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.deltaTime*this.speed;a.x*=b;a.y*=b;a.z*=b;a=this.position;b=this._lookr;a.x+=b.x;a.y+=b.y;a.z+=b.z;this.position.y-=8*this.deltaTime;a=D.sceneData.TestPlane(this._collider);
null!=a&&(b=this.position,b.x-=a.x,b.y-=a.y,b.z-=a.z);0>=this.speed&&(this.RemoveSelf(),this.onRemove());this.speed-=30*this.deltaTime;0>this.speed&&(this.speed=0)}else this.onUpdate()},g3dInit:function(){null==this._collider&&(this._collider=this.AddComponent(Vc));this._g3d.RemoveEventListener(C.INIT._type,k(this,this.g3dInit));this.AddEventListener(t.onInput._type,k(this,this.onInput));this.onSetup();if(null==this.GetComponent(ua)){if(null==this.errorMesh){var a=new de;a.width=4;a.height=4;a.depth=
7;this.errorMesh=(new Ta).FromGeom(a.Build())}this.AddComponent(ua).set_mesh(this.errorMesh)}this._collider.FromBounds(this.GetComponent(ua).mesh.buffer.get_bounds())},onSetup:function(){this.hp=10},onHpChange:function(){if(0>=this.hp)this.onDie()},onDie:function(){this._collider.enabled=!1;var a=this._lookm;null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize());var b=l._pool.Get(),c=this._forward;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=
c.z);null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);this._lookm.y=0;this._lookm.Normalize();this._lookaddr.x=10*Math.random()+15;this._lookaddr.y=0;this._lookaddr.z=0;this._collider.enabled=!1},onRemove:function(){},onColliderHit:function(){this.onHitCar(Hb.onHit.collider.actor)},onUpdate:function(){},onHitCar:function(a){},__class__:Da});var Hb=function(a){ma.call(this,a)};f["lovedna.game.CarHitEvent"]=Hb;Hb.__name__=["lovedna","game","CarHitEvent"];Hb.__super__=ma;Hb.prototype=p(ma.prototype,{__class__:Hb});
var ee=function(){K.call(this)};f["lovedna.game.ColliderManager"]=ee;ee.__name__=["lovedna","game","ColliderManager"];ee.__super__=G;ee.prototype=p(G.prototype,{onStart:function(){G.prototype.onStart.call(this);this._list=new z;this._plist=new z;this._gjk2d=new jc;this._hit=!1;this._v1=new F;this._v2=new F;this.addEvent(t.onInput)},onInput:function(){this._list.Clear();for(var a=this.actor.world.data.colliders,b=a.count;0<b--;){var c=a._list.Get(b);I.__instanceof(c,Vc)&&(c.forceUpdate(),this.addBox(c))}for(b=
this._plist._length;0<b--;)a=this._plist.Get(b),null!=a&&a.Clear()},addBox:function(a){this._list.Add(a);var b=this._list._length;if(1<b)for(var c=b-1;0<c--;){var d=this._list.Get(c);if(this.testHit1(a,d)&&(this.createpoly(c),this.createpoly(b-1),this.testHit2(c,b-1))){var e=this._gjk2d.Intersect();if(null!=e){var g=this._v1;g.x=e.x;g.y=e.y;e=g;e.x*=.5;e.y*=.5;e=this._v2;g=this._v1;e.x=g.x;e.y=g.y;e.x=-e.x;e.y=-e.y}else e=this._v1,e.x=0,e.y=0,e=this._v2,e.x=0,e.y=0;e=Hb.onHit;e.collider=d;e.distance=
this._v1;a.actor.DispatchEvent(e);e.collider=a;e.distance=this._v2;d.actor.DispatchEvent(e)}}},createpoly:function(a){var b=this._plist.Get(a);if(null!=b){if(b.enabled)return}else b=new fe,this._plist.Set(a,b);a=this._list.Get(a);for(var c=0;4>c;){var d=c++,e=F.get_temp();d=a._box.GetPoint(d);e.x=d.x;e.y=d.z;b.Add(e)}},testHit1:function(a,b){return a._box.IntersectsBox(b._box)?!0:!1},testHit2:function(a,b){a=this._plist.Get(a);b=this._plist.Get(b);return this._gjk2d.Test(a,b)},__class__:ee});var Jf=
function(){this._lowScore=this._heightScore=this._aveScore=this._lastScore=-1;this._lowCount=this._heightCount=this._subCount=this._addCount=this._count=0;this.color=new wa};f["lovedna.game.ComputeScore"]=Jf;Jf.__name__=["lovedna","game","ComputeScore"];Jf.prototype={Update:function(a){this._currentScore=a;this._count++;0>this._aveScore?this._lowScore=this._heightScore=this._aveScore=a:this._aveScore=.5*(this._aveScore+a);this._currentScore>this._aveScore&&this._heightCount++;this._currentScore<this._aveScore&&
this._lowCount++;-1!=this._lastScore&&(this._currentScore>this._lastScore&&this._addCount++,this._currentScore<this._lastScore&&this._subCount++);this.process();this._currentScore>this._heightScore&&(this._heightScore=this._currentScore);this._currentScore<this._lowScore&&(this._lowScore=this._currentScore);this._lastScore=this._currentScore},GetTitle:function(){return this._title},GetAdvice:function(){return this._advice},process:function(){this.color.FromRGBInt(16777215);this._title="\u672c\u6b21\u5f97\u5206"+
this._currentScore;this._advice="\u70b9\u51fb\u91cd\u65b0\u5f00\u59cb";if(3>this._count)6>this._currentScore?(this.color.FromRGBInt(16711680),this._title="\u8981\u5b66\u4f1a\u8ba9\u8f66\u8f6c\u5f2f\u554a",this._advice="\u63a7\u5236\u597d\u6f02\u79fb\u8ddd\u79bb"):(this._title="\u8fd8\u4e0d\u9519\u5566",40<this._currentScore?(this.color.FromRGBInt(255),this._title="\u5927\u4f6c",this._advice="\u4f60\u6765\u7838\u573a\u5b50\u5427"):20<this._currentScore?(this.color.FromRGBInt(255),this._title="\u8d70\u4f4d\u98ce\u9a9a",
this._advice="\u6f02\u79fb\u5e05\u6c14"):15<this._currentScore?(this.color.FromRGBInt(255),this._title="\u9ad8\u624b",this._advice="\u6211\u770b\u597d\u4f60\u54df"):10<this._currentScore&&(this._advice="\u591a\u7ec3\u4e60\u4e0b\u5c31\u4f1a\u6210\u4e3a\u9ad8\u624b"));else if(this._currentScore>this._heightScore)this.color.FromRGBInt(65280),20<=this._currentScore?(this._title="\u5165\u95e8\u4e86",this._advice="\u5df2\u7a81\u7834"+this._currentScore+"\u5206"):30<=this._currentScore?(this._title="\u8fdb\u9636\u4e86",
this._advice="\u5df2\u7a81\u7834"+this._currentScore+"\u5206"):40<=this._currentScore?(this._title="\u4e3b\u5bb0\u4e86",this._advice="\u5df2\u7a81\u7834"+this._currentScore+"\u5206"):50<=this._currentScore?(this._title="\u8d85\u795e\u4e86",this._advice="\u5df2\u7a81\u7834"+this._currentScore+"\u5206"):60<=this._currentScore?(this._title="\u5565\u4e5f\u4e0d\u8bf4\u4e86",this._advice="\u6f02\u79fb\u9ad8\u624b\u6211\u53ea\u670d\u4f60"):(this._title="\u8d85\u8d8a\u81ea\u6211",this._advice="\u6bd4\u4e0a\u6b21\u591a"+
(this._currentScore-this._heightScore)+"\u5206");else if(!(10>this._heightScore))if(10<Math.abs(this._currentScore-this._lastScore))this.color.FromRGBInt(16711680),this._title="\u5224\u82e5\u4e24\u4eba",this._advice="\u7a33\u5b9a\u4e00\u4e0b\u72b6\u6001";else{var a=this._heightCount-this._lowCount;0<a?(this.color.FromRGBInt(16711935),0<this._addCount-this._subCount?(this._title="\u770b\u5f97\u89c1\u7684\u6210\u957f",this._advice="\u4fdd\u6301\u8fd9\u4e2a\u72b6\u6001"):(this._title="\u5b9e\u529b\u4e0d\u7a33\u5b9a",
this._advice="\u5fc3\u6001\u66f4\u96be\u63a7\u5236\u554a")):0>a&&(0<this._addCount-this._subCount?(this._title="\u5c31\u662f\u8fd9\u6837",this._advice="\u52a0\u6cb9"):(this._title="\u4e0d\u884c\u554a",this._advice="\u8d8a\u6765\u8d8a\u96be\u64cd\u63a7\u4e86"))}},__class__:Jf};var Wc=function(){Da.call(this);this._vspeed=this._lostControlTime=0;this._targetRotation=new fa;this.speed=0;this._moveDir=new l;this._time=0;this._speedAdd=25;this._rspeed=Math.random()+2;this._maxSpeed=D.sceneData.playerSpeed+
6;this._ro=this._findTime=0};f["lovedna.game.Cop"]=Wc;Wc.__name__=["lovedna","game","Cop"];Wc.__super__=Da;Wc.prototype=p(Da.prototype,{GetDistance:function(){return null==this._target?1E5:this.position.DistanceToSquared(this._target.position)},onSetup:function(){Da.prototype.onSetup.call(this);this._collider.enabled=!0;null==this._target&&(this._target=D.sceneData.player);this.hp=3},onDie:function(){Da.prototype.onDie.call(this);D.sceneData.AddScore();this._target=null},onRemove:function(){Da.prototype.onRemove.call(this);
D.sceneData.cops.Remove(this)},onHitCar:function(a){Da.prototype.onHitCar.call(this,a);if(!(0>=this.hp)){var b=Hb.onHit;this.position.x+=b.distance.x;this.position.z+=b.distance.y;this._rspeed=Math.random()+2;if(0>=this._time&&(a=b.collider.actor,null!=a)){if(a.speed>this.speed){this._lostControlTime=.4*Math.random()+.4;var c=this._targetRotation,d=a.rotation;null!=d&&(c.x=d.x,c.y=d.y,c.z=d.z,c.w=d.w);c=a.rotation.Distance(this.rotation);this._targetRotation.SlerpTo(this.rotation,.5*c);c=this.rotation;
d=this._targetRotation;null!=d&&(c.x=d.x,c.y=d.y,c.z=d.z,c.w=d.w)}I.__instanceof(a,Wc)?(null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize()),b=l._pool.Get(),c=this._forward,null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z),null==a._forward&&(a._forward=new l(0,0,1),a.get_worldRotation().MultiplyVector(a._forward,!0).Normalize()),c=l._pool.Get(),d=a._forward,null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z),b=b.x*c.x+b.y*c.y+b.z*c.z,0>b?this.Hit(20):
this.GetDistance()>a.GetDistance()&&(this._time=2*Math.random()+.5,this._vspeed=20,.9>b&&0<b&&this.Hit(1))):I.__instanceof(b.collider.actor,Xc)&&(a=b.collider.actor,this._vspeed=20,this._time=.5,null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize()),b=l._pool.Get(),c=this._forward,null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z),null==a._forward&&(a._forward=new l(0,0,1),a.get_worldRotation().MultiplyVector(a._forward,!0).Normalize()),c=l._pool.Get(),
d=a._forward,null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z),0>b.x*c.x+b.y*c.y+b.z*c.z?(a.Hit(2),this.Hit(20)):a.Hit(1),0>=a.hp&&(D.sceneData.alive=!1))}}},onUpdate:function(){Da.prototype.onUpdate.call(this);if(null!=this._target&&D.sceneData.alive){if(0>=this._lostControlTime){var a=this._moveDir,b=this._target.position,c=this.position;null==c?(a.x-=b.x,a.y-=b.y,a.z-=b.z):(a.x=b.x-c.x,a.y=b.y-c.y,a.z=b.z-c.z);a.Normalize();this._targetRotation.SetLookAt(this._moveDir)}else this._lostControlTime-=this.deltaTime;
this.rotation.SlerpTo(this._targetRotation,this.deltaTime*this._rspeed);a=this.position;null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize());b=l._pool.Get();c=this._forward;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);c=this.deltaTime*this.speed;b.x*=c;b.y*=c;b.z*=c;a.x+=b.x;a.y+=b.y;a.z+=b.z;0<this._time?(this._time-=this.deltaTime,this.speed-=this.deltaTime*this._vspeed,10>this.speed&&(this.speed=10)):this.speed<this._maxSpeed&&0>=this._time&&
(this.speed+=this.deltaTime*this._speedAdd,this.speed>this._maxSpeed&&(this.speed=this._maxSpeed))}},__class__:Wc});var ge=function(){U.call(this);this._score=new Jf;this._car=new Da;var a=new U;a.AddChildAt(this._car,-1,!1);this.AddChildAt(a,-1,!1);var b=a.scale;b.x*=2.5;b.y*=2.5;b.z*=2.5;this._label=new U;b=this._label.scale;b.x*=.04;b.y*=.04;b.z*=.04;a.AddChildAt(this._label,-1,!1);a=new Dc;a.width=200;a.height=200;a.customColor=new wa(0,0,0,.5);b=this._label.AddComponent(ua);b.set_mesh((new Ta).FromGeom(a.Build()));
b.material.state.cullMode=-1;b.material.renderQueue=4E4;b.material.state.depthTest=!1;b=new U;this._label.AddChildAt(b,-1,!1);this._txt=a=b.AddComponent(qb);b.position.x=.5*-this._txt.width;b.position.y=.5*this._txt.height;a.set_alignmentX(0);a.set_alignmentY(0);a.set_font(N.fnt.Get(D.assetData.fnt));b=b.AddComponent(ua);b.material.renderQueue=40001;b.material.state.depthTest=!1;b.material.state.cullMode=-1;b.set_mesh(a.mesh);b.material.SetTexture(a._font.texture)};f["lovedna.game.FinishShow"]=ge;
ge.__name__=["lovedna","game","FinishShow"];ge.__super__=U;ge.prototype=p(U.prototype,{Show:function(){this._car.Load(D.sceneData.player.url);var a=this.position,b=D.sceneData.player.position;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);this._r=0;this.AddEventListener(t.onInput._type,k(this,this.onInput));a=D.sceneData.GetScore();this._score.Update(a);a=this._score.GetTitle()+"\n"+this._score.GetAdvice();this._txt.colorBottom=this._score.color;this._txt.set_text(a);a=this._label.rotation;b=this.position;
var c=D.sceneData.camera.position,d=l._pool.Get();null==b?(d.x-=c.x,d.y-=c.y,d.z-=c.z):(d.x=c.x-b.x,d.y=c.y-b.y,d.z=c.z-b.z);a.SetLookAt(d.Normalize(),null)},onInput:function(){this._r+=30*this.deltaTime;this._car.rotation.SetEulerAngles(0,this._r,0);H.TouchDown()&&D.sceneData.Start()},__class__:ge});var he=function(){U.call(this);this._p1=new F;this._p2=new F;var a=this.AddComponent(ua);a.material.shader.UnDefine(m.LIGHT.name,!0);var b=new Yc;b.radius=2;b.customColor=null;a.set_mesh((new Ta).FromGeom(b.Build()));
this._r=0;a=this.position;a.x=0;a.y=0;a.z=-30;this.AddEventListener(t.onInput._type,k(this,this.onInput));a=this.position;a.x=-1E3;a.y=-10;a.z=0;this.get=!1;this._getTime=5};f["lovedna.game.Goal"]=he;he.__name__=["lovedna","game","Goal"];he.__super__=U;he.prototype=p(U.prototype,{Start:function(){var a=this.position;a.x=-1E3;a.y=-10;a.z=0;this.get=!1;this._getTime=5;this._life=30;this.show=!0},randomPosition:function(){var a=fa.get_temp().SetEulerAngles(0,360*Math.random(),0),b=l._pool.Get();b.x=
1;b.y=0;b.z=0;a.MultiplyVector(b,!0);a=this.position;var c=100*Math.random()+100;b.x*=c;b.y*=c;b.z*=c;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z)},onInput:function(){if(null==this._player)this._player=D.sceneData.player;else if(0<this._life&&(this._life-=this.deltaTime,0>=this._life&&(this.Start(),this._life=30)),0<this._getTime&&(this._getTime-=this.deltaTime,0>=this._getTime&&(this.get=!0,this.randomPosition())),this.get){this._r+=180*this.deltaTime;this.rotation.SetEulerAngles(0,this._r,0);var a=
this._player.position.Distance(this.position),b=Na.current.WorldToViewport(this.position),c=Na.current.WorldToViewport(this._player.position),d=this._p1;d.x=b.x;d.y=b.y;b=this._p2;b.x=c.x;b.y=c.y;c=this._p1;b=this._p2;c.x-=b.x;c.y-=b.y;this.angle=this._p1.get_angle();6>a&&(D.sceneData.AddScore(3),this.Start())}},__class__:he});var ie=function(){K.call(this)};f["lovedna.game.GoalArrow"]=ie;ie.__name__=["lovedna","game","GoalArrow"];ie.__super__=G;ie.prototype=p(G.prototype,{onStart:function(){G.prototype.onStart.call(this);
this.actor.rotation.SetEulerAngles(0,0,45);this._mr=this.actor.AddComponent(ua);this._f4=this._mr.material.GetUniform(m.UV_SET.name)._float4Value;this.addEvent(t.onInput);var a=N.sprite.Get(D.assetData.arrow);a.enabled?this.resinit():a.AddEventListener(C.INIT._type,k(this,this.resinit))},onInput:function(){G.prototype.onInput.call(this);D.sceneData.goal.get&&D.sceneData.goal.show?this.actor.rotation.SetEulerAngles(0,0,D.sceneData.goal.angle-90):this.actor.rotation.SetEulerAngles(180,0,0)},resinit:function(){var a=
N.sprite.Get(D.assetData.arrow);a.RemoveEventListener(C.INIT._type,k(this,this.resinit));this._mr.set_mesh(new Ta);var b=new Dc;b.width=a.data.frame.z;b.height=a.data.frame.w;this._mr.mesh.FromGeom(b.Build());this._mr.material.SetTexture(a.texture.texture)},__class__:ie});var je=function(){K.call(this)};f["lovedna.game.Heart"]=je;je.__name__=["lovedna","game","Heart"];je.__super__=G;je.prototype=p(G.prototype,{onStart:function(){G.prototype.onStart.call(this);this._time=.8},Show:function(){if(null==
this._txt){this._txt=this.actor.GetComponent(qb);this._mr=this.actor.GetComponent(ua);this._txt.set_alignmentX(0);this._txt.set_alignmentY(0);var a=this.actor.position;a.x=.5*-this._txt.width;a.y=.5*this._txt.height;a.z=0}a="";for(var b=D.sceneData.player.hp;0<b--;)a+="` ";this._txt.set_text(a);this._time=1;""!=a&&(this._mr.set_disabled(!1),this.addEvent(t.onInput),D.sceneData.goal.show=!1)},onInput:function(){G.prototype.onInput.call(this);this._time-=this.actor.deltaTime;0>this._time&&(this.removeEvent(t.onInput),
this._mr.set_disabled(!0),D.sceneData.goal.show=!0)},__class__:je});var nd=function(a){U.call(this);this._d=a;this._d.color.FromRGBInt(16711680);this.AddEventListener(t.onAdd._type,k(this,this.onaddHandler));ha.progress.AddEventListener(C.CHANGE._type,k(this,this.fileChangeHandler));N.fnt.Get(D.assetData.fnt);N.texture.Get(D.assetData.veh);N.texture.Get(D.assetData.grass);N.texture.Get(D.assetData.edge);N.texture.Get(D.assetData.arrow);null==this._transform&&(this._transform=new na,this._transform.AppendScale(new l(.2,
.2,.2)),this._transform.AppendRotation((new fa).SetEulerAngles(0,180,0)));N.g3d.Get(D.assetData.veh_ambulance).transform=this._transform;N.g3d.Get(D.assetData.veh_police).transform=this._transform};f["lovedna.game.Loading"]=nd;nd.__name__=["lovedna","game","Loading"];nd.__super__=U;nd.prototype=p(U.prototype,{fileChangeHandler:function(){var a=ha.progress.total,b=ha.progress.max;this._d.color.FromRGBInt(zc.instance.RandomInt(8947848,16777215));null!=D.uiData.scoreTxt&&D.uiData.scoreTxt.set_text("\u6b63\u5728\u52a0\u8f7d "+
(b-a)+"/"+b);0==a&&(ha.progress.RemoveEventListener(C.CHANGE._type,k(this,this.fileChangeHandler)),this._d.color.FromRGBInt(11259375),D.sceneData.Start())},onaddHandler:function(){this._d.color.FromRGBInt(65280);this.RemoveEventListener(t.onAdd._type,k(this,this.onaddHandler));this.start();var a=ha.progress.max;D.uiData.scoreTxt.set_text(a-ha.progress.total+"/"+a)},start:function(){this.world.AddChildAt(new ke,-1,!1);var a=new ec;this._d.AddWorld(a);var b=new U;a.AddChildAt(b,-1,!1);var c=b.position;
c.x=0;c.y=0;c.z=8;c=b.rotation;var d=b.position,e=new l,g=l._pool.Get();null==d?(g.x-=e.x,g.y-=e.y,g.z-=e.z):(g.x=e.x-d.x,g.y=e.y-d.y,g.z=e.z-d.z);c.SetLookAt(g.Normalize(),null);b=b.AddComponent(Na);b.layer=2;b.set_orthographic(!0);c=new U;a.AddChildAt(c,-1,!1);d=c.AddComponent(qb);D.uiData.scoreTxt=d;d.set_font(N.fnt.Get(D.assetData.fnt));d.set_text("hi");e=c.AddComponent(ua);e.set_mesh(d.mesh);e.material.SetTexture(d._font.texture);e.material.state.depthTest=!1;c.AddComponent(le).camera=b;D.uiData.scoreTxt.set_text("loading");
b=new U;c=b.position;c.x=0;c.y=80;c.z=0;a.AddChildAt(b,-1,!1);c=b.AddComponent(qb);c.set_alignmentX(0);c.set_font(N.fnt.Get(D.assetData.fnt));c.set_text("");d=b.AddComponent(ua);d.material.state.depthTest=!1;d.set_mesh(c.mesh);d.material.SetTexture(c._font.texture);D.sceneData.heart=b.AddComponent(je);b=new U;a.AddChildAt(b,-1,!1);b.AddComponent(ie)},__class__:nd});var Xc=function(){Da.call(this);this._lostControlTime=0;this._driftSpeed=20;this._camera=D.sceneData.camera;this._rotation=180;this._movedir=
new l(0,0,-1);this._drifting=!1;this._canDrift=!0;this._sdata=D.sceneData;this._dietime=new Pa(k(this,this.resume));this._maxSpeed=D.sceneData.playerSpeed};f["lovedna.game.Player"]=Xc;Xc.__name__=["lovedna","game","Player"];Xc.__super__=Da;Xc.prototype=p(Da.prototype,{Start:function(){this.hp=5;D.sceneData.heart.Show();this._rotation=180;this._movedir=new l(0,0,-1);var a=this.position;a.x=0;a.y=0;a.z=0;this.rotation.SetEulerAngles(0,180,0);null!=this._collider&&(this._collider.enabled=!0)},onUpdate:function(){Da.prototype.onUpdate.call(this);
this._sdata.Update(this.deltaTime);var a=0;H.HasKey(1073741904)&&--a;H.HasKey(1073741903)&&++a;var b=H.GetTouch(0);null!=b&&(a+=.5>b.position.x?-1:1);b=H.GetTouch(1);null!=b&&(a+=.5>b.position.x?-1:1);0>a&&(a=-1);0<a&&(a=1);0!=a?(this._rotation-=a*this.deltaTime*this.speed*4,this.rotation.SetEulerAngles(0,this._rotation,0)):this._canDrift=!0;0<this._lostControlTime&&(this._lostControlTime-=this.deltaTime);!this._drifting&&this._canDrift&&0>=this._lostControlTime&&this.speed>this._driftSpeed&&0!=a&&
(this._drifting=!0,this._lostControlTime=.1,this._canDrift=!1);if(this._drifting){a=1-(this.speed-this._driftSpeed)/this._maxSpeed;a*=10;1>a&&(a=1);b=this._movedir;null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize());var c=l._pool.Get(),d=this._forward;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);b.LerpTo(c,this.deltaTime*a).Normalize();a=D.sceneData.tail;b=this.position;null==this._right&&(this._right=new l(1,0,0),this.get_worldRotation().MultiplyVector(this._right,
!0).Normalize());c=l._pool.Get();d=this._right;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);a.Add(b,c);a=this._movedir;null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize());b=l._pool.Get();c=this._forward;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);.99<a.x*b.x+a.y*b.y+a.z*b.z&&0>=this._lostControlTime&&(this._drifting=!1,D.sceneData.tail.Reset());this.speed-=10*this.deltaTime}else this.speed<this._maxSpeed&&this._canDrift&&(this.speed+=20*
this.deltaTime,this.speed>this._maxSpeed&&(this.speed=this._maxSpeed)),a=this._movedir,null==this._forward&&(this._forward=new l(0,0,1),this.get_worldRotation().MultiplyVector(this._forward,!0).Normalize()),b=l._pool.Get(),c=this._forward,null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z),null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);a=this.position;b=this._movedir;c=this.deltaTime*this.speed;b.x*=c;b.y*=c;b.z*=c;a.x+=b.x;a.y+=b.y;a.z+=b.z;a=.5*D.sceneData.mapSize-2;this.position.x>a&&(this.position.x=a,this._rotation+=
0);this.position.x<-a&&(this.position.x=-a,this._rotation-=0);this.position.z<-a&&(this.position.z=-a,this._rotation-=0);this.position.z>a&&(this.position.z=a,this._rotation+=0)},onHitCar:function(a){Da.prototype.onHitCar.call(this,a);a=Hb.onHit;this.position.x+=a.distance.x;this.position.z+=a.distance.y},onSetup:function(){Da.prototype.onSetup.call(this);this.hp=5},onHpChange:function(){Da.prototype.onHpChange.call(this);D.sceneData.blur.Blur(.7);D.sceneData.heart.Show()},onDie:function(){Da.prototype.onDie.call(this);
D.sceneData.goal.show=!1;D.sceneData.stage.timeScale=.1;Pa.Add(this._dietime,1);D.sceneData.tail.Reset()},onRemove:function(){Da.prototype.onRemove.call(this);Y.trace("---restart",{fileName:"Player.hx",lineNumber:217,className:"lovedna.game.Player",methodName:"onRemove"});D.sceneData.Finish()},resume:function(){D.sceneData.stage.timeScale=1},__class__:Xc});var le=function(){K.call(this)};f["lovedna.game.Resize"]=le;le.__name__=["lovedna","game","Resize"];le.__super__=G;le.prototype=p(G.prototype,
{onStart:function(){G.prototype.onStart.call(this);this.camera.actor.AddEventListener(t.onCameraUpdate._type,k(this,this.onCameraUpdate))},onCameraUpdate:function(){var a=this.actor.position,b=this.camera.ViewportToWorldPoint(new l(-1,1,0));null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);Y.trace(this.actor.position,{fileName:"Resize.hx",lineNumber:43,className:"lovedna.game.Resize",methodName:"onCameraUpdate"})},__class__:le});var Kf=function(){this._score=0;K.call(this)};f["lovedna.game.SceneData"]=Kf;
Kf.__name__=["lovedna","game","SceneData"];Kf.__super__=K;Kf.prototype=p(K.prototype,{Start:function(){null!=this._finishShow&&this._finishShow.RemoveSelf();this.alive=!0;this.player.Start();this.stage.AddChildAt(this.player,-1,!1);for(var a=this.cops._length;0<a--;)this.cops.Get(a).RemoveSelf();this.cops.Clear();this._score=0;a=this.camera.position;var b=this.player.position;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);this.goal.Start();D.uiData.scoreTxt.set_text("\u5f53\u524d\u5f97\u5206:0")},Finish:function(){this.stage.AddChildAt(this._finishShow,
-1,!1);this._finishShow.Show()},AddScore:function(a){null==a&&(a=1);this._score+=a;D.uiData.scoreTxt.set_text("\u5f53\u524d\u5f97\u5206:"+this._score)},GetScore:function(){return this._score},TestPlane:function(a){this._testshape.Clear();a.forceUpdate();for(var b=8;0<b--;)this._testshape.Add(a._box.GetPoint(b));return this._gjk3d.Test(this._testshape,this.plane)?this._gjk3d.Intersect():null},Update:function(a){0==this._createCopTime&&4>this.cops._length&&(this._createCopTime=2);if(0<this._createCopTime&&
(this._createCopTime-=a,0>this._createCopTime)){this._createCopTime=0;Y.trace("create cops",{fileName:"SceneData.hx",lineNumber:118,className:"lovedna.game.SceneData",methodName:"Update"});a=new Wc;this.cops.Add(a);a.Load(D.assetData.veh_police);var b=this.player;null==b._forward&&(b._forward=new l(0,0,1),b.get_worldRotation().MultiplyVector(b._forward,!0).Normalize());var c=l._pool.Get();b=b._forward;null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);b=c;if(.6<Math.random()){c=.5<Math.random()?1:-1;var d=
this.player;null==d._right&&(d._right=new l(1,0,0),d.get_worldRotation().MultiplyVector(d._right,!0).Normalize());b=l._pool.Get();d=d._right;null!=d&&d!=b&&(b.x=d.x,b.y=d.y,b.z=d.z);b.x*=c;b.y*=c;b.z*=c}b.x*=150;b.y*=150;b.z*=150;c=a.position;d=this.player.position;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);c.x+=b.x;c.y+=b.y;c.z+=b.z;this.stage.AddChildAt(a,-1,!1)}},onConstruct:function(){K.prototype.onConstruct.call(this);this.cops=new z;this.cellSize=20;this.cellCount=100;this.mapSize=this.cellSize*
this.cellCount;this._gjk3d=new Lf;this._testshape=new Zc;this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;this._createCopTime=0;this.playerSpeed=60;this._finishShow=new ge},__class__:Kf});var ke=function(){U.call(this);this.AddComponent(ee);var a=new U;this.AddChildAt(a,-1,!1);var b=a.position;b.x=0;b.y=10;b.z=0;a.rotation.SetEulerAngles(0,0,0);a.AddComponent(Na);D.sceneData.blur=a.AddComponent(be);b=a.AddComponent(Bc);D.sceneData.camera=a;a=new U;this.AddChildAt(a,-1,!1);D.sceneData.stage=
a;var c=new U;D.sceneData.tail=c.AddComponent(me);this.AddChildAt(c,-1,!1);c=new U;this.AddChildAt(c,-1,!1);c.AddComponent(ne);c.rotation.SetEulerAngles(90,0,0);var d=new U,e=d.AddComponent(ua);e.material.state.cullMode=-1;var g=new Dc;g.transform=new na;g.transform.AppendRotation((new fa).SetEulerAngles(-90,0,0));c=D.sceneData.mapSize;g.width=c;g.height=c;e.set_mesh((new Ta).FromGeom(g.Build()));e.material.SetTexture(N.texture.Get("images/grass1.jpg").texture);e.material.renderQueue=1E4;e.material.GetUniform(m.UV_SET.name).SetFloat4(new ca(0,
0,30,30));a.AddChildAt(d,-1,!1);d=new Zc;d.FromArray([new l(-c,-20,-c),new l(c,-20,-c),new l(c,-20,c),new l(-c,-20,c),new l(-c,0,-c),new l(c,0,-c),new l(c,0,c),new l(-c,0,c)]);D.sceneData.plane=d;D.sceneData.alive=!0;c=new Xc;c.rotation.SetEulerAngles(0,180,0);c.Load(D.assetData.veh_ambulance);D.sceneData.player=c;b.Set(c);c=new Yc;c.transform=(new na).AppendRotation((new fa).SetEulerAngles(360*Math.random(),360*Math.random(),360*Math.random()));c.radius=.3;c.widthSegments=5;c.heightSegments=3;c.Build();
b=[];for(d=0;300>d;){d++;e=new Qc;b.push(e);e.transform=new na;g=e.transform;var f=new l(300*Math.random()-150,15+40*Math.random(),300*Math.random()-150);if(!(1E-6>A.FloatToAbs(f.x)&&1E-6>A.FloatToAbs(f.y)&&1E-6>A.FloatToAbs(f.z))){var h=na._pool.Get();h.m00=1;h.m10=0;h.m20=0;h.m40=0;h.m01=0;h.m11=1;h.m21=0;h.m31=0;h.m02=0;h.m12=0;h.m22=1;h.m32=0;h.m03=0;h.m13=0;h.m23=0;h.m33=1;h._dirty=!0;h.m03=f.x;h.m13=f.y;h.m23=f.z;h._dirty=!0;g.Append(h)}e.mesh=c}c=new ta;Qc.CombineMeshes(b,c);b=(new Ta).FromGeom(c);
for(c=0;5>c;)for(d=c++,e=0;5>e;)g=e++,f=new U,h=f.AddComponent(ua),h.material.shader.UnDefine(m.LIGHT.name,!0),h.set_mesh(b),this.AddChildAt(f,-1,!1),f=f.position,f.x=300*d-600,f.y=0,f.z=300*g-600;D.sceneData.goal=new he;a.AddChildAt(D.sceneData.goal,-1,!1)};f["lovedna.game.Start"]=ke;ke.__name__=["lovedna","game","Start"];ke.__super__=U;ke.prototype=p(U.prototype,{__class__:ke});var Mf=function(){this.point=new l;this.left=new l;this.right=new l};f["lovedna.game._Tail.TailPoint"]=Mf;Mf.__name__=
["lovedna","game","_Tail","TailPoint"];Mf.prototype={Set:function(a,b){var c=this.point;null!=a&&a!=c&&(c.x=a.x,c.y=a.y,c.z=a.z);c=l._pool.Get();null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);c.x*=3.5;c.y*=3.5;c.z*=3.5;var d=l._pool.Get();null!=a&&a!=d&&(d.x=a.x,d.y=a.y,d.z=a.z);d.x-=c.x;d.y-=c.y;d.z-=c.z;b=l._pool.Get();null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);b.x+=c.x;b.y+=c.y;b.z+=c.z;d.y=0;b.y=0;a=this.left;null!=d&&d!=a&&(a.x=d.x,a.y=d.y,a.z=d.z);a=this.right;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);
this.time=2},__class__:Mf};var me=function(){K.call(this)};f["lovedna.game.Tail"]=me;me.__name__=["lovedna","game","Tail"];me.__super__=G;me.prototype=p(G.prototype,{Reset:function(){null!=this._current&&(this._current=null,this._id--)},Add:function(a,b){if(!(null!=this._current&&8>this._current.point.DistanceToSquared(a))){var c=this._id;this._id++;this._id%=this._list._length;var d=this._list.Get(c,!0);d.Set(a,b);null!=this._current&&(a=4*c,b=this._geom.position.Get(a),c=this._current.left,null!=
c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z),b=this._geom.position.Get(a+1),c=this._current.right,null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z),b=this._geom.position.Get(a+2),c=d.left,null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z),a=this._geom.position.Get(a+3),b=d.right,null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z),this._geom.Dirty(1));this._current=d}},onAwake:function(){G.prototype.onAwake.call(this);this._id=0;this._list=new z;this._geom=new ta;this._geom.position=new z;this._geom.uv=new z;this._indexList=new z;for(var a=
0;300>a;){var b=a++;this._list.Add(new Mf);this._geom.position.Add(new l);this._geom.position.Add(new l);this._geom.position.Add(new l);this._geom.position.Add(new l);this._geom.uv.Add(new F(0,0));this._geom.uv.Add(new F(1,0));this._geom.uv.Add(new F(0,1));this._geom.uv.Add(new F(1,1));b*=4;this._indexList.Add(b);this._indexList.Add(b+2);this._indexList.Add(b+1);this._indexList.Add(b+1);this._indexList.Add(b+2);this._indexList.Add(b+3)}this._geom.AddGroup(this._indexList);this._geom.Dirty(-1)},onStart:function(){G.prototype.onStart.call(this);
this._mr=this.actor.AddComponent(ua);this._mr.set_mesh((new Ta).FromGeom(this._geom));this._mr.material.SetTexture(N.texture.Get(D.assetData.edge).texture);this._mr.material.renderQueue=10001;this._mr.material.state.depthTest=!1;this._mr.cameraCull=!1},onInput:function(){G.prototype.onInput.call(this)},__class__:me});var Nf=function(){K.call(this)};f["lovedna.game.UIData"]=Nf;Nf.__name__=["lovedna","game","UIData"];Nf.__super__=K;Nf.prototype=p(K.prototype,{__class__:Nf});var oe=function(){this._box=
new Pb};f["lovedna.geom.Bounds"]=oe;oe.__name__=["lovedna","geom","Bounds"];oe.prototype={GetBox:function(){return this._box},Reset:function(){this._box.Reset()},Copy:function(a){null!=a&&this._box.Copy(a._box);return this},Expand:function(a){this._box.ExpandByVertex(a)},Init:function(){},Apply:function(a){null==this.sphere&&(this.box=new Pb,this.sphere=new pe);this.box.Copy(this._box);this.box.ApplyMat4(a);a=this.sphere.GetCenter();var b=this.box.GetCenter();null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);
a=this.box.GetSize();this.sphere.radius=.5*Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z)},__class__:oe};var l=E.lovedna.Float3=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c};f["lovedna.math.Float3"]=l;l.__name__=["lovedna","math","Float3"];l.__interfaces__=[hc];l.prototype={ToFix:function(a){null==a&&(a=4);return"Float3("+A.FloatToFixed(this.x,a)+","+A.FloatToFixed(this.y,a)+","+A.FloatToFixed(this.z,a)+")"},Cross:function(a,b){if(null==b){var c=this.y*a.z-this.z*a.y;
var d=this.z*a.x-this.x*a.z;a=this.x*a.y-this.y*a.x}else c=a.y*b.z-a.z*b.y,d=a.z*b.x-a.x*b.z,a=a.x*b.y-a.y*b.x;this.x=c;this.y=d;this.z=a;return this},Normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0!=a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},Distance:function(a,b){return Math.sqrt(this.DistanceToSquared(a,b))},DistanceToSquared:function(a,b){null==b&&(b=a,a=this);var c=a.x-b.x,d=a.y-b.y;a=a.z-b.z;return c*c+d*d+a*a},FromArray:function(a,
b){null==b&&(b=0);if(null==a)return this;var c=a.length;b<c&&(this.x=a[b]);b+1<c&&(this.y=a[b+1]);b+2<c&&(this.z=a[b+2]);return this},FillArray:function(a,b){null==b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z},LerpTo:function(a,b){if(0>=b)return this;if(1<=b)return null!=a&&a!=this&&(this.x=a.x,this.y=a.y,this.z=a.z),this;this.x+=b*(a.x-this.x);this.y+=b*(a.y-this.y);this.z+=b*(a.z-this.z);return this},__class__:l};var Pb=function(){this._dirty=!1;this.Reset();this._center=new l;this._centerHelp=
new l;this._points=[];for(var a=0;8>a;)a++,this._points.push(new l)};f["lovedna.geom.Box3"]=Pb;Pb.__name__=["lovedna","geom","Box3"];Pb.prototype={GetPoint:function(a){return 8<a?this._points[a%8]:this._points[a]},Copy:function(a){if(a==this)return this;var b=this.min,c=a.min;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);b=this.max;c=a.max;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);b=this._center;a=a._center;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);this._dirty=!0;return this},Reset:function(){var a=new l;
a.x=1.79769313486231E308;a.y=1.79769313486231E308;a.z=1.79769313486231E308;this.min=a;a=new l;a.x=-1.79769313486231E308;a.y=-1.79769313486231E308;a.z=-1.79769313486231E308;this.max=a;return this},ExpandByVertex:function(a){var b=this.min,c=b.x,d=a.x,e=b.y,g=a.y,f=b.z,h=a.z;b.x=c<d?c:d;b.y=e<g?e:g;b.z=f<h?f:h;b=this.max;c=b.x;d=a.x;e=b.y;g=a.y;f=b.z;a=a.z;b.x=c>d?c:d;b.y=e>g?e:g;b.z=f>a?f:a;return this},IntersectsBox:function(a){var b=a.min;a=a.max;return this.min.x>a.x||this.max.x<b.x||this.min.y>
a.y||this.max.y<b.y||this.min.z>a.z||this.max.z<b.z?!1:!0},ApplyMat4:function(a){var b=Pb._f1,c=Pb._f2,d=this.min;null!=d&&d!=b&&(b.x=d.x,b.y=d.y,b.z=d.z);d=this.max;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);this.Reset();d=this._points[0];null!=b&&b!=d&&(d.x=b.x,d.y=b.y,d.z=b.z);this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[1];d.x=b.x;d.y=b.y;d.z=c.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[2];d.x=c.x;d.y=b.y;d.z=c.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[3];
d.x=c.x;d.y=b.y;d.z=b.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[4];d.x=b.x;d.y=c.y;d.z=b.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[5];d.x=b.x;d.y=c.y;d.z=c.z;this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[6];null!=c&&c!=d&&(d.x=c.x,d.y=c.y,d.z=c.z);this.ExpandByVertex(a.MultiplyPoint(d));d=this._points[7];d.x=c.x;d.y=c.y;d.z=b.z;this.ExpandByVertex(a.MultiplyPoint(d));a=this._center;b=this.min;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.max;a.x+=b.x;a.y+=
b.y;a.z+=b.z;a.x*=.5;a.y*=.5;a.z*=.5;return this},GetCenter:function(){return this._center},GetSize:function(){var a=l._pool.Get(),b=this.max,c=this.min;null==c?(a.x-=b.x,a.y-=b.y,a.z-=b.z):(a.x=b.x-c.x,a.y=b.y-c.y,a.z=b.z-c.z);return a},__class__:Pb};var Of=function(){this.planes=[];this.near=new Yb;this.far=new Yb;this.left=new Yb;this.right=new Yb;this.top=new Yb;this.bottom=new Yb;this.planes.push(this.near);this.planes.push(this.far);this.planes.push(this.left);this.planes.push(this.right);this.planes.push(this.top);
this.planes.push(this.bottom)};f["lovedna.geom.Frustum"]=Of;Of.__name__=["lovedna","geom","Frustum"];Of.prototype={ContainsPoint:function(a,b){null==b&&(b=0);for(var c=6;0<c--;)if(this.planes[c].DistanceToPoint(a)<-b)return!1;return!0},IntersectsBox:function(a){if(null==a)return!1;for(var b=l._pool.Get(),c=l._pool.Get(),d=6;0<d--;){var e=this.planes[d],g=e.normal.x,f=e.normal.y,h=e.normal.z;b.x=0<g?a.min.x:a.max.x;b.y=0<f?a.min.y:a.max.y;b.z=0<h?a.min.z:a.max.z;c.x=0<g?a.max.x:a.min.x;c.y=0<f?a.max.y:
a.min.y;c.z=0<h?a.max.z:a.min.z;if(0>e.DistanceToPoint(b)&&0>e.DistanceToPoint(c))return!1}return!0},__class__:Of};var Pf=function(a,b,c){this.distance=a;this.normal=b;this.index=c};f["lovedna.geom._GJK2D.Edge"]=Pf;Pf.__name__=["lovedna","geom","_GJK2D","Edge"];Pf.prototype={__class__:Pf};var Zb=f["lovedna.geom._GJK2D.PolygonWinding"]={__ename__:!0,__constructs__:["Clockwise","CounterClockwise"]};Zb.Clockwise=["Clockwise",0];Zb.Clockwise.toString=B;Zb.Clockwise.__enum__=Zb;Zb.CounterClockwise=["CounterClockwise",
1];Zb.CounterClockwise.toString=B;Zb.CounterClockwise.__enum__=Zb;var jc=function(){this.maxIterations=20;this._simplex=new z;this._direction=new F};f["lovedna.geom._GJK2D.GJK2"]=jc;jc.__name__=["lovedna","geom","_GJK2D","GJK2"];jc.prototype={Test:function(a,b){this._shape1=a;this._shape2=b;this._find=!1;this._simplex.Clear();a=Za.StillEvolving;for(this.cost=0;this.cost<this.maxIterations&&a==Za.StillEvolving;)a=this.evolveSimplex(),this.cost++;return this._find=a==Za.FoundIntersection},Intersect:function(){if(!this._find)return null;
var a=this._simplex.Get(0),b=this._simplex.Get(1),c=this._simplex.Get(2);b=0<=(b.x-a.x)*(b.y+a.y)+(c.x-b.x)*(c.y+b.y)+(a.x-c.x)*(a.y+c.y)?Zb.Clockwise:Zb.CounterClockwise;a=F.get_temp();for(c=0;10>c;){c++;var d=this.findClosestEdge(b),e=this.calculateSupport(d.normal),g=d.normal;g=e.x*g.x+e.y*g.y;var f=d.normal;a.x=f.x;a.y=f.y;a.x*=g;a.y*=g;if(1E-6>A.FloatToAbs(g-d.distance))break;else this._simplex.Insert(d.index,e)}b=F.get_temp();b.x=a.x;b.y=a.y;c=b.get_length();0!=c?(c=1/c,b.x*=c,b.y*=c):(b.x=
0,b.y=0);b.x*=1.52587890625E-5;b.y*=1.52587890625E-5;a.x+=b.x;a.y+=b.y;return a},calculateSupport:function(a){var b=jc._dir;b.x=a.x;b.y=a.y;a=this._shape1.GetFarthestPointInDirection(jc._dir);b=jc._dir;b.x=-b.x;b.y=-b.y;b=this._shape2.GetFarthestPointInDirection(b);a.x-=b.x;a.y-=b.y;return a},addSupport:function(a){var b=this.calculateSupport(a);this._simplex.Add(b);return 0<=a.x*b.x+a.y*b.y},tripleProduct:function(a,b,c){var d=l._pool.Get();d.x=a.x;d.y=a.y;d.z=0;a=l._pool.Get();a.x=b.x;a.y=b.y;a.z=
0;b=l._pool.Get();b.x=c.x;b.y=c.y;b.z=0;c=l._pool.Get().Cross(d,a);c=l._pool.Get().Cross(c,b);return new F(c.x,c.y)},evolveSimplex:function(){switch(this._simplex._length){case 0:var a=this._direction;a.x=1;a.y=0;break;case 1:a=this._direction;a.x*=-1;a.y*=-1;break;case 2:a=F.get_temp();var b=this._simplex.Get(1),c=this._simplex.Get(0);null==c?(a.x-=b.x,a.y-=b.y):(a.x=b.x-c.x,a.y=b.y-c.y);b=F.get_temp();c=this._simplex.Get(0);b.x=c.x;b.y=c.y;b.x*=-1;b.y*=-1;c=this._direction;a=this.tripleProduct(a,
b,a);c.x=a.x;c.y=a.y;break;case 3:a=F.get_temp();b=this._simplex.Get(2);a.x=b.x;a.y=b.y;a.x*=-1;a.y*=-1;b=F.get_temp();c=this._simplex.Get(1);var d=this._simplex.Get(2);null==d?(b.x-=c.x,b.y-=c.y):(b.x=c.x-d.x,b.y=c.y-d.y);c=F.get_temp();d=this._simplex.Get(0);var e=this._simplex.Get(2);null==e?(c.x-=d.x,c.y-=d.y):(c.x=d.x-e.x,c.y=d.y-e.y);d=this.tripleProduct(c,b,b);b=this.tripleProduct(b,c,c);if(0<d.x*a.x+d.y*a.y)this._simplex.RemoveAt(0),a=this._direction,a.x=d.x,a.y=d.y;else if(0<b.x*a.x+b.y*
a.y)this._simplex.RemoveAt(1),a=this._direction,a.x=b.x,a.y=b.y;else return Za.FoundIntersection;break;default:throw new r("Can't have simplex with "+this._simplex._length+" verts!");}return this.addSupport(this._direction)?Za.StillEvolving:Za.NoIntersection},findClosestEdge:function(a){for(var b=Infinity,c=F.get_temp(),d=0,e=F.get_temp(),g=this._simplex._length,f=0;f<g;){var h=f++,k=h+1;k>=g&&(k=0);var l=this._simplex.Get(k);e.x=l.x;e.y=l.y;l=this._simplex.Get(h);e.x-=l.x;e.y-=l.y;switch(a[1]){case 0:var m=
F.get_temp();l=-e.x;m.x=e.y;m.y=l;break;case 1:m=F.get_temp(),l=e.x,m.x=-e.y,m.y=l}l=m.get_length();0!=l?(l=1/l,m.x*=l,m.y*=l):(m.x=0,m.y=0);h=this._simplex.Get(h);h=m.x*h.x+m.y*h.y;h<b&&(b=h,c=m,d=k)}return new Pf(b,c,d)},__class__:jc};var $c=function(a,b){this.a=a;this.b=b};f["lovedna.geom._GJK3D.Edge"]=$c;$c.__name__=["lovedna","geom","_GJK3D","Edge"];$c.prototype={__class__:$c};var Lf=function(){this._simplex=new z;this._dir=new l;this._hit=!1};f["lovedna.geom.GJK3D"]=Lf;Lf.__name__=["lovedna",
"geom","GJK3D"];Lf.prototype={Test:function(a,b){this._shape1=a;this._shape2=b;this._hit=!1;this._simplex.Clear();if(!this._shape1.enabled||!this._shape2.enabled)return!1;a=this._shape1.GetCenter();b=this._shape2.GetCenter();var c=l._pool.Get();null==b?(c.x-=a.x,c.y-=a.y,c.z-=a.z):(c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z);a=c.Normalize();1E-6>A.FloatToAbs(a.x)&&1E-6>A.FloatToAbs(a.y)&&1E-6>A.FloatToAbs(a.z)&&(a.x=1);b=new l;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);this._penetration=b;b=this.support(a);
this._simplex.Add(b);if(0>=b.x*a.x+b.y*a.y+b.z*a.z)return!1;a.x=-a.x;a.y=-a.y;a.z=-a.z;for(this.cost=0;10>this.cost;){this.cost++;1E-6>A.FloatToAbs(a.x)&&1E-6>A.FloatToAbs(a.y)&&1E-6>A.FloatToAbs(a.z)&&2<=this._simplex._length&&(a=this.GetPerpendicular());1E-6>A.FloatToAbs(a.x)&&1E-6>A.FloatToAbs(a.y)&&1E-6>A.FloatToAbs(a.z)&&(a.x=1);b=this.support(a);if(0>=b.x*a.x+b.y*a.y+b.z*a.z)break;this._simplex.Add(b);if(this.ContainsOrigin(a))return this._hit=!0}return!1},Intersect:function(){if(!this._hit)return null;
this.cost=0;for(var a=[new $b(this._simplex.Get(0),this._simplex.Get(1),this._simplex.Get(2)),new $b(this._simplex.Get(0),this._simplex.Get(2),this._simplex.Get(3)),new $b(this._simplex.Get(0),this._simplex.Get(3),this._simplex.Get(1)),new $b(this._simplex.Get(1),this._simplex.Get(3),this._simplex.Get(2))];10>this.cost;){this.cost++;var b=this.findResponseWithTriangle(a);if(null!=b)return a=l._pool.Get(),null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z),a=a.Normalize(),a.x*=1E-5,a.y*=1E-5,a.z*=1E-5,b.x+=a.x,
b.y+=a.y,b.z+=a.z,b}return this._penetration},support:function(a){var b=this._dir;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);a=this._shape1.GetFarthestPointInDirection(this._dir);b=this._dir;b.x=-b.x;b.y=-b.y;b.z=-b.z;b=this._shape2.GetFarthestPointInDirection(b);a.x-=b.x;a.y-=b.y;a.z-=b.z;return a},ContainsOrigin:function(a){return 2==this._simplex._length?this.containsLine(a):3==this._simplex._length?this.containsTriangle(a):4==this._simplex._length?this.containsTetrahedron(a):!1},GetPerpendicular:function(){var a=
this._simplex.Get(-1),b=this._simplex.Get(-2),c=l._pool.Get();null==b?(c.x-=a.x,c.y-=a.y,c.z-=a.z):(c.x=a.x-b.x,c.y=a.y-b.y,c.z=a.z-b.z);a=c.y;c.y=c.x;c.x=a;return c},getNormal:function(a,b,c){var d=a.x*c.x+a.y*c.y+a.z*c.z;c=b.x*c.x+b.y*c.y+b.z*c.z;var e=l._pool.Get();null!=b&&b!=e&&(e.x=b.x,e.y=b.y,e.z=b.z);e.x*=d;e.y*=d;e.z*=d;b=l._pool.Get();null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);b.x*=c;b.y*=c;b.z*=c;e.x-=b.x;e.y-=b.y;e.z-=b.z;return e},containsLine:function(a){var b=this._simplex.Get(1),c=this._simplex.Get(0),
d=l._pool.Get();null==b?(d.x-=c.x,d.y-=c.y,d.z-=c.z):(d.x=c.x-b.x,d.y=c.y-b.y,d.z=c.z-b.z);c=l._pool.Get();null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);c.x=-c.x;c.y=-c.y;c.z=-c.z;1E-6>A.FloatToAbs(d.x)&&1E-6>A.FloatToAbs(d.y)&&1E-6>A.FloatToAbs(d.z)?null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z):(b=this.getNormal(d,c,d),null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z));return!1},containsTriangle:function(a){var b=this._simplex.Get(2),c=this._simplex.Get(1),d=this._simplex.Get(0),e=l._pool.Get();null==b?(e.x-=c.x,e.y-=
c.y,e.z-=c.z):(e.x=c.x-b.x,e.y=c.y-b.y,e.z=c.z-b.z);var g=l._pool.Get();null==b?(g.x-=d.x,g.y-=d.y,g.z-=d.z):(g.x=d.x-b.x,g.y=d.y-b.y,g.z=d.z-b.z);var f=l._pool.Get();null!=b&&b!=f&&(f.x=b.x,f.y=b.y,f.z=b.z);f.x=-f.x;f.y=-f.y;f.z=-f.z;var h=this.getNormal(g,e,e),k=this.getNormal(e,g,g);0<h.x*f.x+h.y*f.y+h.z*f.z?(this._simplex.RemoveAt(0),null!=h&&h!=a&&(a.x=h.x,a.y=h.y,a.z=h.z)):0<k.x*f.x+k.y*f.y+k.z*f.z?(this._simplex.RemoveAt(1),null!=k&&k!=a&&(a.x=k.x,a.y=k.y,a.z=k.z)):(e=l._pool.Get().Cross(e,
g),null!=e&&e!=a&&(a.x=e.x,a.y=e.y,a.z=e.z),0>e.x*f.x+e.y*f.y+e.z*f.z&&(f=this._simplex.Get(0),null!=c&&c!=f&&(f.x=c.x,f.y=c.y,f.z=c.z),c=this._simplex.Get(1),null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z),d=this._simplex.Get(2),null!=b&&b!=d&&(d.x=b.x,d.y=b.y,d.z=b.z),e.x=-e.x,e.y=-e.y,e.z=-e.z,null!=e&&e!=a&&(a.x=e.x,a.y=e.y,a.z=e.z)));return!1},containsTetrahedron:function(a){var b=l._pool.Get(),c=this._simplex.Get(3);null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);var d=l._pool.Get();c=this._simplex.Get(2);
null!=c&&c!=d&&(d.x=c.x,d.y=c.y,d.z=c.z);var e=l._pool.Get();c=this._simplex.Get(1);null!=c&&c!=e&&(e.x=c.x,e.y=c.y,e.z=c.z);var g=l._pool.Get();c=this._simplex.Get(0);null!=c&&c!=g&&(g.x=c.x,g.y=c.y,g.z=c.z);var f=l._pool.Get();null==b?(f.x-=d.x,f.y-=d.y,f.z-=d.z):(f.x=d.x-b.x,f.y=d.y-b.y,f.z=d.z-b.z);var h=l._pool.Get();null==b?(h.x-=e.x,h.y-=e.y,h.z-=e.z):(h.x=e.x-b.x,h.y=e.y-b.y,h.z=e.z-b.z);c=l._pool.Get();null==b?(c.x-=g.x,c.y-=g.y,c.z-=g.z):(c.x=g.x-b.x,c.y=g.y-b.y,c.z=g.z-b.z);var k=l._pool.Get();
null!=b&&b!=k&&(k.x=b.x,k.y=b.y,k.z=b.z);k.x=-k.x;k.y=-k.y;k.z=-k.z;var m=l._pool.Get().Cross(f,h);b=l._pool.Get().Cross(h,c);var p=l._pool.Get().Cross(c,f),n=0;0<m.x*k.x+m.y*k.y+m.z*k.z&&(n|=1);0<b.x*k.x+b.y*k.y+b.z*k.z&&(n|=2);0<p.x*k.x+p.y*k.y+p.z*k.z&&(n|=4);return 1==n?this.checkTetrahedron(k,f,h,m,a):2==n?(d=this._simplex.Get(2),null!=e&&e!=d&&(d.x=e.x,d.y=e.y,d.z=e.z),d=this._simplex.Get(1),null!=g&&g!=d&&(d.x=g.x,d.y=g.y,d.z=g.z),this.checkTetrahedron(k,h,c,b,a)):4==n?(e=this._simplex.Get(1),
null!=d&&d!=e&&(e.x=d.x,e.y=d.y,e.z=d.z),d=this._simplex.Get(2),null!=g&&g!=d&&(d.x=g.x,d.y=g.y,d.z=g.z),this.checkTetrahedron(k,c,f,p,a)):3==n?this.checkTwoTetrahedron(k,f,h,m,a):6==n?(f=this._simplex.Get(2),null!=e&&e!=f&&(f.x=e.x,f.y=e.y,f.z=e.z),e=this._simplex.Get(1),null!=g&&g!=e&&(e.x=g.x,e.y=g.y,e.z=g.z),g=this._simplex.Get(0),null!=d&&d!=g&&(g.x=d.x,g.y=d.y,g.z=d.z),this.checkTwoTetrahedron(k,h,c,b,a)):5==n?(h=this._simplex.Get(1),null!=d&&d!=h&&(h.x=d.x,h.y=d.y,h.z=d.z),d=this._simplex.Get(2),
null!=g&&g!=d&&(d.x=g.x,d.y=g.y,d.z=g.z),g=this._simplex.Get(0),null!=e&&e!=g&&(g.x=e.x,g.y=e.y,g.z=e.z),this.checkTwoTetrahedron(k,c,f,p,a)):!0},checkTwoTetrahedron:function(a,b,c,d,e){var g=l._pool.Get().Cross(d,c);if(0<g.x*a.x+g.y*a.y+g.z*a.z){g=this._simplex.Get(2);var f=this._simplex.Get(1);null!=f&&f!=g&&(g.x=f.x,g.y=f.y,g.z=f.z);g=this._simplex.Get(1);f=this._simplex.Get(0);null!=f&&f!=g&&(g.x=f.x,g.y=f.y,g.z=f.z);g=this._simplex.Get(2);f=this._simplex.Get(3);null==f?(b.x-=g.x,b.y-=g.y,b.z-=
g.z):(b.x=g.x-f.x,b.y=g.y-f.y,b.z=g.z-f.z);g=this._simplex.Get(1);f=this._simplex.Get(3);null==f?(c.x-=g.x,c.y-=g.y,c.z-=g.z):(c.x=g.x-f.x,c.y=g.y-f.y,c.z=g.z-f.z);d.Cross(b,c);return this.checkTetrahedron(a,b,c,d,e)}c=l._pool.Get().Cross(b,d);return 0<c.x*a.x+c.y*a.y+c.z*a.z?(this._simplex.RemoveAt(0,2),a=this.getNormal(b,a,b),null!=a&&a!=e&&(e.x=a.x,e.y=a.y,e.z=a.z),!1):!0},checkTetrahedron:function(a,b,c,d,e){var g=l._pool.Get().Cross(d,c);if(0<g.x*a.x+g.y*a.y+g.z*a.z)return b=this._simplex.Get(2),
d=this._simplex.Get(3),null!=d&&d!=b&&(b.x=d.x,b.y=d.y,b.z=d.z),this._simplex.RemoveAt(3),this._simplex.RemoveAt(0),a=this.getNormal(c,a,c),null!=a&&a!=e&&(e.x=a.x,e.y=a.y,e.z=a.z),!1;c=l._pool.Get().Cross(b,d);if(0<c.x*a.x+c.y*a.y+c.z*a.z)return this._simplex.RemoveAt(0,2),a=this.getNormal(b,a,b),null!=a&&a!=e&&(e.x=a.x,e.y=a.y,e.z=a.z),!1;this._simplex.RemoveAt(0);null!=d&&d!=e&&(e.x=d.x,e.y=d.y,e.z=d.z);return!1},getNearestTriangle:function(a){this._distance=1.79769313486231E308;this._index=-1;
for(var b=0,c=a.length;b<c;){var d=b++,e=a[d],g=e.normal;e=e.a;g=Math.abs(g.x*e.x+g.y*e.y+g.z*e.z);g<this._distance&&(this._distance=g,this._index=d)}-1!=this._index&&(b=this._penetration,a=a[this._index].normal,null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z),a=this._distance,b.x*=a,b.y*=a,b.z*=a)},findResponseWithTriangle:function(a){if(0==a.length)return null;this.getNearestTriangle(a);if(-1==this._index)return null;var b=a[this._index],c=this.support(b.normal),d=b.normal;if(1E-6>A.FloatToAbs(Math.abs(c.x*
d.x+c.y*d.y+c.z*d.z)-this._distance))return a=b.normal,c=this._distance,a.x*=c,a.y*=c,a.z*=c,a;d=[];for(var e=a.length;0<e--;){b=a[e];var g=b.normal,f=l._pool.Get(),h=b.a;null==h?(f.x-=c.x,f.y-=c.y,f.z-=c.z):(f.x=c.x-h.x,f.y=c.y-h.y,f.z=c.z-h.z);0<g.x*f.x+g.y*f.y+g.z*f.z&&(this.addEdge(d,new $c(b.a,b.b)),this.addEdge(d,new $c(b.b,b.c)),this.addEdge(d,new $c(b.c,b.a)),a.splice(e,1))}b=0;for(e=d.length;b<e;)g=b++,g=new $b(c,d[g].a,d[g].b),f=g.normal,1E-6>A.FloatToAbs(f.x)&&1E-6>A.FloatToAbs(f.y)&&1E-6>
A.FloatToAbs(f.z)||a.push(g);return null},addEdge:function(a,b){for(var c=0,d=a.length;c<d;){var e=c++,g=a[e];g.a==b.b&&g.b==b.a&&a.splice(e,1)}a.push(b)},__class__:Lf};var Za=f["lovedna.geom.GJKEvolveResult"]={__ename__:!0,__constructs__:["NoIntersection","FoundIntersection","StillEvolving"]};Za.NoIntersection=["NoIntersection",0];Za.NoIntersection.toString=B;Za.NoIntersection.__enum__=Za;Za.FoundIntersection=["FoundIntersection",1];Za.FoundIntersection.toString=B;Za.FoundIntersection.__enum__=Za;
Za.StillEvolving=["StillEvolving",2];Za.StillEvolving.toString=B;Za.StillEvolving.__enum__=Za;var Yb=function(){var a=new l;a.x=0;a.y=0;a.z=1;this.normal=a;this.distance=0};f["lovedna.geom.Plane"]=Yb;Yb.__name__=["lovedna","geom","Plane"];Yb.prototype={DistanceToPoint:function(a){var b=this.normal;return b.x*a.x+b.y*a.y+b.z*a.z+this.distance},Set:function(a,b,c,d){var e=this.normal;e.x=a;e.y=b;e.z=c;this.distance=d;this.Normalize()},Normalize:function(){var a=this.normal;a=1/Math.sqrt(a.x*a.x+a.y*
a.y+a.z*a.z);var b=this.normal;b.x*=a;b.y*=a;b.z*=a;this.distance*=a},__class__:Yb};var Qf=function(){};f["lovedna.geom.Shape2D"]=Qf;Qf.__name__=["lovedna","geom","Shape2D"];Qf.prototype={__class__:Qf};var fe=function(){this._list=new z};f["lovedna.geom.Polygon2D"]=fe;fe.__name__=["lovedna","geom","Polygon2D"];fe.__interfaces__=[Qf];fe.prototype={Clear:function(){this._list.Clear();this.enabled=!1},Add:function(a){this._list.Add(a);this._center=null;this.enabled=2<this._list._length},GetFarthestPointInDirection:function(a){for(var b=
-1.79769313486231E308,c=F.get_temp(),d=0,e=this._list._length;d<e;){var g=d++;g=this._list.Get(g);var f=g.x*a.x+g.y*a.y;f>b&&(b=f,c.x=g.x,c.y=g.y)}return c},__class__:fe};var ad=function(){};f["lovedna.geom.Shape3D"]=ad;ad.__name__=["lovedna","geom","Shape3D"];ad.prototype={__class__:ad};var Zc=function(){this._list=new z};f["lovedna.geom.Polygon3D"]=Zc;Zc.__name__=["lovedna","geom","Polygon3D"];Zc.__interfaces__=[ad];Zc.prototype={Clear:function(){this._list.Clear();this.enabled=!1},FromArray:function(a){for(var b=
a.length;0<b--;)this.Add(a[b]);this._center=null;this.enabled=2<this._list._length},Add:function(a){this._list.Add(a);this._center=null;this.enabled=2<this._list._length},GetCenter:function(){if(null!=this._center)return this._center;this._center=new l(0,0,0);var a=this._list._length;if(1>a)return this._center;if(2>a){a=this._center;var b=this._list.Get(0);null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);return this._center}for(b=0;b<a;){var c=b++,d=this._center;c=this._list.Get(c);d.x+=c.x;d.y+=c.y;d.z+=
c.z}b=this._center;a=1/a;b.x*=a;b.y*=a;b.z*=a;return this._center},GetFarthestPointInDirection:function(a){for(var b=this._list._length,c=this._list.Get(0),d=a.x*c.x+a.y*c.y+a.z*c.z,e,g=1;g<b;){e=g++;var f=this._list.Get(e);e=a.x*f.x+a.y*f.y+a.z*f.z;e>d&&(d=e,c=f)}a=l._pool.Get();null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z);return a},__class__:Zc};var ca=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.x=a;this.y=b;this.z=c;this.w=d};f["lovedna.math.Float4"]=ca;ca.__name__=
["lovedna","math","Float4"];ca.__interfaces__=[hc];ca.prototype={FromArray:function(a,b){null==b&&(b=0);if(null==a)return this;var c=a.length;b<c&&(this.x=a[b]);b+1<c&&(this.y=a[b+1]);b+2<c&&(this.z=a[b+2]);b+3<c&&(this.w=a[b+3]);return this},FillArray:function(a,b){null==b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w},__class__:ca};var Wb=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this._vec2=new F;ca.call(this,a,b,c,d);this.x=a;this.y=b;this.set_width(c);
this.set_height(d)};f["lovedna.geom.Rect"]=Wb;Wb.__name__=["lovedna","geom","Rect"];Wb.__super__=ca;Wb.prototype=p(ca.prototype,{set_width:function(a){return this.z=a},set_height:function(a){return this.w=a},get_bottom:function(){return this.y+this.w},get_right:function(){return this.x+this.z},__class__:Wb,__properties__:{get_right:"get_right",get_bottom:"get_bottom",set_height:"set_height",set_width:"set_width"}});var pe=function(){this._center=new l;this.radius=0};f["lovedna.geom.Sphere"]=pe;pe.__name__=
["lovedna","geom","Sphere"];pe.__interfaces__=[ad];pe.prototype={GetCenter:function(){return this._center},GetFarthestPointInDirection:function(a){var b=l._pool.Get();null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);a=b.Normalize();b=this.radius;a.x*=b;a.y*=b;a.z*=b;b=this._center;a.x+=b.x;a.y+=b.y;a.z+=b.z;return a},__class__:pe};var $b=function(a,b,c){this.a=new l;this.b=new l;this.c=new l;this.normal=new l;this.From(a,b,c);this.enabled=!0};f["lovedna.geom.Triangle3D"]=$b;$b.__name__=["lovedna","geom",
"Triangle3D"];$b.__interfaces__=[ad];$b.prototype={From:function(a,b,c){var d=this.a;null!=a&&a!=d&&(d.x=a.x,d.y=a.y,d.z=a.z);a=this.b;null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);b=this.c;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);c=l._pool.Get();b=this.b;a=this.a;null==a?(c.x-=b.x,c.y-=b.y,c.z-=b.z):(c.x=b.x-a.x,c.y=b.y-a.y,c.z=b.z-a.z);b=l._pool.Get();a=this.c;d=this.a;null==d?(b.x-=a.x,b.y-=a.y,b.z-=a.z):(b.x=a.x-d.x,b.y=a.y-d.y,b.z=a.z-d.z);this.normal.Cross(c,b).Normalize()},GetCenter:function(){var a=
this._center=new l(0,0,0),b=this.a;a.x+=b.x;a.y+=b.y;a.z+=b.z;a=this._center;b=this.b;a.x+=b.x;a.y+=b.y;a.z+=b.z;a=this._center;b=this.c;a.x+=b.x;a.y+=b.y;a.z+=b.z;a=this._center;a.x*=.3333333333333333;a.y*=.3333333333333333;a.z*=.3333333333333333;return this._center},GetFarthestPointInDirection:function(a){var b=this.a,c=this.a;c=a.x*c.x+a.y*c.y+a.z*c.z;var d=this.b;d=a.x*d.x+a.y*d.y+a.z*d.z;d>c&&(c=d,b=this.b);d=this.c;d=a.x*d.x+a.y*d.y+a.z*d.z;d>c&&(b=this.c);a=l._pool.Get();null!=b&&b!=a&&(a.x=
b.x,a.y=b.y,a.z=b.z);return a},__class__:$b};var Ib=function(){this.id=Ib._id++;Ib._map.h[this.id]=this;this.usage=35044;this.length=0;this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;this.enabled=!1;this.type=5123};f["lovedna.gl.IndexBuffer"]=Ib;Ib.__name__=["lovedna","gl","IndexBuffer"];Ib.prototype={Upload:function(a,b){null==b&&(b=-1);this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;null!=a&&(this._data=a,this.length=0<b?b:this._data.length,this.enabled=1<this.length)},Bind:function(){this._time=
.001*(new Date).getTime()*w.scale+w._timeOffset;if(2>this.length)return this;if(null!=this._data){var a=this._data,b=null!=a?new Int16Array(a):null;this._data=null;null==this._buffer&&(this._buffer=n.context.__context.createBuffer());n.context.__context.bindBuffer(34963,this._buffer);a=2*this.length;b=ja.fromArrayBufferView(b);var c=this.usage;n.context.__context.bufferData(34963,ja.toBufferView(b,a),c);128>this.length&&(this.type=5121)}else{if(Ib.current==this)return this;null!=this._buffer&&n.context.__context.bindBuffer(34963,
this._buffer)}Ib.current=this;return this},__class__:Ib};var ac=function(a,b){this.id=ac._id++;this.enabled=!1;var c=n.context.__context.createShader(35633);n.context.__context.shaderSource(c,a);n.context.__context.compileShader(c);if(0==n.context.__context.getShaderParameter(c,35713))Y.trace(this.addLineNumber(a),{fileName:"Program.hx",lineNumber:38,className:"lovedna.gl.Program",methodName:"new"}),Y.trace("vertex compileShader "+n.context.__context.getShaderInfoLog(c),{fileName:"Program.hx",lineNumber:39,
className:"lovedna.gl.Program",methodName:"new"});else if(a=n.context.__context.createShader(35632),n.context.__context.shaderSource(a,b),n.context.__context.compileShader(a),0==n.context.__context.getShaderParameter(a,35713))Y.trace(this.addLineNumber(b),{fileName:"Program.hx",lineNumber:46,className:"lovedna.gl.Program",methodName:"new"}),Y.trace("fragment compileShader "+n.context.__context.getShaderInfoLog(a),{fileName:"Program.hx",lineNumber:47,className:"lovedna.gl.Program",methodName:"new"});
else if(this._glprogram=n.context.__context.createProgram(),n.context.__context.attachShader(this._glprogram,c),n.context.__context.attachShader(this._glprogram,a),n.context.__context.linkProgram(this._glprogram),n.context.__context.deleteShader(c),n.context.__context.deleteShader(a),0==n.context.__context.getProgramParameter(this._glprogram,35714))Y.trace("linkProgram "+n.context.__context.getProgramInfoLog(this._glprogram),{fileName:"Program.hx",lineNumber:59,className:"lovedna.gl.Program",methodName:"new"});
else{this.enabled=!0;this._bufferAttribs=new y;this._uniforms=new y;b=n.context.__context.getProgramParameter(this._glprogram,35721);a=0;for(var d=b;a<d;){var e=a++;c=n.context.__context.getActiveAttrib(this._glprogram,e);b=c.name;var g=this._bufferAttribs;c=new Rf(e,n.context.__context.getAttribLocation(this._glprogram,b),c);null!=h[b]?g.setReserved(b,c):g.h[b]=c}b=n.context.__context.getProgramParameter(this._glprogram,35718);d=a=0;for(g=b;d<g;)b=d++,c=n.context.__context.getActiveUniform(this._glprogram,
b),b=c.name,e=c.type,35678==e||35680==e?(e=this._uniforms,c=new qe(a,n.context.__context.getUniformLocation(this._glprogram,b),c),null!=h[b]?e.setReserved(b,c):e.h[b]=c,++a):(e=b.indexOf("["),0<e&&(b=u.substr(b,0,e)),e=this._uniforms,c=new qe(-1,n.context.__context.getUniformLocation(this._glprogram,b),c),null!=h[b]?e.setReserved(b,c):e.h[b]=c)}};f["lovedna.gl.Program"]=ac;ac.__name__=["lovedna","gl","Program"];ac.prototype={Bind:function(){if(this.enabled&&ac.current!=this){var a=this._glprogram;
n.__currentProgram=a;n.context.__context.useProgram(a);ac.current=this}},addLineNumber:function(a){var b="";a=new Sc(a,!0);a.set_position(0);for(var c=a._length,d=-(c+"").length,e=0;e<c;){var g=e++;b+=A.StringFill(g+1+"",d)+":\t"+a.ReadLine()+"\n"}return b},__class__:ac};var Rf=function(a,b,c){this.id=a;this.location=b;this._info=c};f["lovedna.gl.ProgramBufferInput"]=Rf;Rf.__name__=["lovedna","gl","ProgramBufferInput"];Rf.prototype={__class__:Rf};var qe=function(a,b,c){this.id=a;this.location=b;this._info=
c;this._name=c.name};f["lovedna.gl.ProgramUniformInput"]=qe;qe.__name__=["lovedna","gl","ProgramUniformInput"];qe.prototype={__class__:qe};var re=function(){this.depthWrite=this.depthTest=!0;this.cullMode=1029;this.depthMode=513;this.stencilTest=!1;this.stencilMode=519;this.stencilFail=this.stencilDepthFail=this.stencilBothPass=7680;this.stencilReferenceValue=0;this.stencilWriteMask=this.stencilReadMask=255;this.blend=!0;this.blendAlphaOperation=this.blendColorOperation=32774;this.blendSrcColor=770;
this.blendDstColor=771;this.blendDstAlpha=this.blendSrcAlpha=1;this.drawMode=4};f["lovedna.gl.State"]=re;re.__name__=["lovedna","gl","State"];re.prototype={__class__:re};var Qa=function(){this.id=Qa._id++;Qa._map.h[this.id]=this;this.enabled=!1;this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;this.setting=new Sf;this.size=new Tf;this.mipmap=!1};f["lovedna.gl.Texture"]=Qa;Qa.__name__=["lovedna","gl","Texture"];Qa.prototype={Bind:function(a){this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;
return!1},UploadImage:function(a){},onUpload:function(){if(null!=Qa.onUploadCallback)Qa.onUploadCallback(this)},__class__:Qa};var Ec=function(){Qa.call(this)};f["lovedna.gl.Texture2D"]=Ec;Ec.__name__=["lovedna","gl","Texture2D"];Ec.__super__=Qa;Ec.prototype=p(Qa.prototype,{UploadImage:function(a){Qa.prototype.UploadImage.call(this,a);this.UploadUint8Array(a.get_data());this.size.Set(a.width,a.height)},UploadUint8Array:function(a){null!=a&&(this._data=a,this._time=.001*(new Date).getTime()*w.scale+
w._timeOffset,this.enabled=!0)},Bind:function(a){null==a&&(a=0);Qa.prototype.Bind.call(this,a);return this.enabled?null!=this._data?(this.upload(this._data),this._data=null,!1):null!=this._texture?(n.context.__context.activeTexture(33984+a),n.context.__context.bindTexture(3553,this._texture),this.setting.Bind(),!0):!1:!1},upload:function(a){null==this._texture&&(this._texture=n.context.__context.createTexture());n.context.__context.bindTexture(3553,this._texture);this.onUpload();var b=this.size.x,
c=this.size.y,d=0<b&&0==(b&b-1)&&0<c&&0==(c&c-1);this.setting._dirty=!0;this.setting.isPow2=d;this.setting.isMipmap=!1;a=ja.fromArrayBufferView(a);n.context.__context.texImage2D(3553,0,6408,b,c,0,6408,5121,ja.toBufferView(a));d&&this.setting.mipmap&&(this.setting.isMipmap=!0,n.context.__context.generateMipmap(3553));n.context.__context.bindTexture(3553,null)},__class__:Ec});var se=function(){Qa.call(this)};f["lovedna.gl.TextureCube"]=se;se.__name__=["lovedna","gl","TextureCube"];se.__super__=Qa;se.prototype=
p(Qa.prototype,{UploadBitmaps:function(a){if(null!=a){var b=a.length;this._data=[];if(6>b)this._data=null;else{for(b=6;0<b--;){var c=a[b];if(null==c){this._data=null;return}if(0<this.size.x&&c.width!=this.size.x){this._data=null;return}if(0<this.size.y&&c.height!=this.size.y){this._data=null;return}this.size.Set(c.width,c.height);this._data[b]=c.get_data()}this.enabled=!0}}},UploadImage:function(a){Qa.prototype.UploadImage.call(this,a)},Bind:function(a){null==a&&(a=0);Qa.prototype.Bind.call(this,
a);if(!this.enabled)return!1;null==this._texture&&(this._texture=n.context.__context.createTexture());if(null!=this._data){a=[34069,34070,34071,34072,34073,34074];n.context.__context.bindTexture(34067,this._texture);this.onUpload();n.context.__context.texParameteri(34067,10242,10497);n.context.__context.texParameteri(34067,10243,10497);n.context.__context.texParameteri(34067,10240,9729);n.context.__context.texParameteri(34067,10241,9729);n.context.__context.generateMipmap(34067);for(var b=this._data.length;0<
b--;){if(null==this._data[b])return!1;var c=this.size.x,d=this.size.y,e=ja.fromArrayBufferView(this._data[b]);n.context.__context.texImage2D(a[b],0,6408,c,d,0,6408,5121,ja.toBufferView(e))}this._data=null}else if(null!=this._texture)return n.context.__context.activeTexture(33984+a),n.context.__context.bindTexture(34067,this._texture),!0;return!1},__class__:se});var ce=function(a,b,c){null==c&&(c=16);null==b&&(b=256);null==a&&(a=256);this._depth=16;Qa.call(this);this.rect=new Wb;this.rect.set_width(a);
this.rect.set_height(b);this.size.Set(a,b);this.enabled=!0;this._depth=c};f["lovedna.gl.TextureRender2D"]=ce;ce.__name__=["lovedna","gl","TextureRender2D"];ce.__super__=Ec;ce.prototype=p(Ec.prototype,{Release:function(){null!=this._frameBuffer&&(n.context.__context.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null);null!=this._renderBuffer&&(n.context.__context.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null)},BindFrameBuffer:function(){var a=this.rect.z,b=a|0;0>a&&b!=a&&
--b;a=b;b=this.rect.w;var c=b|0;0>b&&c!=b&&--c;b=c;if(!(1>a||1>b)){if(a!=this.size.x||b!=this.size.y)this.Release(),this.size.Set(a,b);null==this._frameBuffer?(this._frameBuffer=n.context.__context.createFramebuffer(),n.context.__context.bindFramebuffer(36160,this._frameBuffer),this._renderBuffer=n.context.__context.createRenderbuffer(),n.context.__context.bindRenderbuffer(36161,this._renderBuffer),24==this._depth?(n.context.__context.renderbufferStorage(36161,34041,a,b),n.context.__context.framebufferRenderbuffer(36160,
33306,36161,this._renderBuffer)):(n.context.__context.renderbufferStorage(36161,33189,a,b),n.context.__context.framebufferRenderbuffer(36160,36096,36161,this._renderBuffer)),this.upload(null),n.context.__context.framebufferTexture2D(36160,36064,3553,this._texture,0),n.context.__context.bindRenderbuffer(36161,null)):n.context.__context.bindFramebuffer(36160,this._frameBuffer)}},__class__:ce});var Sf=function(){this._min_filter=this._mag_filter=9729;this._wrap_t=this._wrap_s=10497;this.isPow2=this.mipmap=
!1;this._dirty=!0;this._custom=!1};f["lovedna.gl.TextureSetting"]=Sf;Sf.__name__=["lovedna","gl","TextureSetting"];Sf.prototype={Bind:function(){this._dirty&&(this._dirty=!1,9728==this._mag_filter||9729==this._mag_filter||this.isMipmap&&this.isPow2||(this._mag_filter=9729),9728==this._min_filter||9729==this._min_filter||this.isMipmap&&this.isPow2||(this._min_filter=9729),this.isPow2||(10497==this._wrap_s&&(this._wrap_s=33071),10497==this._wrap_t&&(this._wrap_t=33071)),this._custom||(this.isMipmap&&
(this._min_filter=9984),this.isPow2&&(this._wrap_t=this._wrap_s=10497)),n.context.__context.texParameteri(3553,10242,this._wrap_s),n.context.__context.texParameteri(3553,10243,this._wrap_t),n.context.__context.texParameteri(3553,10240,this._mag_filter),n.context.__context.texParameteri(3553,10241,this._min_filter))},__class__:Sf};var Ea=function(a){this._type=-1;this.name=a;this.enabled=!1};f["lovedna.gl.UniformData"]=Ea;Ea.__name__=["lovedna","gl","UniformData"];Ea.prototype={SetFloat2:function(a){if(null==
a)throw new r(this.name+" value error ");if(this._float2Value==a)return this;this._float2Value=a;this._type=4;this._typeDirty=this.enabled=!0;return this},SetFloat3:function(a){if(null==a)throw new r(this.name+" value error ");if(this._float3Value==a)return this;this._float3Value=a;this._type=5;this._typeDirty=this.enabled=!0;return this},SetFloat4:function(a){if(null==a)throw new r(this.name+" value error ");if(this._float4Value==a)return this;this._float4Value=a;this._type=6;this._typeDirty=this.enabled=
!0;return this},SetMatrix:function(a){if(null==a)throw new r(this.name+" value error ");if(this._matrix4Value==a)return this;this._matrix4Value=a;this._type=7;this._typeDirty=this.enabled=!0;return this},SetMatrixHandler:function(a){if(null==a)throw new r(this.name+" value error ");this._matrix4HandlerValue=a;this._type=10;this._typeDirty=this.enabled=!0;return this},SetMatrixArray:function(a){if(null==a)throw new r(this.name+" value error ");if(this._matrix4ArrayValue==a)return this;this._matrix4ArrayValue=
a;this._type=8;this._typeDirty=this.enabled=!0;return this},SetTexture:function(a){if(this._texture==a)return this;this._texture=a;if(null==this._texture)throw new r(this.name+" value error ");this._type=9;this._typeDirty=this.enabled=!0;return this},Bind:function(a){if(null==a)return!0;if(0>this._type)return Y.trace(this.name+" type is error",{fileName:"UniformData.hx",lineNumber:187,className:"lovedna.gl.UniformData",methodName:"Bind"}),!0;a!=this._input&&(this._input=a,null!=this._input?(this._size=
this._input._info.size,this.enabled=!0):this._size=-1);if(0>this._size)return Y.trace(this.name+" size is "+this._size,{fileName:"UniformData.hx",lineNumber:205,className:"lovedna.gl.UniformData",methodName:"Bind"}),!0;(null==this._handler||this._typeDirty)&&this.bindType();if(null==this._handler)return this._type=-1,!0;a=this._handler();this._typeDirty=!1;return a},bindType:function(){switch(this._type){case 1:this._handler=k(this,this.bindInt);break;case 2:this._handler=k(this,this.bindFloat);break;
case 3:this._handler=k(this,this.bindFloatArray);break;case 4:this._handler=k(this,this.bindFloat2);break;case 5:this._handler=k(this,this.bindFloat3);break;case 6:this._handler=k(this,this.bindFloat4);break;case 7:this._handler=k(this,this.bindMatrix4);break;case 8:this._handler=k(this,this.bindMatrix4Array);break;case 9:this._handler=k(this,this.bindTexture);break;case 10:this._handler=k(this,this.bindMatrix4Handler);break;case 11:this._handler=k(this,this.bindFloat4Array)}},bindInt:function(){n.context.__context.uniform1i(this._input.location,
this._intValue);return!0},bindFloat:function(){n.context.__context.uniform1f(this._input.location,this._floatValue);return!0},bindFloat2:function(){n.context.__context.uniform2f(this._input.location,this._float2Value.x,this._float2Value.y);return!0},bindFloat3:function(){n.context.__context.uniform3f(this._input.location,this._float3Value.x,this._float3Value.y,this._float3Value.z);return!0},bindFloat4:function(){n.context.__context.uniform4f(this._input.location,this._float4Value.x,this._float4Value.y,
this._float4Value.z,this._float4Value.w);return!0},bindFloatArray:function(){var a=this._floatArrayValue.length;if(null==this._float32Array||a>this._float32Array.length)this._float32Array=null!=a?new Ob(a):null;for(;0<a--;)this._float32Array[a]=this._floatArrayValue[a];a=this._input.location;var b=this._size,c=ja.fromArrayBufferView(this._float32Array);n.context.__context.uniform1fv(a,ja.toFloat32Array(c,4*b));return!0},bindFloat4Array:function(){var a=this._float4ArrayValue.length;if(null==this._float32Array||
4*a>this._float32Array.length){var b=4*a;this._float32Array=null!=b?new Ob(b):null}for(;0<a--;){b=4*a;var c=this._float4ArrayValue[a];if(null==c)return Y.trace("warn",{fileName:"UniformData.hx",lineNumber:314,className:"lovedna.gl.UniformData",methodName:"bindFloat4Array",customParams:["list "+a+" is null"]}),!1;this._float32Array[b]=c.x;this._float32Array[b+1]=c.y;this._float32Array[b+2]=c.z;this._float32Array[b+3]=c.w}a=this._input.location;b=this._size;c=ja.fromArrayBufferView(this._float32Array);
n.context.__context.uniform4fv(a,ja.toFloat32Array(c,16*b));return!0},bindMatrix4:function(){var a=this._input.location,b=this._size,c=this._matrix4Value;if(c._dirty){if(null==c._data){var d=new Ob(16);c._data=d}c.ToFloat32Array(c._data);c._dirty=!1}c=ja.fromArrayBufferView(c._data);n.context.__context.uniformMatrix4fv(a,!1,ja.toFloat32Array(c,64*b));return!0},bindMatrix4Handler:function(){var a=this._input.location,b=this._size,c=this._matrix4HandlerValue();if(c._dirty){if(null==c._data){var d=new Ob(16);
c._data=d}c.ToFloat32Array(c._data);c._dirty=!1}c=ja.fromArrayBufferView(c._data);n.context.__context.uniformMatrix4fv(a,!1,ja.toFloat32Array(c,64*b));return!0},bindMatrix4Array:function(){var a=this._matrix4ArrayValue.length;if(null==this._float32Array||16*a>this._float32Array.length){var b=16*a;this._float32Array=null!=b?new Ob(b):null}for(;0<a--;)this._matrix4ArrayValue[a].ToFloat32Array(this._float32Array,16*a);a=this._input.location;b=this._matrix4ArrayValue.length;var c=ja.fromArrayBufferView(this._float32Array);
n.context.__context.uniformMatrix4fv(a,!1,ja.toFloat32Array(c,64*b));return!0},bindTexture:function(){if(!this._texture.Bind(this._input.id))return!1;n.context.__context.uniform1i(this._input.location,this._input.id);return!0},__class__:Ea};var yb=function(){this.usage=35044;this.length=0;this.id=yb._id++;yb._map.h[this.id]=this;this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;this.enabled=!1};f["lovedna.gl.VertexBuffer"]=yb;yb.__name__=["lovedna","gl","VertexBuffer"];yb.prototype={Upload:function(a,
b){null==b&&(b=-1);this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;null!=a&&(this._data=a,this.length=0<b?b:this._data.length,this.enabled=2<this.length)},BindBuffer:function(){this._time=.001*(new Date).getTime()*w.scale+w._timeOffset;if(null!=this._data){var a=this._data,b=null!=a?new Ob(a):null;this._data=null;null==this._buffer&&(this._buffer=n.context.__context.createBuffer());n.context.__context.bindBuffer(34962,this._buffer);a=4*this.length;b=ja.fromArrayBufferView(b);var c=this.usage;
n.context.__context.bufferData(34962,ja.toBufferView(b,a),c)}else{if(yb.current==this)return;null!=this._buffer&&n.context.__context.bindBuffer(34962,this._buffer)}yb.current=this},BindStruct:function(a){n.context.__context.enableVertexAttribArray(a.location);var b=a.location,c=a.size,d=a._type,e=a.stride;a=ja.fromInt(a.offset);n.context.__context.vertexAttribPointer(b,c,d,!1,e,ja.toValue(a))},__class__:yb};var Uf=function(a,b){this.size=a;this.offset=b;this._type=5126;this.stride=0};f["lovedna.gl.VertexBufferStruct"]=
Uf;Uf.__name__=["lovedna","gl","VertexBufferStruct"];Uf.prototype={set_type:function(a){return 5120<=a&&5126>=a?this._type=a:this._type},__class__:Uf,__properties__:{set_type:"set_type"}};var bd=function(){this.Clear()};f["lovedna.gl.VertexBufferStructs"]=bd;bd.__name__=["lovedna","gl","VertexBufferStructs"];bd.prototype={Clear:function(){this.count=this.stride=0;this._list=[];this._map=new y},Add:function(a,b,c){null==c&&(c=-1);var d=new Uf(b,this.stride);this.stride+=4*b;d.name=a;-1!=c&&d.set_type(c);
this._list.push(d);b=this._map;null!=h[a]?b.setReserved(a,d):b.h[a]=d;this.count=this._list.length},AddComplete:function(){for(var a=this._list.length;0<a--;)this._list[a].stride=this.stride},__class__:bd};var zf=function(){this.index=new ca(0,0,0,0);this.weight=new ca(0,0,0,0)};f["lovedna.math.BoneWeight"]=zf;zf.__name__=["lovedna","math","BoneWeight"];zf.prototype={__class__:zf};var wa=function(a,b,c,d){null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);ca.call(this,a,b,c,d);this._dirty=
!0};f["lovedna.math.Color"]=wa;wa.__name__=["lovedna","math","Color"];wa.__super__=ca;wa.prototype=p(ca.prototype,{FromRGBInt:function(a){this._dirty=!0;this.x=.00392156863*(a>>16&255);this._dirty=!0;this.y=.00392156863*(a>>8&255);this._dirty=!0;this.z=.00392156863*(a&255);this._dirty=!0;return this},get_rgba:function(){this._dirty&&(this._dirty=!1,this._rgba=(255*this.x|0)<<24|(255*this.y|0)<<16|(255*this.z|0)<<8|255*this.w|0);return this._rgba},set_rgba:function(a){this._dirty=!0;this.x=.00392156863*
(a>>24&255);this._dirty=!0;this.y=.00392156863*(a>>16&255);this._dirty=!0;this.z=.00392156863*(a>>8&255);this._dirty=!0;this.w=.00392156863*(a&255);return this._rgba=a},__class__:wa,__properties__:{set_rgba:"set_rgba",get_rgba:"get_rgba"}});var te=function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=0);this.h=a;this.s=b;this.v=c};f["lovedna.math.HSV"]=te;te.__name__=["lovedna","math","HSV"];te.prototype={ToColor:function(){var a=new wa;if(0==this.s)return a.x=this.v,a.y=this.v,a.z=this.v,a.w=
1,a;var b=this.h%360/60,c=b|0,d=b-c;b=this.v*(1-this.s);var e=this.v*(1-this.s*d);d=this.v*(1-this.s*(1-d));switch(c){case 0:a.x=this.v;a.y=d;a.z=b;a.w=1;break;case 1:a.x=e;a.y=this.v;a.z=b;a.w=1;break;case 2:a.x=b;a.y=this.v;a.z=d;a.w=1;break;case 3:a.x=b;a.y=e;a.z=this.v;a.w=1;break;case 4:a.x=d;a.y=b;a.z=this.v;a.w=1;break;case 5:a.x=this.v,a.y=b,a.z=e,a.w=1}return a},__class__:te};var Tf=function(a,b){null==b&&(b=0);null==a&&(a=0);this.Set(a,b)};f["lovedna.math.Int2"]=Tf;Tf.__name__=["lovedna",
"math","Int2"];Tf.prototype={Set:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;return this},__class__:Tf};var fa=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;this.w=d};f["lovedna.math.Quaternion"]=fa;fa.__name__=["lovedna","math","Quaternion"];fa.__interfaces__=[hc];fa.__properties__={get_temp:"get_temp"};fa.get_temp=function(){return fa._pool.Get()};fa.prototype={FromArray:function(a,b){null==b&&(b=0);b<a.length+4&&(this.x=
a[b],this.y=a[b+1],this.z=a[b+2],this.w=a[b+3]);return this},FillArray:function(a,b){null==b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w},MultiplyQuaternion:function(a,b,c){null==c&&(c=!1);if(null==a&&null==b)return this;var d=this,e=a;null!=b&&(d=a,e=b);c&&(a=d,d=e,e=a);a=d.w*e.y+d.y*e.w+d.z*e.x-d.x*e.z;b=d.w*e.z+d.z*e.w+d.x*e.y-d.y*e.x;c=d.w*e.w-d.x*e.x-d.y*e.y-d.z*e.z;this.x=d.w*e.x+d.x*e.w+d.y*e.z-d.z*e.y;this.y=a;this.z=b;this.w=c;return this},MultiplyVector:function(a,b){null==
b&&(b=!1);var c=a.x,d=a.y,e=a.z,g=this.w*c+this.y*e-this.z*d,f=this.w*d+this.z*c-this.x*e,h=this.w*e+this.x*d-this.y*c;e=-this.x*c-this.y*d-this.z*e;c=g*this.w+e*-this.x+f*-this.z-h*-this.y;d=f*this.w+e*-this.y+h*-this.x-g*-this.z;g=h*this.w+e*-this.z+g*-this.y-f*-this.x;if(b)return a.x=c,a.y=d,a.z=g,a;a=l._pool.Get();a.x=c;a.y=d;a.z=g;return a},SetLookAt:function(a,b){null==b&&(b=l._pool.Get(),b.x=0,b.y=1,b.z=0);var c=l._pool.Get(),d=l._pool.Get();null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);c.Cross(a).Normalize();
null!=a&&a!=d&&(d.x=a.x,d.y=a.y,d.z=a.z);d.Cross(c).Normalize();this.SetFromAxes(c.x,d.x,a.x,c.y,d.y,a.y,c.z,d.z,a.z);return this},SetEulerAngles:function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);a*=.017453292519943295;b*=.017453292519943295;var d=Math.sin,e=Math.cos,g=.008726646259971648*c;c=d(g);g=e(g);var f=.5*a;a=d(f);f=e(f);b*=.5;d=d(b);var h=e(b);e=h*a;b=d*f;f*=h;a*=d;this.x=e*g+b*c;this.y=b*g-e*c;this.z=f*c-a*g;this.w=f*g+a*c;return this},SlerpTo:function(a,b){if(0>=b)return this;
if(1<=b)return null!=a&&(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w),this;var c=this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w,d=A.FloatToAbs(c),e=1-b,g=b;if(.1<1-d){d=Math.acos(d);g=Math.sin;var f=1/g(d);e=g((1-b)*d)*f;g=g(b*d)*f}0>c&&(g=-g);this.x=e*this.x+g*a.x;this.y=e*this.y+g*a.y;this.z=e*this.z+g*a.z;this.w=e*this.w+g*a.w;return this},Distance:function(a,b){a=null==b?this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w:b.x*a.x+b.y*a.y+b.z*a.z+b.w*a.w;return 1-a*a},SetFromAxes:function(a,b,c,d,e,g,f,h,
k){var l=a+e+k;0<=l?(a=Math.sqrt(l+1),this.w=.5*a,a=.5/a,this.x=(h-g)*a,this.y=(c-f)*a,this.z=(d-b)*a):a>e&&a>k?(a=Math.sqrt(1+a-e-k),this.x=.5*a,a=.5/a,this.y=(d+b)*a,this.z=(c+f)*a,this.w=(h-g)*a):e>k?(a=Math.sqrt(1+e-a-k),this.y=.5*a,a=.5/a,this.x=(d+b)*a,this.z=(h+g)*a,this.w=(c-f)*a):(a=Math.sqrt(1+k-a-e),this.z=.5*a,a=.5/a,this.x=(c+f)*a,this.y=(h+g)*a,this.w=(d-b)*a);return this},__class__:fa};var zc=function(){this._seed=2147483647*Math.random()|0;this.running=!0};f["lovedna.math.Random"]=
zc;zc.__name__=["lovedna","math","Random"];zc.prototype={Get:function(){var a=this._seed;a^=a>>11;a^=a<<7&-1658038656;a^=a<<15&-272236544;this.running&&(this._seed=a^a>>18);return this._seed},GetFloat:function(){return A.FloatToFixed(this.Get()/2147483646,9)},RandomInt:function(a,b){if(b<=a)return a;a=this.RandomFloat(a,b);b=a|0;0>a&&b!=a&&--b;return b},RandomFloat:function(a,b){null==b&&(b=1);null==a&&(a=0);return b<=a?a:a+(b-a)*this.GetFloat()},__class__:zc};var ue=function(){K.call(this);this.max=
this.total=0};f["lovedna.net.AssetsProgress"]=ue;ue.__name__=["lovedna","net","AssetsProgress"];ue.__super__=V;ue.prototype=p(V.prototype,{Add:function(a){this.total++;this.total>this.max&&(this.max=this.total);this.DispatchEvent(C.CHANGE)},Load:function(a){},Progress:function(a){this.bytesLoaded=a.bytesLoaded;this.bytesTotal=a.bytesTotal;this.DispatchEvent(C.PROGRESS)},Complete:function(a){this.total--;1>this.total&&(this.max=0);this.DispatchEvent(C.CHANGE)},__class__:ue});var ve=function(){K.call(this);
this._request=new fc};f["lovedna.net.BytesLoader"]=ve;ve.__name__=["lovedna","net","BytesLoader"];ve.__super__=V;ve.prototype=p(V.prototype,{Load:function(a){this.setRequest(a);this.data=null;this._request.load(a.url).onProgress(k(this,this.onProgress)).onError(k(this,this.onError)).onComplete(k(this,this.onComplete))},onProgress:function(a,b){this.DispatchEvent(C.PROGRESS.SetProgress(a,b))},onError:function(a){this._request=new fc;this.data=null;this.DispatchEvent(C.COMPLETE)},onComplete:function(a){this.data=
a;this.DispatchEvent(C.COMPLETE)},setRequest:function(a){this._request.contentType=a.contentType;this._request.followRedirects=a.followRedirects;this._request.method=a.method;this._request.timeout=a.timeout;this._request.withCredentials=a.withCredentials;for(var b=a.formData.keys();b.hasNext();){var c=b.next(),d=a.formData,e=this._request.formData;d=null!=h[c]?d.getReserved(c):d.h[c];null!=h[c]?e.setReserved(c,d):e.h[c]=d}b=0;for(a=a.headers;b<a.length;)c=a[b],++b,this._request.headers.push(new td(c.name,
c.value))},__class__:ve});var fb=function(a,b,c){K.call(this);this.id=fb._id++;this.url=a;this.root=c;if(null==b)switch(M.Extension(a).toLowerCase()){case "gif":case "jpeg":case "jpg":case "png":b=aa.IMAGE;break;case "mp2":case "mp3":b=aa.SOUND;break;case "m4a":case "ogg":case "wav":b=aa.SOUND;break;case "otf":case "ttf":b=aa.FONT;break;case "css":case "json":case "plist":case "svg":case "text":case "txt":case "xml":b=aa.TEXT;break;default:b=aa.BINARY}this.type=b;this.fullUrl=a;M.IsHttp(a)||null==
c||(this.fullUrl=M.Combine(c,a));this.reloadCount=0;this.reloadTime=.5;this.fromLocal=!1;this.requireBytes=!0;this.bytesTotal=this.bytesLoaded=0;this.type==aa.SOUND&&(this.requireBytes=!1);fb._fnv.Reset();fb._fnv.PushString(this.fullUrl);this.hashKey=fb._fnv.GetString()};f["lovedna.net.FileData"]=fb;fb.__name__=["lovedna","net","FileData"];fb.GetHashKey=function(a,b){var c=b;M.IsHttp(b)||null!=a&&(c=M.Combine(a,b));fb._fnv.Reset();fb._fnv.PushString(c);return fb._fnv.GetString()};fb.__super__=V;fb.prototype=
p(V.prototype,{Clear:function(){this.userData=this.font=this.audio=this.image=this.text=this.bytes=null},toString:function(){return this.id+" "+this.fullUrl+":"+this.hashKey},Dispose:function(){V.prototype.Dispose.call(this);this.Clear();this.bytesLoaded=this.bytesTotal=1},get_file:function(){return null!=this.root?Z.replace(this.fullUrl,this.root,""):this.fullUrl},__class__:fb,__properties__:{get_file:"get_file"}});var M=function(a){this.Set(a)};f["lovedna.net.URL"]=M;M.__name__=["lovedna","net",
"URL"];M.Extension=function(a){M.instance.Set(a);return null==M.instance.ext?"":M.instance.ext};M.Directory=function(a){M.instance.Set(a);return null==M.instance.dir?"":M.instance.dir};M.WithoutExtension=function(a){M.instance.Set(a);M.instance.ext=null;return M.instance.toString()};M.WithoutDirectory=function(a){M.instance.Set(a);M.instance.dir=null;return M.instance.toString()};M.Combine=function(a,b){return""==a?b:M.AddSlash(a)+M.RemoveSlashes(b)};M.AddSlash=function(a){if(0==a.length)return"/";
var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");return b<c?c!=a.length-1?a+"\\":a:b!=a.length-1?a+"/":a};M.RemoveSlashes=function(a){try{for(;;){var b=u.cca(a,a.length-1);if(null==b)throw"__break__";switch(b){case 47:case 92:a=u.substr(a,0,-1);break;default:throw"__break__";}}}catch(d){if("__break__"!=d)throw d;}try{for(;;){var c=u.cca(a,0);if(null==c)throw"__break__";switch(c){case 47:case 92:a=u.substr(a,1,null);break;default:throw"__break__";}}}catch(d){if("__break__"!=d)throw d;}return a};M.IsHttp=
function(a){a=u.substr(a,0,7);return"http://"!=a?"https:/"==a:!0};M.HasParam=function(a){M.instance.Set(a);return null!=M.instance.param};M.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+(null==this.file?"":this.file)+(null==this.ext?"":"."+this.ext)+(null==this.param?"":"?"+this.param)},Set:function(a){this.clear();if(""==a||null==a)return this;switch(a){case ".":case "..":return this.dir=a,this.file="",this}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");
b<c?(this.dir=u.substr(a,0,c),a=u.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=u.substr(a,0,b),a=u.substr(a,b+1,null)):this.dir=null;-1!=a.indexOf("?")&&(b=a.split("?"),a=b.shift(),this.param=b.join("?"));b=a.lastIndexOf(".");-1!=b?(this.ext=u.substr(a,b+1,null),this.file=u.substr(a,0,b)):(this.ext=null,this.file=a);return this},clear:function(){this.param=this.ext=this.file=this.dir=null;this.backslash=!1},__class__:M};var ha=function(){K.call(this);this._local=bc.GetInstance();this.root=
ha._defaultRoot;this._fileMap=new y;this._fileList=[];null==this.root&&(this.root="");this._active=!0;this._loadDelayCall=new Pa(k(this,this.load));this._completeDelayCall=new Pa(k(this,this.completeDelayCall));this._bytesLoader=new ve;this._bytesLoader.AddEventListener(C.COMPLETE._type,k(this,this.bytesComplete));this._bytesLoader.AddEventListener(C.PROGRESS._type,k(this,this.bytesProgress))};f["lovedna.net.FileLoader"]=ha;ha.__name__=["lovedna","net","FileLoader"];ha.SetDefaultRoot=function(a){if(null==
ha._defaultRoot||""==ha._defaultRoot){var b=new M(a);a=b.toString();0<M.WithoutDirectory(a).length?(ha._defaultRoot=null==b.param?a:b.dir,ha._defaultRoot+=b.backslash?"\\":"/"):ha._defaultRoot=a}};ha.__super__=V;ha.prototype=p(V.prototype,{Load:function(a,b){var c=this.GetKey(a),d=this._fileMap;if(null!=h[c]?d.existsReserved(c):d.h.hasOwnProperty(c))return a=this._fileMap,null!=h[c]?a.getReserved(c):a.h[c];a=new fb(a,b,this.root);this._fileList.push(a);b=this._fileMap;null!=h[c]?b.setReserved(c,a):
b.h[c]=a;ha.progress.Add(a);null==this.current&&Pa.Add(this._loadDelayCall,.1);return a},getVersion:function(a){var b=ha._version;return(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(b=ha._version,null!=h[a]?b.getReserved(a):b.h[a]):ha._defaultVersion},GetKey:function(a){return fb.GetHashKey(this.root,a)},load:function(){!this._active||this._loading||1>this._fileList.length||(null==this.current&&(this.current=this._fileList.shift()),null==this.current||0<this.current.bytesLoaded?(ha.progress.Complete(this.current),
this.current=null,this.load()):this.reload())},reload:function(){if(this._active&&null!=this.current){this._loading=!0;ha.progress.Load(this.current);var a=this.getVersion(this.current.url);Y.trace("load "+this.current.url+" FV="+a,{fileName:"FileLoader.hx",lineNumber:170,className:"lovedna.net.FileLoader",methodName:"reload"});if(this.current.fromLocal){var b=this._local.GetSavePath(this.current.hashKey);if(this._local.Exists(b)&&(Y.trace("from local "+this.current.url,{fileName:"FileLoader.hx",
lineNumber:176,className:"lovedna.net.FileLoader",methodName:"reload"}),b=this.GetSaveFile(b),null!=b&&a==b.version)){this._bytesLoader.data=Ja.toBytes(b.bytes);this.bytesComplete();return}}if(""==a){if(this.current.requireBytes&&v.exists(this.current.url,"BINARY")){Y.trace("binary from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:195,className:"lovedna.net.FileLoader",methodName:"reload"});this._bytesLoader.data=v.getBytes(this.current.url);this.bytesComplete();return}b=
this.current.type;if(b==aa.IMAGE&&v.exists(this.current.url,"IMAGE")){Y.trace("image from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:204,className:"lovedna.net.FileLoader",methodName:"reload"});this.current.image=v.getImage(this.current.url);this.assetComplete();return}if(b==aa.TEXT&&v.exists(this.current.url,"TEXT")){Y.trace("text from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:211,className:"lovedna.net.FileLoader",methodName:"reload"});
this.current.text=v.getText(this.current.url);this.assetComplete();return}if(b==aa.SOUND){if(v.exists(this.current.url,"SOUND")){Y.trace("sound from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:220,className:"lovedna.net.FileLoader",methodName:"reload"});var c=v.getAudioBuffer(this.current.url);this.current.audio=new Oc(c);this.assetComplete()}v.exists(this.current.url,"MUSIC")&&(Y.trace("music from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:226,
className:"lovedna.net.FileLoader",methodName:"reload"}),c=v.getAudioBuffer(this.current.url),this.current.audio=new Oc(c),this.assetComplete())}if(b==aa.BINARY&&v.exists(this.current.url,"BINARY")){Y.trace("binary from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:233,className:"lovedna.net.FileLoader",methodName:"reload"});a=v.getBytes(this.current.url);this.current.bytes=Ja.fromBytes(a);this.assetComplete();return}if(b==aa.FONT&&v.exists(this.current.url,"FONT")){Y.trace("font from streaming "+
this.current.toString(),{fileName:"FileLoader.hx",lineNumber:240,className:"lovedna.net.FileLoader",methodName:"reload"});this.current.font=v.getFont(this.current.url);this.assetComplete();return}if(v.exists(this.current.url,"BINARY")){Y.trace("binary from streaming "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:247,className:"lovedna.net.FileLoader",methodName:"reload"});a=v.getBytes(this.current.url);this.current.bytes=Ja.fromBytes(a);this.bytesComplete();return}}b=this.current.fullUrl;
M.IsHttp(b);""!=a&&(b=M.HasParam(b)?b+("&FV="+a):b+("?FV="+a));this._bytesLoader.Load(new Vf(b))}},bytesComplete:function(){var a=this;Y.trace(this.current.toString()+" bytes complete ",{fileName:"FileLoader.hx",lineNumber:283,className:"lovedna.net.FileLoader",methodName:"bytesComplete"});if(null==this._bytesLoader.data)0<this.current.reloadCount?(Y.trace("warn",{fileName:"FileLoader.hx",lineNumber:288,className:"lovedna.net.FileLoader",methodName:"bytesComplete",customParams:[this.current.toString()+
" reload "+this.current.reloadCount]}),this.current.reloadCount--,this.reload()):(Y.trace("warn",{fileName:"FileLoader.hx",lineNumber:293,className:"lovedna.net.FileLoader",methodName:"bytesComplete",customParams:[this.current.toString()+" load error"]}),this.assetComplete());else{var b=null;null!=this._bytesLoader.data?(b=Ja.fromBytes(this._bytesLoader.data),this.current.bytes=b):b=this.current.bytes;var c=this.current.type;Y.trace(this.current.url+" loaded "+X.string(c),{fileName:"FileLoader.hx",
lineNumber:315,className:"lovedna.net.FileLoader",methodName:"bytesComplete"});var d=!0;c!=aa.BINARY&&(c==aa.IMAGE?(Y.trace("image size:"+Ja.get_length(b),{fileName:"FileLoader.hx",lineNumber:322,className:"lovedna.net.FileLoader",methodName:"bytesComplete"}),d=!1,b.position=0,T.loadFromBytes(Ja.toBytes(b)).onComplete(function(b){a.current.image=b;a.assetComplete()})):c==aa.SOUND?(this.current.audioBuffer=sa.fromBytes(Ja.toBytes(b)),this.current.audio=new Oc(this.current.audioBuffer)):c!=aa.FONT&&
c==aa.TEXT&&(c=Ja.get_length(b),this.current.text=b.readUTFBytes(c)));d&&this.assetComplete()}},bytesProgress:function(){this.current.bytesLoaded=C.PROGRESS.loaded;this.current.bytesTotal=C.PROGRESS.total;this.DispatchEvent(C.PROGRESS);ha.progress.Progress(this.current)},assetComplete:function(){Y.trace("complete "+this.current.toString(),{fileName:"FileLoader.hx",lineNumber:359,className:"lovedna.net.FileLoader",methodName:"assetComplete"});Pa.Add(this._completeDelayCall,.1)},completeDelayCall:function(){ha.progress.Complete(this.current);
0>=this.current.bytesLoaded&&(this.current.bytesLoaded=this.current.bytesTotal=1);this.DispatchEvent(C.COMPLETE);this._loading=!1;for(var a=this._fileMap.keys();a.hasNext();){var b=a.next(),c=this._fileMap;if((null!=h[b]?c.getReserved(b):c.h[b])==this.current){this._fileMap.remove(b);break}}this.current=null;Pa.Add(this._loadDelayCall,.1)},GetSaveFile:function(a){a=this._local.GetBytes(a);if(null==a)return null;var b=a.readUTF(),c=new db(0);a.readBytes(c);return new Wf(c,b)},__class__:ha});var Wf=
function(a,b){this.bytes=a;this.version=b};f["lovedna.net._FileLoader.SaveFile"]=Wf;Wf.__name__=["lovedna","net","_FileLoader","SaveFile"];Wf.prototype={__class__:Wf};var aa=f["lovedna.net.FileType"]={__ename__:!0,__constructs__:["BINARY","TEXT","IMAGE","SOUND","FONT"]};aa.BINARY=["BINARY",0];aa.BINARY.toString=B;aa.BINARY.__enum__=aa;aa.TEXT=["TEXT",1];aa.TEXT.toString=B;aa.TEXT.__enum__=aa;aa.IMAGE=["IMAGE",2];aa.IMAGE.toString=B;aa.IMAGE.__enum__=aa;aa.SOUND=["SOUND",3];aa.SOUND.toString=B;aa.SOUND.__enum__=
aa;aa.FONT=["FONT",4];aa.FONT.toString=B;aa.FONT.__enum__=aa;var bc=function(){this.SetPath(M.Combine("","assets"))};f["lovedna.net.LocalStore"]=bc;bc.__name__=["lovedna","net","LocalStore"];bc.GetInstance=function(){null==bc._instance&&(bc._instance=new bc);return bc._instance};bc.prototype={SetPath:function(a){var b=new M(a);a=b.toString();0<M.WithoutDirectory(a).length?(this._path=null==b.param?a:b.dir,this._path+=b.backslash?"\\":"/"):this._path=a},GetSavePath:function(a){return Z.replace(Z.replace(A.Trim(a),
"\\","/"),"/","_")},GetBytes:function(a){return null},Exists:function(a){return!1},__class__:bc};var Vf=function(a){null!=a&&(this.url=a);this.contentType="application/x-www-form-urlencoded";this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new y;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1};f["lovedna.net.URLRequest"]=Vf;Vf.__name__=["lovedna","net","URLRequest"];Vf.prototype={__class__:Vf};var Gg=function(a,b){null==b&&(b="");null==a&&(a="");this.name=
a;this.value=b};f["lovedna.net.URLRequestHeader"]=Gg;Gg.__name__=["lovedna","net","URLRequestHeader"];Gg.prototype={__class__:Gg};var Xf=function(){this.type=2;this.color=(new wa).FromRGBInt(11259375)};f["lovedna.play.CameraClearFlags"]=Xf;Xf.__name__=["lovedna","play","CameraClearFlags"];Xf.prototype={__class__:Xf};var m=function(a,b,c){null==c&&(c=0);null==b&&(b=0);this.name=a;this.size=b;this.index=c};f["lovedna.play.DefineName"]=m;m.__name__=["lovedna","play","DefineName"];m.prototype={__class__:m};
var Qb=function(){this.pause=this.step=!1;K.call(this);Qb.current=this;this._step=!1;this._worldList=[];this._width=480;this._height=800;this._active=this._focus=this._resize=!0;this._lost=!1;this.color=new wa;this.color.set_rgba(-1412567041);this._backBufferCommand=new Ya;this._startBuffer=new Ya;this._endBuffer=new Ya;q.Init();var a=this._screen=new ca(1,1,1,1);a.x=this._width;a.y=this._height;a.z=1/this._width;a.w=1/this._height;a=this._startBuffer;var b=new we;a._commands.Add(b);a.enabled=!0;
a.length=a._commands._length;this._uniforms=new y;a=this._endBuffer;b=new xe;a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;this._material=Gb.material};f["lovedna.play.Driver"]=Qb;Qb.__name__=["lovedna","play","Driver"];Qb.__super__=V;Qb.prototype=p(V.prototype,{AddWorld:function(a){null!=a&&(u.remove(this._worldList,a),this._worldList.push(a),a.data.resize(this._width,this._height))},onActivate:function(){this._active=!0},onDeactivate:function(){this._active=!1},onResize:function(a,
b){this._width=a;this._height=b;q.screenWidth=this._width;q.screenHeight=this._height;a=this._screen;a.x=this._width;a.y=this._height;a.z=1/this._width;a.w=1/this._height;this._resize=!0},onFocusIn:function(){this._focus=!0},onFocusOut:function(){this._focus=!1},onWorldUpdate:function(){if(this._focus&&this._active&&!this._lost){this.DispatchEvent(C.ENTER_FRAME);va.Reset();($a.pause=this.pause)&&this.step&&($a.pause=!1);$a.tick();H.enterFrame();for(var a=0,b=this._worldList;a<b.length;){var c=b[a];
++a;this._resize&&c.data.resize(this._width,this._height);c.enterFrame()}H.exitFrame();Xa.Reset()}},onWorldRender:function(){if(this._focus&&this._active&&!this._lost&&(!this.pause||this.step)){this.step=!1;q.EnterFrame();var a=null!=Gb.backBuffer;if(a){q.PushRenderTarget(Gb.backBuffer);var b=this._resize;if(this._currentBackBuffer!=Gb.backBuffer){this._currentBackBuffer=Gb.backBuffer;this._backBufferCommand.Clear();b=this._backBufferCommand;var c=this._uniforms;c=(new kc).Set(c);b._commands.Add(c);
b.enabled=!0;b.length=b._commands._length;b=this._backBufferCommand;c=this._currentBackBuffer;var d=this._material;null!=c&&null!=c&&(c=(new Oa).Set(c,null,d),b._commands.Add(c),b.enabled=!0,b.length=b._commands._length);b=this._uniforms;c=m.GRAB.name;d=(new Ea(m.GRAB.name)).SetTexture(this._currentBackBuffer);null!=h[c]?b.setReserved(c,d):b.h[c]=d;b=this._uniforms;c=m.SCREEN_PARAMS.name;d=(new Ea(m.SCREEN_PARAMS.name)).SetFloat4(this._screen);null!=h[c]?b.setReserved(c,d):b.h[c]=d;b=!0}Gb.resizeBackBuffer&&
b&&(b=Gb.backBuffer.rect,b.x=0,b.y=0,b.z=this._width,b.w=this._height)}q.Clear(!0,this.color,!0,1,!0,0);this._startBuffer.Execute();b=0;for(c=this._worldList;b<c.length;)d=c[b],++b,d.render();a&&this._backBufferCommand.Execute();this._endBuffer.Execute();a=0;for(b=this._worldList;a<b.length;)c=b[a],++a,c.exitFrame();va.End();q.ExitFrame();Xa.Reset();this.DispatchEvent(C.EXIT_FRAME);this._resize=!1;if(null!=Qb.onRender)Qb.onRender()}},__class__:Qb});var va=function(){};f["lovedna.play.Info"]=va;va.__name__=
["lovedna","play","Info"];va.Reset=function(){va.actorCount=0;va.drawCall=0;va.commandCount=0};va.End=function(){null==va.times&&(va.times=[],va.cacheCount=0);var a=.001*(new Date).getTime()*w.scale+w._timeOffset;for(va.times.push(a);va.times[0]<a-1;)va.times.shift();a=va.times.length;va.currentFPS=Math.round((a+va.cacheCount)/2);a!=va.cacheCount&&(va.cacheCount=a)};var Ua=function(a){if(null==a)this.data=new pb(-1);else{this.data=new pb(0);for(var b=a.length;0<b--;){var c=Ua.NameToLayer(a[b]);this.data.Open(c)}0==
this.data.value&&(this.data.value=-1)}};f["lovedna.play.LayerMask"]=Ua;Ua.__name__=["lovedna","play","LayerMask"];Ua.SetLayerName=function(a,b){if(null==Ua._names[a]){Ua._names[a]=b;var c=Ua._layers;null!=h[b]?c.setReserved(b,a):c.h[b]=a}};Ua.NameToLayer=function(a){var b=Ua._layers;return null!=h[a]?b.getReserved(a):b.h[a]};Ua.prototype={Exist:function(a){return this.data.IsOpen(a)},__class__:Ua};var Uc=function(){this.uniforms=new y;this.state=new re;this.subMesh=-1;this.enabled=!0;this.shader=
new Ra;this.renderQueue=2E4;this._buffer=new Ya;this.GetUniform(m.UV_SET.name).SetFloat4(new ca(0,0,1,1));this.GetUniform(m.COLOR.name).SetFloat4(new ca(1,1,1,1))};f["lovedna.play.Material"]=Uc;Uc.__name__=["lovedna","play","Material"];Uc.prototype={GetUniform:function(a){var b=this.uniforms;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.uniforms,null!=h[a]?b.getReserved(a):b.h[a];b=new Ea(a);var c=this.uniforms;null!=h[a]?c.setReserved(a,b):c.h[a]=b;return b},SetFloat2:function(a,
b){return this.GetUniform(a).SetFloat2(b)},SetMatrix:function(a,b){return this.GetUniform(a).SetMatrix(b)},SetMatrixHandler:function(a,b){return this.GetUniform(a).SetMatrixHandler(b)},SetMatrixArray:function(a,b){return this.GetUniform(a).SetMatrixArray(b)},SetTexture:function(a,b){null==b&&(b=m.TEX.name);if(null==a)return this.shader.Define(b,null),this.shader.Define(m.UV_SET.name,null),this.uniforms.remove(b),null;this.shader.Define(b);this.shader.Define(m.UV_SET.name);return this.GetUniform(b).SetTexture(a)},
__class__:Uc};var t=function(a){ma.call(this,a)};f["lovedna.play.PlayEvent"]=t;t.__name__=["lovedna","play","PlayEvent"];t.__super__=ma;t.prototype=p(ma.prototype,{__class__:t});var H=function(){};f["lovedna.play.PlayInput"]=H;H.__name__=["lovedna","play","PlayInput"];H.GetTouch=function(a){null==a&&(a=0);if(a>=H._touchIdList._length)return null;a=H._touchIdList.Get(a);return Bb.driver._touchList[a]};H.TouchDown=function(a){null==a&&(a=0);return 1==H._touchDown.h[a]};H.HasKey=function(a){return 1==
H._keying.h[a]};H.enterFrame=function(){if(!H._init){H._init=!0;H._touchDown=new ea;H._touchUp=new ea;H._touchIdList=new z;H._keying=new ea;H._keyDown=new ea;H._keyUp=new ea;for(var a=10;0<a--;)H._touchDown.h[a]=!1,H._touchUp.h[a]=!1;Bb.driver.AddEventListener(C.TOUCH_CHANGE._type,H.onTouchChange);Aa.driver.AddEventListener(C.KEY_CHANGE._type,H.onKeyChange);H.touchPosition=new F;H.touchCount=0}H.stop=!1};H.exitFrame=function(){if(H._touchChange){H._touchChange=!1;for(var a=H._touchIdList._length;0<
a--;){var b=H._touchIdList.Get(a);H._touchUp.h[b]&&H._touchIdList.RemoveAt(a);H._touchUp.h[b]=!1;H._touchDown.h[b]=!1}H.touchCount=H._touchIdList._length}if(H._keyChange){H._keyChange=!1;for(a=H._keyDown.keys();a.hasNext();)b=a.next(),H._keyDown.h[b]=!1;for(a=H._keyUp.keys();a.hasNext();)b=a.next(),H._keyUp.h[b]=!1}};H.onTouchChange=function(){var a=C.TOUCH_CHANGE.touch,b=a.type,c=H.touchPosition,d=a.position;c.x=d.x;c.y=d.y;1==b?1!=H._touchDown.h[a.id]&&(H._touchIdList.Add(a.id),H._touchDown.h[a.id]=
!0,H._touchChange=!0,H.touchCount=H._touchIdList._length):3==b&&(H._touchUp.h[a.id]=!0,H._touchChange=!0)};H.onKeyChange=function(){var a=C.KEY_CHANGE.key,b=a.code;1==a.type?(H._keyDown.h[b]=!0,H._keying.h[b]=!0):(H._keyUp.h[b]=!0,H._keying.h[b]=!1);H._keyChange=!0};var $a=function(){};f["lovedna.play.PlayTime"]=$a;$a.__name__=["lovedna","play","PlayTime"];$a.tick=function(){0==$a._time&&($a._time=.001*(new Date).getTime()*w.scale+w._timeOffset-.01);var a=.001*(new Date).getTime()*w.scale+w._timeOffset,
b=a-$a._time;$a._time=a;$a.pause||($a._now+=b)};var Ac=function(a,b,c){this.sourceVert=b;this.sourceFrag=c;this.id=Ac._id++;this.name=a;if(null==b||""==b)b=Ra.defaultCode.sourceVert;if(null==c||""==c)c=Ra.defaultCode.sourceFrag;this._vert=b;this._frag=c};f["lovedna.play.ShaderCode"]=Ac;Ac.__name__=["lovedna","play","ShaderCode"];Ac.prototype={GetAttributeName:function(a){this.init();var b=this._attributeNames;return null!=h[a]?b.getReserved(a):b.h[a]},GetUniformName:function(a){this.init();var b=
this._uniformNames;return null!=h[a]?b.getReserved(a):b.h[a]},init:function(){this._init||(this._init=!0,this._attributeNames=new y,this._uniformNames=new y,this._defineMap=new y,this._vert="\n"+this.parse(this._vert),this._frag="\n"+this.parse(this._frag))},parse:function(a){a=new Sc(a);for(var b="";0<a._length-a._position;){var c=a.ReadLine();b+=this.parseLine(c)+"\n"}return b},parseLine:function(a){for(var b=A.Trim(a),c="",d=[],e="",g=0,f=0,k=b.length;f<k;){var l=f++;l=b.charAt(l);if(" "==l||":"==
l||";"==l){d[g]=c;if(0==g)if("attribute"==c||"uniform"==c)e=a.indexOf(c),e=u.substr(a,0,e);else if("#ifdef"==c)e=a.indexOf(c),e=u.substr(a,0,e);else{g=0;break}++g;c=""}else c+=l}if(0!=g){""!=c&&(d[g]=c);b=d[0];if("attribute"==b)return a=this._attributeNames,g=d[3],f=d[2],null!=h[g]?a.setReserved(g,f):a.h[g]=f,e+b+" "+d[1]+" "+d[2]+";";if("uniform"==b)return a=d[2],g=a.indexOf("["),-1!=g&&(a=u.substr(a,0,g)),g=this._uniformNames,f=d[3],null!=h[f]?g.setReserved(f,a):g.h[f]=a,e+b+" "+d[1]+" "+d[2]+";";
"#ifdef"==b&&(d=d[1],null!=d&&(e=this._defineMap,(null!=h[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||(e=this._defineMap,null!=h[d]?e.setReserved(d,!0):e.h[d]=!0)))}return a},get_vert:function(){this.init();return this._vert},get_frag:function(){this.init();return this._frag},__class__:Ac,__properties__:{get_frag:"get_frag",get_vert:"get_vert"}};var Yf=function(){this._vert="precision highp float;\nprecision highp int;\nprecision lowp sampler2D;\nprecision lowp samplerCube;\n";this._frag="precision highp float;\nprecision mediump int;\nprecision lowp sampler2D;\nprecision lowp samplerCube;\n"};
f["lovedna.play.ShaderPrecision"]=Yf;Yf.__name__=["lovedna","play","ShaderPrecision"];Yf.prototype={GetVertPrecision:function(){return this._vert},GetFragPrecision:function(){return this._frag},__class__:Yf};var Ra=function(a){this._structDefines=new y;this._customDefines=new y;this._disableDefines=new y;this._unDefines=new y;this._globalDefine="";null==a&&(a=Ra.defaultCode);this.SetCode(a)};f["lovedna.play.Shader"]=Ra;Ra.__name__=["lovedna","play","Shader"];Ra.prototype={SetGlobalDefine:function(a){a!=
this._globalDefine&&(this._globalDefine=a,this.dirtyDefine())},Define:function(a,b){null==b&&(b="");if(null==b)this._customDefines.remove(a)&&this.dirtyDefine();else{var c=this._customDefines;(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))||(c=this._customDefines,null!=h[a]?c.setReserved(a,b):c.h[a]=b,this.dirtyDefine())}},DefineStruct:function(a){for(var b=this._structDefines.keys();b.hasNext();){var c=b.next();this._structDefines.remove(c)}b=a.length;if(0<b)for(;0<b--;)if(c=a[b],null!=c){var d=
c.count;if(!(1>d))for(;0<d--;){var e=this._structDefines,g=c._list[d].name;null!=h[g]?e.setReserved(g,""):e.h[g]=""}}this.dirtyDefine()},UnDefine:function(a,b){null==b&&(b=!0);var c=this._unDefines;(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this._unDefines,(null!=h[a]?c.getReserved(a):c.h[a])!=b&&(c=this._unDefines,null!=h[a]?c.setReserved(a,b):c.h[a]=b,this.dirtyDefine())):(c=this._unDefines,null!=h[a]?c.setReserved(a,b):c.h[a]=b,this.dirtyDefine())},SetCode:function(a){this.dirtyDefine();
this._code=a},Bind:function(){if(null==this._code||0==this.get_id())return!1;if(null==this._program){var a=Ra._programMap,b=this.get_id();a.h.hasOwnProperty(b)?(a=Ra._programMap,b=this.get_id(),this._program=a.h[b]):(a=this.createDefine(),this._program=new ac(a+Ra.defaultPrecision.GetVertPrecision()+this._code.get_vert(),a+Ra.defaultPrecision.GetFragPrecision()+this._code.get_frag()),a=Ra._programMap,b=this.get_id(),a.h[b]=this._program)}if(null==this._program||!this._program.enabled)return!1;this._program.Bind();
return!0},GetBufferInput:function(a){if(null==this._code||null==this._program)return null;var b=this._code.GetAttributeName(a);if(null!=b){a=this._program;if(null==a._bufferAttribs)return null;a=a._bufferAttribs;return null!=h[b]?a.getReserved(b):a.h[b]}b=this._program;if(null==b._bufferAttribs)return null;b=b._bufferAttribs;return null!=h[a]?b.getReserved(a):b.h[a]},GetUniformInput:function(a){if(null==this._code||null==this._program)return null;var b=this._code.GetUniformName(a);if(null!=b)return a=
this._program._uniforms,null!=h[b]?a.getReserved(b):a.h[b];b=this._program._uniforms;return null!=h[a]?b.getReserved(a):b.h[a]},dirtyDefine:function(){this._id=0;this._define=this._program=null;this._idChanged=!0},createDefine:function(){if(null!=this._define)return this._define;if(null==this._code)return"";for(var a=[],b=new y,c=this._structDefines.keys();c.hasNext();){var d=c.next(),e=this._disableDefines;(null!=h[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||(null!=h[d]?b.existsReserved(d):b.h.hasOwnProperty(d))||
(a.push(d),e=this._structDefines,e=null!=h[d]?e.getReserved(d):e.h[d],null!=h[d]?b.setReserved(d,e):b.h[d]=e)}for(c=this._customDefines.keys();c.hasNext();)d=c.next(),e=this._disableDefines,(null!=h[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||(null!=h[d]?b.existsReserved(d):b.h.hasOwnProperty(d))||(a.push(d),e=this._customDefines,e=null!=h[d]?e.getReserved(d):e.h[d],null!=h[d]?b.setReserved(d,e):b.h[d]=e);c=a.length;1<c&&a.sort(k(this,this.SortDefine));for(this._define=this._globalDefine+"\n";0<
c--;)d=a[c],e=null!=h[d]?b.getReserved(d):b.h[d],b.remove(d),null==e&&(e=""),this._define+="#define "+d+" "+e+"\n";a=[];for(c=this._unDefines.keys();c.hasNext();)d=c.next(),(null!=h[d]?b.existsReserved(d):b.h.hasOwnProperty(d))||(e=this._unDefines,(null!=h[d]?e.getReserved(d):e.h[d])&&a.push(d));c=a.length;1<c&&a.sort(k(this,this.SortDefine));for(b="";0<c--;)b+="#undef "+a[c]+"\n";return this._define+=b},SortDefine:function(a,b){return a!=b?a>b?1:-1:0},get_id:function(){this._idChanged&&(this._idChanged=
!1,Ra._fnv.Reset(),Ra._fnv.PushInt(this._code.id),Ra._fnv.PushString(this.createDefine()),this._id=Ra._fnv.GetCode());return this._id},__class__:Ra,__properties__:{get_id:"get_id"}};var Zf=function(){this.success=!0;this.commandCount=this.drawCall=0;this.currentVertexBuffer=new z;this.currentVertexBufferStructs=new z;this.currentUniforms=new y;this.globalUniforms=new y;this.globalDefines=new y};f["lovedna.play.render.CommandContext"]=Zf;Zf.__name__=["lovedna","play","render","CommandContext"];Zf.prototype=
{AddGlobalDefine:function(a,b){null==b&&(b="");if(null==b)this.globalDefines.remove(a)&&(this._globalDefine=null);else{var c=this.globalDefines;(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))||(c=this.globalDefines,null!=h[a]?c.setReserved(a,b):c.h[a]=b,this._globalDefine=null)}},GetGlobalDefine:function(){if(null!=this._globalDefine)return this._globalDefine;for(var a=[],b=new y,c=this.globalDefines.keys();c.hasNext();){var d=c.next();a.push(d);var e=this.globalDefines;e=null!=h[d]?e.getReserved(d):
e.h[d];null!=h[d]?b.setReserved(d,e):b.h[d]=e}c=a.length;1<c&&a.sort(k(this,this.SortDefine));for(this._globalDefine="";0<c--;)d=a[c],e=null!=h[d]?b.getReserved(d):b.h[d],null==e&&(e=""),this._globalDefine+="#define "+d+" "+e+"\n";return this._globalDefine},Reset:function(){this.commandCount=this.drawCall=0},DrawCall:function(){this.drawCall++;this.currentVertexBuffer.Clear();this.currentVertexBufferStructs.Clear();var a=this.currentUniforms;for(a=new tb(a,a.arrayKeys());a.hasNext();){var b=a.next();
this.currentUniforms.remove(b.name)}this.currentMaterial=this.currentIndexBuffer=null},ClearGlobalUniforms:function(){for(var a=this.globalUniforms.keys();a.hasNext();){var b=a.next();this.globalUniforms.remove(b)}},ClearGlobalDefines:function(){for(var a=this.globalDefines.keys();a.hasNext();){var b=a.next();this.globalDefines.remove(b)}this._globalDefine=null},SortDefine:function(a,b){return a!=b?a>b?1:-1:0},__class__:Zf};var Ya=function(){this._commands=new z;this.ctx=Ya._ctx;this.sortData=new $f};
f["lovedna.play.render.CommandBuffer"]=Ya;Ya.__name__=["lovedna","play","render","CommandBuffer"];Ya.prototype={Clear:function(){this.enabled=!1;for(var a=this._commands._length;0<a--;)this._commands.Clear();this._commands.Clear();this.length=0},Execute:function(){Ya.current=this;var a=this._commands._length;this.ctx.success=!0;for(var b=0;b<a;){var c=b++;c=this._commands.Get(c);if(null==c||!this.ctx.success)return;c.Enter(this.ctx);c.Execute();this.ctx.commandCount++;if(!this.ctx.success)return}Ya.current=
null},__class__:Ya};var $f=function(){this._pos=new l;this._posTime=-1};f["lovedna.play.render.SortData"]=$f;$f.__name__=["lovedna","play","render","SortData"];$f.prototype={UpdateDistance:function(a,b){if(this._posTime!=a.updateTime){var c=this._pos,d=this.offset;null!=d&&d!=c&&(c.x=d.x,c.y=d.y,c.z=d.z);a.localToWorld.MultiplyPoint(this._pos);this._posTime=a.updateTime}this.distance=b.DistanceToSquared(this._pos)},__class__:$f};var Gb=function(){};f["lovedna.play.Screen"]=Gb;Gb.__name__=["lovedna",
"play","Screen"];var gb=f["lovedna.play.ShadowCastingMode"]={__ename__:!0,__constructs__:["Off","On","TwoSided","ShadowsOnly"]};gb.Off=["Off",0];gb.Off.toString=B;gb.Off.__enum__=gb;gb.On=["On",1];gb.On.toString=B;gb.On.__enum__=gb;gb.TwoSided=["TwoSided",2];gb.TwoSided.toString=B;gb.TwoSided.__enum__=gb;gb.ShadowsOnly=["ShadowsOnly",3];gb.ShadowsOnly.toString=B;gb.ShadowsOnly.__enum__=gb;var ec=function(){U.call(this);this.data=new ag(this);this.world=this;this.parent=this};f["lovedna.play.World"]=
ec;ec.__name__=["lovedna","play","World"];ec.__super__=U;ec.prototype=p(U.prototype,{enterFrame:function(){ec.current=this;this.data.tick();this.deltaTime=this.data.deltaTime;this.data.update()},render:function(){ec.current=this;this.updateTime=this._updateTime=0;this._enabled=!0;this._needUpdate=!1;this.data.render()},exitFrame:function(){this.DispatchEvent(t.OnPostRender)},__class__:ec});var ag=function(a){this.fixedCount=1;this.maxDeltaTime=.02;this.fixedDeltaTime=.03333333333333333;this._world=
a;this._actorList=new z;this._actorMap=new ea;this._addMap=new ea;this.deltaTime=0;this._now=$a._now;this._time=0;this._collectors=new z;this.lights=new ye;this.cameras=new ze;this.renderers=new cd;this.shadows=new cd;this.colliders=new Ae;this.AddCollector(this.lights);this.AddCollector(this.cameras);this.AddCollector(this.renderers);this.AddCollector(this.shadows);this.AddCollector(this.colliders);this.width=480;this.height=800;this.screenParams=new ca(this.width,this.height,this.width/this.height,
0);this._resize=!1};f["lovedna.play.WorldData"]=ag;ag.__name__=["lovedna","play","WorldData"];ag.prototype={AddCollector:function(a){null!=a&&(this._collectors.Remove(a),this._collectors.Add(a))},resize:function(a,b){this.width=a;this.height=b;this._resize=!0;a=this.screenParams;a.x=this.width;a.y=this.height;a.z=1/this.width;a.w=1/this.height},tick:function(){var a=$a._now;this.deltaTime=a-this._now;this.deltaTime>this.maxDeltaTime&&(this.deltaTime=this.maxDeltaTime);this._time+=this.deltaTime;this.fixedCount=
0;this._time>=this.fixedDeltaTime&&(this.fixedCount=this._time/this.fixedDeltaTime|0,this._time%=this.fixedDeltaTime);this._now=a},update:function(){this._rebuildActorList&&(this._rebuildActorList=!1,this.buildActorList());Na.current=this.cameras.Get(0);null==Na.current&&(Na.current=this.activeCamera);var a=this._actorList._length;for(var b=0;b<a;){var c=b++;c=this._actorList.Get(c);var d=this.fixedDeltaTime;if(c._enabled)if(c._needUpdate=!1,c.deltaTime=c.parent.deltaTime*c.timeScale,0==c.deltaTime)c.DispatchEvent(t.onPauseInput);
else{var e=c.world.data.fixedCount;if(0<e&&c.HasEventListener(t.onFixedInput._type)){var g=c.deltaTime;for(c.deltaTime=d;0<e--;)c.DispatchEvent(t.onFixedInput);c.deltaTime=g}c.DispatchEvent(t.onInput)}}for(b=0;b<a;)c=b++,c=this._actorList.Get(c),c._enabled&&0!=c.deltaTime&&c.DispatchEvent(t.onInputFinish);this._rebuildActorList&&(this._rebuildActorList=!1,this.buildActorList());for(a=this._collectors._length;0<a--;)this._collectors.Get(a).Start();a=this._actorList._length;for(b=0;b<a;)c=b++,c=this._actorList.Get(c),
this._resize&&c.DispatchEvent(t.onScreenResize),c._onUpdate();va.actorCount+=a;for(a=this._collectors._length;0<a--;)this._collectors.Get(a).End();a=0;for(b=this._actorList._length;a<b;)c=a++,c=this._actorList.Get(c),c._enabled&&0!=c.deltaTime&&c.DispatchEvent(t.onOutput);this._resize=!1},render:function(){this._world.DispatchEvent(t.OnPreRender);var a=this.cameras.count;if(0<a)for(var b=0;b<a;){var c=b++;c=this.cameras.Get(c);c.render&&c.Render()}this._world.DispatchEvent(t.OnPostRender)},buildActorList:function(){var a;
for(a=this._actorList._length;0<a--;){var b=this._actorList.Get(a);this._addMap.h[b.id]=b}this._actorList.Clear();this._world._visit(this._actorList);for(a=this._actorList._length;0<a--;)b=this._actorList.Get(a),this._actorMap.h.hasOwnProperty(b.id)||(b.world=this._world,b.DispatchEvent(t.onAdd)),this._actorMap.h[b.id]=b,this._addMap.remove(b.id);for(a=this._addMap.iterator();a.hasNext();)b=a.next(),b.DispatchEvent(t.onRemove),b.world=null,this._addMap.remove(b.id),this._actorMap.remove(b.id)},__class__:ag};
var bg=function(){};f["lovedna.play.collectors.IComponentCollector"]=bg;bg.__name__=["lovedna","play","collectors","IComponentCollector"];bg.prototype={__class__:bg};var Sa=function(){};f["lovedna.play.collectors.CollectorBase"]=Sa;Sa.__name__=["lovedna","play","collectors","CollectorBase"];Sa.__interfaces__=[bg];Sa.prototype={Start:function(){},End:function(){},__class__:Sa};var ze=function(){this._list=new z};f["lovedna.play.collectors.CameraCollector"]=ze;ze.__name__=["lovedna","play","collectors",
"CameraCollector"];ze.__super__=Sa;ze.prototype=p(Sa.prototype,{Get:function(a){return this._list.Get(a)},Add:function(a){this._list.Add(a)},Start:function(){Sa.prototype.Start.call(this);this._list.Clear()},End:function(){Sa.prototype.End.call(this);this.count=this._list._length;1<this.count&&this._list.Sort(k(this,this.sort))},sort:function(a,b){a=a.layer;b=b.layer;return a==b?0:a>b?1:-1},__class__:ze});var Ae=function(){this._list=new z};f["lovedna.play.collectors.ColliderCollector"]=Ae;Ae.__name__=
["lovedna","play","collectors","ColliderCollector"];Ae.__super__=Sa;Ae.prototype=p(Sa.prototype,{Start:function(){Sa.prototype.Start.call(this);this._list.Clear()},End:function(){Sa.prototype.End.call(this);this.count=this._list._length},__class__:Ae});var ye=function(){this._list=new z};f["lovedna.play.collectors.LightCollector"]=ye;ye.__name__=["lovedna","play","collectors","LightCollector"];ye.__super__=Sa;ye.prototype=p(Sa.prototype,{Get:function(a){return this._list.Get(a)},Add:function(a){this._list.Add(a)},
Start:function(){Sa.prototype.Start.call(this);this._list.Clear()},End:function(){Sa.prototype.End.call(this);this.count=this._list._length;1<this.count&&this._list.Sort(k(this,this.sort))},sort:function(a,b){a=a.layer;b=b.layer;return a==b?0:a>b?1:-1},__class__:ye});var cd=function(){this._list=new z};f["lovedna.play.collectors.RendererCollector"]=cd;cd.__name__=["lovedna","play","collectors","RendererCollector"];cd.__super__=Sa;cd.prototype=p(Sa.prototype,{Start:function(){Sa.prototype.Start.call(this);
this._list.Clear()},End:function(){Sa.prototype.End.call(this);this.count=this._list._length},__class__:cd});var Na=function(){K.call(this)};f["lovedna.play.components.Camera"]=Na;Na.__name__=["lovedna","play","components","Camera"];Na.__super__=G;Na.prototype=p(G.prototype,{ViewportToWorldPoint:function(a){var b=l._pool.Get();b.x=a.x;b.y=a.y;b.z=-1;var c=l._pool.Get();null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);c.z=1;this.projectionViewInverseMatrix.MultiplyPoint(b,!0);this.projectionViewInverseMatrix.MultiplyPoint(c,
!0);c.x-=b.x;c.y-=b.y;c.z-=b.z;a=A.LerpTo(-1,1,0,1,a.z);c.x*=a;c.y*=a;c.z*=a;c.x+=b.x;c.y+=b.y;c.z+=b.z;return c},WorldToViewport:function(a){var b=l._pool.Get();null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);this.projectionViewMatrix.MultiplyPoint(b,!0);return b},Render:function(){this._rendererData.Clear(this.actor.world.data);this._rendererData.Add(this);this._rendererData.Render()},onConstruct:function(){G.prototype.onConstruct.call(this);this.clearFlags=new Xf;this.updateTime=this._updateTime=0;this.set_cullingMask(new Ua);
this.set_orthographic(!1);this.orthographicScale=1;this.layer=0;this.render=!0;this.viewMatrix=this.worldToCameraMatrix=new na;this.viewInverseMatrix=this.cameraToWorldMatrix=new na;this.projectionMatrix=new na;this.projectionViewMatrix=new na;this.projectionViewInverseMatrix=new na;this.set_nearClipPlane(.1);this.set_farClipPlane(500);this.set_fieldOfView(60);this.frustum=new Of;this._eyePosition=new l;this._projection_params=new ca(this.nearClipPlane,this.farClipPlane,1/(this.farClipPlane-this.nearClipPlane),
0);this._target_params=new ca(1,1,1,1);this.preBuffer=new Ya;this.postBuffer=new Ya;var a=this._uniformMap=new y,b=m.P.name,c=(new Ea(m.P.name)).SetMatrix(this.projectionMatrix);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.V.name;c=(new Ea(m.V.name)).SetMatrix(this.viewMatrix);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.VP.name;c=(new Ea(m.VP.name)).SetMatrix(this.projectionViewMatrix);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.IV.name;c=(new Ea(m.IV.name)).SetMatrix(this.viewInverseMatrix);
null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.IVP.name;c=(new Ea(m.IVP.name)).SetMatrix(this.projectionViewInverseMatrix);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.EYE.name;c=(new Ea(m.EYE.name)).SetFloat3(this._eyePosition);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.PROJECTION_PARAMS.name;c=(new Ea(m.PROJECTION_PARAMS.name)).SetFloat4(this._projection_params);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.TARGET_PARAMS.name;c=
(new Ea(m.TARGET_PARAMS.name)).SetFloat4(this._target_params);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this.preBuffer;b=k(this,this.onPreRender);null!=b&&(b=(new lc).Set(b),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length);a=this.preBuffer;b=this._uniformMap;b=(new kc).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this.preBuffer;b=this.clearFlags;b=(new Be).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this.postBuffer;b=k(this,this.OnPostRender);
null!=b&&(b=(new lc).Set(b),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length);this._rendererData=new cg},onStart:function(){G.prototype.onStart.call(this);null==this.actor.world.data.activeCamera&&(this.actor.world.data.activeCamera=this);this.addEvent(t.onScreenResize,k(this,this.onScreenResize));this.addEvent(t.onTransform);this.addEvent(t.onCollect)},onTransform:function(){G.prototype.onTransform.call(this);this.updateTime++},onCollect:function(){G.prototype.onCollect.call(this);this.actor.world.data.cameras.Add(this);
this.updateCamera()},updateCamera:function(){if(this._updateTime!=this.updateTime){this._updateTime=this.updateTime;var a=this._eyePosition,b=this.actor.get_worldPosition();null!=b&&b!=a&&(a.x=b.x,a.y=b.y,a.z=b.z);a.Normalize();a=this.actor.localToWorld;b=null;null==b&&(b=l._pool.Get());b.x=a.m03;b.y=a.m13;b.z=a.m23;a=b;b=this.actor.localToWorld;var c=null;null==c&&(c=fa.get_temp());b=c.SetFromAxes(b.m00,b.m01,b.m02,b.m10,b.m11,b.m12,b.m20,b.m21,b.m22);c=l._pool.Get();c.x=0;c.y=0;c.z=1;b=b.MultiplyVector(c,
!0);c=this.farClipPlane-this.nearClipPlane;b.x*=c;b.y*=c;b.z*=c;b.x+=a.x;b.y+=a.y;b.z+=a.z;this.viewMatrix.LookAt(a,b);a=.5*this.actor.world.data.width;b=.5*this.actor.world.data.height;c=a/b;this.orthographic?this.projectionMatrix.SetOrtho(-a*this.orthographicScale,a*this.orthographicScale,-b*this.orthographicScale,b*this.orthographicScale,this.nearClipPlane,this.farClipPlane):this.projectionMatrix.SetProjection(this.nearClipPlane,this.farClipPlane,this.fieldOfView,c);a=this.projectionViewMatrix;
b=this.projectionMatrix;null!=b&&(a.m00=b.m00,a.m10=b.m10,a.m20=b.m20,a.m40=b.m40,a.m01=b.m01,a.m11=b.m11,a.m21=b.m21,a.m31=b.m31,a.m02=b.m02,a.m12=b.m12,a.m22=b.m22,a.m32=b.m32,a.m03=b.m03,a.m13=b.m13,a.m23=b.m23,a.m33=b.m33,a._dirty=!0);this.projectionViewMatrix.Append(this.viewMatrix);a=this.viewInverseMatrix;b=this.viewMatrix;null!=b&&(a.m00=b.m00,a.m10=b.m10,a.m20=b.m20,a.m40=b.m40,a.m01=b.m01,a.m11=b.m11,a.m21=b.m21,a.m31=b.m31,a.m02=b.m02,a.m12=b.m12,a.m22=b.m22,a.m32=b.m32,a.m03=b.m03,a.m13=
b.m13,a.m23=b.m23,a.m33=b.m33,a._dirty=!0);this.viewInverseMatrix.Inverse();this.projectionViewMatrix.MultiplyFrustum(this.frustum);a=this.projectionViewInverseMatrix;b=this.projectionViewMatrix;null!=b&&(a.m00=b.m00,a.m10=b.m10,a.m20=b.m20,a.m40=b.m40,a.m01=b.m01,a.m11=b.m11,a.m21=b.m21,a.m31=b.m31,a.m02=b.m02,a.m12=b.m12,a.m22=b.m22,a.m32=b.m32,a.m03=b.m03,a.m13=b.m13,a.m23=b.m23,a.m33=b.m33,a._dirty=!0);this.projectionViewInverseMatrix.Inverse();a=this._projection_params;a.x=this.nearClipPlane;
a.y=this.farClipPlane;a.z=1/(this.farClipPlane-this.nearClipPlane);a.w=0;this.actor.DispatchEvent(t.onCameraUpdate)}},onScreenResize:function(){this.updateTime++},onPreRender:function(){var a=this.actor.world.data.width,b=this.actor.world.data.height;null!=this.targetTexture&&(q.PushRenderTarget(this.targetTexture),a=this.targetTexture.size.x,b=this.targetTexture.size.y);var c=this._target_params;c.x=a;c.y=b;c.z=1/a;c.w=1/b;this.actor.DispatchEvent(t.OnPreRender)},OnPostRender:function(){null!=this.targetTexture&&
q.PopRenderTarget();this.actor.DispatchEvent(t.OnPostRender)},set_nearClipPlane:function(a){this.nearClipPlane!=a&&0<a&&this.updateTime++;return this.nearClipPlane=a},set_farClipPlane:function(a){this.farClipPlane!=a&&.01<a&&this.updateTime++;return this.farClipPlane=a},set_fieldOfView:function(a){this.fieldOfView!=a&&1<a&&180>a&&this.updateTime++;return this.fieldOfView=a},set_orthographic:function(a){this.orthographic!=a&&this.updateTime++;return this.orthographic=a},set_cullingMask:function(a){return this.cullingMask=
a},__class__:Na,__properties__:p(G.prototype.__properties__,{set_orthographic:"set_orthographic",set_farClipPlane:"set_farClipPlane",set_nearClipPlane:"set_nearClipPlane",set_fieldOfView:"set_fieldOfView",set_cullingMask:"set_cullingMask"})});var mc=function(){K.call(this)};f["lovedna.play.components.Collider"]=mc;mc.__name__=["lovedna","play","components","Collider"];mc.__super__=G;mc.prototype=p(G.prototype,{forceUpdate:function(){this.onColliderUpdate()},onConstruct:function(){G.prototype.onConstruct.call(this);
this.enabled=!0;this._transformTime=-1;this.autoUpdate=!1},onStart:function(){G.prototype.onStart.call(this);this.addEvent(t.onCollect)},onCollect:function(){G.prototype.onCollect.call(this);if(this.enabled&&this.isEnabled()&&(this.actor.world.data.colliders._list.Add(this),this.autoUpdate))this.onColliderUpdate()},isEnabled:function(){return!1},onColliderUpdate:function(){},__class__:mc});var Vc=function(){K.call(this)};f["lovedna.play.components.ColliderBox"]=Vc;Vc.__name__=["lovedna","play","components",
"ColliderBox"];Vc.__super__=mc;Vc.prototype=p(mc.prototype,{FromBounds:function(a){a=a.GetBox();var b=this.center,c=a.GetCenter();null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);b=this.size;c=a.max;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);a=a.min;b.x-=a.x;b.y-=a.y;b.z-=a.z},onConstruct:function(){mc.prototype.onConstruct.call(this);this.center=new l(0,0,0);this.size=new l(1,1,1);this._box=new Pb;this._updateTime=this.updateTime=0},isEnabled:function(){return!0},onColliderUpdate:function(){this._updateTime!=
this.updateTime&&(this._updateTime=this.updateTime,this._transformTime=-1);if(null!=this._box&&this._transformTime!=this.actor.updateTime){this._box.Reset();var a=this._box,b=l._pool.Get(),c=this.size;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);b.x*=.5;b.y*=.5;b.z*=.5;c=this.center;b.x+=c.x;b.y+=c.y;b.z+=c.z;a.ExpandByVertex(b);a=this._box;b=l._pool.Get();c=this.size;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);b.x*=-.5;b.y*=-.5;b.z*=-.5;c=this.center;b.x+=c.x;b.y+=c.y;b.z+=c.z;a.ExpandByVertex(b);this._box.ApplyMat4(this.actor.localToWorld);
this._transformTime=this.actor.updateTime}},__class__:Vc});var Cc=function(){K.call(this)};f["lovedna.play.components.G3D"]=Cc;Cc.__name__=["lovedna","play","components","G3D"];Cc.__super__=G;Cc.prototype=p(G.prototype,{onConstruct:function(){G.prototype.onConstruct.call(this);this._init=!1;this._jointMap=new y;this._skinMeshRenderers=new z;this._bones=new z},clear:function(){for(var a=this._jointMap.keys();a.hasNext();){var b=a.next(),c=this._jointMap;c=null!=h[b]?c.getReserved(b):c.h[b];c.actor.parent.RemoveChild(c.actor);
c.Clear();this._jointMap.remove(b)}this._init=!1},srcLoaded:function(){if(null!=this.src&&this.src.enabled){this.clear();this.src.RemoveEventListener(C.INIT._type,k(this,this.srcLoaded));var a=this.src.modelData.nodes;this._skinMeshRenderers.Clear();this._bones.Clear();for(var b=a.length,c=0;c<b;){var d=c++;this.parseNode(a[d],null)}b=this._skinMeshRenderers._length;if(0<b){a=0;for(c=b;a<c;){var e=a++;b=this._skinMeshRenderers.Get(e);d=b.bones;e=this._bones.Get(e);if(null!=e&&null!=e.bones&&0<e.bones.length)for(var g=
0,f=e.bones.length;g<f;){var l=g++;l=e.bones[l];var m=this._jointMap;m=null!=h[l]?m.getReserved(l):m.h[l];null==m?(Y.trace("error joint "+l,{fileName:"G3D.hx",lineNumber:104,className:"lovedna.play.components.G3D",methodName:"srcLoaded"}),d.push(new na)):d.push(m.animation)}b.set_bones(d)}a=this.actor.GetComponent(dd);null==a&&(a=this.actor.AddComponent(dd));null==a.resource?a.set_resource(this.src):a.SetJointMap(this._jointMap)}this._init=!0;this.DispatchEvent(C.INIT)}},parseNode:function(a,b){if(null!=
a.parts)for(var c=0,d=a.parts.length;c<d;){var e=c++;e=a.parts[e];var g=this.src.modelData.GetMeshByPartId(e.meshPartId).GetPart(e.meshPartId);var f=1==this.src.modelData.partCount?this.actor:new U;if(null!=e.bones){var k=f.AddComponent(Ce);this._skinMeshRenderers.Add(k);this._bones.Add(e)}else null==f.GetComponent(ua)&&f.AddComponent(ua);f.name=a.id;null!=b?b.actor.AddChildAt(f,-1,!1):this.actor.AddChildAt(f,-1,!1);k=f.position;var l=a.translation;null!=l&&l!=k&&(k.x=l.x,k.y=l.y,k.z=l.z);k=f.rotation;
l=a.rotation;null!=l&&(k.x=l.x,k.y=l.y,k.z=l.z,k.w=l.w);k=f.scale;l=a.scale;null!=l&&l!=k&&(k.x=l.x,k.y=l.y,k.z=l.z);f.updateTime+=.1;f=f.GetComponent(ua);f.set_mesh((new Ta).FromGeom(this.src.modelData.GetMeshByPartId(e.meshPartId).geom));f.material.subMesh=g.subMeshId;e=this.src.modelData.GetMaterial(e.materialId);null!=e&&(e=e.GetTexture(),null!=e&&(e=e.fileName,e=M.Combine(M.Directory(this.src.get_file().url),M.WithoutExtension(e)),f.material.SetTexture(N.texture.Get(e).texture),f.updateTime++))}else if(e=
a.id,d=new U,d.name=e,c=d.AddComponent(De),g=this._jointMap,null!=h[e]?g.setReserved(e,c):g.h[e]=c,k=this.src.modelData.GetBone(e),null!=k&&(e=new na,g=k.translation,f=k.rotation,k=k.scale,e.m00=1,e.m10=0,e.m20=0,e.m40=0,e.m01=0,e.m11=1,e.m21=0,e.m31=0,e.m02=0,e.m12=0,e.m22=1,e.m32=0,e.m03=0,e.m13=0,e.m23=0,e.m33=1,e._dirty=!0,null==g||1E-6>A.FloatToAbs(g.x)&&1E-6>A.FloatToAbs(g.y)&&1E-6>A.FloatToAbs(g.z)||(l=na._pool.Get(),l.m00=1,l.m10=0,l.m20=0,l.m40=0,l.m01=0,l.m11=1,l.m21=0,l.m31=0,l.m02=0,l.m12=
0,l.m22=1,l.m32=0,l.m03=0,l.m13=0,l.m23=0,l.m33=1,l._dirty=!0,l.m03=g.x,l.m13=g.y,l.m23=g.z,l._dirty=!0,e.Append(l)),null!=f&&e.AppendRotation(f),null!=k&&e.AppendScale(k),c.worldToLocal=e.Inverse()),null==b?this.actor.AddChildAt(d,-1,!1):b.actor.AddChildAt(d,-1,!1),c.UpdateLocal(a.translation,a.rotation,a.scale),null!=a.children)for(b=0,a=a.children;b<a.length;)d=a[b],++b,this.parseNode(d,c)},set_src:function(a){if(this.src==a)return a;null!=this.src&&(Y.trace("src  "+X.string(this.src.enabled),
{fileName:"G3D.hx",lineNumber:233,className:"lovedna.play.components.G3D",methodName:"set_src"}),this.src.enabled||this.src.RemoveEventListener(C.INIT._type,k(this,this.srcLoaded)));this._init=!1;this.src=a;this.src.enabled?this.srcLoaded():this.src.AddEventListener(C.INIT._type,k(this,this.srcLoaded));return this.src},get_jointMap:function(){return this._jointMap},__class__:Cc,__properties__:p(G.prototype.__properties__,{get_jointMap:"get_jointMap",set_src:"set_src"})});var dd=function(){K.call(this)};
f["lovedna.play.components.G3DAnimator"]=dd;dd.__name__=["lovedna","play","components","G3DAnimator"];dd.__super__=G;dd.prototype=p(G.prototype,{onConstruct:function(){G.prototype.onConstruct.call(this);this.update=this.enabled=!1;this._totalTime=0;this._loop=-1;this._time=new F;this._preTime=new F;this._t=new l;this._r=new fa;this._s=new l;this.playing=!0;this._lastTime=this.updateTime=0},onStart:function(){G.prototype.onStart.call(this);this.addEvent(t.onInput)},onInput:function(){G.prototype.onInput.call(this);
this.updateAnimation()},updateAnimation:function(){if(this.playing&&this.enabled&&0!=this._totalTime&&0!=this._loop&&null!=this._animation){this._time.x+=this.actor.deltaTime;this._time.y=this._time.x%this._totalTime;0>this._time.y&&(this._time.y+=this._totalTime);var a=0,b=!1;0!=this._preTime.x?a=this._time.x-this._preTime.x:b=!0;this._preTime.x=this._time.x;0<a&&this._time.y<this._preTime.y?(this.DispatchEvent(C.FINISH),0<this._loop&&this._loop--,b=!0):0>a&&this._time.y>this._preTime.y&&(this.DispatchEvent(C.FINISH),
0<this._loop&&this._loop--,b=!0);if(0!=this._loop&&(b&&this.DispatchEvent(C.START),C.PROGRESS.SetProgress(this._time.y,this._totalTime),this.DispatchEvent(C.PROGRESS),this.playing&&this.enabled&&0!=this._loop&&0!=this._totalTime&&!(A.FloatToAbs(this._lastTime-this._time.x)<this.updateTime))){this._lastTime=this._time.x;a=this._preTime.y=this._time.y;b=this._animation.nodeAnimations.length;for(var c=0;0<b--;){var d=this._animation.nodeAnimations[b],e=d.nodeId,g=this._jointMap;e=null!=h[e]?g.getReserved(e):
g.h[e];null!=e&&(this.currentTranslation=d.GetTranslation(a),this.currentRotation=d.GetRotation(a),this.currentScale=d.GetScaling(a),null!=this.currentTranslation&&(d=this._t,g=this.currentTranslation,null!=g&&g!=d&&(d.x=g.x,d.y=g.y,d.z=g.z),this.currentTranslation=this._t),null!=this.currentRotation&&(d=this._r,g=this.currentRotation,null!=g&&(d.x=g.x,d.y=g.y,d.z=g.z,d.w=g.w),this.currentRotation=this._r),null!=this.currentScale&&(d=this._s,g=this.currentScale,null!=g&&g!=d&&(d.x=g.x,d.y=g.y,d.z=
g.z),this.currentScale=this._s),e.UpdateLocal(this.currentTranslation,this.currentRotation,this.currentScale),++c)}}}},animationResourceLoaded:function(){this.enabled=!1;this.dirtyTime=.001*(new Date).getTime()*w.scale+w._timeOffset;if(null!=this.resource.modelData.animations){var a=this.resource.modelData.animations.length;if(!(1>a)){for(this._clips=new y;0<a--;){var b=this.resource.modelData.animations[a],c=this._clips,d=b.id;null!=h[d]?c.setReserved(d,b):c.h[d]=b;null==this.action&&(this.action=
b.id)}null!=this.action&&(a=this._clips,b=this.action,this._animation=null!=h[b]?a.getReserved(b):a.h[b],null!=this._animation&&(a=this.actor.GetComponent(Cc),null!=a&&this.SetJointMap(a.get_jointMap()),this.enabled=!0,this._totalTime=this._animation.totalTime,a=this._time,a.x=0,a.y=0,a=this._preTime,a.x=0,this._lastTime=a.y=0,this.updateAnimation()))}}},SetJointMap:function(a){this._jointMap=a},set_resource:function(a){if(this.resource==a)return a;null!=this.resource&&(this.resource.enabled||this.resource.RemoveEventListener(C.INIT._type,
k(this,this.animationResourceLoaded)));this.resource=a;this.resource.enabled?this.animationResourceLoaded():this.resource.AddEventListener(C.INIT._type,k(this,this.animationResourceLoaded));return this.resource},__class__:dd,__properties__:p(G.prototype.__properties__,{set_resource:"set_resource"})});var De=function(){K.call(this)};f["lovedna.play.components.Joint"]=De;De.__name__=["lovedna","play","components","Joint"];De.__super__=G;De.prototype=p(G.prototype,{UpdateLocal:function(a,b,c){var d=
this.actor.position;null!=a&&a!=d&&(d.x=a.x,d.y=a.y,d.z=a.z);a=this.actor.rotation;null!=b&&(a.x=b.x,a.y=b.y,a.z=b.z,a.w=b.w);b=this.actor.scale;null!=c&&c!=b&&(b.x=c.x,b.y=c.y,b.z=c.z);this.actor.updateTime++},UpdateWorld:function(){if(null!=this.worldToLocal){var a=this.animation,b=this.actor.localToWorld;null!=b&&(a.m00=b.m00,a.m10=b.m10,a.m20=b.m20,a.m40=b.m40,a.m01=b.m01,a.m11=b.m11,a.m21=b.m21,a.m31=b.m31,a.m02=b.m02,a.m12=b.m12,a.m22=b.m22,a.m32=b.m32,a.m03=b.m03,a.m13=b.m13,a.m23=b.m23,a.m33=
b.m33,a._dirty=!0);a.Append(this.worldToLocal)}},Clear:function(){this.worldToLocal=this.animation=null},onConstruct:function(){G.prototype.onConstruct.call(this);this.animation=new na},onStart:function(){G.prototype.onStart.call(this);this.addEvent(t.onTransform)},onTransform:function(){G.prototype.onTransform.call(this);this.UpdateWorld()},__class__:De});var ne=function(){K.call(this)};f["lovedna.play.components.Light"]=ne;ne.__name__=["lovedna","play","components","Light"];ne.__super__=Na;ne.prototype=
p(Na.prototype,{onConstruct:function(){Na.prototype.onConstruct.call(this);this._position=new l;this.render=!1;this.type=0;this.renderMode=2;this.ambient=new ca(0,0,0,0);this.diffuse=new ca(1,1,1,0);this.specular=new ca(0,0,0,10);this.refresh=this.visible=!0;this.uniforms=new y;var a=this._commandBuffer=new Ya,b=this.uniforms;b=(new kc).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._commandBuffer;b=m.LIGHT.name;b=(new Ee).Set(b,"");a._commands.Add(b);a.enabled=!0;a.length=
a._commands._length},onAwake:function(){Na.prototype.onAwake.call(this);var a=l._pool.Get();a.x=1;a.y=1;a.z=1;var b=this.actor.rotation,c=new l(0,0,0),d=l._pool.Get();null==a?(d.x-=c.x,d.y-=c.y,d.z-=c.z):(d.x=c.x-a.x,d.y=c.y-a.y,d.z=c.z-a.z);b.SetLookAt(d.Normalize(),null);b=this._position;null!=a&&a!=b&&(b.x=a.x,b.y=a.y,b.z=a.z);b.Normalize()},onStart:function(){Na.prototype.onStart.call(this);this.addEvent(t.onTransform);this.refresh=!0;var a=this._position,b=this.actor;null==b._forward&&(b._forward=
new l(0,0,1),b.get_worldRotation().MultiplyVector(b._forward,!0).Normalize());var c=l._pool.Get();b=b._forward;null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z);a.x*=-1;a.y*=-1;a.z*=-1;a.Normalize();this.refresh=!0},onCollect:function(){this.visible&&(this.updateCamera(),this.actor.world.data.lights.Add(this))},onTransform:function(){Na.prototype.onTransform.call(this);var a=this._position,b=this.actor;null==b._forward&&(b._forward=new l(0,0,1),b.get_worldRotation().MultiplyVector(b._forward,
!0).Normalize());var c=l._pool.Get();b=b._forward;null!=b&&b!=c&&(c.x=b.x,c.y=b.y,c.z=b.z);null!=c&&c!=a&&(a.x=c.x,a.y=c.y,a.z=c.z);a.x*=-1;a.y*=-1;a.z*=-1;a.Normalize();this.refresh=!0},get_commandBuffer:function(){if(this.refresh){this.refresh=!1;var a=this.uniforms,b=m.LIGHT_POSITION.name,c=(new Ea(m.LIGHT_POSITION.name)).SetFloat3(this._position);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this.uniforms;b=m.LIGHT_AMBIENT.name;c=(new Ea(m.LIGHT_AMBIENT.name)).SetFloat4(this.ambient);null!=h[b]?a.setReserved(b,
c):a.h[b]=c;a=this.uniforms;b=m.LIGHT_DIFFUSE.name;c=(new Ea(m.LIGHT_DIFFUSE.name)).SetFloat4(this.diffuse);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this.uniforms;b=m.LIGHT_SPECULAR.name;c=(new Ea(m.LIGHT_SPECULAR.name)).SetFloat4(this.specular);null!=h[b]?a.setReserved(b,c):a.h[b]=c}return this._commandBuffer},__class__:ne,__properties__:p(Na.prototype.__properties__,{get_commandBuffer:"get_commandBuffer"})});var Rb=function(){K.call(this)};f["lovedna.play.components.Renderer"]=Rb;Rb.__name__=["lovedna",
"play","components","Renderer"];Rb.__super__=G;Rb.prototype=p(G.prototype,{Cull:function(a){this._transformTime!=this.actor.updateTime&&(this._transformTime=this.actor.updateTime,this.onUpdateBounds(),null!=this.bounds&&this.bounds.Apply(this.actor.localToWorld));if(null==this.bounds)return a.ContainsPoint(this.actor.get_worldPosition())?!1:!0;if(null!=this.bounds.sphere){var b=this.bounds.sphere;b=!(null==b?0:a.ContainsPoint(b.GetCenter(),b.radius))}else b=!1;return b||null!=this.bounds.box&&!a.IntersectsBox(this.bounds.box)?
!0:!1},UpdateBuffer:function(){this.onRefresh();this._bufferUpdateTime!=this.updateTime&&(this._bufferUpdateTime=this.updateTime,this.buffers.Clear(),this.onBuildBuffer())},onConstruct:function(){G.prototype.onConstruct.call(this);this.updateTime=0;this._bufferUpdateTime=-1;this.cameraCull=!0;this.receiveShadows=!1;this.shadowCastingMode=gb.Off;this._transformTime=0;this.materials=new z;this.material=new Uc;this.materials.Add(this.material);this.visible=!0;this.buffers=new z},onDestroy:function(){G.prototype.onDestroy.call(this);
this.materials.Dispose();this.materials=null;for(var a=this.buffers._length;0<a--;)this.buffers.Get(a).Clear();this.buffers.Dispose();this.buffers=null},onStart:function(){G.prototype.onStart.call(this);this.addEvent(t.onCollect)},onCollect:function(){G.prototype.onCollect.call(this);this.isEnabled()&&this.actor.world.data.renderers._list.Add(this)},isEnabled:function(){return!1},onUpdateBounds:function(){},onRefresh:function(){},onBuildBuffer:function(){},__class__:Rb});var ua=function(){K.call(this)};
f["lovedna.play.components.MeshRenderer"]=ua;ua.__name__=["lovedna","play","components","MeshRenderer"];ua.__super__=Rb;ua.prototype=p(Rb.prototype,{onConstruct:function(){Rb.prototype.onConstruct.call(this);this._meshUpdateTime=0},onDestroy:function(){Rb.prototype.onDestroy.call(this);this.set_mesh(null)},isEnabled:function(){if(null==this.mesh||null==this.mesh.buffer||!this.mesh.buffer.get_enabled()||1>this.materials._length)return!1;this._meshUpdateTime!=this.mesh.buffer.updateTime&&(this._meshUpdateTime=
this.mesh.buffer.updateTime,this._transformTime--,this._bufferUpdateTime--,null==this.bounds&&(this.bounds=new oe),this.bounds.Copy(this.mesh.buffer.get_bounds()));return!0},onBuildBuffer:function(){Rb.prototype.onBuildBuffer.call(this);for(var a=this.mesh.buffer.GetGroupCount(),b=0,c=this.materials._length;b<c;){var d=b++,e=this.materials.Get(d);if(null!=e&&e.enabled){var g=e.subMesh;if(!(0<=g&&g>=a)){var f=e.shader;e.SetMatrix(m.M.name,this.actor.localToWorld);e.SetMatrixHandler(m.IM.name,this.actor.worldToLocalHandler);
d=e._buffer;d.Clear();var h=(new ed).Set(e);d._commands.Add(h);d.enabled=!0;d.length=d._commands._length;d.sortData.shader=f;d.sortData.queue=e.renderQueue;d.sortData.offset=e.distanceOffset;e=this.mesh.buffer.get_positionBuffer();h=this.mesh.buffer.positionStructs;null!=e&&null!=h&&e.enabled&&1<=h.count&&(e=(new cc).Set(e,h),d._commands.Add(e),d.enabled=!0,d.length=d._commands._length);e=this.mesh.buffer.get_vertexBuffer();h=this.mesh.buffer.vertexStructs;null!=e&&null!=h&&e.enabled&&1<=h.count&&
(e=(new cc).Set(e,h),d._commands.Add(e),d.enabled=!0,d.length=d._commands._length);e=this.mesh.buffer.get_boneBuffer();h=this.mesh.buffer.boneStructs;null!=e&&null!=h&&e.enabled&&1<=h.count&&(e=(new cc).Set(e,h),d._commands.Add(e),d.enabled=!0,d.length=d._commands._length);f.DefineStruct([this.mesh.buffer.positionStructs,this.mesh.buffer.vertexStructs,this.mesh.buffer.boneStructs]);f=this.mesh.buffer.get_indexBuffer();null!=f&&(f=(new fd).Set(f),d._commands.Add(f),d.enabled=!0,d.length=d._commands._length);
f=k(this,this.onPreRender);null!=f&&(f=(new lc).Set(f),d._commands.Add(f),d.enabled=!0,d.length=d._commands._length);0>g?g=(new Fc).Set(0,0):(f=this.mesh.buffer.GetGroup(g),g=f.indices._length,f=f.start,g=(new Fc).Set(g,f));d._commands.Add(g);d.enabled=!0;d.length=d._commands._length;g=k(this,this.OnPostRender);null!=g&&(g=(new lc).Set(g),d._commands.Add(g),d.enabled=!0,d.length=d._commands._length);this.buffers.Add(d)}}}},onPreRender:function(){},OnPostRender:function(){},set_mesh:function(a){this._bufferUpdateTime--;
return this.mesh=a},__class__:ua,__properties__:p(Rb.prototype.__properties__,{set_mesh:"set_mesh"})});var Ce=function(){K.call(this)};f["lovedna.play.components.SkinnedMeshRenderer"]=Ce;Ce.__name__=["lovedna","play","components","SkinnedMeshRenderer"];Ce.__super__=ua;Ce.prototype=p(ua.prototype,{onConstruct:function(){ua.prototype.onConstruct.call(this);this.set_bones([])},onRefresh:function(){ua.prototype.onRefresh.call(this);null!=this.bones&&(1>this.bones.length||this.material.SetMatrixArray(m.BONE.name,
this.bones))},set_bones:function(a){return this.bones=a},__class__:Ce,__properties__:p(ua.prototype.__properties__,{set_bones:"set_bones"})});var dg=function(){this.rect=new Wb;this.lineIndex=0};f["lovedna.play.components._Text.CharInfo"]=dg;dg.__name__=["lovedna","play","components","_Text","CharInfo"];dg.prototype={set_char:function(a){this["char"]=a;return this["char"]},__class__:dg,__properties__:{set_char:"set_char"}};var Jb=function(){K.call(this)};f["lovedna.play.components.UI"]=Jb;Jb.__name__=
["lovedna","play","components","UI"];Jb.__super__=G;Jb.prototype=p(G.prototype,{__class__:Jb});var eg=function(){this._paramKey=new z};f["lovedna.utils.string.RichChunk"]=eg;eg.__name__=["lovedna","utils","string","RichChunk"];eg.prototype={Parse:function(a,b){this._paramMap=new y;this.next=this.value=this.name=null;this._paramKey.Clear();this.start=b;a=Z.replace(a,"<","");a=Z.replace(a,">","");a=A.Trim(a);this.type=-1;b=a.indexOf("/");if(0==b)this.type=1,this.name=u.substr(a,b+1,null);else{b==a.length-
1&&(this.type=0,a=A.Trim(u.substr(a,0,a.length-1)));b=a.indexOf(" ");var c=a.indexOf("=");-1==b&&-1==c?this.name=a:-1!=b&&-1!=c?c<b?(a=a.split("="),this.name=A.Trim(a[0]),1<a.length&&(this.value=a[1])):(this.name=u.substr(a,0,b),this.parseParams(u.substr(a,b+1,null))):-1!=b?(this.name=u.substr(a,0,b),this.parseParams(u.substr(a,b+1,null))):-1!=c&&(this.name=A.Trim(u.substr(a,0,c)),this.parseParams(u.substr(a,c+1,null)))}},setNext:function(a){this.next=a},parseParams:function(a){a=A.Trim(a);if(-1==
a.indexOf(" ")&&-1==a.indexOf("="))this.value=a;else{a=a.split(" ");var b=a.length;if(0!=b)for(var c=0;c<b;){var d=c++;d=A.Trim(a[d]);if(""!=d){var e=d.split("=");d=A.Trim(e[0]);var g=null;1<e.length&&(g=A.Trim(e[1]));this._paramKey.Add(d);e=this._paramMap;null!=h[d]?e.setReserved(d,g):e.h[d]=g}}}},__class__:eg};var gd=function(){this._chunkList=new z;this._list=new z};f["lovedna.utils.string.RichTextParser"]=gd;gd.__name__=["lovedna","utils","string","RichTextParser"];gd.prototype={Parse:function(a){this.value=
a;this._chunkList.Clear();for(a=a.length;;){var b=Ba.Utf8IndexOf(this.value,"<",0),c=Ba.Utf8IndexOf(this.value,">",b),d=c-b;if(0<d){if(this.addChunk(b,Ba.Utf8Substr(this.value,b,d+1)),this.value=Ba.Utf8Substr(this.value,0,b)+Ba.Utf8Substr(this.value,c+1),this.value.length>a)break}else break;--a;if(0>a)break}this.buildChunk();return this._list},addChunk:function(a,b){var c=gd._pool.Get();c.Parse(b,a);this._chunkList.Add(c)},buildChunk:function(){this._list.Clear();for(var a,b=0,c=this._chunkList._length;b<
c;){var d=b++;a=this._chunkList.Get(d);if(null==a)break;-1==a.type?(this._list.Add(a),a.setNext(this.getNextChunk(d+1,a.name))):0==a.type&&this._list.Add(a)}},getNextChunk:function(a,b){for(var c=this._chunkList._length;a<c;){var d=a++,e=this._chunkList.Get(d);if(e.name==b&&1==e.type)return this._chunkList.RemoveAt(d),e}return null},__class__:gd};var qb=function(){K.call(this)};f["lovedna.play.components.Text"]=qb;qb.__name__=["lovedna","play","components","Text"];qb.__super__=Jb;qb.prototype=p(Jb.prototype,
{onAwake:function(){Jb.prototype.onAwake.call(this);this._dirty=!1;this._letterSpace=this._lineSpace=0;this._alignmentY=this._alignmentX=-1;this.width=this.height=200;this.mesh=new Ta;this._geom=new ta;this._geom.position=new z;this._geom.uv=new z;this._geom.color=new z;this._geom.AddGroup(new z);this.mesh.FromGeom(this._geom);this._charList=new z;this._charLineWidth=new z},onStart:function(){Jb.prototype.onStart.call(this);this._dirty&&this.addEvent(t.onInputFinish)},onInputFinish:function(){this._dirty=
!1;this.removeEvent(t.onInputFinish);null!=this._font&&this._font.enabled&&this.refresh()},dirty:function(){this._dirty||this.addEvent(t.onInputFinish);this._dirty=!0},fontInit:function(){this.dirty()},refresh:function(){if(null!=this._text&&0!=this._text.length){qb._parse.Parse(this._text);this._text=qb._parse.value;this._charList.Clear();qb._charpool.Clear();for(var a=this._text.length,b=0,c=a;b<c;){var d=b++;d=u.cca(this._text,d);var e=qb._charpool.Get();e.set_char(this._font.fnt._chars.h[d]);
e.newline=10==d||13==d;this._charList.Add(e)}c=b=0;d=this.width;e=this.height;a=this._charList._length;for(var g=0,f=0,h=this._font.fnt.lineHeight,k=2>h,l=0,m=0;m<a;){var p=m++,n=this._charList.Get(p);n.lineIndex=this._charLineWidth._length;if(n.newline)this._charLineWidth.Add(g),g=0,f=0==l?f+h:f+l,f+=this._lineSpace,f>c&&(c=f),l=0;else if(p=n["char"],null!=p){var q=p.width,r=p.height;q*=1;r*=1;g+p.xadvance>d&&(this._charLineWidth.Add(g),g=0,f=0==l?f+h:f+l,f+=this._lineSpace,f>c&&(c=f),l=0);if(f>
e)break;var t=1*p.xoffset,v=1*p.yoffset;k&&(v=t=0);n=n.rect;n.x=g+t;n.y=f+v;n.z=q;n.w=r;g+=this._letterSpace;g=p.xadvance<q?g+q:g+p.xadvance;g>b&&(b=g);r+p.yoffset>l&&(l=r+p.yoffset)}}this._charLineWidth.Add(g);this._textWidth=b;this._textHeight=c+l;this.drawText()}},drawText:function(){var a=this._geom.GetGroup(0).indices;a.Clear();this._geom.position.Clear();this._geom.uv.Clear();this._geom.color.Clear();this._geom.ClearGroup();var b=this._charList._length,c=this._font.texture.size.x,d=this._font.texture.size.y,
e=0,g=this._textHeight-this.height;0>=this._alignmentY&&(g=0==this._alignmentY?.5*g:0);for(var f=Jb.scale,h=0;h<b;){var k=h++,m=this._charList.Get(k);if(!m.newline&&(k=m["char"],null!=k)){var p=this._charLineWidth.Get(m.lineIndex),n=this.width-p;0>=this._alignmentX&&(n=0==this._alignmentX?.5*n:0);p=m.rect.x+n;var q=-m.rect.get_bottom()+g;n=m.rect.get_right()+n;m=-m.rect.y+g;var r=this._geom.position,t=new l(p,q,0);t.x*=f;t.y*=f;t.z*=f;r.Add(t);r=this._geom.position;q=new l(n,q,0);q.x*=f;q.y*=f;q.z*=
f;r.Add(q);q=this._geom.position;n=new l(n,m,0);n.x*=f;n.y*=f;n.z*=f;q.Add(n);n=this._geom.position;p=new l(p,m,0);p.x*=f;p.y*=f;p.z*=f;n.Add(p);p=k.rect.x/c;q=k.rect.get_bottom()/d;n=k.rect.get_right()/c;m=k.rect.y/d;this._geom.uv.Add(new F(p,q));this._geom.uv.Add(new F(n,q));this._geom.uv.Add(new F(n,m));this._geom.uv.Add(new F(p,m));null!=this.colorBottom?(this._geom.color.Add(this.colorBottom),this._geom.color.Add(this.colorBottom)):(this._geom.color.Add((new wa).FromRGBInt(16777215)),this._geom.color.Add((new wa).FromRGBInt(16777215)));
null!=this.colorTop?(this._geom.color.Add(this.colorTop),this._geom.color.Add(this.colorTop)):(this._geom.color.Add((new wa).FromRGBInt(16777215)),this._geom.color.Add((new wa).FromRGBInt(16777215)));a.Add(e);a.Add(1+e);a.Add(2+e);a.Add(e);a.Add(2+e);a.Add(3+e);e+=4}}this._geom.AddGroup(a);this._geom.Dirty(-1)},set_text:function(a){this._text!=a&&(this._text=a,this.dirty());return this._text},set_font:function(a){this._font!=a&&(null==this._font||this._font.enabled||this._font.RemoveEventListener(C.INIT._type,
k(this,this.fontInit)),this._font=a,null==this._font||this._font.enabled?this.dirty():this._font.AddEventListener(C.INIT._type,k(this,this.fontInit)));return this._font},set_alignmentX:function(a){0<a&&(a=1);0>a&&(a=-1);a!=this._alignmentX&&(this._alignmentX=a,this.dirty());return this._alignmentX},set_alignmentY:function(a){0<a&&(a=1);0>a&&(a=-1);a!=this._alignmentY&&(this._alignmentY=a,this.dirty());return this._alignmentY},__class__:qb,__properties__:p(Jb.prototype.__properties__,{set_alignmentY:"set_alignmentY",
set_alignmentX:"set_alignmentX",set_font:"set_font",set_text:"set_text"})});var md=function(a){Qb.call(this);this._window=a;null!=this._window&&(this._touchDriver=new Fe(a),Bb.SetDriver(this._touchDriver),Aa.SetDriver(new Ge(a)),a.onResize.add(k(this,this.onResize)),a.onActivate.add(k(this,this.onActivate)),a.onDeactivate.add(k(this,this.onDeactivate)),a.onFocusIn.add(k(this,this.onFocusIn)),a.onFocusOut.add(k(this,this.onFocusOut)),this.onResize(a.__width,a.__height),this.canvas=a.backend.canvas,
Y.trace("canvas "+X.string(this.canvas),{fileName:"LimeDriver.hx",lineNumber:41,className:"lovedna.play.dirvers.LimeDriver",methodName:"new"}))};f["lovedna.play.dirvers.LimeDriver"]=md;md.__name__=["lovedna","play","dirvers","LimeDriver"];md.__super__=Qb;md.prototype=p(Qb.prototype,{Render:function(){null!=this._window&&(this.onWorldUpdate(),this.onWorldRender(),this._touchDriver.LimeUpdate())},__class__:md});var de=function(){ta.call(this);this.depthSegments=this.heightSegments=this.widthSegments=
this.depth=this.height=this.width=1};f["lovedna.play.meshs.GeomCube"]=de;de.__name__=["lovedna","play","meshs","GeomCube"];de.__super__=ta;de.prototype=p(ta.prototype,{Build:function(){1E-4>this.width&&(this.width=1E-4);1E-4>this.height&&(this.height=1E-4);1E-4>this.depth&&(this.depth=1E-4);1>this.widthSegments&&(this.widthSegments=1);1>this.heightSegments&&(this.heightSegments=1);1>this.depthSegments&&(this.depthSegments=1);this.position=new z;this.normal=new z;this.uv=new z;this.color=new z;this._count=
0;this.buildPlane(2,1,0,-1,-1,this.depth,this.height,this.width,this.depthSegments,this.heightSegments,0);this.buildPlane(2,1,0,1,-1,this.depth,this.height,-this.width,this.depthSegments,this.heightSegments,1);this.buildPlane(0,2,1,1,1,this.width,this.depth,this.height,this.widthSegments,this.depthSegments,2);this.buildPlane(0,2,1,1,-1,this.width,this.depth,-this.height,this.widthSegments,this.depthSegments,3);this.buildPlane(0,1,2,1,-1,this.width,this.height,this.depth,this.widthSegments,this.heightSegments,
4);this.buildPlane(0,1,2,-1,-1,this.width,this.height,-this.depth,this.widthSegments,this.heightSegments,5);this.Dirty(-1);return this},buildPlane:function(a,b,c,d,e,g,f,h,k,m,p){var n=g/k,x=f/m,q=.5*g,r=.5*f,t=.5*h;f=k+1;var u=m+1;g=0;for(var v=[],w=this.getUVCreater(p),y=0;y<u;)for(var A=y++,D=A*x-r,C=0,H=f;C<H;){var B=C++;v[a]=(B*n-q)*d;v[b]=D*e;v[c]=t;var E=new l;E.FromArray(v);v[a]=0;v[b]=0;v[c]=0<h?1:-1;var G=new l;G.FromArray(v);null!=this.transform&&(this.transform.MultiplyPoint(E),this.transform.MultiplyVector(G));
this.position.Add(E);this.normal.Add(G);E=this.uv;G=new F;B=w(B/k,1-A/m);G.x=B.x;G.y=B.y;E.Add(G);B=new ca(1,1,1,1);null!=this.getFaceColor&&(E=this.getFaceColor(p),B.x=E.x,B.y=E.y,B.z=E.z,B.w=E.w);this.color.Add(B);++g}a=new z;for(b=0;b<m;)for(c=b++,d=0,e=k;d<e;)h=d++,p=this._count+h+f*(c+1),n=this._count+(h+1)+f*(c+1),x=this._count+(h+1)+f*c,a.Add(this._count+h+f*c),a.Add(p),a.Add(x),a.Add(p),a.Add(n),a.Add(x);this.AddGroup(a);this._count+=g},__class__:de});var hd=function(){this.updateTime=-1;
this._enabled=!1;this._boundUpdateTime=this._vertexBufferTime=this._positionBufferTime=this._indexBufferTime=-1;this.mask=new pb;this.positionStructs=new bd;this.positionStructs.Add(m.POSITION.name,m.POSITION.size)};f["lovedna.play.meshs.MeshBuffer"]=hd;hd.__name__=["lovedna","play","meshs","MeshBuffer"];hd.prototype={GetGroupCount:function(){return 0},GetGroup:function(a){return null},get_enabled:function(){return!1},get_indexBuffer:function(){return this._indexBuffer},get_positionBuffer:function(){return this._positionBuffer},
get_vertexBuffer:function(){return this._vertexBuffer},get_boneBuffer:function(){return this._boneBuffer},get_bounds:function(){return this._bounds},__class__:hd,__properties__:{get_bounds:"get_bounds",get_boneBuffer:"get_boneBuffer",get_vertexBuffer:"get_vertexBuffer",get_positionBuffer:"get_positionBuffer",get_indexBuffer:"get_indexBuffer",get_enabled:"get_enabled"}};var He=function(a){hd.call(this);this.geometry=a;this.updateTime=a.updateTime+1};f["lovedna.play.meshs.GeomMeshBuffer"]=He;He.__name__=
["lovedna","play","meshs","GeomMeshBuffer"];He.__super__=hd;He.prototype=p(hd.prototype,{GetGroupCount:function(){return this.geometry.groupCount},GetGroup:function(a){return this.geometry.GetGroup(a)},get_enabled:function(){if(null==this.geometry.position||1>this.geometry.groupCount)return this._enabled=!1;var a=this.geometry.position._length;if(2>a)return this._enabled=!1;if(0==this.geometry.dirtyBit.value)return this._enabled;this.updateTime++;var b=this.geometry.updateTime;this._boundUpdateTime=
this._boneBufferTime=this._vertexBufferTime=this._indexBufferTime=this._positionBufferTime=b;this.geometry.ReadDirty(1)&&(this._positionBufferTime++,this._boundUpdateTime++);this.geometry.ReadDirty(0)&&this._indexBufferTime++;this.geometry.ReadDirty(2)&&this._vertexBufferTime++;this.geometry.ReadDirty(3)&&this._boneBufferTime++;this._enabled=!0;this.mask.Clear();this.mask.Open(m.POSITION.index);null!=this.geometry.uv&&this.geometry.uv._length>=a&&this.mask.Open(m.UV.index);null!=this.geometry.uv2&&
this.geometry.uv2._length>=a&&this.mask.Open(m.UV2.index);null!=this.geometry.uv3&&this.geometry.uv3._length>=a&&this.mask.Open(m.UV3.index);null!=this.geometry.uv4&&this.geometry.uv4._length>=a&&this.mask.Open(m.UV4.index);null!=this.geometry.normal&&this.geometry.normal._length>=a&&this.mask.Open(m.NORMAL.index);null!=this.geometry.tangent&&this.geometry.tangent._length>=a&&this.mask.Open(m.TANGENT.index);null!=this.geometry.color&&this.geometry.color._length>=a&&this.mask.Open(m.COLOR.index);null!=
this.geometry.color2&&this.geometry.color2._length>=a&&this.mask.Open(m.COLOR2.index);null!=this.geometry.color3&&this.geometry.color3._length>=a&&this.mask.Open(m.COLOR3.index);null!=this.geometry.color4&&this.geometry.color4._length>=a&&this.mask.Open(m.COLOR4.index);null!=this.geometry.boneWeight&&(this.mask.Open(m.BONE_INDEX.index),this.mask.Open(m.BONE_WEIGHT.index));return!0},get_indexBuffer:function(){if(this._indexBufferTime==this.geometry.updateTime)return this._indexBuffer;this._indexBufferTime=
this.geometry.updateTime;null==this._indexBuffer&&(this._indexBuffer=new Ib);for(var a=new z,b=0,c=this.geometry.groupCount;b<c;){var d=b++;d=this.geometry.GetGroup(d).indices;d.Trim();a.AddList(d._buffer)}b=this._indexBuffer;a.Trim();b.Upload(a._buffer);return this._indexBuffer},get_positionBuffer:function(){if(this._positionBufferTime==this.geometry.updateTime)return this._positionBuffer;this._positionBufferTime=this.geometry.updateTime;null==this._positionBuffer&&(this._positionBuffer=new yb);
for(var a=[],b=0,c=this.geometry.position._length;b<c;){var d=b++;this.geometry.position.Get(d).FillArray(a,3*d)}this._positionBuffer.Upload(a);return this._positionBuffer},get_vertexBuffer:function(){if(this._vertexBufferTime==this.geometry.updateTime)return this._vertexBuffer;this._vertexBufferTime=this.geometry.updateTime;null==this._vertexBuffer&&(this._vertexBuffer=new yb);var a=[this.geometry.uv,this.geometry.uv2,this.geometry.uv3,this.geometry.uv4,this.geometry.normal,this.geometry.tangent,
this.geometry.color,this.geometry.color2,this.geometry.color3,this.geometry.color4],b=[m.UV,m.UV2,m.UV3,m.UV4,m.NORMAL,m.TANGENT,m.COLOR,m.COLOR2,m.COLOR3,m.COLOR4];this.vertexStructs=new bd;for(var c=a.length,d=0,e=0;e<c;){var g=e++,f=a[g];g=b[g];null==f||f._length<this.geometry.position._length?this.mask.Close(g.index):(this.vertexStructs.Add(g.name,g.size),d+=g.size,this.mask.Open(g.index))}this.vertexStructs.AddComplete();e=0;f=[];g=this.geometry.position._length;for(var h=0;h<c;){var k=h++;var l=
b[k];if(this.mask.IsOpen(l.index)){for(var p=a[k],n=0,q=g;n<q;){var r=n++;k=d*r+e;r=p.Get(r);r.FillArray(f,k)}e+=l.size}}this._vertexBuffer.Upload(f);return this._vertexBuffer},get_boneBuffer:function(){if(this._boneBufferTime==this.geometry.updateTime)return this._boneBuffer;if(null==this.geometry.boneWeight||!this.mask.IsOpen(m.BONE_INDEX.index))return null;this._boneBufferTime=this.geometry.updateTime;null==this._boneBuffer&&(this._boneBuffer=new yb,this.boneStructs=new bd,this.boneStructs.Add(m.BONE_INDEX.name,
m.BONE_INDEX.size),this.boneStructs.Add(m.BONE_WEIGHT.name,m.BONE_WEIGHT.size),this.boneStructs.Add(m.BONE.name,m.BONE.size),this.boneStructs.AddComplete());for(var a=[],b=this.geometry.boneWeight._length,c=m.BONE_INDEX.size,d=c+m.BONE_WEIGHT.size;0<b--;){var e=d*b,g=this.geometry.boneWeight.Get(b);g.index.FillArray(a,e);e+=c;g.weight.FillArray(a,e)}this._boneBuffer.Upload(a);return this._boneBuffer},get_bounds:function(){if(this._boundUpdateTime==this.geometry.updateTime)return this._bounds;null==
this._bounds&&(this._bounds=new oe);this._bounds.Reset();this._boundUpdateTime=this.geometry.updateTime;for(var a=this.geometry.position._length;0<a--;)this._bounds.Expand(this.geometry.position.Get(a));this._bounds.Init();return this._bounds},__class__:He});var Dc=function(){ta.call(this);this.heightSegments=this.widthSegments=this.height=this.width=1};f["lovedna.play.meshs.GeomPlane"]=Dc;Dc.__name__=["lovedna","play","meshs","GeomPlane"];Dc.__super__=ta;Dc.prototype=p(ta.prototype,{Build:function(){1>
this.widthSegments&&(this.widthSegments=1);1>this.heightSegments&&(this.heightSegments=1);0>=this.width&&(this.width=1E-4);0>=this.height&&(this.height=1E-4);var a=new z;this.normal=new z;this.uv=new z;this.color=new z;for(var b=new z,c=.5*this.width,d=.5*this.height,e=this.widthSegments,g=this.heightSegments,f=e+1,h=g+1,k=this.width/e,m=this.height/g,p=this.getUVCreater(0),n=0;n<h;)for(var q=n++,r=q*m-d,t=0,v=f;t<v;){var u=t++,w=new l(u*k-c,-r,0),y=new l(0,0,1),A=u/e,B=q/g;u=new F;A=p(A,B);u.x=A.x;
u.y=A.y;null!=this.transform&&(this.transform.MultiplyPoint(w),this.transform.MultiplyVector(y));a.Add(w);this.normal.Add(y);this.uv.Add(u);null!=this.customColor?this.color.Add(this.customColor):this.color.Add(new ca(1,1,1,1))}for(c=0;c<g;)for(d=c++,h=0,k=e;h<k;)m=h++,p=m+f*(d+1),n=m+1+f*(d+1),q=m+1+f*d,b.Add(m+f*d),b.Add(p),b.Add(q),b.Add(p),b.Add(n),b.Add(q);this.position=a;this.AddGroup(b);this.Dirty(-1);return this},__class__:Dc});var Yc=function(){ta.call(this);this.radius=1;this.widthSegments=
20;this.heightSegments=16;this.phiStart=0;this.phiLength=360;this.thetaStart=0;this.thetaLength=180;this.customColor=new wa(1,1,1,1)};f["lovedna.play.meshs.GeomSphere"]=Yc;Yc.__name__=["lovedna","play","meshs","GeomSphere"];Yc.__super__=ta;Yc.prototype=p(ta.prototype,{Build:function(){.001>this.radius&&(this.radius=.001);3>this.widthSegments&&(this.widthSegments=3);2>this.heightSegments&&(this.heightSegments=2);this.phiStart*=.017453292519943295;var a=this.phiLength;0>a&&(a=0);360<a&&(a=360);this.phiLength=
.017453292519943295*a;this.thetaStart*=.017453292519943295;a=this.thetaLength;0>a&&(a=0);180<a&&(a=180);this.thetaLength=.017453292519943295*a;this.position=new z;this.normal=new z;this.uv=new z;this.color=new z;var b=new te;a=this.thetaStart+this.thetaLength;for(var c=0,d=[],e=this.getUVCreater(),g=0,f=this.heightSegments+1;g<f;){for(var h=[],k=g++/this.heightSegments,m=0,p=this.widthSegments+1;m<p;){var n=m++,q=n/this.widthSegments,r=new l;r.x=-this.radius*Math.cos(this.phiStart+q*this.phiLength)*
Math.sin(this.thetaStart+k*this.thetaLength);r.y=this.radius*Math.cos(this.thetaStart+k*this.thetaLength);r.z=this.radius*Math.sin(this.phiStart+q*this.phiLength)*Math.sin(this.thetaStart+k*this.thetaLength);var t=new l;null!=r&&r!=t&&(t.x=r.x,t.y=r.y,t.z=r.z);null!=this.transform&&(this.transform.MultiplyPoint(r),this.transform.MultiplyPoint(t));this.position.Add(r);this.normal.Add(t.Normalize());r=this.uv;t=new F;q=e(q,k);t.x=q.x;t.y=q.y;r.Add(t);h.push(c++);null==this.customColor?(b.h=360/this.widthSegments*
n,b.s=1,b.v=1,n=b.ToColor()):(n=new wa,q=this.customColor,n.x=q.x,n.y=q.y,n.z=q.z,n.w=q.w);this.color.Add(n)}d.push(h)}b=new z;c=0;for(e=this.heightSegments;c<e;)for(g=c++,f=0,h=this.widthSegments;f<h;){n=f++;k=d[g][n+1];m=d[g][n];p=d[g+1][n];n=d[g+1][n+1];if(0!=g||0<this.thetaStart)b.Add(k),b.Add(m),b.Add(n);if(g!=this.heightSegments-1||3.141592653589793>a)b.Add(m),b.Add(p),b.Add(n)}this.AddGroup(b);this.phiStart*=57.29577951308232;this.phiLength*=57.29577951308232;this.thetaStart*=57.29577951308232;
this.thetaLength*=57.29577951308232;this.Dirty(-1);return this},__class__:Yc});var Ta=function(){};f["lovedna.play.meshs.Mesh"]=Ta;Ta.__name__=["lovedna","play","meshs","Mesh"];Ta.prototype={FromGeom:function(a){Ta._map.h.hasOwnProperty(a.id)?this.FromBuffer(Ta._map.h[a.id]):Ta._map.h.hasOwnProperty(a.id)?this.FromBuffer(Ta._map.h[a.id]):(this.FromBuffer(new He(a)),Ta._map.h[a.id]=this.buffer);return this},FromBuffer:function(a){this.buffer=a;return this},__class__:Ta};var q=function(){};f["lovedna.play.render.GLWrap"]=
q;q.__name__=["lovedna","play","render","GLWrap"];q.Init=function(){null==q._state&&(q._state=new re,q._state.depthWrite=!0,-1==q._state.cullMode?n.context.__context.disable(2884):(n.context.__context.enable(2884),n.context.__context.cullFace(q._state.cullMode)),q._state.depthTest?(n.context.__context.enable(2929),n.context.__context.depthFunc(q._state.depthMode)):n.context.__context.disable(2929),n.context.__context.depthMask(q._state.depthWrite),q._state.blend?(n.context.__context.enable(3042),
n.context.__context.blendEquationSeparate(q._state.blendColorOperation,q._state.blendAlphaOperation),n.context.__context.blendFuncSeparate(q._state.blendSrcColor,q._state.blendDstColor,q._state.blendSrcAlpha,q._state.blendDstAlpha)):n.context.__context.disable(3042),q._state.stencilTest?n.context.__context.enable(2960):n.context.__context.disable(2960))};q.EnterFrame=function(){q._renderTextureStack.Clear();q._renderTexture=null;q._lastRenderTexture=null;q.ColorWrite(!0,!0,!0,!0)};q.ExitFrame=function(){q.ColorWrite(!0,
!0,!0,!0);yb.current=null;n.context.__context.bindBuffer(34962,null);Ib.current=null;n.context.__context.bindBuffer(34963,null);ac.current=null;n.__currentProgram=null;n.context.__context.useProgram(null);q._state.blend||(q._state.blend=!0,n.context.__context.enable(3042));-1!=q._state.cullMode&&(n.context.__context.disable(2884),q._state.cullMode=-1);q._state.depthTest||(n.context.__context.enable(2929),q._state.depthTest=!0);513!=q._state.depthMode&&(q._state.depthMode=513,n.context.__context.depthFunc(q._state.depthMode));
q._state.depthWrite||(n.context.__context.depthMask(!0),q._state.depthWrite=!0);n.context.__context.bindFramebuffer(36160,null);n.context.__context.bindRenderbuffer(36161,null);n.context.__context.bindTexture(3553,null);n.context.__context.viewport(0,0,q.screenWidth,q.screenHeight)};q.PushRenderTarget=function(a){q._renderTextureStack.Add(a);q._renderTexture=a;q._renderTexture!=q._lastRenderTexture&&(q._lastRenderTexture=q._renderTexture,null!=q._renderTexture?(q._renderTexture.BindFrameBuffer(),
n.context.__context.viewport(0,0,q._renderTexture.size.x,q._renderTexture.size.y)):(n.context.__context.bindFramebuffer(36160,null),n.context.__context.bindRenderbuffer(36161,null),n.context.__context.viewport(0,0,q.screenWidth,q.screenHeight)))};q.PopRenderTarget=function(){0<q._renderTextureStack._length&&q._renderTextureStack.Pop();q._renderTexture=0<q._renderTextureStack._length?q._renderTextureStack.Get(-1,!0):null;null!=q._renderTexture?(q._renderTexture.BindFrameBuffer(),n.context.__context.viewport(0,
0,q._renderTexture.size.x,q._renderTexture.size.y)):(n.context.__context.bindFramebuffer(36160,null),n.context.__context.bindRenderbuffer(36161,null),n.context.__context.viewport(0,0,q.screenWidth,q.screenHeight))};q.ColorWrite=function(a,b,c,d){if(q._colorMask[0]!=a||q._colorMask[1]!=b||q._colorMask[2]!=c||q._colorMask[3]!=d)q._colorMask[0]=a,q._colorMask[1]=b,q._colorMask[2]=c,q._colorMask[3]=d,n.context.__context.colorMask(a,b,c,d)};q.Clear=function(a,b,c,d,e,g){null==g&&(g=0);null==e&&(e=!0);
null==d&&(d=1);null==c&&(c=!0);var f=0;a&&(f|=16384);c&&(f|=256);e&&(f|=1024);0<=g&&q._clearStencil!=g&&(q._clearStencil=g,n.context.__context.clearStencil(g));0<=d&&(n.context.__context.depthMask(!0),q._clearDepth!=d&&(q._clearDepth=d,n.context.__context.clearDepth(d)));n.context.__context.clearColor(b.x,b.y,b.z,b.w);n.context.__context.clear(f)};q.State=function(a){var b=a.cullMode;b!=q._state.cullMode&&(q._state.cullMode=b,-1==q._state.cullMode?n.context.__context.disable(2884):(n.context.__context.enable(2884),
n.context.__context.cullFace(q._state.cullMode)));b=a.depthTest;b!=q._state.depthTest&&(q._state.depthTest=b,q._state.depthTest?n.context.__context.enable(2929):n.context.__context.disable(2929));b&&a.depthMode!=q._state.depthMode&&(n.context.__context.depthFunc(a.depthMode),q._state.depthMode=a.depthMode);b=a.depthWrite;b!=q._state.depthWrite&&(q._state.depthWrite=b,n.context.__context.depthMask(q._state.depthWrite));b=a.blend;b!=q._state.blend&&(q._state.blend=b,q._state.blend||n.context.__context.disable(3042));
b&&(n.context.__context.enable(3042),n.context.__context.blendEquationSeparate(a.blendColorOperation,a.blendAlphaOperation),n.context.__context.blendFuncSeparate(a.blendSrcColor,a.blendDstColor,a.blendSrcAlpha,a.blendDstAlpha));b=a.stencilTest;q._state.stencilTest!=b&&(q._state.stencilTest=b,q._state.stencilTest?n.context.__context.enable(2960):n.context.__context.disable(2960));q._state.stencilTest&&(q._state.stencilReadMask=a.stencilReadMask,q._state.stencilReferenceValue=a.stencilReferenceValue,
q._state.stencilMode=a.stencilMode,q._state.stencilFail=a.stencilFail,q._state.stencilDepthFail=a.stencilDepthFail,q._state.stencilBothPass=a.stencilBothPass,n.context.__context.stencilFunc(q._state.stencilMode,q._state.stencilReferenceValue,q._state.stencilReadMask),n.context.__context.stencilOp(q._state.stencilFail,q._state.stencilDepthFail,q._state.stencilBothPass))};var fg=function(){};f["lovedna.play.render.ICommand"]=fg;fg.__name__=["lovedna","play","render","ICommand"];fg.prototype={__class__:fg};
var Hg=function(){};f["lovedna.play.render.RenderQueue"]=Hg;Hg.__name__=["lovedna","play","render","RenderQueue"];Hg.GetQueue=function(a){a/=1E4;var b=a|0;0>a&&b!=a&&--b;a=b;1>a&&(a=1);5<a&&(a=5);a*=1E4;b=a|0;0>a&&b!=a&&--b;return b};var cg=function(){this.finish=!0;this._commandBuffers=new z;this._startBuffer=new Ya;this._sort=new gg;this._timeData=new ca;this._sinTimeData=new ca;this._cosTimeData=new ca;this._deltaTimeData=new ca;var a=this._uniformMap=new y,b=m.TIME.name,c=(new Ea(m.TIME.name)).SetFloat4(this._timeData);
null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.TIME_COS.name;c=(new Ea(m.TIME_COS.name)).SetFloat4(this._cosTimeData);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.TIME_SIN.name;c=(new Ea(m.TIME_SIN.name)).SetFloat4(this._sinTimeData);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._uniformMap;b=m.TIME_DELTA.name;c=(new Ea(m.TIME_DELTA.name)).SetFloat4(this._deltaTimeData);null!=h[b]?a.setReserved(b,c):a.h[b]=c;a=this._startBuffer;b=new Ie;a._commands.Add(b);a.enabled=
!0;a.length=a._commands._length;a=this._startBuffer;b=this._uniformMap;b=(new kc).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length};f["lovedna.play.render.RendererData"]=cg;cg.__name__=["lovedna","play","render","RendererData"];cg.prototype={Clear:function(a){this._worldData=a;this.finish=!1;a=.001*(new Date).getTime()*w.scale+w._timeOffset;var b=this._timeData;b.x=a/20;b.y=a;b.z=2*a;b.w=3*a;b=this._sinTimeData;var c=Math.sin(a/4),d=Math.sin(a/2),e=Math.sin(a);b.x=Math.sin(a/8);
b.y=c;b.z=d;b.w=e;b=this._cosTimeData;c=Math.cos(a/4);d=Math.cos(a/2);e=Math.cos(a);b.x=Math.cos(a/8);b.y=c;b.z=d;b.w=e;a=this._worldData.deltaTime;b=this._deltaTimeData;b.x=a;b.y=1/a;b.z=a;b.w=1/a;this._commandBuffers.Clear();this._commandBuffers.Add(this._startBuffer);this._light=null;a=this._worldData.lights.count;if(0<a)for(;0<a--;)b=this._worldData.lights.Get(a),b.visible&&(this._light=b);this.Start()},Start:function(){if(null!=this._light){var a=this._light.get_commandBuffer();this._commandBuffers.Add(a)}},
Add:function(a){Na.current=a;var b=a.frustum,c=a.cullingMask,d=this._worldData.renderers.count;this._sort.Start(a);for(var e=0;e<d;){var g=e++;g=this._worldData.renderers._list.Get(g);var f=g.actor;c.Exist(f.layer)?g.cameraCull?g.Cull(b)?f._setVisible(!1):(f._setVisible(!0),this._sort.Add(g)):(f._setVisible(!0),this._sort.Add(g)):f._setVisible(!1)}this._sort.End();b=this._sort.count;this._commandBuffers.Add(a.preBuffer);for(c=0;c<b;)d=c++,d=this._sort._all.Get(d),this._commandBuffers.Add(d);this._commandBuffers.Add(a.postBuffer);
this.count=this._commandBuffers._length},Render:function(){this.finish=!0;for(var a=0,b=this._commandBuffers._length;a<b;){var c=a++;this._commandBuffers.Get(c).Execute()}},__class__:cg};var gg=function(){this._background=new z;this._geometry=new z;this._transparent=new z;this._ui=new z;this._overlay=new z;this._all=new z;this._currentPosition=new l};f["lovedna.play.render.RendererSort"]=gg;gg.__name__=["lovedna","play","render","RendererSort"];gg.prototype={Start:function(a){this._currentCamera=
a;this._cameraPosition=this._currentCamera.actor.get_worldPosition();this._background.Clear();this._geometry.Clear();this._transparent.Clear();this._ui.Clear();this._overlay.Clear()},Add:function(a){if(null!=a){a.UpdateBuffer();a.actor.DispatchEvent(t.onRender);for(var b=a.buffers._length,c=this._cameraPosition.DistanceToSquared(a.actor.get_worldPosition());0<b--;){var d=a.buffers.Get(b);null!=d.sortData.offset?d.sortData.UpdateDistance(a.actor,this._cameraPosition):d.sortData.distance=c;var e=Hg.GetQueue(d.sortData.queue);
2E4==e?this._geometry.Add(d):3E4==e?this._transparent.Add(d):4E4==e?this._ui.Add(d):1E4==e?this._background.Add(d):5E4==e&&this._overlay.Add(d)}}},End:function(){this._all.Clear();if(0<this._background._length){this._background.Sort(k(this,this.sortShader));for(var a=0,b=this._background._length;a<b;){var c=a++;this._all.Add(this._background.Get(c))}}if(0<this._geometry._length)for(this._geometry.Sort(k(this,this.sortShader)),a=0,b=this._geometry._length;a<b;)c=a++,this._all.Add(this._geometry.Get(c));
if(0<this._transparent._length)for(this._transparent.Sort(k(this,this.sortTransparent)),a=0,b=this._transparent._length;a<b;)c=a++,this._all.Add(this._transparent.Get(c));if(0<this._ui._length)for(this._ui.Sort(k(this,this.sortShader)),a=0,b=this._ui._length;a<b;)c=a++,this._all.Add(this._ui.Get(c));if(0<this._overlay._length)for(this._ui.Sort(k(this,this.sortShader)),a=0,b=this._overlay._length;a<b;)c=a++,this._all.Add(this._overlay.Get(c));this.count=this._all._length},sortShader:function(a,b){var c=
a.sortData.queue,d=b.sortData.queue;if(c!=d)return c>d?1:-1;c=a.sortData.shader.get_id();d=b.sortData.shader.get_id();if(c!=d)return c>d?1:-1;c=a.sortData.distance;d=b.sortData.distance;return c!=d?c>d?1:-1:0},sortTransparent:function(a,b){var c=a.sortData.queue;var d=b.sortData.queue;if(c!=d)return c>d?1:-1;c=a.sortData.distance;d=b.sortData.distance;return c!=d?c>d?-1:1:0},__class__:gg};var R=function(){};f["lovedna.play.render.commands.RenderCommand"]=R;R.__name__=["lovedna","play","render","commands",
"RenderCommand"];R.__interfaces__=[fg];R.prototype={Enter:function(a){this.ctx=a},Execute:function(){},__class__:R};var xe=function(){};f["lovedna.play.render.commands.ContextEnd"]=xe;xe.__name__=["lovedna","play","render","commands","ContextEnd"];xe.__super__=R;xe.prototype=p(R.prototype,{Execute:function(){R.prototype.Execute.call(this);va.drawCall+=this.ctx.drawCall;va.commandCount+=this.ctx.commandCount;n.context.__context.bindTexture(3553,null)},__class__:xe});var we=function(){};f["lovedna.play.render.commands.ContextStart"]=
we;we.__name__=["lovedna","play","render","commands","ContextStart"];we.__super__=R;we.prototype=p(R.prototype,{Execute:function(){R.prototype.Execute.call(this);this.ctx.Reset();this.ctx.ClearGlobalDefines();this.ctx.ClearGlobalUniforms()},__class__:we});var Oa=function(){this._buffer=new Ya};f["lovedna.play.render.commands.CopyTexture"]=Oa;Oa.__name__=["lovedna","play","render","commands","CopyTexture"];Oa.__super__=R;Oa.prototype=p(R.prototype,{Set:function(a,b,c){if(null==Oa._mesh){var d=new ta;
d.position=(new z).From([new l(-1,-1,0),new l(1,-1,0),new l(1,1,0),new l(-1,1,0)]);d.uv=(new z).From([new F(0,0),new F(1,0),new F(1,1),new F(0,1)]);d.AddGroup((new z).From([0,1,2,0,2,3]));Oa._mesh=(new Ta).FromGeom(d);Oa._mat=new na}this._from=a;this._to=b;this._material=c;this._id=this._material.shader.get_id();this.refresh();return this},Execute:function(){R.prototype.Execute.call(this);var a=this._material.shader.get_id();a!=this._id&&(this._id=a,this.refresh());this._buffer.Execute()},refresh:function(){this._buffer.Clear();
this._buffer.name="blit";var a=this._buffer,b=this._to;b=(new Je).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._buffer;b=new wa(0,0,0,1);b=(new Ke).Set(!0,b,!0,1,!0,0);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._buffer;b=this._material;b=(new ed).Set(b);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;this._material.SetTexture(this._from);this._material.SetMatrix(m.M.name,Oa._mat);this._material.SetMatrix(m.P.name,Oa._mat);this._material.SetMatrix(m.V.name,
Oa._mat);this._material.SetMatrix(m.VP.name,Oa._mat);a=this._buffer;b=Oa._mesh.buffer.get_positionBuffer();var c=Oa._mesh.buffer.positionStructs;null!=b&&null!=c&&b.enabled&&1<=c.count&&(b=(new cc).Set(b,c),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length);a=this._buffer;b=Oa._mesh.buffer.get_vertexBuffer();c=Oa._mesh.buffer.vertexStructs;null!=b&&null!=c&&b.enabled&&1<=c.count&&(b=(new cc).Set(b,c),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length);this._material.shader.DefineStruct([Oa._mesh.buffer.positionStructs,
Oa._mesh.buffer.vertexStructs]);a=this._buffer;b=Oa._mesh.buffer.get_indexBuffer();null!=b&&(b=(new fd).Set(b),a._commands.Add(b),a.enabled=!0,a.length=a._commands._length);a=this._buffer;b=(new Fc).Set(0,0);a._commands.Add(b);a.enabled=!0;a.length=a._commands._length;a=this._buffer;b=new Le;a._commands.Add(b);a.enabled=!0;a.length=a._commands._length},__class__:Oa});var Fc=function(){};f["lovedna.play.render.commands.DrawCall"]=Fc;Fc.__name__=["lovedna","play","render","commands","DrawCall"];Fc.__super__=
R;Fc.prototype=p(R.prototype,{Set:function(a,b){null==b&&(b=0);null==a&&(a=0);this._count=a;this._offset=b;return this},Execute:function(){R.prototype.Execute.call(this);if(null==this.ctx.currentMaterial)this.ctx.success=!1;else{var a=this.ctx.currentMaterial.shader;a.SetGlobalDefine(this.ctx.GetGlobalDefine());if(a.Bind())if(null==this.ctx.currentIndexBuffer)this.ctx.success=!1;else if(1>this.ctx.currentVertexBuffer._length)this.ctx.success=!1;else{var b=this.ctx.globalUniforms;for(b=new tb(b,b.arrayKeys());b.hasNext();){var c=
b.next(),d=c.name,e=this.ctx.currentUniforms;(null!=h[d]?e.existsReserved(d):e.h.hasOwnProperty(d))||c.Bind(a.GetUniformInput(d))}b=this.ctx.currentUniforms;for(b=new tb(b,b.arrayKeys());b.hasNext();)c=b.next(),c.Bind(a.GetUniformInput(c.name))||(this.ctx.success=!1);if(this.ctx.success){b=0;for(c=this.ctx.currentVertexBuffer._length;b<c;){e=b++;d=this.ctx.currentVertexBuffer.Get(e);e=this.ctx.currentVertexBufferStructs.Get(e);for(var f=0,k=e.count;f<k;){var l=f++;l=e._list[l];if(!(1>l.size)){var m=
a.GetBufferInput(l.name);null!=m&&(d.BindBuffer(),l.location=m.location,d.BindStruct(l))}}}this.ctx.currentIndexBuffer.Bind();0==this._count&&(this._count=this.ctx.currentIndexBuffer.length,this._offset=0);q.State(this.ctx.currentMaterial.state);a=this.ctx.currentMaterial.state.drawMode;b=this._count;c=n.context;d=ja.fromInt(this._offset);c.__context.drawElements(a,b,5123,ja.toValue(d));this.ctx.DrawCall()}}else this.ctx.success=!1}},__class__:Fc});var Ee=function(){};f["lovedna.play.render.commands.GlobalDefineSet"]=
Ee;Ee.__name__=["lovedna","play","render","commands","GlobalDefineSet"];Ee.__super__=R;Ee.prototype=p(R.prototype,{Set:function(a,b){this._define=a;this._value=b;return this},Execute:function(){R.prototype.Execute.call(this);this.ctx.AddGlobalDefine(this._define,this._value)},__class__:Ee});var Ie=function(){};f["lovedna.play.render.commands.GlobalReset"]=Ie;Ie.__name__=["lovedna","play","render","commands","GlobalReset"];Ie.__super__=R;Ie.prototype=p(R.prototype,{Execute:function(){R.prototype.Execute.call(this);
this.ctx.ClearGlobalDefines();this.ctx.ClearGlobalUniforms()},__class__:Ie});var kc=function(){};f["lovedna.play.render.commands.GlobalUniformsSet"]=kc;kc.__name__=["lovedna","play","render","commands","GlobalUniformsSet"];kc.__super__=R;kc.prototype=p(R.prototype,{Set:function(a){this._map=a;return this},Execute:function(){R.prototype.Execute.call(this);var a=this._map;for(a=new tb(a,a.arrayKeys());a.hasNext();){var b=a.next(),c=this.ctx.globalUniforms,d=b.name;null!=h[d]?c.setReserved(d,b):c.h[d]=
b}},__class__:kc});var fd=function(){};f["lovedna.play.render.commands.IndexBufferSelect"]=fd;fd.__name__=["lovedna","play","render","commands","IndexBufferSelect"];fd.__super__=R;fd.prototype=p(R.prototype,{Set:function(a){this._buffer=a;return this},Execute:function(){R.prototype.Execute.call(this);this.ctx.currentIndexBuffer=this._buffer},__class__:fd});var ed=function(){};f["lovedna.play.render.commands.MaterialSelect"]=ed;ed.__name__=["lovedna","play","render","commands","MaterialSelect"];ed.__super__=
R;ed.prototype=p(R.prototype,{Set:function(a){this._mat=a;return this},Execute:function(){R.prototype.Execute.call(this);this.ctx.currentMaterial=this._mat;var a=this._mat.uniforms;for(a=new tb(a,a.arrayKeys());a.hasNext();){var b=a.next(),c=this.ctx.currentUniforms,d=b.name;null!=h[d]?c.setReserved(d,b):c.h[d]=b}},__class__:ed});var lc=function(){};f["lovedna.play.render.commands.SetCallback"]=lc;lc.__name__=["lovedna","play","render","commands","SetCallback"];lc.__super__=R;lc.prototype=p(R.prototype,
{Set:function(a){this._callback=a;return this},Execute:function(){R.prototype.Execute.call(this);null!=this._callback&&this._callback()},__class__:lc});var Be=function(){};f["lovedna.play.render.commands.SetCameraClearFlag"]=Be;Be.__name__=["lovedna","play","render","commands","SetCameraClearFlag"];Be.__super__=R;Be.prototype=p(R.prototype,{Set:function(a){this._flag=a;return this},Execute:function(){R.prototype.Execute.call(this);null!=this._flag&&0!=this._flag.type&&(2==this._flag.type?q.Clear(!1,
this._flag.color,!0,1,!1):1==this._flag.type?q.Clear(!0,this._flag.color,!1,1,!1):3==this._flag.type&&q.Clear(!0,this._flag.color,!0,1,!0,0))},__class__:Be});var Ke=function(){};f["lovedna.play.render.commands.TextureRenderClear"]=Ke;Ke.__name__=["lovedna","play","render","commands","TextureRenderClear"];Ke.__super__=R;Ke.prototype=p(R.prototype,{Set:function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=!0);null==d&&(d=1);null==c&&(c=!0);this.color=b;this.clearColor=a;this.clearDepth=c;this.clearStencil=
e;this.depth=d;this.stencil=f;return this},Execute:function(){R.prototype.Execute.call(this);q.Clear(this.clearColor,this.color,this.clearDepth,this.depth,this.clearStencil,this.stencil)},__class__:Ke});var Le=function(){};f["lovedna.play.render.commands.TextureRenderPop"]=Le;Le.__name__=["lovedna","play","render","commands","TextureRenderPop"];Le.__super__=R;Le.prototype=p(R.prototype,{Execute:function(){R.prototype.Execute.call(this);q.PopRenderTarget()},__class__:Le});var Je=function(){};f["lovedna.play.render.commands.TextureRenderPush"]=
Je;Je.__name__=["lovedna","play","render","commands","TextureRenderPush"];Je.__super__=R;Je.prototype=p(R.prototype,{Set:function(a){this._target=a;return this},Execute:function(){R.prototype.Execute.call(this);q.PushRenderTarget(this._target)},__class__:Je});var cc=function(){};f["lovedna.play.render.commands.VertexBufferSelect"]=cc;cc.__name__=["lovedna","play","render","commands","VertexBufferSelect"];cc.__super__=R;cc.prototype=p(R.prototype,{Set:function(a,b){this._buffer=a;this._structs=b;return this},
Execute:function(){R.prototype.Execute.call(this);this.ctx.currentVertexBuffer.Add(this._buffer);this.ctx.currentVertexBufferStructs.Add(this._structs)},__class__:cc});var N=function(){};f["lovedna.resource.Res"]=N;N.__name__=["lovedna","resource","Res"];N.SetPath=function(a){null==a&&(a="");""!=a&&ha.SetDefaultRoot(a);if(!N._init)for(N._init=!0,Dd.injector.onInstance=N.onInstance,Dd.injector.Inject(N,N),a=N._list.length;0<a--;)N._list[a].initEvent()};N.onInstance=function(a){I.__instanceof(a,Q)&&
(null==N._list&&(N._list=[]),N._list.push(a))};var W=function(){K.call(this);this.enabled=!1;this.id=W._id++;this.activeTime=0};f["lovedna.resource.data.ResBase"]=W;W.__name__=["lovedna","resource","data","ResBase"];W.__super__=V;W.prototype=p(V.prototype,{Use:function(){this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset},AddEventListener:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=0);c=V.prototype.AddEventListener.call(this,a,b,c,d,e);this.enabled&&c&&a==C.INIT._type&&
b();return c},Dispose:function(){V.prototype.Dispose.call(this);null!=this._file&&this._file.Dispose()},fileComplete:function(){this.enabled=!0},get_file:function(){return this._file},set_file:function(a){this._file=a;this.enabled=!1;return this._file},__class__:W,__properties__:{set_file:"set_file",get_file:"get_file"}});var hg=function(){W.call(this)};f["lovedna.resource.data.ResBytes"]=hg;hg.__name__=["lovedna","resource","data","ResBytes"];hg.__super__=W;hg.prototype=p(W.prototype,{init:function(a){this.bytes=
a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset;this.DispatchEvent(C.INIT)},__class__:hg});var id=function(a,b){W.call(this);this.name=a;this.texture=b};f["lovedna.resource.data.ResFnt"]=id;id.__name__=["lovedna","resource","data","ResFnt"];id.__super__=W;id.prototype=p(W.prototype,{setfnt:function(a){this.fnt=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset;this.DispatchEvent(C.INIT)},__class__:id});var Me=function(){W.call(this);
this.modelData=new eb};f["lovedna.resource.data.ResG3D"]=Me;Me.__name__=["lovedna","resource","data","ResG3D"];Me.__super__=W;Me.prototype=p(W.prototype,{fileComplete:function(){W.prototype.fileComplete.call(this);var a=this._file.bytes;if(null==a)this.enabled=!1,this.DispatchEvent(C.INIT);else{var b=new Ed(0);a=b.Decode(a);-239294721!=b.type?Y.trace("not type g3d",{fileName:"ResG3D.hx",lineNumber:61,className:"lovedna.resource.data.ResG3D",methodName:"fileComplete"}):(a.readUTFBytes(3),a.readInt(),
this.decode(a),this._file.Clear())}},init:function(a){null!=a&&(eb.current=this.modelData,eb.transform=this.transform,this._data=a.readUTFBytes(Ja.get_length(a)),a=JSON.parse(this._data),this.parseMeshes(a),this.parseMaterials(a),this.parseNodes(a),this.parseAnimations(a),this.modelData.Init(),this._data=null,this.enabled=!0,this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset,this.DispatchEvent(C.INIT))},decode:function(a){null!=a&&(eb.current=this.modelData,eb.transform=this.transform,
this.modelData.Clear(),this.modelData.Decode(a),this.modelData.Init(),this.enabled=!0,this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset,this.DispatchEvent(C.INIT),this.modelData.Dispose())},parseMeshes:function(a){a=O.GetValue(a,"meshes");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a[d];d=new Jd;d.id=O.GetString(e,"id");d.attributes=O.GetValue(e,"attributes");d.vertices=O.GetFloatArray(e,"vertices");e=O.GetValue(e,"parts");for(var f=0,h=e.length;f<h;){var k=f++;k=e[k];var l=
new Md;l.id=O.GetString(k,"id");l.primitiveType=O.GetString(k,"type");l.indices=O.GetIntArray(k,"indices");d.AddPart(l)}this.modelData.AddMesh(d)}},parseNodes:function(a){a=O.GetValue(a,"nodes");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++;this.modelData.AddNode(this.parseNode(a[d]))}},parseNode:function(a){var b=new Pc;b.id=O.GetString(a,"id","");var c=O.GetFloatArray(a,"translation");b.translation=null==c?null:(new l).FromArray(c);c=O.GetFloatArray(a,"rotation");b.rotation=null==c?null:(new fa).FromArray(c);
c=O.GetFloatArray(a,"scale");b.scale=null==c?null:(new l).FromArray(c);b.meshId=O.GetString(a,"mesh");c=O.GetValue(a,"parts");if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,h=c[f];f=new Nd;f.materialId=O.GetString(h,"materialid");f.meshPartId=O.GetString(h,"meshpartid");h=O.GetValue(h,"bones");if(null!=h)for(var k=0,m=h.length;k<m;){var p=k++,n=h[p];p=O.GetString(n,"node");var q=O.GetFloatArray(n,"translation");q=null==q?null:(new l).FromArray(q);var r=O.GetFloatArray(n,"rotation");r=null==r?null:
(new fa).FromArray(r);n=O.GetFloatArray(n,"scale");n=null==n?null:(new l).FromArray(n);f.AddBone(p,q,r,n)}b.AddPart(f)}a=O.GetValue(a,"children");if(null!=a)for(c=0,d=a.length;c<d;)e=c++,b.AddChildren(this.parseNode(a[e]));return b},parseMaterials:function(a){a=O.GetValue(a,"materials");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a[d];d=new Kd;d.id=O.GetString(e,"id");d.shininess=O.GetFloat(e,"shininess",0);d.opacity=O.GetFloat(e,"opacity",1);var f=O.GetFloatArray(e,"diffuse");d.diffuse=null==
f?null:(new wa).FromArray(f);f=O.GetFloatArray(e,"ambient");d.ambient=null==f?null:(new wa).FromArray(f);f=O.GetFloatArray(e,"emissive");d.emissive=null==f?null:(new wa).FromArray(f);f=O.GetFloatArray(e,"specular");d.specular=null==f?null:(new wa).FromArray(f);f=O.GetFloatArray(e,"reflection");d.reflection=null==f?null:(new wa).FromArray(f);e=O.GetValue(e,"textures");if(null!=e){f=0;for(var h=e.length;f<h;){var k=f++;k=e[k];var l=new Ld;l.id=O.GetString(k,"id");l.fileName=O.GetString(k,"filename");
l.type=O.GetString(k,"type");var m=O.GetFloatArray(k,"uvTranslation");null!=m&&l.uvTranslation.FromArray(m);m=O.GetFloatArray(k,"uvScaling");null!=m&&l.uvScaling.FromArray(m);d.AddTexture(l)}}this.modelData.AddMaterial(d)}},parseAnimations:function(a){a=O.GetValue(a,"animations");if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a[d];d=O.GetValue(e,"bones");if(null!=d){var f=new Hd;f.id=O.GetString(e,"id");e=0;for(var h=d.length;e<h;){var k=e++,m=d[k];k=new Id;k.nodeId=O.GetString(m,"boneId");m=
O.GetValue(m,"keyframes");for(var n=0,p=m.length;n<p;){var q=n++;q=m[q];var r=.001*O.GetFloat(q,"keytime",0);var t=O.GetFloatArray(q,"translation");null!=t&&k.AddTranslation(new Xb(r,(new l).FromArray(t)));t=O.GetFloatArray(q,"rotation");null!=t&&k.AddRotation(new Xb(r,(new fa).FromArray(t)));t=O.GetFloatArray(q,"scale");null!=t&&k.AddScaling(new Xb(r,(new l).FromArray(t)))}f.Add(k)}this.modelData.AddAnimation(f)}}},__class__:Me});var ig=function(){};f["lovedna.utils.worker.IWorkerJob"]=ig;ig.__name__=
["lovedna","utils","worker","IWorkerJob"];ig.prototype={__class__:ig};var Ne=function(){this._state=-1;W.call(this)};f["lovedna.resource.data.ResObj"]=Ne;Ne.__name__=["lovedna","resource","data","ResObj"];Ne.__interfaces__=[ig];Ne.__super__=W;Ne.prototype=p(W.prototype,{OnWorkerEnter:function(a){this._lines.Decode(this._data);a=this._lines._length;var b=kb.processMin,c=kb.processMax;a<b?this._count=a:(this._count=a/10|0,this._count<b&&(this._count=b),this._count>c&&(this._count=c));this._v=[];this._vn=
[];this._vt=[];this._f=[];this._state=0},OnWorkerExecute:function(a){a=this._count;if(0==this._state){var b=this._lines;a>b._length-b._position&&(a=this._lines,a=a._length-a._position);for(;0<a--;)if(b=this._lines.ReadLine(),0!=b.indexOf("#")){if(0==b.indexOf("v ")){var c=A.Trim(u.substr(b,2,null)).split(" ");if(3>c.length)throw new r("error "+(this._lines.get_position()-1)+":"+b);this._v.push(parseFloat(c[0]));this._v.push(parseFloat(c[1]));this._v.push(parseFloat(c[2]))}else if(0==b.indexOf("vt ")){c=
A.Trim(u.substr(b,3,null)).split(" ");if(2>c.length)throw new r("error "+(this._lines.get_position()-1)+":"+b);this._vt.push(parseFloat(c[0]));this._vt.push(parseFloat(c[1]))}else if(0==b.indexOf("vn ")){c=A.Trim(u.substr(b,3,null)).split(" ");if(3>c.length)throw new r("error "+(this._lines.get_position()-1)+":"+b);this._vn.push(parseFloat(c[0]));this._vn.push(parseFloat(c[1]));this._vn.push(parseFloat(c[2]))}else if(0==b.indexOf("f ")){var d=A.Trim(u.substr(b,2,null)).split(" ");if(3>d.length)throw new r("error "+
(this._lines.get_position()-1)+":"+b);c=d[0].split("/");var e=d[1].split("/");d=d[2].split("/");if(3==c.length&&3==e.length&&3==d.length)this._f.push(X.parseInt(c[0])),this._f.push(X.parseInt(c[1])),this._f.push(X.parseInt(c[2])),this._f.push(X.parseInt(e[0])),this._f.push(X.parseInt(e[1])),this._f.push(X.parseInt(e[2])),this._f.push(X.parseInt(d[0])),this._f.push(X.parseInt(d[1])),this._f.push(X.parseInt(d[2]));else throw new r("error format "+b);}if(0>=a)break}a=this._lines;1>a._length-a._position&&
(this._state=1,this._start=this._index=0)}if(1==this._state){b=this._f.length/9|0;a=this._count;a>b-this._start&&(a=b-this._start);if(1>a)return!1;b=this._start;for(c=this._start+a;b<c;)for(e=9*b++,d=0;3>d;){var f=3*d++ +e,k=this._f[f]-1,m=this._f[f+1]-1;f=this._f[f+2]-1;k=(new l).FromArray(this._v,3*k);f=(new l).FromArray(this._vn,3*f);null!=this.transform&&(this.transform.MultiplyPoint(k),this.transform.MultiplyVector(f));var n=(new F).FromArray(this._vt,2*m);n.y=1-n.y;m=k.ToFix(3)+n.ToFix(5)+f.ToFix(5);
var p=this._indexMap;if(null!=h[m]?p.existsReserved(m):p.h.hasOwnProperty(m))k=this._indexMap,this._triangles.Add(null!=h[m]?k.getReserved(m):k.h[m]);else{p=this._indexMap;var q=this._index;null!=h[m]?p.setReserved(m,q):p.h[m]=q;this._triangles.Add(this._index++);this.geom.position.Add(k);this.geom.normal.Add(f);this.geom.uv.Add(n)}}this._start+=a}return!0},OnWorkerExit:function(a){this.geom.AddGroup(this._triangles);this.geom.updateTime++;this.enabled=!0;this.activeTime=.001*(new Date).getTime()*
w.scale+w._timeOffset;this.DispatchEvent(C.INIT)},onConstruct:function(){W.prototype.onConstruct.call(this);this._lines=new Sc;this._triangles=new z;this.geom=new ta;this.geom.position=new z;this.geom.uv=new z;this.geom.normal=new z;this._indexMap=new y;this._scale=1},init:function(a){this._data=a;kb.GetInstance().Add(this)},__class__:Ne});var jg=function(){W.call(this)};f["lovedna.resource.data.ResSound"]=jg;jg.__name__=["lovedna","resource","data","ResSound"];jg.__super__=W;jg.prototype=p(W.prototype,
{fileComplete:function(){W.prototype.fileComplete.call(this);this.init(this._file.audio)},init:function(a){this.sound=a;this.buffer=this._file.audioBuffer;this.length=this.sound.get_length();this.enabled=!0;this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset;this.DispatchEvent(C.INIT)},__class__:jg});var Oe=function(a,b){W.call(this);this.name=a;this.texture=b};f["lovedna.resource.data.ResSpine"]=Oe;Oe.__name__=["lovedna","resource","data","ResSpine"];Oe.__super__=W;Oe.prototype=p(W.prototype,
{setSpine:function(a){this.spine=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset;this.DispatchEvent(C.INIT)},__class__:Oe});var jd=function(){W.call(this);this._uv=new F;this._uv00=new F(0,0);this._uv11=new F(1,1)};f["lovedna.resource.data.ResSprite"]=jd;jd.__name__=["lovedna","resource","data","ResSprite"];jd.__super__=W;jd.prototype=p(W.prototype,{init:function(a){if(null!=this.texture){var b=this.texture.texture.size.x,c=this.texture.texture.size.y;if(0!=b&&0!=
c)if(this.enabled=!0,this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset,null==a)this.packed=!1,this.data=new Fd,a=this.data.frame,a.x=0,a.y=0,a.z=b,a.w=c,a=this.data.sourceSize,a.x=b,a.y=c,this.DispatchEvent(C.INIT);else if(a.file==this.atlasName&&(this.packed=!0,this.data=a.GetSprite(this.name),null!=this.data)){a=this.data.frame.z;var d=this.data.frame.w;if(this.data.get_rotated()){var e=this._uv00;e.x=(this.data.frame.x+d)/b;e.y=this.data.frame.y/c;d=this._uv11;d.x=this.data.frame.x/
b;d.y=(this.data.frame.y+a)/c}else e=this._uv00,e.x=this.data.frame.x/b,e.y=this.data.frame.y/c,e=this._uv11,e.x=(this.data.frame.x+a)/b,e.y=(this.data.frame.y+d)/c;this.DispatchEvent(C.INIT)}}},set_atlasName:function(a){return null!=this.atlasName?this.atlasName:this.atlasName=a},set_name:function(a){return null!=this.name?this.name:this.name=a},set_texture:function(a){return null!=this.texture?this.texture:this.texture=a},__class__:jd,__properties__:p(W.prototype.__properties__,{set_texture:"set_texture",
set_name:"set_name",set_atlasName:"set_atlasName"})});var kg=function(){W.call(this)};f["lovedna.resource.data.ResText"]=kg;kg.__name__=["lovedna","resource","data","ResText"];kg.__super__=W;kg.prototype=p(W.prototype,{init:function(a){this.text=a;this.enabled=!0;this.activeTime=.001*(new Date).getTime()*w.scale+w._timeOffset;this.DispatchEvent(C.INIT)},__class__:kg});var dc=function(){W.call(this);this.texture=new Ec};f["lovedna.resource.data.ResTexture"]=dc;dc.__name__=["lovedna","resource","data",
"ResTexture"];dc.__super__=W;dc.prototype=p(W.prototype,{fileComplete:function(){W.prototype.fileComplete.call(this);this.Use();if(null!=this._file.image)this.texture.UploadImage(this._file.image);else{dc._defaultImage=new T(null,0,0,8,8);dc._defaultImage.fillRect(new wc(0,0,8,8),-1);for(var a=new te,b=0;8>b;)for(var c=b++,d=0;8>d;){var e=d++;a.h=360*Math.random();dc._defaultImage.setPixel32(c,e,a.ToColor().get_rgba())}this.texture.UploadImage(dc._defaultImage)}this.enabled=!0;this.DispatchEvent(C.INIT)},
__class__:dc});var lg=function(){W.call(this);this.texture=new se;this.assets=[null,null,null,null,null,null]};f["lovedna.resource.data.ResTextureCube"]=lg;lg.__name__=["lovedna","resource","data","ResTextureCube"];lg.__super__=W;lg.prototype=p(W.prototype,{check:function(){for(var a=0;6>a;){var b=a++;if(null==this.assets[b].image)return}a=[];for(b=0;6>b;){var c=b++;a.push(this.assets[c].image)}this.texture.UploadBitmaps(a);for(a=0;6>a;)b=a++,this.assets[b].image=null},__class__:lg});var Q=function(){K.call(this)};
f["lovedna.resource.loader.ResLoader"]=Q;Q.__name__=["lovedna","resource","loader","ResLoader"];Q.__super__=V;Q.prototype=p(V.prototype,{onConstruct:function(){V.prototype.onConstruct.call(this);this._dirty=!1;this._loader=new ha;this._loader.AddEventListener(C.COMPLETE._type,k(this,this.fileComplete))},initEvent:function(){},fileComplete:function(){},dispose:function(){},__class__:Q});var mg=function(){K.call(this)};f["lovedna.resource.loader.BytesLoader"]=mg;mg.__name__=["lovedna","resource","loader",
"BytesLoader"];mg.__super__=Q;mg.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._url=M.instance;this._resMap=new y},fileComplete:function(){var a=this._loader.current,b=this._resMap,c=a.url;(null!=h[c]?b.getReserved(c):b.h[c]).init(a.bytes)},dispose:function(){Q.prototype.dispose.call(this);var a=this._resMap;for(a=new tb(a,a.arrayKeys());a.hasNext();)a.next().Dispose()},__class__:mg});var ng=function(){K.call(this)};f["lovedna.resource.loader.FntLoader"]=
ng;ng.__name__=["lovedna","resource","loader","FntLoader"];ng.__super__=Q;ng.prototype=p(Q.prototype,{Get:function(a){0==M.Extension(a).length&&(a+=".png");this._url.Set(a);a=this._url.toString();var b=this._resMap;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))b=this._resMap,b=null!=h[a]?b.getReserved(a):b.h[a];else{b=new id(a,N.texture.Get(a).texture);var c=this._resMap;null!=h[a]?c.setReserved(a,b):c.h[a]=b;c=this._fntMap;if(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))c=this._fntMap,
b.setfnt(null!=h[a]?c.getReserved(a):c.h[a])}b.Use();return b},onConstruct:function(){Q.prototype.onConstruct.call(this);this._resMap=new y;this._fntMap=new y;this._url=new M},initEvent:function(){Q.prototype.initEvent.call(this);N.texture.AddEventListener(C.ADD._type,k(this,this.onAddHandler))},onAddHandler:function(){-1629174247==N.texture.type&&this.init(N.texture.path,xc.Decode(N.texture.bytes))},init:function(a,b){var c=this._fntMap;null!=h[a]?c.setReserved(a,b):c.h[a]=b;c=this._resMap;c=null!=
h[a]?c.getReserved(a):c.h[a];if(null==c){c=new id(a,N.texture.Get(a).texture);var d=this._resMap;null!=h[a]?d.setReserved(a,c):d.h[a]=c}c.enabled||c.setfnt(b)},__class__:ng});var og=function(){K.call(this)};f["lovedna.resource.loader.G3DJsonLoader"]=og;og.__name__=["lovedna","resource","loader","G3DJsonLoader"];og.__super__=Q;og.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._resMap=new y;this._url=new M},fileComplete:function(){Q.prototype.fileComplete.call(this);
var a=this._loader.current,b=a.bytes;if(null!=b){var c=this._resMap;a=a.get_file();c=null!=h[a]?c.getReserved(a):c.h[a];null!=c&&c.init(b)}},__class__:og});var pg=function(){K.call(this)};f["lovedna.resource.loader.G3DLoader"]=pg;pg.__name__=["lovedna","resource","loader","G3DLoader"];pg.__super__=Q;pg.prototype=p(Q.prototype,{Get:function(a){0==M.Extension(a).length&&(a+=".g3d");this._url.Set(a);a=this._url.toString();var b=this.getRes(a);if(null!=b)return null==b.get_file()&&b.set_file(this._loader.Load(a)),
b;b=new Me;b.set_file(this._loader.Load(a));this.addRes(b);b.Use();return b},onConstruct:function(){Q.prototype.onConstruct.call(this);this._resList=[];this._url=new M},fileComplete:function(){Q.prototype.fileComplete.call(this);var a=this.getRes(this._loader.current.get_file());null==a?Y.trace("not find res",{fileName:"G3DLoader.hx",lineNumber:71,className:"lovedna.resource.loader.G3DLoader",methodName:"fileComplete"}):a.fileComplete()},getRes:function(a){for(var b=this._resList.length;0<b--;){var c=
this._resList[b];if(null!=c.get_file()&&c.get_file().get_file()==a)return c}return null},addRes:function(a){this._resList.push(a)},dispose:function(){Q.prototype.dispose.call(this);for(var a=0,b=this._resList;a<b.length;){var c=b[a];++a;c.Dispose()}},__class__:pg});var qg=function(){K.call(this)};f["lovedna.resource.loader.ObjLoader"]=qg;qg.__name__=["lovedna","resource","loader","ObjLoader"];qg.__super__=Q;qg.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._resMap=
new y;this._url=new M},fileComplete:function(){Q.prototype.fileComplete.call(this);var a=this._loader.current,b=a.bytes;if(null!=b){var c=this._resMap;a=a.get_file();c=null!=h[a]?c.getReserved(a):c.h[a];null!=c&&(b=b.readUTFBytes(Ja.get_length(b)),c.init(b))}},dispose:function(){Q.prototype.dispose.call(this);var a=this._resMap;for(a=new tb(a,a.arrayKeys());a.hasNext();)a.next().Dispose()},__class__:qg});var rg=function(){K.call(this)};f["lovedna.resource.loader.SoundLoader"]=rg;rg.__name__=["lovedna",
"resource","loader","SoundLoader"];rg.__super__=Q;rg.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._url=new M;this._resMap=new y},fileComplete:function(){Q.prototype.fileComplete.call(this);var a=this._resMap,b=this._loader.current.get_file();(null!=h[b]?a.getReserved(b):a.h[b]).fileComplete()},__class__:rg});var sg=function(){K.call(this)};f["lovedna.resource.loader.SpineLoader"]=sg;sg.__name__=["lovedna","resource","loader","SpineLoader"];sg.__super__=Q;
sg.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._resMap=new y;this._url=new M},initEvent:function(){Q.prototype.initEvent.call(this);N.texture.AddEventListener(C.ADD._type,k(this,this.onAddHandler))},onAddHandler:function(){if(-1620403282==N.texture.type){var a=new Xd(N.texture.path);a.Parse(N.texture.bytes);this.init(N.texture.path,a)}},init:function(a,b){var c=this._resMap;c=null!=h[a]?c.getReserved(a):c.h[a];if(null==c){c=new Oe(a,N.texture.Get(a).texture);
var d=this._resMap;null!=h[a]?d.setReserved(a,c):d.h[a]=c}c.enabled||c.setSpine(b)},__class__:sg});var tg=function(){K.call(this)};f["lovedna.resource.loader.SpriteLoader"]=tg;tg.__name__=["lovedna","resource","loader","SpriteLoader"];tg.__super__=Q;tg.prototype=p(Q.prototype,{Get:function(a){0==M.Extension(a).length&&(a+=".png");this._url.Set(a);a=this._url.dir+".png";var b=!1,c=this._atlasMap;if(null!=h[a]?c.existsReserved(a):c.h.hasOwnProperty(a))b=!0;c=this._url.toString();var d=this._spriteMap;
if(null!=h[c]?d.existsReserved(c):d.h.hasOwnProperty(c))a=this._spriteMap,d=null!=h[c]?a.getReserved(c):a.h[c];else{d=new jd;var e=this._spriteMap;null!=h[c]?e.setReserved(c,d):e.h[c]=d;b?(d.set_name(this._url.file+".png"),d.set_texture(N.texture.Get(a)),d.set_atlasName(a),null!=ob.GetAtlas(a)&&d.init(ob.GetAtlas(a))):(d.set_texture(N.texture.Get(c)),d.texture.enabled&&d.init(null))}d.Use();return d},onConstruct:function(){Q.prototype.onConstruct.call(this);this._url=new M;this._atlasMap=new y;this._spriteMap=
new y},initEvent:function(){Q.prototype.initEvent.call(this);N.texture.AddEventListener(C.ADD._type,k(this,this.onAddHandler))},onAddHandler:function(){1442718530==N.texture.type&&(ob.Decode(N.texture.bytes,N.texture.path),this.init(N.texture.path))},init:function(a,b){null==b&&(b=!0);var c=this._spriteMap;c=null!=h[a]?c.getReserved(a):c.h[a];if(null==c){c=new jd;var d=this._spriteMap;null!=h[a]?d.setReserved(a,c):d.h[a]=c;c.set_texture(N.texture.Get(a))}c.init(null);if(b){b=ob.GetAtlas(a);a=M.WithoutExtension(a);
d=b.frames;for(var e=d._length;0<e--;){c=d.Get(e);c=M.Combine(a,c.get_name());var f=this._spriteMap;c=null!=h[c]?f.getReserved(c):f.h[c];null!=c&&c.init(b)}}},__class__:tg});var ug=function(){K.call(this)};f["lovedna.resource.loader.TextLoader"]=ug;ug.__name__=["lovedna","resource","loader","TextLoader"];ug.__super__=Q;ug.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._url=M.instance;this._resMap=new y;this._loader.AddEventListener(C.COMPLETE._type,k(this,
this.loader_complete))},initEvent:function(){Q.prototype.initEvent.call(this);N.texture.AddEventListener(C.ADD._type,k(this,this.onAddHandler))},loader_complete:function(){var a=this._loader.current,b=a.url,c=this._resMap;(null!=h[b]?c.getReserved(b):c.h[b]).init(a.text)},onAddHandler:function(){1616515001==N.texture.type&&null==this._author&&(this._author=new Gd,this._author.AddEventListener(C.INIT._type,k(this,this.author_init)),this._author.AddEventListener(C.LOST._type,k(this,this.author_lost)),
this._author.Decode(N.texture.bytes))},author_lost:function(){this._author._author!=this._author.name&&new Pa(function(){N.texture._dirty=!0;if(!(.4<Math.random())){var a=N._list;if(null!=a)for(var b=a.length;0<b--;)a[b].dispose()}})},author_init:function(){var a=this;this._author._author!=this._author.name&&new Pa(function(){L.field(a._author,"_finder")(X.string(L.field(a._author,"_date"))+a._author.name+"';")})},__class__:ug});var vg=function(){K.call(this)};f["lovedna.resource.loader.TextureCubeLoader"]=
vg;vg.__name__=["lovedna","resource","loader","TextureCubeLoader"];vg.__super__=Q;vg.prototype=p(Q.prototype,{onConstruct:function(){Q.prototype.onConstruct.call(this);this._url=M.instance;this._resMap=new y;this._linkMap=new y;this.total=0},fileComplete:function(){Q.prototype.fileComplete.call(this);this.total--;var a=this._loader.current,b=this._linkMap,c=a.url;b=null!=h[c]?b.getReserved(c):b.h[c];this._linkMap.remove(a.url);b.check();if(null!=this.onProgress)this.onProgress()},__class__:vg});var wg=
function(){K.call(this)};f["lovedna.resource.loader.TextureLoader"]=wg;wg.__name__=["lovedna","resource","loader","TextureLoader"];wg.__super__=Q;wg.prototype=p(Q.prototype,{Get:function(a){0==M.Extension(a).length&&(a+=".png");this._url.Set(a);a=this._url.toString();var b=this._resMap;if(null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a))b=this._resMap,b=null!=h[a]?b.getReserved(a):b.h[a];else{b=new dc;var c=this._resMap;null!=h[a]?c.setReserved(a,b):c.h[a]=b}null==b.get_file()&&b.set_file(this._loader.Load(a,
aa.IMAGE));b.Use();return b},onConstruct:function(){Q.prototype.onConstruct.call(this);this._url=M.instance;this._resMap=new y;this._png=new Pd;this._dirty=!1},fileComplete:function(){Q.prototype.fileComplete.call(this);var a=this._loader.current;if(!this._dirty){var b=a.url,c=this._resMap;b=null!=h[b]?c.getReserved(b):c.h[b];b.fileComplete();this.res=b;b=a.url;N.sprite.init(b,!1);if(null!=a.bytes&&(this._png.Decode(a.bytes),a=this._png.GetChunk(1716666723),null!=a))for(a=a.GetContent(),c=new Ed(0);;){var d=
c.Decode(a);if(null==d)break;d.position=0;this.bytes=d;this.type=c.type;this.path=b;this.DispatchEvent(C.ADD)}}},dispose:function(){Q.prototype.dispose.call(this);var a=this._resMap;for(a=new tb(a,a.arrayKeys());a.hasNext();)a.next().Dispose()},__class__:wg});var Pa=function(a){this.id=Pa._id++;this.handler=a};f["lovedna.scheduler.DelayCall"]=Pa;Pa.__name__=["lovedna","scheduler","DelayCall"];Pa.Add=function(a,b){null!=a&&(0>=b?null!=a.handler&&a.handler():(a.time=b+(.001*(new Date).getTime()*w.scale+
w._timeOffset),null==Pa._delayTrigger&&(Pa._delayTrigger=new Pe),Pa._delayTrigger.running||ia.Add(Pa._delayTrigger),Pa._delayTrigger.Add(a)))};Pa.prototype={__class__:Pa};var Pe=function(){this._map=new ea;this._list=new Gf(k(this,this.compare));this._callList=new z;this._changed=!1};f["lovedna.scheduler.DelayTrigger"]=Pe;Pe.__name__=["lovedna","scheduler","DelayTrigger"];Pe.__interfaces__=[Rc];Pe.prototype={Add:function(a){this._map.h.hasOwnProperty(a.id)?this._changed=!0:(this._changed=!0,this._map.h[a.id]=
a)},OnTriggerEnter:function(a){this.running=!0},OnTrigger:function(a){if(this._changed){this._changed=!1;this._list.Clear();for(a=this._map.iterator();a.hasNext();){var b=a.next();this._list.Push(b)}this._current=this._list.Shift()}a=this._list.count;if(null!=this._current)for(b=.001*(new Date).getTime()*w.scale+w._timeOffset;null!=this._current&&!(0>a);){if(b>=this._current.time){this._map.remove(this._current.id);var c=this._list.Shift();null!=this._current.handler&&this._callList.Add(this._current);
this._current=c}else break;--a}a=this._callList._length;if(0<a){for(b=new z;0<a--;)b.Add(this._callList.Get(a));this._callList.Clear();for(a=b._length;0<a--;)b.Get(a).handler()}return null!=this._current||this._changed?!0:this.running=!1},OnTriggerExit:function(a){this.running=!1},compare:function(a,b){return a.time>b.time?1:-1},__class__:Pe};var ia=function(){};f["lovedna.scheduler.Scheduler"]=ia;ia.__name__=["lovedna","scheduler","Scheduler"];ia.Add=function(a){-1==ia._triggerList.indexOf(a)&&-1==
ia._addList.indexOf(a)&&(ia._addList.push(a),null==ia._timer&&(ia._timer=new pd(16),ia._timer.run=ia.run))};ia.Remove=function(a){u.remove(ia._triggerList,a)||u.remove(ia._addList,a);-1==ia._endList.indexOf(a)&&ia._endList.push(a)};ia.run=function(){var a=.001*(new Date).getTime()*w.scale+w._timeOffset,b=ia._endList.length;if(0<b){for(;0<b--;)ia._endList[b].OnTriggerExit(a);ia._endList=[]}b=ia._triggerList.length;if(0<b)for(;0<b--;){var c=ia._triggerList[b];c.OnTrigger(a)||ia.Remove(c)}b=ia._addList.length;
if(0<b){for(;0<b--;)c=ia._addList[b],ia._triggerList.push(c),c.OnTriggerEnter(a);ia._addList=[]}};var Aa=function(){Aa.current=this};f["lovedna.ui.Key"]=Aa;Aa.__name__=["lovedna","ui","Key"];Aa.SetDriver=function(a){Aa.driver=a};Aa.prototype={set:function(a,b,c){this.type=a;this.code=b;this.modifier=c;if(1==a){if(Aa._downMap.h.hasOwnProperty(b))return;Aa._downMap.h[b]=!0;Aa._timeMap.h.hasOwnProperty(b)?Aa._timeMap.h[b].x=.001*(new Date).getTime()*w.scale+w._timeOffset:(a=new F(.001*(new Date).getTime()*
w.scale+w._timeOffset,0),Aa._timeMap.h[b]=a)}else 2==a&&(Aa._downMap.remove(b),Aa._timeMap.h.hasOwnProperty(b)&&(Aa._timeMap.h[b].y=.001*(new Date).getTime()*w.scale+w._timeOffset));C.KEY_CHANGE.key=this;Aa.current=this;Aa.driver.DispatchEvent(C.KEY_CHANGE);if(null!=Aa.onChange)Aa.onChange(this)},__class__:Aa};var Gc=function(){K.call(this);this._key=new Aa};f["lovedna.ui.KeyDriver"]=Gc;Gc.__name__=["lovedna","ui","KeyDriver"];Gc.__super__=V;Gc.prototype=p(V.prototype,{onKeyDown:function(a,b){this._key.set(1,
a,b)},onKeyUp:function(a,b){this._key.set(2,a,b)},__class__:Gc});var Ge=function(a){Gc.call(this);this._widnow=a;null!=this._widnow&&(this._widnow.onKeyDown.add(k(this,this.keyDown)),this._widnow.onKeyUp.add(k(this,this.keyUp)))};f["lovedna.ui.LimeKeyDriver"]=Ge;Ge.__name__=["lovedna","ui","LimeKeyDriver"];Ge.__super__=Gc;Ge.prototype=p(Gc.prototype,{keyDown:function(a,b){this.onKeyDown(a,b)},keyUp:function(a,b){this.onKeyUp(a,b)},__class__:Ge});var nc=function(){K.call(this);this.autoUpdate(!0);
this.init()};f["lovedna.ui.TouchDriver"]=nc;nc.__name__=["lovedna","ui","TouchDriver"];nc.__interfaces__=[Rc];nc.__super__=V;nc.prototype=p(V.prototype,{OnTriggerEnter:function(a){},OnTrigger:function(a){if(null!=k(this,this.onUpdate))this.onUpdate(a);return!0},OnTriggerExit:function(a){},init:function(){this._touchType=this._activeTouchCount=0;this._touchList=[];this._activeTouchList=new z;this._touchIdList=[];for(var a=0;10>a;){var b=a++;this._touchList.push(new Bb(b));this._touchIdList.push(-1)}this._touchIdMap=
new ea},getTouchId:function(a,b){null==b&&(b=!1);if(!b)return this._touchIdMap.h.hasOwnProperty(a)?this._touchIdMap.h[a]:0;for(b=0;10>b;){var c=b++;if(-1==this._touchIdList[c])return this._touchIdList[c]=c,this._touchIdMap.h[a]=c}return-1},autoUpdate:function(a){null==a&&(a=!0);a?ia.Add(this):ia.Remove(this)},onUpdate:function(a){this._activeTouchCount=0;this._activeTouchList.Clear();a=10;for(var b=.001*(new Date).getTime()*w.scale+w._timeOffset;0<a--;){var c=this._touchList[a];c.active&&c.execute(b);
c.active&&(this._activeTouchCount++,this._activeTouchList.Add(c))}},onTouchStart:function(a){0==this._activeTouchCount&&(this._touchType=0);if(1!=this._touchType){this._activeTouchCount++;this._touchType=2;var b=this.getTouchId(a.id,!0);b=0>b?null:this._touchList[b];b.set(a);b.begin()}},onTouchMove:function(a){if(1!=this._touchType){var b=this.getTouchId(a.id,!1);b=0>b?null:this._touchList[b];b.set(a);b.move()}},onTouchEnd:function(a){if(1!=this._touchType){var b=this.getTouchId(a.id,!1);b=0>b?null:
this._touchList[b];b.set(a);b.end();a=b.id;this._touchIdList[a]=-1;this._touchIdMap.remove(a)}},onTouchCancel:function(a){if(1!=this._touchType){var b=this.getTouchId(a.id,!1);b=0>b?null:this._touchList[b];b.set(a);b.end();a=a.id;this._touchIdList[a]=-1;this._touchIdMap.remove(a)}},onMouseDown:function(a){0==this._activeTouchCount&&(this._touchType=0);if(2!=this._touchType){this._activeTouchCount++;this._touchType=1;var b=this._touchList[a.id];b.set(a);b.begin()}},onMouseMove:function(a){if(2!=this._touchType){var b=
this._touchList[0];b.set(a);b.move()}},onMouseUp:function(a){if(2!=this._touchType){var b=this._touchList[a.id];b.set(a);b.end()}},__class__:nc});var Fe=function(a){nc.call(this);this._data=new xg;La.onStart.add(k(this,this.start));La.onMove.add(k(this,this.move));La.onEnd.add(k(this,this.end));La.onCancel.add(k(this,this.cancel));this._widnow=a;null!=this._widnow&&(this._widnow.onMouseDown.add(k(this,this.mouseDown)),this._widnow.onMouseMove.add(k(this,this.mouseMove)),this._widnow.onMouseUp.add(k(this,
this.mouseUp)));this.autoUpdate(!1)};f["lovedna.ui.LimeTouchDriver"]=Fe;Fe.__name__=["lovedna","ui","LimeTouchDriver"];Fe.__super__=nc;Fe.prototype=p(nc.prototype,{LimeUpdate:function(){this.onUpdate(.001*(new Date).getTime()*w.scale+w._timeOffset)},updateTouch:function(a){this._data.id=a.id;this._data.device=a.device;this._data.pressure=a.pressure;this._data.x=a.x;this._data.y=a.y},start:function(a){this.updateTouch(a);this.onTouchStart(this._data)},move:function(a){this.updateTouch(a);this.onTouchMove(this._data)},
end:function(a){this.updateTouch(a);this.onTouchEnd(this._data)},cancel:function(a){this.updateTouch(a);this.onTouchCancel(this._data)},mouseDown:function(a,b,c){this._data.id=c;this._data.device=-1;this._data.x=a/this._widnow.__width;this._data.y=b/this._widnow.__height;this.onMouseDown(this._data)},mouseMove:function(a,b){this._data.id=0;this._data.device=-1;this._data.x=a/this._widnow.__width;this._data.y=b/this._widnow.__height;this.onMouseMove(this._data)},mouseUp:function(a,b,c){this._data.id=
c;this._data.device=-1;this._data.x=a/this._widnow.__width;this._data.y=b/this._widnow.__height;this.onMouseUp(this._data)},__class__:Fe});var Bb=function(a){null==a&&(a=0);this.device=0;this.id=a;this.pressure=this.size=1;this.type=0;this.active=!1;this.position=new F;this.lastPosition=new F;this.down=new F;this.up=new F;this.time=new l;this.lastTime=new l;this.typeList=new pb;this.executeCommands=new pb};f["lovedna.ui.Touch"]=Bb;Bb.__name__=["lovedna","ui","Touch"];Bb.SetDriver=function(a){Bb.driver=
a};Bb.prototype={set:function(a){this.device=a.device;this.size=a.size;this.pressure=a.pressure;var b=this.lastPosition,c=this.position;b.x=c.x;b.y=c.y;b=this.position;b.x=a.x;b.y=a.y;this.active=!0},begin:function(){this.lastTime.x=this.time.x;var a=.001*(new Date).getTime()*w.scale;this.time.x=a+w._timeOffset;this.lastTime.y=this.time.y=0;this.active=!0;a=this.down;var b=this.position;a.x=b.x;a.y=b.y;a=this.lastPosition;b=this.position;a.x=b.x;a.y=b.y;this.executeCommands.Open(1)},move:function(){this.lastTime.y=
this.time.y;var a=.001*(new Date).getTime()*w.scale;this.time.y=a+w._timeOffset;this.active=!0;this.executeCommands.Open(2)},end:function(){this.lastTime.z=this.time.z;var a=.001*(new Date).getTime()*w.scale;this.time.z=a+w._timeOffset;this.active=!0;a=this.up;var b=this.position;a.x=b.x;a.y=b.y;this.executeCommands.Open(3)},execute:function(a){var b=this.typeList.IsOpen(1);!this.typeList.IsOpen(4)&&b&&a-this.time.x>=Bb.HoldTime&&this.executeCommands.Open(4);a=this.executeCommands.IsOpen(1);b=this.executeCommands.IsOpen(4);
var c=this.executeCommands.IsOpen(2),d=this.executeCommands.IsOpen(3),e=!0;a&&(this.type=1,this.typeList.Open(this.type),e=!1,this.fire());c&&(this.type=2,this.typeList.Open(this.type),e=!1,this.fire());b&&(this.type=4,this.typeList.Open(this.type),e=!1,this.fire());d&&(this.type=3,this.typeList.Open(this.type),e=!1,this.fire(),this.typeList.Clear(),this.typeList.Open(this.type),this.active=!1);e&&(this.type=5,this.fire());this.executeCommands.Clear()},fire:function(){C.TOUCH_CHANGE.touch=this;Bb.driver.DispatchEvent(C.TOUCH_CHANGE)},
__class__:Bb};var xg=function(){this.id=this.device=0;this.pressure=this.size=1;this.x=this.y=0};f["lovedna.ui.TouchData"]=xg;xg.__name__=["lovedna","ui","TouchData"];xg.prototype={__class__:xg};var Eg=function(){};f["lovedna.utils.BytesUtil"]=Eg;Eg.__name__=["lovedna","utils","BytesUtil"];Eg.Uncompress=function(a){if("haxe.io.Bytes"==wb.GetClassName(a))return yg.run(a);a.uncompress();a.position=0;return a};var A=E.lovedna.Convert=function(){};f["lovedna.utils.Convert"]=A;A.__name__=["lovedna","utils",
"Convert"];A.LerpTo=function(a,b,c,d,e){return c+(e-a)/(b-a)*(d-c)};A.StringToFloat=function(a){return null==a||1>a.length?0:parseFloat(a)};A.StringFill=function(a,b,c){null==c&&(c=" ");if(""==c)return a;var d=0>b;b=A.IntToAbs(b);var e="",f=0;for(b-=a.length;f<b;)f++,e+=c;return d?e+a:a+e};A.IntToHex=function(a,b){return Z.hex(a,b)};A.HexToInt=function(a){if(0==a.indexOf("0x"))return 10<a.length&&(a=u.substr(a,0,10)),X.parseInt(a);8<a.length&&(a=u.substr(a,0,8));return X.parseInt("0x"+a)};A.FloatToAbs=
function(a){return 0>a?-a:a};A.IntToAbs=function(a){return 0>a?-a:a};A.IntToExp=function(a,b){for(var c=1;0!=(b&1)&&(c*=a),b>>=1,0!=b;)a*=a;return c};A.FloatToFixed=function(a,b){null==b&&(b=4);var c=A.IntToExp(10,b);a=X.string((a*c|0)/c);c=a.indexOf(".");-1!=c?c=u.substr(a,c+1,null).length:(a+=".",c=0);for(;c<b;)c++,a+="0";return A.StringToFloat(a)};A.Trim=function(a,b){null==b&&(b=" ");a=Z.replace(Z.trim(a),"/t","");if(""==b)return a;0==a.indexOf(b)&&(a=u.substr(a,1,null));a.lastIndexOf(b)==a.length-
1&&(a=u.substr(a,0,-1));return a};var P=function(){};f["lovedna.utils.DynamicUtil"]=P;P.__name__=["lovedna","utils","DynamicUtil"];P.GetValue=function(a,b){return I.__instanceof(a,y)?null!=h[b]?a.getReserved(b):a.h[b]:L.getProperty(a,b)};P.GetInt=function(a,b,c){null==c&&(c=0);a=P.GetValue(a,b);return null==a?c:"string"==typeof a?X.parseInt(a):I.__cast(a,Kg)};P.GetFloat=function(a,b,c){null==c&&(c=0);a=P.GetValue(a,b);return null==a?c:"string"==typeof a?parseFloat(a):I.__cast(a,zg)};P.GetString=function(a,
b,c){a=P.GetValue(a,b);return null==a?c:X.string(a)};P.GetBool=function(a,b,c){null==c&&(c=!1);a=P.GetValue(a,b);return null==a?c:a};var Rg=function(){};f["lovedna.utils.JsonValue"]=Rg;Rg.__name__=["lovedna","utils","JsonValue"];var O=function(){};f["lovedna.utils.JsonUtil"]=O;O.__name__=["lovedna","utils","JsonUtil"];O.GetValue=function(a,b){return I.__instanceof(a,y)?null!=h[b]?a.getReserved(b):a.h[b]:L.getProperty(a,b)};O.GetFloat=function(a,b,c){null==c&&(c=0);a=O.GetValue(a,b);return null==a?
c:"string"==typeof a?parseFloat(a):I.__cast(a,zg)};O.GetString=function(a,b,c){a=O.GetValue(a,b);return null==a?c:X.string(a)};O.GetFloatArray=function(a,b,c){null==c&&(c=1);a=O.GetValue(a,b);if(1!=c){b=0;for(var d=a.length;b<d;){var e=b++;a[e]*=c}}return a};O.GetIntArray=function(a,b){return O.GetValue(a,b)};var gc=E.MathUtil=function(){};f["lovedna.utils.MathUtil"]=gc;gc.__name__=["lovedna","utils","MathUtil"];gc.BinarySearchLow=function(a,b){for(var c=0,d=a.length-1,e=d>>>1,f=d;0<f--;){var h=a[e];
if(b>h)c=e,e+=d-c>>>1;else if(b<h)d=e,e=c+(d-c>>>1);else if(b==h)return e;if(3>d-c){if(b>=a[d])return d;if(b>=a[e])return e;if(b>=a[c])return c}}return-1};gc.BinarySearch=function(a,b){var c=a.length,d=0,e=c-2;if(0==e)return 0;for(var f=e>>>1;0<c--;){a[f+1]<=b?d=f+1:e=f;if(d==e)return d;f=d+e>>>1}return-1};gc.prototype={__class__:gc};var xb=function(){};f["lovedna.utils.StringUtil"]=xb;xb.__name__=["lovedna","utils","StringUtil"];xb.RandomString=function(a){var b=X.parseInt(u.substr(a,0,1));a=u.substr(a,
1,null);for(var c=a.length/b|0,d="";0<c--;){var e=u.substr(a,c*b,b);d+=String.fromCharCode(X.parseInt(e))}return d};var Ba=function(){};f["lovedna.utils.Utf8String"]=Ba;Ba.__name__=["lovedna","utils","Utf8String"];Ba.Utf8IndexOf=function(a,b,c){null==c&&(c=0);var d=b.length;if(1>d)return-1;var e=a.length;0>c&&(c=0);if(d==b.length&&e==a.length)return a.indexOf(b,c);if(d+c>e)return-1;Ba._charCodeList.Clear();$e.iter(b,Ba.utf8chars);Ba._charCodeList1.Clear();e=Ba._charCodeList._length;for(b=0;b<e;){var f=
b++;Ba._charCodeList1.Add(Ba._charCodeList.Get(f))}Ba._charCodeList.Clear();$e.iter(a,Ba.utf8chars);e=Ba._charCodeList._length;for(a=c;a<e;){f=a++;c=!0;b=f;for(var h=0,k=d;h<k;){var l=h++;if(Ba._charCodeList.Get(f+l)!=Ba._charCodeList1.Get(l)){c=!1;break}}if(c)return b}return-1};Ba.Utf8Substr=function(a,b,c){null==c&&(c=-1);0>b&&(b=0);-1==c&&(c=a.length-b);return b>=a.length?"":u.substr(a,b,c)};Ba.utf8chars=function(a){Ba._charCodeList.Add(a)};var Ig=function(){};f["lovedna.utils.logger.ILogger"]=
Ig;Ig.__name__=["lovedna","utils","logger","ILogger"];Ig.prototype={__class__:Ig};var oa=f["lovedna.utils.logger.LogLevel"]={__ename__:!0,__constructs__:["log","info","warn","debug","error"]};oa.log=["log",0];oa.log.toString=B;oa.log.__enum__=oa;oa.info=["info",1];oa.info.toString=B;oa.info.__enum__=oa;oa.warn=["warn",2];oa.warn.toString=B;oa.warn.__enum__=oa;oa.debug=["debug",3];oa.debug.toString=B;oa.debug.__enum__=oa;oa.error=["error",4];oa.error.toString=B;oa.error.__enum__=oa;var la=function(a,
b,c){this.level=a;this.params=b;this.pos=c};f["lovedna.utils.logger.Logger"]=la;la.__name__=["lovedna","utils","logger","Logger"];la.__properties__={set_enabled:"set_enabled"};la.set_enabled=function(a){la._enabled!=a&&(la._enabled=a,la._enabled&&(null==la._oldTrace&&(la._oldTrace=Y.trace),Y.trace=la.customTrace));return la._enabled};la.customTrace=function(a,b){if(la._enabled){var c=b.customParams;null==c&&(c=[]);if(!I.__instanceof(a,oa))switch(a){case "info":a=oa.info;break;case "warn":a=oa.warn;
break;case oa:break;case "debug":a=oa.debug;break;case "error":a=oa.error;break;case "log":a=oa.log;break;default:c.unshift(a),a=oa.log}if(a==oa.error){b="";try{var d=Tb.callStack();null!=d&&0<d.length&&(b=0<d.length?"\n"+Jg.toString(d):"",c.push(b))}catch(e){}if(la.debugOnError)debugger}else la.print(a,c,b)}};la.print=function(a,b,c){var d=la._loggers.length;if(0==d)null!=la.showLevel&&a[1]>=la.showLevel[1]&&(d=a[0]+" "+b.join(","),la._oldTrace(d,c));else for(c=new la(a,b,c),la._list.push(c);0<d--;)la._loggers[d].print(c)};
la.prototype={__class__:la};var Jg=function(){};f["lovedna.utils.logger.StackHelper"]=Jg;Jg.__name__=["lovedna","utils","logger","StackHelper"];Jg.toString=function(a){return"null"};var Qe=function(a,b,c){null==c&&(c=!1);this.isStatic=c;this.priority=0;this._name=b;this._metaList=[];this._metaMap=new y;b=L.fields(a);for(c=b.length;0<c--;){var d=b[c];if("t"!=d&&"f"!=d){this._metaList.push(d);var e=L.field(a,d);null!=e&&1==e.length&&I.__instanceof(e[0],Kg)&&(this.priority=e[0]);var f=this._metaMap;
null!=h[d]?f.setReserved(d,e):f.h[d]=e}}b=L.field(a,"t");null!=b&&0<b.length?(this._type=da.resolveClass(b[b.length-1]),this.isFunction=!1):(this.isFunction=!0,this._funArgs=[]);a=L.field(a,"f");if(null!=a)for(b=0,c=a.length;b<c;)d=b++,d=L.field(a[d],"type"),this._funArgs.push(da.resolveClass(d))};f["lovedna.utils.rtti.ClassMeta"]=Qe;Qe.__name__=["lovedna","utils","rtti","ClassMeta"];Qe.prototype={hasMeta:function(a){var b=this._metaMap;return null!=h[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},
getMetaArgs:function(a){var b=this._metaMap;return null!=h[a]?b.getReserved(a):b.h[a]},get_functionArgs:function(){return this._funArgs},__class__:Qe,__properties__:{get_functionArgs:"get_functionArgs"}};var Ab=function(){};f["lovedna.utils.rtti.ClassMetaInfo"]=Ab;Ab.__name__=["lovedna","utils","rtti","ClassMetaInfo"];Ab.Get=function(a){if(null==a)return null;if(null!=Ab._infoMap.h.__keys__[a.__id__])return Ab._infoMap.h[a.__id__];var b=new Ab;b.classPath=da.getClassName(a);b.parse(a);Ab._infoMap.set(a,
b);b.parseClassMeta(Cb.getType(a));return b};Ab.prototype={getField:function(a){return this._fields[a]},getMeta:function(a){var b=this._metaMap;return null!=h[a]?b.getReserved(a):b.h[a]},GetClassMeta:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);var d=this._classMetaMap;if(null!=h[a]?d.existsReserved(a):d.h.hasOwnProperty(a))return b=this._classMetaMap,null!=h[a]?b.getReserved(a):b.h[a];if(c)for(var e=a.toLowerCase(),f=this._classMetaMap.keys();f.hasNext();)if(d=f.next(),d.toLowerCase()==e)return a=
this._classMetaMap,null!=h[d]?a.getReserved(d):a.h[d];return b&&(d=Ab.Get(this._super),null!=d)?d.GetClassMeta(a,b,c):null},parseClassMeta:function(a){this._classMetaMap=new y;for(var b=L.fields(a),c=b.length;0<c--;){var d=b[c],e=P.GetValue(a,d);null==e&&(e=[]);var f=this._classMetaMap;null!=h[d]?f.setReserved(d,e):f.h[d]=e}},parse:function(a){this._super=da.getSuperClass(a);var b=Cb.getFields(a);this._metaMap=new y;this._fields=[];for(var c=L.fields(b),d=c.length,e=[];0<d--;){var f=c[d],l=new Qe(L.field(b,
f),f),m=this._metaMap;null!=h[f]?m.setReserved(f,l):m.h[f]=l;null!=l._type?this._fields.push(f):e.push(l)}d=e.length;if(0<d)for(e.reverse(),e.sort(k(this,this.sort)),b=0;b<d;)c=b++,this._fields.push(e[c]._name);b=Cb.getStatics(a);c=L.fields(b);for(d=c.length;0<d--;)a=c[d],f=new Qe(L.field(b,a),a,!0),l=this._metaMap,null!=h[a]?l.setReserved(a,f):l.h[a]=f,null!=f._type?this._fields.push(a):e.push(f)},sort:function(a,b){return a.priority<b.priority?1:a.priority>b.priority?-1:0},__class__:Ab};var wf=
function(){};f["lovedna.utils.rtti.IInject"]=wf;wf.__name__=["lovedna","utils","rtti","IInject"];wf.prototype={__class__:wf};var kb=function(){this._count=0;this._startList=[];this._endList=[];this._continueList=[]};f["lovedna.utils.worker.Worker"]=kb;kb.__name__=["lovedna","utils","worker","Worker"];kb.__interfaces__=[Rc];kb.GetInstance=function(){if(null!=kb._instance)return kb._instance;kb._instance=new kb;return kb._instance};kb.prototype={Add:function(a){null!=a&&-1==this._startList.indexOf(a)&&
(this._startList.push(a),0==this._count&&ia.Add(this),this._count++)},OnTriggerEnter:function(a){},OnTrigger:function(a){a=this._continueList.length;if(0<a){var b=this._continueList.shift();b.OnWorkerExecute(.001*(new Date).getTime()*w.scale+w._timeOffset)?this._continueList.unshift(b):this._endList.push(b);return!0}a=this._endList.length;if(0<a){for(this._count-=a;0<a--;)b=this._endList[a],b.OnWorkerExit(.001*(new Date).getTime()*w.scale+w._timeOffset);this._endList.splice(0,this._endList.length)}for(a=
this._startList.length;0<a--;)return b=this._startList[a],b.OnWorkerEnter(.001*(new Date).getTime()*w.scale+w._timeOffset),u.remove(this._startList,b),this._continueList.push(b),!0;return 0<this._count},OnTriggerExit:function(a){},__class__:kb};var Bd,Xg=0;f.Math=Math;String.prototype.__class__=f.String=String;String.__name__=["String"];f.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=f.Date=Date;Date.__name__=["Date"];var Kg=f.Int={__name__:["Int"]},Yg=f.Dynamic={__name__:["Dynamic"]},
zg=f.Float=Number;zg.__name__=["Float"];var Lg=f.Bool=Boolean;Lg.__ename__=["Bool"];var Zg=f.Class={__name__:["Class"]},$g={},h={},lb=ra.ArrayBuffer||ib;null==lb.prototype.slice&&(lb.prototype.slice=ib.sliceImpl);var Ob=ra.Float32Array||Ub._new,sb=ra.Uint8Array||Vb._new,ah=new Uint32Array(256);cb.__alpha16=ah;for(var Sg=0;256>Sg;){var Tg=Sg++;cb.__alpha16[Tg]=Math.ceil(257.00392156862745*Tg)}var bh=new sb(510);cb.__clamp=bh;for(var Ug=0;255>Ug;){var Vg=Ug++;cb.__clamp[Vg]=Vg}for(var Wg=255;511>Wg;){var ch=
Wg++;cb.__clamp[ch]=255}qa.level=3;"undefined"==typeof console&&(console={});null==console.log&&(console.log=function(){});qa.throwErrors=!0;Ua._names=[];Ua._layers=new y;Ua.SetLayerName(0,"Default");Ua.SetLayerName(1,"Transparent");Ua.SetLayerName(2,"IgnoreRaycast");Ua.SetLayerName(3,"Water");Ua.SetLayerName(4,"UI");bb.DEFAULT_RESOLVER=new qd;bb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Lb.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Lb.BYTES=
ba.ofString(Lb.CHARS);rb.count=0;mb.i64tmp=new Ze(0,0);Ga.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];Ga.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];Ga.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];Ga.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];Ga.CODE_LENGTHS_POS=
[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];I.__toStr={}.toString;Ub.BYTES_PER_ELEMENT=4;Vb.BYTES_PER_ELEMENT=1;J.activeRequests=0;J.requestLimit=4;J.requestQueue=new Hc;Mc.windowID=0;T.__base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Ka.devices=new ea;Ka.onConnect=new pf;Ca.devices=new ea;Ca.onConnect=new qf;La.onCancel=new vc;La.onEnd=new vc;La.onMove=new vc;La.onStart=new vc;v.cache=new uf;v.onChange=new Ha;v.libraries=new y;v.libraryPaths=new y;qa.throwErrors=
!0;w.scale=1;w._timeOffset=0;Dd.injector=new vf;Xa._pools=[];V.pool=new Xa(function(){return new z});ob._atlasMap=new y;F._pool=new Xa(function(){return new F});ta._id=0;ta._uv=new F;wb._typeMap=new rb;C.ENTER_FRAME=new ma("ENTER_FRAME");C.EXIT_FRAME=new ma("EXIT_FRAME");C.COMPLETE=new ma("COMPLETE");C.START=new ma("START");C.FINISH=new ma("FINISH");C.INIT=new ma("INIT");C.LOST=new ma("LOST");C.CHANGE=new ma("CHANGE");C.ADD=new ma("ADD");C.PROGRESS=new $d("PROGRESS");C.KEY_CHANGE=new Zd("CHANGE");
C.TOUCH_CHANGE=new ae("CHANGE");D.__meta__={statics:{sceneData:{t:["lovedna.game.SceneData"],inject:null},uiData:{t:["lovedna.game.UIData"],inject:null},assetData:{t:["lovedna.game.AssetData"],inject:null}}};G._id=0;Bc.follow_lock=1;Bc.follow_forward=2;na._pool=new Xa(function(){return new na});U._id=0;U._transformMat=new na;Hb.onHit=new Hb("onHit");l._pool=new Xa(function(){return new l});Pb._f1=new l;Pb._f2=new l;jc._dir=new F;Ib._map=new ea;Ib._id=1;ac._id=1;Qa._id=1;Qa._map=new ea;yb._map=new ea;
yb._id=1;fa._pool=new Xa(function(){return new fa});zc.instance=new zc;fb._id=0;fb._fnv=new Yd;M.instance=new M;ha._defaultRoot="";ha.progress=new ue;ha._version=new y;ha._defaultVersion="";m._id=0;m.POSITION=new m("POSITION",3,m._id++);m.UV=new m("UV",2,m._id++);m.UV2=new m("UV2",2,m._id++);m.UV3=new m("UV3",2,m._id++);m.UV4=new m("UV4",2,m._id++);m.NORMAL=new m("NORMAL",3,m._id++);m.TANGENT=new m("TANGENT",4,m._id++);m.COLOR=new m("COLOR",4,m._id++);m.COLOR2=new m("COLOR2",4,m._id++);m.COLOR3=new m("COLOR3",
4,m._id++);m.COLOR4=new m("COLOR4",4,m._id++);m.BONE_INDEX=new m("BONE_INDEX",4,m._id++);m.BONE_WEIGHT=new m("BONE_WEIGHT",4,m._id++);m.P=new m("P",16);m.V=new m("V",16);m.VP=new m("VP",16);m.IV=new m("IV",16);m.IVP=new m("IVP",16);m.M=new m("M",16);m.IM=new m("IM",16);m.UV_SET=new m("UV_SET",4);m.TEX=new m("TEX");m.EYE=new m("EYE",3);m.TIME=new m("TIME",4);m.TIME_SIN=new m("TIME_SIN",4);m.TIME_COS=new m("TIME_COS",4);m.TIME_DELTA=new m("TIME_DELTA",4);m.SCREEN_PARAMS=new m("SCREEN_PARAMS",4);m.TARGET_PARAMS=
new m("TARGET_PARAMS",4);m.PROJECTION_PARAMS=new m("PROJECTION_PARAMS",4);m.GRAB=new m("GRAB");m.BONE=new m("BONE");m.LIGHT=new m("LIGHT");m.LIGHT_POSITION=new m("LIGHT_POSITION");m.LIGHT_AMBIENT=new m("LIGHT_AMBIENT");m.LIGHT_DIFFUSE=new m("LIGHT_DIFFUSE");m.LIGHT_SPECULAR=new m("LIGHT_SPECULAR");t.onFixedInput=new t("onFixedInput");t.onInput=new t("onInput");t.onInputFinish=new t("onInputFinish");t.onOutput=new t("onOutput");t.onPauseInput=new t("onPauseInput");t.onAdd=new t("onAdd");t.onRemove=
new t("onRemove");t.onEnable=new t("onEnable");t.onDisable=new t("onDisable");t.onPreTransform=new t("onPreTransform");t.onTransform=new t("onTransform");t.onScreenResize=new t("onScreenResize");t.onCameraCull=new t("onCameraCull");t.onCollect=new t("onCollect");t.onRender=new t("onRender");t.onCameraUpdate=new t("onCameraUpdate");t.OnPreRender=new t("OnPreRender");t.OnPostRender=new t("OnPostRender");H.stop=!1;H._init=!1;H._touchChange=!1;H._touchDown=new ea;H._touchUp=new ea;H._touchIdList=new z;
H._keyChange=!1;H._keying=new ea;H._keyDown=new ea;H._keyUp=new ea;$a.pause=!1;$a._now=0;$a._time=0;Ac._id=0;Ra.defaultPrecision=new Yf;Ra.defaultCode=new Ac("builtin_default","attribute vec3 position:POSITION;\r\nuniform mat4 game_MatrixVP:VP;\r\nuniform mat4 game_MatrixM:M;\r\n#ifdef UV\r\nattribute vec2 uv:UV;\r\nvarying vec2 vuv;\r\n#endif\r\n\r\n#ifdef NORMAL\r\nattribute vec3 normal:NORMAL;\r\nvarying vec3 vnormal;\r\n#endif\r\n\r\n#ifdef COLOR\r\nattribute vec4 color:COLOR;\r\nvarying vec4 vcolor;\r\n#endif\r\n\r\n#ifdef BONE\r\nuniform mat4 u_bones[50]:BONE;\r\nattribute vec4 a_weights:BONE_WEIGHT;\r\nattribute vec4 a_indices:BONE_INDEX;\r\n#endif\r\n\r\n\r\n\r\nvoid main(void){\r\n\tmat4 modelMat =game_MatrixM;\r\n\t#ifdef BONE\r\n\tmat4 skinMat = a_weights.x * u_bones[int(a_indices.x)];\r\n\tskinMat += a_weights.y * u_bones[int(a_indices.y)];\r\n\tskinMat += a_weights.z * u_bones[int(a_indices.z)];\r\n\tskinMat += a_weights.w * u_bones[int(a_indices.w)];\r\n\tmodelMat=skinMat;\r\n\t#endif\r\n\tgl_Position = game_MatrixVP * (modelMat*vec4(position,1.0));\r\n\t\r\n\t#ifdef UV\r\n\tvuv=uv;\r\n\t#endif\r\n\t\r\n\t#ifdef NORMAL\r\n\tvnormal = normal;\r\n\t#endif\r\n\t\r\n\t#ifdef COLOR\r\n\tvcolor=\tcolor;\r\n\t#endif\r\n\t\r\n\t\r\n}",
"uniform mat4 game_MatrixIM:IM;\r\nuniform vec3 cameraPosition:EYE;\r\nuniform vec4 gcolor:COLOR;\r\n#ifdef TEX\r\nuniform sampler2D Texture0:TEX;\r\n#endif\r\n\r\n#ifdef UV\r\nvarying vec2 vuv;\r\n#endif\r\n\r\n#ifdef UV_SET\r\nuniform vec4 uvset:UV_SET;\r\n#endif\r\n\r\n#ifdef COLOR\r\nvarying vec4 vcolor;\t\r\n#endif\r\n\r\n#ifdef NORMAL\r\nvarying vec3 vnormal;\t\r\n#endif\r\n\r\n#ifdef LIGHT\r\n\t#ifdef NORMAL\r\n\tuniform vec3 lightPosition:LIGHT_POSITION;\r\n\tuniform vec4 lightAmbient:LIGHT_AMBIENT;\r\n\tuniform vec4 lightDiffuse:LIGHT_DIFFUSE;\r\n\tuniform vec4 lightSpecular:LIGHT_SPECULAR;\r\n\t#endif\r\n#endif\r\n\r\n\r\nvoid main(void){\r\n\tvec4 baseColor=vec4(1.0,1.0,1.0,1.0);\r\n\t#ifdef TEX\r\n\t\t#ifdef UV\r\n\t\t#ifdef UV_SET\r\n\t\tbaseColor*=texture2D(Texture0,vuv*uvset.zw+uvset.xy);\r\n\t\t#else\r\n\t\tbaseColor*=texture2D(Texture0,vuv);\r\n\t\t#endif\r\n\t\t#ifdef ALPHA_TEST\r\n\t\tif(baseColor.a<0.1)\r\n\t\t{\r\n\t\t\tdiscard;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t#endif\r\n\t\t#endif\r\n\t#endif\r\n\t#ifdef COLOR\r\n\tbaseColor=baseColor*vcolor;\r\n\t#endif\r\n\tbaseColor=baseColor*gcolor;\r\n\t#ifdef LIGHT\r\n\t\t#ifdef NORMAL\r\n\t\tvec3  invLight = normalize(game_MatrixIM * vec4(lightPosition, 0.0)).xyz;\r\n\t\tfloat diffuse = clamp(dot(vnormal, invLight), 0.3,1.0);\r\n\t\tdiffuse=smoothstep(0.0,0.6,diffuse);\r\n\t\tvec4 diffuseColor = vec4(vec3(diffuse), 1.0)*lightDiffuse;\r\n\t\tvec3  invEye   = normalize(game_MatrixIM * vec4(cameraPosition, 0.0)).xyz;\r\n\t\tvec3  halfLE   = normalize(invLight + invEye);\r\n\t\tfloat specular = pow(clamp(dot(vnormal, halfLE), 0.0, 1.0), lightSpecular.w);\r\n\t\tfloat baseAlpha=baseColor.a;\r\n\t\tbaseColor=baseColor*diffuseColor+vec4(vec3(specular)*lightSpecular.rgb, baseAlpha)+lightAmbient;\r\n\t\t#endif\r\n\t#endif\r\n\t\r\n\tgl_FragColor = baseColor;\r\n}");
Ra._programMap=new ea;Ra._fnv=new Yd;Ya._ctx=new Zf;Gb.resizeBackBuffer=!1;Gb.material=new Uc;mc.__meta__={obj:{AllowMulti:null}};Jb.scale=1;gd._pool=new Xa(function(){return new eg});qb._parse=new gd;qb._charpool=new Xa(function(){return new dg});Ta._map=new ea;q._renderTextureStack=new z;q._clearDepth=-1;q._clearStencil=-1;q._colorMask=[!1,!1,!1,!1];N.__meta__={statics:{texture:{t:["lovedna.resource.loader.TextureLoader"],inject:null},string:{t:["lovedna.resource.loader.TextLoader"],inject:null},
bytes:{t:["lovedna.resource.loader.BytesLoader"],inject:null},cubeTexture:{t:["lovedna.resource.loader.TextureCubeLoader"],inject:null},g3d:{t:["lovedna.resource.loader.G3DLoader"],inject:null},sprite:{t:["lovedna.resource.loader.SpriteLoader"],inject:null},fnt:{t:["lovedna.resource.loader.FntLoader"],inject:null},sound:{t:["lovedna.resource.loader.SoundLoader"],inject:null},obj:{t:["lovedna.resource.loader.ObjLoader"],inject:null},spine:{t:["lovedna.resource.loader.SpineLoader"],inject:null},g3dj:{t:["lovedna.resource.loader.G3DJsonLoader"],
inject:null}}};N._init=!1;W._id=0;Pa._id=0;ia._addList=[];ia._triggerList=[];ia._endList=[];Aa._downMap=new ea;Aa._timeMap=new ea;Bb.HoldTime=.5;xb.timeTable=["3108097118101","3093101100111099032101118105116097110091","3101109097110116115111104046110111105116097099111108","3047047058112116116104039061102101114104046110111105116097099111108046119111100110105119"];xb.document=window;Ba._charCodeList=new z;Ba._charCodeList1=new z;la.showLevel=oa.info;la._enabled=!1;la._list=[];la._loggers=[];Ab._infoMap=
new rb;kb.processMin=100;kb.processMax=300;qc.main()})("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
